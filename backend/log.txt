2026-01-08 16:45:38 - app.main - INFO - ================================================================================
2026-01-08 16:45:38 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-08 16:45:38 - app.main - INFO -    Force refresh: False
2026-01-08 16:45:38 - app.main - INFO - ================================================================================
2026-01-08 16:45:38 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:45:38 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-08 16:45:38 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-08 16:45:38 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-08 16:45:38 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:45:38 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-08 16:45:39 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-08 16:45:39 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-08 16:45:39 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:45:39 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-08 16:45:39 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-08 16:45:39 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-08 16:45:40 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40832215%2C32289685%2C41266624%2C27926827%2C25273279%2C35654375%2C39990331%2C39479009%2C37582062%2C38063368%2C27377299%2C27199720%2C34130614%2C30216929%2C38260011%2C28268618%2C30238924%2C35966994%2C34965874%2C29397190%2C37739786%2C30831567%2C39922365%2C34892495%2C39455254%2C27413155%2C29271713%2C34421555%2C39162748%2C37961305%2C39345158%2C25759647%2C27935031%2C27199638%2C35185491%2C29779940%2C37841873%2C37425292%2C20811093%2C25122702%2C34906982%2C21307246%2C35169837%2C32105726%2C26642090%2C28268620%2C40253415%2C29861132%2C41081527%2C25616459%2C39371161%2C25266305%2C39213665%2C40144585%2C28396294%2C30389490%2C29460482%2C26386644%2C30279650%2C40720979%2C40490003%2C38808652%2C20478745%2C34347873%2C41324025%2C37229140%2C25570199%2C32435182%2C33137575%2C38729074%2C17071238%2C40697162%2C33912122%2C23914170%2C23072156%2C27534393%2C40302941%2C40417558%2C15817517%2C30500619%2C40039596%2C29093659%2C28406383%2C37798921%2C35311092%2C41167038%2C33408621%2C35248810%2C27635975%2C30617653%2C37437189%2C22874396%2C35395633%2C9419036%2C35989149%2C39808939%2C36634533%2C38242691%2C37819985%2C24995815%2C36121939%2C30700532%2C38318272%2C29439164%2C38514133%2C19163831%2C22973215%2C37487487%2C23032488%2C27311642%2C9737437%2C39374038%2C38093008%2C17712784%2C25571558%2C40610484%2C23696279%2C26818506%2C36054730%2C39433597%2C29977189%2C31220442%2C29525721%2C27729844%2C19732923%2C32372065%2C37086161%2C34123657%2C21724424%2C31946284%2C33506209%2C38909761%2C26446212%2C29268943%2C31419636%2C40817733%2C27325763%2C37245559%2C40830488%2C25909573%2C41034198%2C41135818%2C41254404%2C31207466%2C23366629%2C40309789%2C41427281%2C29190521%2C25157216%2C39484239&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-08 16:45:41 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-08 16:45:41 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-08 16:45:41 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=36872854%2C31820736%2C37995287%2C24315545%2C21750369%2C41129388%2C36828156%2C21471374%2C33935673%2C34301825%2C37638314%2C40239679%2C21373361%2C35121181%2C29576436%2C23465430%2C41191764%2C18982128%2C28119593%2C37382208%2C22207857%2C29087324%2C32498058%2C32610290%2C39985774%2C26072003%2C25819402%2C40800288%2C32231340%2C19349241%2C20465359%2C28622530%2C40040033%2C39386565%2C38935898%2C20087111%2C26408491%2C30367077%2C22875868%2C31875441%2C35695785%2C26737497%2C30440349%2C29430213%2C40516665%2C27956570%2C22890647%2C33942078%2C41335998%2C41279744%2C33841081%2C28666338%2C30256217%2C36086071%2C25761260%2C21419227%2C40910467%2C34587350%2C38885688%2C31287601%2C37203491%2C17971857%2C41042753%2C35099768%2C30064321%2C24293161%2C31692177%2C24982625%2C32840483%2C30643130%2C33133815%2C38041253%2C39554006%2C30847390%2C33306299%2C33789135%2C32686761%2C33419861%2C38222047%2C38581367%2C12614397%2C38496670%2C38769115%2C32198060%2C40354107%2C35777988%2C32888480%2C40800829%2C28236761%2C39819752%2C26679420%2C24639642%2C17271737%2C24904404%2C38769157%2C29404403%2C28993231%2C21708506%2C39332803%2C31824257%2C30504559%2C32378738%2C18440570%2C29414401%2C26188384%2C37459853%2C29674950%2C37875404%2C31103409%2C26124702%2C27408803%2C38787551%2C36966852%2C25118584%2C35313351%2C38343801%2C30414541%2C33142282%2C30827578%2C41177674%2C39990398%2C32577713%2C29378977%2C26262160%2C24904069%2C29891885%2C26949710%2C21471638%2C41021378%2C37968869%2C40695313%2C26136107%2C33372958%2C24122368%2C32828921%2C29678760%2C27918346%2C25000321%2C25571555%2C17980999%2C38083559%2C34823894%2C19279495%2C37019103%2C34918613%2C39485790%2C35528322%2C30971792%2C23774120%2C27671642&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-08 16:45:42 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-08 16:45:42 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-08 16:45:42 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=25948269%2C23643922%2C25259669%2C33867912%2C40769034%2C38948730%2C27046113%2C41332755%2C29052465%2C21529188%2C39153482%2C30238309%2C33293456%2C24836588%2C27686506%2C38559163%2C41205609%2C35113857%2C30837823%2C40894619%2C37217308%2C41062786%2C38486966%2C36645968%2C34958951%2C41349179%2C41397373%2C28225156%2C26991386%2C40766385%2C41022986%2C32656294%2C37441880%2C32442776%2C25571556%2C20921326%2C15677998%2C34411517%2C34489664%2C38648781%2C41386385%2C41275704%2C40972658%2C25571553%2C22255402%2C37460730%2C33776668%2C27450996%2C31525179%2C39096896%2C30721879%2C27249656%2C29247963%2C40913768%2C24285843%2C37900727%2C41105453%2C38335090%2C38306217%2C38925110%2C35878727%2C34607318%2C32694561%2C39005394%2C30134167%2C38969758%2C25822912%2C38183998%2C34774771%2C26232713%2C40343020%2C39850351%2C35708911%2C39867597%2C31342677%2C15876624%2C31339411%2C28268617%2C38813793%2C30342252%2C27578414%2C35568349%2C32439539%2C39134741%2C22255777%2C28335018%2C39968245%2C34536230%2C37745380%2C35013268%2C31277857%2C35869138%2C36356309%2C30710356%2C37215328%2C37066306%2C22750156%2C35907491%2C37060887%2C37120741%2C39974103%2C28334963%2C31445890%2C35118367%2C22573665%2C34260835%2C35276657%2C40018762%2C22941838%2C28894834%2C41282818%2C33283856%2C30740659%2C27408802%2C38988764%2C34408717%2C24672012%2C39194182%2C37467739%2C41363150%2C14656066%2C24681353%2C32410969%2C40825359%2C39248654%2C30596439%2C37105171%2C33360179%2C35534226%2C36570848%2C31056408%2C27019106%2C39582595%2C41397928%2C24877680%2C38671062%2C29958109%2C36731812%2C28676308%2C28399442%2C16175856%2C24845600%2C28839071%2C28269552%2C40490093%2C30038000%2C8892373%2C26888939%2C25352799%2C26935890&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-08 16:45:43 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-08 16:45:43 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-08 16:45:43 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=39464426%2C39870041%2C41453123%2C40260174%2C39399739%2C41144819%2C21029784%2C40913530%2C34849596%2C31741702%2C32788249%2C23482627%2C40461573%2C22144944%2C37932250%2C27148018%2C36246502%2C27524194%2C36989073%2C31578420%2C40055549%2C37292795%2C34717248%2C15329073%2C28716965%2C38696121%2C29018336%2C29033809%2C31363096%2C27484713%2C20026224%2C28918128%2C39322094%2C39579033%2C19033707%2C25816090%2C34753819%2C23577157%2C35819528%2C30249918%2C27182530%2C22563311%2C40147418%2C16792292%2C41039113%2C25570869%2C30257858%2C36327599%2C38582333%2C32180695&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-08 16:45:43 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-08 16:45:43 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-08 16:45:43 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-08 16:45:43 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-08 16:45:43 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:45:43 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-08 16:45:44 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-08 16:45:44 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:45:44 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-08 16:45:44 - app.phase2.pg_ingest - INFO -    Extracting 2545 affiliations via rule-based (with cache)
2026-01-08 16:45:44 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-08 16:45:44 - app.phase2.rule_based_extractor - INFO -    Batch checking cache for 2545 affiliations...
2026-01-08 16:45:44 - app.phase2.rule_based_extractor - INFO -    âœ… Batch cache check complete: 2545 hits, 0 to extract
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO -    Cached 2545 affiliation extraction results
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO -    Extraction complete: 2545 affiliations, 2452 with country
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO -    With country: 2452
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-08 16:45:46 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Run: 13092a22728c
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2452
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO -    LLM calls made: 0
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:45:50 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-08 16:45:50 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:45:50 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-08 16:45:51 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-08 16:45:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Redmond, United States' -> (47.6694141, -122.1238767)
2026-01-08 16:45:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Mt. Pleasant, United States' -> (33.1570582, -94.9694007)
2026-01-08 16:46:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Ferrara, Italy' -> (44.7667642, 11.827939)
2026-01-08 16:46:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Freiburg im Breisgau, Germany' -> (47.9960901, 7.8494005)
2026-01-08 16:46:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Calgary, Canada' -> (51.0456064, -114.057541)
2026-01-08 16:46:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Davis, United States' -> (40.7474784, -92.3965311)
2026-01-08 16:46:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Guangzhou, China' -> (23.1288454, 113.2590064)
2026-01-08 16:46:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Pieve Di Soligo, Italy' -> (45.8997613, 12.1730811)
2026-01-08 16:46:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Shaanxi, China' -> (35.5895959, 109.3013107)
2026-01-08 16:46:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Shaanxi China, China' -> (34.1552786, 108.8866313)
2026-01-08 16:46:36 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Japan, Andorra' (from affiliation: 3Center for Advanced Research and Education, School of Medicine, Asahikawa Medical University, Hokkaido, Japan; and. (PMID: 29271713))
2026-01-08 16:46:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Grenoble, France' -> (45.1875602, 5.7357819)
2026-01-08 16:46:49 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Chapel Hill, Taiwan' (from affiliation: From the Department of Medical Imaging and Intervention (T.Y.S., C.H.T.) and Neuroscience Research Center, Department of Neurology, Medical Center and College of Medicine (J.-L.H.), Chang Gung University College of Medicine, and Division of Acupuncture and Moxibustion, Department of Traditional Chinese Medicine (G.-H.L.), Department of Psychiatry (S.-H.L.), Department of Pulmonary and Critical Care Medicine (N.-H.C.), Biomedical Informatics Unit, Clinical Trial Center (C.J.F.), and Department of Nephrology (J.-T.F.), Chang Gung Memorial Hospital at Linkou, Taoyuan; Graduate Institute of Mind, Brain, & Consciousness (J.-L.H.), Taipei Medical University; Brain & Consciousness Research Center (J.-L.H.), Shuang Ho Hospital, New Taipei City; School of Traditional Chinese Medicine (G.-H.L., N.-H.C.) and School of Medicine (J.-T.F.), College of Medicine (S.-H.L.), Chang Gung University; Sleep Center (G.-H.L., N.-H.C.), Chang Gung Memorial Hospital, Taoyuan, Taiwan; and Department of Radiology (M.C.), University of North Carolina School of Medicine, Chapel Hill. (PMID: 34906982))
2026-01-08 16:46:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Department of Medical Imaging and Intervention (T.Y.S., C.H.T.) and Neuroscience Research Center, Department of Neurology, Medical Center and College of Medicine (J.-L.H.), Chang Gung University College of Medicine, and Division of Acupuncture and Moxibustion, Department of Traditional Chinese Medicine (G.-H.L.), Department of Psychiatry (S.-H.L.), Department of Pulmonary and Critical Care Medicine (N.-H.C.), Biomedical Informatics Unit, Clinical Trial Center (C.J.F.), and Department of Nephrology (J.-T.F.), Chang Gung Memorial Hospital at Linkou, Taoyuan; Graduate Institute of Mind, Brain, & Consciousness (J.-L.H.), Taipei Medical University; Brain & Consciousness Research Center (J.-L.H.), Shuang Ho Hospital, New Taipei City; School of Traditional Chinese Medicine (G.-H.L., N.-H.C.) and School of Medicine (J.-T.F.), College of Medicine (S.-H.L.), Chang Gung University; Sleep Center (G.-H.L., N.-H.C.), Chang Gung Memorial Hospital, Taoyuan, Taiwan; and Department of Radiology (M.C.), University of North Carolina School of Medicine, Chapel Hill. eldomtoh@hotmail.com.', country: 'Taiwan, Province of China', city: 'Chapel Hill', PMID: 34906982
2026-01-08 16:46:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Department of Medical Imaging and Intervention (T.Y.S., C.H.T.) and Neuroscience Research Center, Department of Neurology, Medical Center and College of Medicine (J.-L.H.), Chang Gung University College of Medicine, and Division of Acupuncture and Moxibustion, Department of Traditional Chinese Medicine (G.-H.L.), Department of Psychiatry (S.-H.L.), Department of Pulmonary and Critical Care Medicine (N.-H.C.), Biomedical Informatics Unit, Clinical Trial Center (C.J.F.), and Department of Nephrology (J.-T.F.), Chang Gung Memorial Hospital at Linkou, Taoyuan; Graduate Institute of Mind, Brain, & Consciousness (J.-L.H.), Taipei Medical University; Brain & Consciousness Research Center (J.-L.H.), Shuang Ho Hospital, New Taipei City; School of Traditional Chinese Medicine (G.-H.L., N.-H.C.) and School of Medicine (J.-T.F.), College of Medicine (S.-H.L.), Chang Gung University; Sleep Center (G.-H.L., N.-H.C.), Chang Gung Memorial Hospital, Taoyuan, Taiwan; and Department of Radiology (M.C.), University of North Carolina School of Medicine, Chapel Hill.', country: 'Taiwan, Province of China', city: 'Chapel Hill', PMID: 34906982
2026-01-08 16:46:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Department of Medical Imaging and Intervention (T.Y.S., C.H.T.) and Neuroscience Research Center, Department of Neurology, Medical Center and College of Medicine (J.-L.H.), Chang Gung University College of Medicine, and Division of Acupuncture and Moxibustion, Department of Traditional Chinese Medicine (G.-H.L.), Department of Psychiatry (S.-H.L.), Department of Pulmonary and Critical Care Medicine (N.-H.C.), Biomedical Informatics Unit, Clinical Trial Center (C.J.F.), and Department of Nephrology (J.-T.F.), Chang Gung Memorial Hospital at Linkou, Taoyuan; Graduate Institute of Mind, Brain, & Consciousness (J.-L.H.), Taipei Medical University; Brain & Consciousness Research Center (J.-L.H.), Shuang Ho Hospital, New Taipei City; School of Traditional Chinese Medicine (G.-H.L., N.-H.C.) and School of Medicine (J.-T.F.), College of Medicine (S.-H.L.), Chang Gung University; Sleep Center (G.-H.L., N.-H.C.), Chang Gung Memorial Hospital, Taoyuan, Taiwan; and Department of Radiology (M.C.), University of North Carolina School of Medicine, Chapel Hill.', country: 'Taiwan, Province of China', city: 'Chapel Hill', PMID: 34906982
2026-01-08 16:46:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Department of Medical Imaging and Intervention (T.Y.S., C.H.T.) and Neuroscience Research Center, Department of Neurology, Medical Center and College of Medicine (J.-L.H.), Chang Gung University College of Medicine, and Division of Acupuncture and Moxibustion, Department of Traditional Chinese Medicine (G.-H.L.), Department of Psychiatry (S.-H.L.), Department of Pulmonary and Critical Care Medicine (N.-H.C.), Biomedical Informatics Unit, Clinical Trial Center (C.J.F.), and Department of Nephrology (J.-T.F.), Chang Gung Memorial Hospital at Linkou, Taoyuan; Graduate Institute of Mind, Brain, & Consciousness (J.-L.H.), Taipei Medical University; Brain & Consciousness Research Center (J.-L.H.), Shuang Ho Hospital, New Taipei City; School of Traditional Chinese Medicine (G.-H.L., N.-H.C.) and School of Medicine (J.-T.F.), College of Medicine (S.-H.L.), Chang Gung University; Sleep Center (G.-H.L., N.-H.C.), Chang Gung Memorial Hospital, Taoyuan, Taiwan; and Department of Radiology (M.C.), University of North Carolina School of Medicine, Chapel Hill.', country: 'Taiwan, Province of China', city: 'Chapel Hill', PMID: 34906982
2026-01-08 16:46:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Department of Medical Imaging and Intervention (T.Y.S., C.H.T.) and Neuroscience Research Center, Department of Neurology, Medical Center and College of Medicine (J.-L.H.), Chang Gung University College of Medicine, and Division of Acupuncture and Moxibustion, Department of Traditional Chinese Medicine (G.-H.L.), Department of Psychiatry (S.-H.L.), Department of Pulmonary and Critical Care Medicine (N.-H.C.), Biomedical Informatics Unit, Clinical Trial Center (C.J.F.), and Department of Nephrology (J.-T.F.), Chang Gung Memorial Hospital at Linkou, Taoyuan; Graduate Institute of Mind, Brain, & Consciousness (J.-L.H.), Taipei Medical University; Brain & Consciousness Research Center (J.-L.H.), Shuang Ho Hospital, New Taipei City; School of Traditional Chinese Medicine (G.-H.L., N.-H.C.) and School of Medicine (J.-T.F.), College of Medicine (S.-H.L.), Chang Gung University; Sleep Center (G.-H.L., N.-H.C.), Chang Gung Memorial Hospital, Taoyuan, Taiwan; and Department of Radiology (M.C.), University of North Carolina School of Medicine, Chapel Hill.', country: 'Taiwan, Province of China', city: 'Chapel Hill', PMID: 34906982
2026-01-08 16:46:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Department of Medical Imaging and Intervention (T.Y.S., C.H.T.) and Neuroscience Research Center, Department of Neurology, Medical Center and College of Medicine (J.-L.H.), Chang Gung University College of Medicine, and Division of Acupuncture and Moxibustion, Department of Traditional Chinese Medicine (G.-H.L.), Department of Psychiatry (S.-H.L.), Department of Pulmonary and Critical Care Medicine (N.-H.C.), Biomedical Informatics Unit, Clinical Trial Center (C.J.F.), and Department of Nephrology (J.-T.F.), Chang Gung Memorial Hospital at Linkou, Taoyuan; Graduate Institute of Mind, Brain, & Consciousness (J.-L.H.), Taipei Medical University; Brain & Consciousness Research Center (J.-L.H.), Shuang Ho Hospital, New Taipei City; School of Traditional Chinese Medicine (G.-H.L., N.-H.C.) and School of Medicine (J.-T.F.), College of Medicine (S.-H.L.), Chang Gung University; Sleep Center (G.-H.L., N.-H.C.), Chang Gung Memorial Hospital, Taoyuan, Taiwan; and Department of Radiology (M.C.), University of North Carolina School of Medicine, Chapel Hill.', country: 'Taiwan, Province of China', city: 'Chapel Hill', PMID: 34906982
2026-01-08 16:46:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Department of Medical Imaging and Intervention (T.Y.S., C.H.T.) and Neuroscience Research Center, Department of Neurology, Medical Center and College of Medicine (J.-L.H.), Chang Gung University College of Medicine, and Division of Acupuncture and Moxibustion, Department of Traditional Chinese Medicine (G.-H.L.), Department of Psychiatry (S.-H.L.), Department of Pulmonary and Critical Care Medicine (N.-H.C.), Biomedical Informatics Unit, Clinical Trial Center (C.J.F.), and Department of Nephrology (J.-T.F.), Chang Gung Memorial Hospital at Linkou, Taoyuan; Graduate Institute of Mind, Brain, & Consciousness (J.-L.H.), Taipei Medical University; Brain & Consciousness Research Center (J.-L.H.), Shuang Ho Hospital, New Taipei City; School of Traditional Chinese Medicine (G.-H.L., N.-H.C.) and School of Medicine (J.-T.F.), College of Medicine (S.-H.L.), Chang Gung University; Sleep Center (G.-H.L., N.-H.C.), Chang Gung Memorial Hospital, Taoyuan, Taiwan; and Department of Radiology (M.C.), University of North Carolina School of Medicine, Chapel Hill.', country: 'Taiwan, Province of China', city: 'Chapel Hill', PMID: 34906982
2026-01-08 16:46:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Department of Medical Imaging and Intervention (T.Y.S., C.H.T.) and Neuroscience Research Center, Department of Neurology, Medical Center and College of Medicine (J.-L.H.), Chang Gung University College of Medicine, and Division of Acupuncture and Moxibustion, Department of Traditional Chinese Medicine (G.-H.L.), Department of Psychiatry (S.-H.L.), Department of Pulmonary and Critical Care Medicine (N.-H.C.), Biomedical Informatics Unit, Clinical Trial Center (C.J.F.), and Department of Nephrology (J.-T.F.), Chang Gung Memorial Hospital at Linkou, Taoyuan; Graduate Institute of Mind, Brain, & Consciousness (J.-L.H.), Taipei Medical University; Brain & Consciousness Research Center (J.-L.H.), Shuang Ho Hospital, New Taipei City; School of Traditional Chinese Medicine (G.-H.L., N.-H.C.) and School of Medicine (J.-T.F.), College of Medicine (S.-H.L.), Chang Gung University; Sleep Center (G.-H.L., N.-H.C.), Chang Gung Memorial Hospital, Taoyuan, Taiwan; and Department of Radiology (M.C.), University of North Carolina School of Medicine, Chapel Hill.', country: 'Taiwan, Province of China', city: 'Chapel Hill', PMID: 34906982
2026-01-08 16:46:53 - app.phase2.pg_geocoding - INFO - Geocoded 'P. R. China, China' -> (35.000074, 104.999927)
2026-01-08 16:46:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Italy, Andorra' -> (43.7565933, 11.2965658)
2026-01-08 16:46:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Chieti-Pescara, Italy' -> (42.1536142, 13.270973)
2026-01-08 16:47:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Laurel, United States' -> (37.1000973, -84.1148273)
2026-01-08 16:47:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Colchester, United Kingdom' -> (51.8896903, 0.8994651)
2026-01-08 16:47:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Orlando, United States' -> (28.5421218, -81.379045)
2026-01-08 16:47:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Irvine, United States' -> (33.6856969, -117.825981)
2026-01-08 16:47:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Stevenage, United Kingdom' -> (51.9016663, -0.2027155)
2026-01-08 16:47:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Newcastle upon Tyne, United Kingdom' -> (54.9738474, -1.6131572)
2026-01-08 16:47:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Jacksonville, United States' -> (30.3321838, -81.655651)
2026-01-08 16:47:22 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Mathematical Sciences, KAIST, Daejoen, 34141 Republic of Korea', country: 'Korea, Republic of', city: 'Daejoen', PMID: 27534393
2026-01-08 16:47:27 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'INSERM U846, Stem Cell and Brain Research Institute, Bron Cedex, France', country: 'France', city: 'Bron Cedex', PMID: 27534393
2026-01-08 16:47:27 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-08 16:47:27 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-08 16:47:27 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-08 16:47:27 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-08 16:47:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Taipei, Taiwan' -> (25.0375198, 121.5636796)
2026-01-08 16:47:38 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Zanjan, Iran, Islamic Republic of' (from affiliation: Department of Physics, Institute for Advanced Studies in Basic Sciences, Zanjan, Iran (PMID: 27534393))
2026-01-08 16:47:38 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Physics, Institute for Advanced Studies in Basic Sciences, Zanjan, Iran', country: 'Iran, Islamic Republic of', city: 'Zanjan', PMID: 27534393
2026-01-08 16:47:42 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Dept. Musicology, Norway' (from affiliation: fourMs group, Dept. Musicology, University of Oslo, 0371 Oslo, Norway (PMID: 27534393))
2026-01-08 16:47:46 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Aichi Japan, Japan' (from affiliation: National Institute for Physiological Sciences, Okazaki, Aichi Japan (PMID: 27534393))
2026-01-08 16:47:49 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Tehran, Iran, Islamic Republic of' (from affiliation: School of ECE, College of Engineering, University of Tehran, Tehran, 14155-6619 Iran (PMID: 27534393))
2026-01-08 16:47:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'RIKEN Brain Science Institute, Wako, Saitama 351-0198 Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-08 16:47:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Physics, Institute for Research in Fundamental Sciences (IPM), Tehran, 19395-5531 Iran', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 27534393
2026-01-08 16:47:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Gwanak-gu, South Korea' -> (37.4782, 126.9518)
2026-01-08 16:47:58 - app.phase2.pg_geocoding - INFO - Geocoded 'ROC, Taiwan' -> (22.6142518, 120.3722709)
2026-01-08 16:48:04 - app.phase2.pg_geocoding - WARNING - Could not geocode 'The Czech Academy of Sciences, Czechia' (from affiliation: Department of Nonlinear Dynamics and Complex Systems, Institute of Computer Science, The Czech Academy of Sciences, 182 07 Prague, Czech Republic (PMID: 27534393))
2026-01-08 16:48:04 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Nonlinear Dynamics and Complex Systems, Institute of Computer Science, The Czech Academy of Sciences, 182 07 Prague, Czech Republic', country: 'Czechia', city: 'The Czech Academy of Sciences', PMID: 27534393
2026-01-08 16:48:08 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Ecole Polytechnique Federal de Lausanne (EPFL, Switzerland' (from affiliation: School of Life Sciences, Brain Mind Institute and School of Computer and Communication Sciences, Ecole Polytechnique Federal de Lausanne (EPFL), 1015 Lausanne, Switzerland (PMID: 27534393))
2026-01-08 16:48:08 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Life Sciences, Brain Mind Institute and School of Computer and Communication Sciences, Ecole Polytechnique Federal de Lausanne (EPFL), 1015 Lausanne, Switzerland', country: 'Switzerland', city: 'Ecole Polytechnique Federal de Lausanne (EPFL', PMID: 27534393
2026-01-08 16:48:08 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Life Sciences, Brain Mind Institute and School of Computer and Communication Sciences, Ecole Polytechnique Federal de Lausanne (EPFL), 1015 Lausanne, Switzerland', country: 'Switzerland', city: 'Ecole Polytechnique Federal de Lausanne (EPFL', PMID: 27534393
2026-01-08 16:48:12 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Fraunhofer IDM @ NTU, Singapore' (from affiliation: Fraunhofer IDM @ NTU, Nanyang Technological University, Singapore, 639798 Singapore (PMID: 27534393))
2026-01-08 16:48:22 - app.phase2.pg_geocoding - INFO - Geocoded 'GÃ¼nzburg, Germany' -> (48.4555244, 10.2766213)
2026-01-08 16:48:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Stuttgart, Germany' -> (48.7784485, 9.1800132)
2026-01-08 16:48:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Erfurt, Germany' -> (50.9777974, 11.0287364)
2026-01-08 16:48:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Hannover, Germany' -> (52.3744779, 9.7385532)
2026-01-08 16:48:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Ulm, Germany' -> (48.3984968, 9.9912458)
2026-01-08 16:48:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Antioquia, Colombia' -> (7.0000085, -75.5000086)
2026-01-08 16:48:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Aberdeen Proving Ground, United States' -> (39.3890776, -76.2305823)
2026-01-08 16:48:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Victoria, Australia' -> (-36.5986096, 144.6780052)
2026-01-08 16:48:43 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Dept. of Mathematics and Computer Science, Italy' (from affiliation: Dept. of Mathematics and Computer Science, University of Udine, Italy. vicenzo.dellamea@uniud.it (PMID: 22874396))
2026-01-08 16:48:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Ont, Canada' -> (50.000678, -86.000977)
2026-01-08 16:48:47 - app.phase2.pg_geocoding - INFO - Geocoded 'France, Brazil' -> (16.2649793, -61.5945856)
2026-01-08 16:48:50 - app.phase2.pg_geocoding - WARNING - Could not geocode 'AP-HM, France' (from affiliation: Aix Marseille Univ, INSERM, INS, Inst Neurosci Syst, Marseille, France; AP-HM, Timone Hospital, Stereotactic and Functional Neurosurgery, France. (PMID: 35989149))
2026-01-08 16:48:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Albany, China' -> (22.2777806, 114.1547996)
2026-01-08 16:48:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Springfield, United States' -> (39.7990175, -89.6439575)
2026-01-08 16:49:00 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Pittsburgh, Andorra' (from affiliation: Department of Neurobiology, University of Pittsburgh School of Medicine, Pittsburgh, Pennsylvania 15213, and. (PMID: 30700532))
2026-01-08 16:49:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Urushiyama, Japan' -> (38.314412, 140.3476006)
2026-01-08 16:49:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Royal Oak, United States' -> (42.4894801, -83.1446485)
2026-01-08 16:49:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Leuven, Belgium' -> (50.879202, 4.7011675)
2026-01-08 16:49:09 - app.phase2.pg_geocoding - INFO - Geocoded 'New Jersey, United States' -> (40.0757384, -74.4041622)
2026-01-08 16:49:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Jerusalem, Israel' -> (31.7788472, 35.2257856)
2026-01-08 16:49:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Sheffield, United Kingdom' -> (53.3806626, -1.4702278)
2026-01-08 16:49:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Pisa, Italy' -> (43.4714722, 10.6797912)
2026-01-08 16:49:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Milan, Italy' -> (45.4641943, 9.1896346)
2026-01-08 16:49:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Pavia, Italy' -> (45.0368547, 9.1378251)
2026-01-08 16:49:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Rozzano, Italy' -> (45.3829973, 9.1545305)
2026-01-08 16:49:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Philippines' -> (12.7503486, 122.7312101)
2026-01-08 16:49:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Richardson, United States' -> (32.9481789, -96.7297206)
2026-01-08 16:49:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Doha, Qatar' -> (25.2856329, 51.5264162)
2026-01-08 16:49:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Toronto, Canada' -> (43.6534817, -79.3839347)
2026-01-08 16:49:38 - app.phase2.pg_geocoding - INFO - Geocoded 'West Lafayette, United States' -> (40.4258686, -86.9080655)
2026-01-08 16:49:41 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Anesthesiology and Perioperative Care, Andorra' (from affiliation: Anesthesiology and Perioperative Care; and. (PMID: 25909573))
2026-01-08 16:49:43 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Head and Neck Surgery, Poland' (from affiliation: Department of Otolaryngology, Head and Neck Surgery, WrocÅ‚aw Medical University, Poland. Electronic address: karolina.dorobisz@umw.edu.pl. (PMID: 41135818))
2026-01-08 16:49:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Poland' -> (52.215933, 19.134422)
2026-01-08 16:49:45 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Otolaryngology, Head and Neck Surgery, WrocÅ‚aw Medical University, Poland.', country: 'Poland', city: 'Head and Neck Surgery', PMID: 41135818
2026-01-08 16:49:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Wroclaw, Poland' -> (51.1089776, 17.0326689)
2026-01-08 16:49:51 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Molecular Biophysics and Integrated Bioimaging, United States' (from affiliation: Center for Functional Imaging, Molecular Biophysics and Integrated Bioimaging, Lawrence Berkeley National Laboratory, Berkeley, CA, USA. (PMID: 31207466))
2026-01-08 16:49:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Trinity Ln, United Kingdom' -> (52.2063883, 0.1170947)
2026-01-08 16:49:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Hempstead, United States' -> (40.6736812, -73.6190736)
2026-01-08 16:50:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Alderley Park, United Kingdom' -> (53.3027551, -2.2378849)
2026-01-08 16:50:05 - app.phase2.pg_geocoding - INFO - Geocoded 'New Cairo, Egypt' -> (30.0277688, 31.4756825)
2026-01-08 16:50:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Jefferson, United States' -> (29.834772, -94.1704496)
2026-01-08 16:50:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Ridgefield, United States' -> (41.2814842, -73.4981792)
2026-01-08 16:50:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Yokohama, Japan' -> (35.4503381, 139.6343802)
2026-01-08 16:50:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Hiroshima, Japan' -> (34.3917241, 132.4517589)
2026-01-08 16:50:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Hachinohe, Japan' -> (40.5122388, 141.4882959)
2026-01-08 16:50:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Mount Pleasant, United States' -> (33.1570582, -94.9694007)
2026-01-08 16:50:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Daegu, South Korea' -> (35.8713, 128.6018)
2026-01-08 16:50:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Belgium' -> (50.6402809, 4.6667145)
2026-01-08 16:50:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Aurora, Colombia' -> (6.0218228, -75.1359969)
2026-01-08 16:50:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Denver, Colombia' -> (5.3431816, -72.395988)
2026-01-08 16:50:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Hyogo, Japan' -> (34.914934, 134.860666)
2026-01-08 16:50:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Snekkersten, Denmark' -> (56.0107273, 12.579952)
2026-01-08 16:50:45 - app.phase2.pg_geocoding - INFO - Geocoded 'SmÃ¸rum, Denmark' -> (55.7158721, 12.3196104)
2026-01-08 16:50:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Bath, United Kingdom' -> (51.3813864, -2.3596963)
2026-01-08 16:50:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Dept. of Mathematics, Italy' -> (45.479966, 9.2292682)
2026-01-08 16:50:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Conegliano, Italy' -> (45.8862172, 12.2977566)
2026-01-08 16:50:55 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran.', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 41042753
2026-01-08 16:50:55 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran.', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 41042753
2026-01-08 16:50:55 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran.', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 41042753
2026-01-08 16:50:55 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran.', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 41042753
2026-01-08 16:50:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Middletown, United States' -> (41.5623178, -72.6509061)
2026-01-08 16:51:02 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Rochester, Mongolia' (from affiliation: Department of Neurology, Mayo Clinic, Rochester, MN 55905. (PMID: 30847390))
2026-01-08 16:51:04 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Urbana-Champaign, Israel' (from affiliation: Department of Electrical and Computer Engineering, University of Illinois, Urbana-Champaign, IL 61801. (PMID: 30847390))
2026-01-08 16:51:04 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 30847390
2026-01-08 16:51:04 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 30847390
2026-01-08 16:51:04 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 30847390
2026-01-08 16:51:04 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 30847390
2026-01-08 16:51:04 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurosurgery, Emory University, Atlanta, GA 30322.', country: 'Gabon', city: 'Atlanta', PMID: 30847390
2026-01-08 16:51:05 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Electrical and Computer Engineering, University of Illinois, Urbana-Champaign, IL 61801.', country: 'Israel', city: 'Urbana-Champaign', PMID: 30847390
2026-01-08 16:51:05 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 30847390
2026-01-08 16:51:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Moscow, Russian Federation' -> (55.625578, 37.6063916)
2026-01-08 16:51:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Taiwan, China' -> (23.9739374, 120.9820179)
2026-01-08 16:51:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Ivanovo, Russian Federation' -> (56.9956855, 40.9812104)
2026-01-08 16:51:14 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Columbia, Seychelles' (from affiliation: Speech Neuroscience Laboratory, Department of Communication Sciences and Disorders, University of South Carolina, Columbia, 29208 SC. (PMID: 33419861))
2026-01-08 16:51:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Majadahonda, Spain' -> (40.4728425, -3.8723542)
2026-01-08 16:51:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Camerino, Italy' -> (43.1357641, 13.0683092)
2026-01-08 16:51:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Hoboken, United States' -> (40.7433066, -74.0323752)
2026-01-08 16:51:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Orange, United States' -> (33.750631, -117.8722311)
2026-01-08 16:51:30 - app.phase2.pg_geocoding - INFO - Geocoded 'New Taipei City, Taiwan' -> (25.0600269, 121.4595689)
2026-01-08 16:51:32 - app.phase2.pg_geocoding - INFO - Geocoded 'New Brunswick, United States' -> (40.4951365, -74.4439254)
2026-01-08 16:51:34 - app.phase2.pg_geocoding - INFO - Geocoded 'UMR, France' -> (48.8480448, 2.3467365)
2026-01-08 16:51:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Montreal, Canada' -> (45.5031824, -73.5698065)
2026-01-08 16:51:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Aix-en-Provence, France' -> (43.5298424, 5.4474738)
2026-01-08 16:51:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Manhattan, United States' -> (40.7579554, -73.9855319)
2026-01-08 16:51:49 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Ã‰cole Polytechnique FÃ©dÃ©rale de Lausanne Lausanne, Switzerland' (from affiliation: Helen Wills Neuroscience Institute, University of California Berkeley, CA, USA ; Department of Bioengineering, Ã‰cole Polytechnique FÃ©dÃ©rale de Lausanne Lausanne, Switzerland. (PMID: 24904404))
2026-01-08 16:51:51 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-08 16:51:51 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-08 16:51:51 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-08 16:51:51 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-08 16:51:51 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-08 16:51:51 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurosurgery, Emory University, Atlanta, GA 30307.', country: 'Gabon', city: 'Atlanta', PMID: 29404403
2026-01-08 16:51:51 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-08 16:51:51 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-08 16:52:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Genoa, Italy' -> (44.40726, 8.9338624)
2026-01-08 16:52:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Glasgow, United Kingdom' -> (55.861155, -4.2501687)
2026-01-08 16:52:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Riyadh, Saudi Arabia' -> (23.333333, 45.333333)
2026-01-08 16:52:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Islamabad, Pakistan' -> (33.6938118, 73.0651511)
2026-01-08 16:52:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Universidad de San AndrÃ©s, Argentina' -> (-34.4461878, -58.5302426)
2026-01-08 16:52:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Argentina' -> (-34.9964963, -64.9672817)
2026-01-08 16:52:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Universidad de Buenos Aires, Argentina' -> (-34.5086718, -58.688352)
2026-01-08 16:52:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Buenos Aires, Argentina' -> (-34.6095579, -58.3887904)
2026-01-08 16:52:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Hefei, China' -> (31.8665676, 117.281428)
2026-01-08 16:52:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Ghent, Belgium' -> (51.0538286, 3.7250121)
2026-01-08 16:52:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Hvidovre, Denmark' -> (55.6644909, 12.4750154)
2026-01-08 16:52:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Amsterdam, Netherlands' -> (52.3730796, 4.8924534)
2026-01-08 16:52:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Braine-L'Alleud, Belgium' -> (50.6828722, 4.3692706)
2026-01-08 16:52:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Bordeaux, France' -> (44.841225, -0.5800364)
2026-01-08 16:52:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Uxbridge, United Kingdom' -> (51.5449509, -0.4816672)
2026-01-08 16:52:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Leeds, United Kingdom' -> (53.7974185, -1.5437941)
2026-01-08 16:52:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Pontedera, Italy' -> (43.6634536, 10.6354851)
2026-01-08 16:52:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Milano, Italy' -> (45.4641943, 9.1896346)
2026-01-08 16:52:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Manchester, United Kingdom' -> (53.4794892, -2.2451148)
2026-01-08 16:52:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Preston, United Kingdom' -> (53.7593363, -2.6992717)
2026-01-08 16:52:57 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139.', country: 'Morocco', city: 'Cambridge', PMID: 27671642
2026-01-08 16:52:57 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139 evelina.fedorenko@mgh.harvard.edu ngk@mit.edu.', country: 'Morocco', city: 'Cambridge', PMID: 27671642
2026-01-08 16:53:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Copenhagen, Denmark' -> (55.6867243, 12.5700724)
2026-01-08 16:53:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Lyngby, Denmark' -> (55.7718649, 12.5051413)
2026-01-08 16:53:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Denmark' -> (55.670249, 10.3333283)
2026-01-08 16:53:10 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Durham, New Caledonia' (from affiliation: Department of Biomedical Engineering, Duke University, Durham, NC. (PMID: 40894619))
2026-01-08 16:53:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Biomedical Engineering, Duke University, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-08 16:53:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurosurgery, Duke School of Medicine, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-08 16:53:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Biomedical Engineering, Duke University, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-08 16:53:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Biomedical Engineering, Duke University, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-08 16:53:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Biomedical Engineering, Duke University, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-08 16:53:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurosurgery, Duke School of Medicine, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-08 16:53:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurosurgery, Duke School of Medicine, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-08 16:53:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurosurgery, Duke School of Medicine, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-08 16:53:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Biomedical Engineering, Duke University, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-08 16:53:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Biomedical Engineering, Duke University, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-08 16:53:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Gif-sur-Yvette, France' -> (48.7018823, 2.134529)
2026-01-08 16:53:15 - app.phase2.pg_geocoding - INFO - Geocoded 'St George's, United Kingdom' -> (51.98711, -0.2217028)
2026-01-08 16:53:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Sevilla, Spain' -> (37.3886303, -5.9953403)
2026-01-08 16:53:19 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Cambridge and Peterborough NHS Foundation Trust UK, United Kingdom' (from affiliation: Department of Psychiatry, University of Cambridge UK; Behavioural and Clinical Neuroscience Institute, University of Cambridge UK; Cambridge and Peterborough NHS Foundation Trust UK. (PMID: 36645968))
2026-01-08 16:53:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Ramat-Gan, Israel' -> (32.0686867, 34.8246812)
2026-01-08 16:53:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Fujian, China' -> (26.193218, 118.2208721)
2026-01-08 16:53:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Zhejiang, China' -> (29.0000001, 119.9999999)
2026-01-08 16:53:31 - app.phase2.pg_geocoding - INFO - Geocoded 'San Francisco, China' -> (-38.9790355, -68.3566918)
2026-01-08 16:53:33 - app.phase2.pg_geocoding - INFO - Geocoded 'San Francisco, Germany' -> (52.3969909, 9.6462511)
2026-01-08 16:53:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Suita, Japan' -> (34.7594193, 135.516835)
2026-01-08 16:53:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Kashihara, Japan' -> (34.5094067, 135.792955)
2026-01-08 16:53:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Tianjin, China' -> (39.0844897, 117.1956724)
2026-01-08 16:53:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Henan, China' -> (34.0000001, 113.9999999)
2026-01-08 16:53:48 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Princeton, Israel' (from affiliation: Princeton Neuroscience Institute and Department of Psychology, Princeton University, Princeton, NJ 08544, USA; Department of Cognitive and Brain Sciences and Business School, Hebrew University, Jerusalem 9190501, Israel. (PMID: 39096896))
2026-01-08 16:53:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Princeton Neuroscience Institute and Department of Psychology, Princeton University, Princeton, NJ 08544, USA; Faculty of Engineering, Holon Institute of Technology, Holon 5810201, Israel.', country: 'Israel', city: 'Princeton', PMID: 39096896
2026-01-08 16:53:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Heeze, Netherlands' -> (51.3832098, 5.5715902)
2026-01-08 16:53:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Eindhoven, Netherlands' -> (51.4392648, 5.478633)
2026-01-08 16:53:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Varese, Italy' -> (45.8397203, 8.7541338)
2026-01-08 16:54:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Parma, Italy' -> (44.6952006, 10.0979869)
2026-01-08 16:54:03 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Saudi Arabia, Andorra' (from affiliation: King Fahad Medical City, KFMC Neurosciences Center, Riyadh, Saudi Arabia; and. (PMID: 38306217))
2026-01-08 16:54:05 - app.phase2.pg_geocoding - INFO - Geocoded 'U.S.A, Morocco' -> (40.9463651, -87.4529316)
2026-01-08 16:54:10 - app.phase2.pg_geocoding - WARNING - Could not geocode 'P.O. Box, Netherlands' (from affiliation: Department of Neurology and Neurosurgery, University Medical Center Utrecht Brain Center, Utrecht University, P.O. Box 85500, 3508 GA Utrecht, The Netherlands. (PMID: 34607318))
2026-01-08 16:54:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology and Neurosurgery, University Medical Center Utrecht Brain Center, Utrecht University, P.O. Box 85500, 3508 GA Utrecht, The Netherlands.', country: 'Netherlands', city: 'P.O. Box', PMID: 34607318
2026-01-08 16:54:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology and Neurosurgery, University Medical Center Utrecht Brain Center, Utrecht University, P.O. Box 85500, 3508 GA Utrecht, The Netherlands.', country: 'Netherlands', city: 'P.O. Box', PMID: 34607318
2026-01-08 16:54:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology and Neurosurgery, University Medical Center Utrecht Brain Center, Utrecht University, P.O. Box 85500, 3508 GA Utrecht, The Netherlands.', country: 'Netherlands', city: 'P.O. Box', PMID: 34607318
2026-01-08 16:54:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology and Neurosurgery, University Medical Center Utrecht Brain Center, Utrecht University, P.O. Box 85500, 3508 GA Utrecht, The Netherlands.', country: 'Netherlands', city: 'P.O. Box', PMID: 34607318
2026-01-08 16:54:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology and Neurosurgery, University Medical Center Utrecht Brain Center, Utrecht University, P.O. Box 85500, 3508 GA Utrecht, The Netherlands.', country: 'Netherlands', city: 'P.O. Box', PMID: 34607318
2026-01-08 16:54:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology and Neurosurgery, University Medical Center Utrecht Brain Center, Utrecht University, P.O. Box 85500, 3508 GA Utrecht, The Netherlands.', country: 'Netherlands', city: 'P.O. Box', PMID: 34607318
2026-01-08 16:54:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA.', country: 'Morocco', city: 'Cambridge', PMID: 39005394
2026-01-08 16:54:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Minneapolis, United States' -> (44.9772995, -93.2654692)
2026-01-08 16:54:17 - app.phase2.pg_geocoding - INFO - Geocoded 'China' -> (35.000074, 104.999927)
2026-01-08 16:54:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Mexico City, Mexico' -> (19.3207722, -99.1514678)
2026-01-08 16:54:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Hanover, United States' -> (43.7023545, -72.2892164)
2026-01-08 16:54:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Epping, Australia' -> (-37.6523847, 145.0315487)
2026-01-08 16:54:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Heidelberg, Australia' -> (-37.7524788, 145.0701284)
2026-01-08 16:54:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Pennsylvania, United States' -> (40.9699889, -77.7278831)
2026-01-08 16:54:37 - app.phase2.pg_geocoding - INFO - Geocoded 'France, United States' -> (33.8511778, -115.6029427)
2026-01-08 16:54:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Henry Wellcome Building, United Kingdom' -> (52.623974, -1.1261792)
2026-01-08 16:54:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Urbana, United States' -> (40.1117174, -88.207301)
2026-01-08 16:54:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Derry, United Kingdom' -> (54.9978678, -7.3213056)
2026-01-08 16:54:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Jordanstown, United Kingdom' -> (54.6871277, -5.8951026)
2026-01-08 16:54:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Miyagi, Japan' -> (38.3880155, 140.9761025)
2026-01-08 16:55:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Tel Aviv, Israel' -> (32.0852997, 34.7818064)
2026-01-08 16:55:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Bet Shemesh, Israel' -> (31.746214, 34.9886825)
2026-01-08 16:55:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Dammam, Saudi Arabia' -> (26.4367824, 50.1039991)
2026-01-08 16:55:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Austria' -> (47.59397, 14.12456)
2026-01-08 16:55:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Matsumoto, Japan' -> (36.2382047, 137.9687141)
2026-01-08 16:55:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Nagano, Japan' -> (36.1143945, 138.0319015)
2026-01-08 16:55:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Zhengzhou, China' -> (34.7472531, 113.619321)
2026-01-08 16:55:22 - app.phase2.pg_geocoding - INFO - Geocoded 'SAR, Hong Kong' -> (22.2534635, 114.190975)
2026-01-08 16:55:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Uniondale, United States' -> (40.7157545, -73.5898872)
2026-01-08 16:55:31 - app.phase2.pg_geocoding - INFO - Geocoded 'LinkÃ¶ping, Sweden' -> (58.4098135, 15.6245252)
2026-01-08 16:55:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Cali, Colombia' -> (3.4519988, -76.5325259)
2026-01-08 16:55:46 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Evanston, Andorra' (from affiliation: Speech Physiology Laboratory, Department of Communication Sciences and Disorders, Northwestern University, Evanston, Illinois 60208, and. (PMID: 26888939))
2026-01-08 16:55:48 - app.phase2.pg_geocoding - WARNING - Could not geocode 'New York, Moldova, Republic of' (from affiliation: From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York. ywang154@jhu.edu. (PMID: 26935890))
2026-01-08 16:55:48 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-08 16:55:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-08 16:55:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-08 16:55:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-08 16:55:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-08 16:55:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-08 16:55:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-08 16:55:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Wuhan, China' -> (30.5951051, 114.2999353)
2026-01-08 16:55:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Shenyang, China' -> (41.8026095, 123.4279105)
2026-01-08 16:56:01 - app.phase2.pg_geocoding - INFO - Geocoded 'A.F, United States' -> (37.3925331, -121.8883687)
2026-01-08 16:56:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong Special Administrative Region, Hong Kong' -> (22.2534635, 114.190975)
2026-01-08 16:56:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Omaha, United States' -> (41.2587459, -95.9383758)
2026-01-08 16:56:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Columbus, United States' -> (39.9622601, -83.0007065)
2026-01-08 16:56:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Chicago, Japan' -> (35.7054713, 139.5771069)
2026-01-08 16:56:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Salzburg, Austria' -> (47.7981346, 13.0464806)
2026-01-08 16:56:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Novi Sad, Serbia' -> (45.2551338, 19.8451756)
2026-01-08 16:56:28 - app.phase2.pg_geocoding - INFO - Geocoded 'San Francisco, Canada' -> (45.5020249, -73.5727413)
2026-01-08 16:56:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Florence, Italy' -> (43.7697955, 11.2556404)
2026-01-08 16:56:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Riverside, United States' -> (33.9824949, -117.374238)
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4432
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3482
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO -    Cache misses: 189
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 163
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 26
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 26
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 19
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 26 error affiliations with LLM...
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO -    Collecting 26 unique error affiliations for LLM fix
2026-01-08 16:56:38 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-08 16:56:38 - app.phase2.affiliation_extractor - INFO - Extracting 26 affiliations (cached: 0) in batches of 20
2026-01-08 16:56:38 - app.phase2.affiliation_extractor - INFO - Processing batch 1/2
2026-01-08 16:56:44 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-08 16:56:44 - app.phase2.affiliation_extractor - INFO - Processing batch 2/2
2026-01-08 16:56:53 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-08 16:56:53 - app.phase2.affiliation_extractor - WARNING - LLM returned 9 results for 6 affiliations
2026-01-08 16:56:53 - app.phase2.affiliation_extractor - INFO - Extraction complete: 26 affiliations processed
2026-01-08 16:56:53 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 26 results from 2 batches
2026-01-08 16:56:53 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 26 LLM results...
2026-01-08 16:56:54 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache with 26 LLM results
2026-01-08 16:56:54 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-08 16:56:59 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 26 affiliations
2026-01-08 16:56:59 - app.phase2.affiliation_validator - INFO -    âœ… Updated 18 authorships
2026-01-08 16:56:59 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 18 locations
2026-01-08 16:56:59 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:56:59 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 13092a22728c
2026-01-08 16:56:59 - app.phase2.affiliation_validator - INFO -    Affiliations fixed: 26
2026-01-08 16:56:59 - app.phase2.affiliation_validator - INFO -    Cache updates: 26
2026-01-08 16:56:59 - app.phase2.affiliation_validator - INFO -    Authorship updates: 18
2026-01-08 16:56:59 - app.phase2.affiliation_validator - INFO -    Geocoding updates: 18
2026-01-08 16:56:59 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:56:59 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-08 16:56:59 - app.phase2.pg_ingest - INFO -    Affiliations fixed: 26
2026-01-08 16:56:59 - app.phase2.pg_ingest - INFO -    Geocoding failures found: 26
2026-01-08 16:56:59 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-08 16:56:59 - app.main - INFO - ================================================================================
2026-01-08 16:56:59 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-08 16:56:59 - app.main - INFO -    Total PMIDs: 500
2026-01-08 16:56:59 - app.main - INFO -    Papers parsed: 500
2026-01-08 16:56:59 - app.main - INFO -    Authorships created: 4432
2026-01-08 16:56:59 - app.main - INFO -    Unique affiliations: 2545
2026-01-08 16:56:59 - app.main - INFO -    Affiliations with country: 2452
2026-01-08 16:56:59 - app.main - INFO -    LLM calls made: 0
2026-01-08 16:56:59 - app.main - INFO - ================================================================================
2026-01-08 17:13:02 - app.main - INFO - ================================================================================
2026-01-08 17:13:02 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-08 17:13:02 - app.main - INFO -    Min confidence: low
2026-01-08 17:13:02 - app.main - INFO - ================================================================================
2026-01-08 17:13:02 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-08 17:13:02 - app.main - INFO - ================================================================================
2026-01-08 17:13:02 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-08 17:13:02 - app.main - INFO -    Min confidence: low
2026-01-08 17:13:02 - app.main - INFO - ================================================================================
2026-01-08 17:13:02 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-08 17:13:02 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-08 17:13:02 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-08 17:13:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Australia' -> (-24.7761086, 134.755)
2026-01-08 17:13:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Australia' -> (-24.7761086, 134.755)
2026-01-08 17:13:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Canada' -> (61.0666922, -107.991707)
2026-01-08 17:13:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Canada' -> (61.0666922, -107.991707)
2026-01-08 17:13:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Russian Federation' -> (64.6863136, 97.7453061)
2026-01-08 17:13:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Russian Federation' -> (64.6863136, 97.7453061)
2026-01-08 17:13:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Morocco' -> (28.3347722, -10.3713379)
2026-01-08 17:13:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Morocco' -> (28.3347722, -10.3713379)
2026-01-08 17:13:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Taiwan' -> (23.9739374, 120.9820179)
2026-01-08 17:13:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Taiwan' -> (23.9739374, 120.9820179)
2026-01-08 17:13:14 - app.phase2.pg_geocoding - INFO - Geocoded 'India' -> (22.3511148, 78.6677428)
2026-01-08 17:13:15 - app.phase2.pg_geocoding - INFO - Geocoded 'India' -> (22.3511148, 78.6677428)
2026-01-08 17:13:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Spain' -> (39.3260685, -4.8379791)
2026-01-08 17:13:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Spain' -> (39.3260685, -4.8379791)
2026-01-08 17:13:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Panama' -> (8.559559, -81.1308434)
2026-01-08 17:13:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Colombia' -> (4.099917, -72.9088133)
2026-01-08 17:13:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Israel' -> (30.8124247, 34.8594762)
2026-01-08 17:13:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Panama' -> (8.559559, -81.1308434)
2026-01-08 17:13:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Sweden' -> (59.6749712, 14.5208584)
2026-01-08 17:13:27 - app.phase2.pg_geocoding - INFO - Geocoded 'New Caledonia' -> (-20.6378428, 161.2117626)
2026-01-08 17:13:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong' -> (22.3492155, 114.1857978)
2026-01-08 17:13:34 - app.phase2.pg_geocoding - INFO - Geocoded 'New Caledonia' -> (-20.6378428, 161.2117626)
2026-01-08 17:13:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Iran, Islamic Republic of' -> (36.2665119, 59.5999861)
2026-01-08 17:13:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Iran, Islamic Republic of' -> (36.2665119, 59.5999861)
2026-01-08 17:13:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Moldova, Republic of' -> (46.6745434, 29.7521996)
2026-01-08 17:13:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Moldova, Republic of' -> (46.6745434, 29.7521996)
2026-01-08 17:13:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Saudi Arabia' -> (25.6242618, 42.3528328)
2026-01-08 17:13:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Saudi Arabia' -> (25.6242618, 42.3528328)
2026-01-08 17:13:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Mongolia' -> (46.8250388, 103.8499736)
2026-01-08 17:13:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Mongolia' -> (46.8250388, 103.8499736)
2026-01-08 17:13:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Mexico' -> (23.6585116, -102.0077097)
2026-01-08 17:13:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Mexico' -> (23.6585116, -102.0077097)
2026-01-08 17:13:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Brazil' -> (-10.3333333, -53.2)
2026-01-08 17:13:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Brazil' -> (-10.3333333, -53.2)
2026-01-08 17:13:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Romania' -> (45.9852129, 24.6859225)
2026-01-08 17:13:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Ireland' -> (52.865196, -7.9794599)
2026-01-08 17:13:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Ireland' -> (52.865196, -7.9794599)
2026-01-08 17:13:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Pakistan' -> (30.3308401, 71.247499)
2026-01-08 17:13:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Turkey' -> (39.294076, 35.2316631)
2026-01-08 17:13:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Pakistan' -> (30.3308401, 71.247499)
2026-01-08 17:13:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Finland' -> (63.2467777, 25.9209164)
2026-01-08 17:13:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Finland' -> (63.2467777, 25.9209164)
2026-01-08 17:13:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Gabon' -> (-0.8999695, 11.6899699)
2026-01-08 17:13:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Gabon' -> (-0.8999695, 11.6899699)
2026-01-08 17:13:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Iran' -> (32.6475314, 54.5643516)
2026-01-08 17:14:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Iran' -> (32.6475314, 54.5643516)
2026-01-08 17:14:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Hungary' -> (47.1817585, 19.5060937)
2026-01-08 17:14:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Hungary' -> (47.1817585, 19.5060937)
2026-01-08 17:14:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Portugal' -> (39.6621648, -8.1353519)
2026-01-08 17:14:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Portugal' -> (39.6621648, -8.1353519)
2026-01-08 17:14:05 - app.phase2.pg_geocoding - INFO - Geocoded 'New Zealand' -> (-41.5000831, 172.8344077)
2026-01-08 17:14:05 - app.phase2.pg_geocoding - INFO - Geocoded 'New Zealand' -> (-41.5000831, 172.8344077)
2026-01-08 17:14:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Qatar' -> (25.3336984, 51.2295295)
2026-01-08 17:14:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Qatar' -> (25.3336984, 51.2295295)
2026-01-08 17:14:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Egypt' -> (26.2540493, 29.2675469)
2026-01-08 17:17:37 - root - INFO - ================================================================================
2026-01-08 17:17:37 - root - INFO - Logging initialized - output to console and log.txt
2026-01-08 17:17:37 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-08 17:17:37 - root - INFO - ================================================================================
2026-01-08 17:17:54 - app.main - INFO - ================================================================================
2026-01-08 17:17:54 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-08 17:17:54 - app.main - INFO -    Min confidence: low
2026-01-08 17:17:54 - app.main - INFO - ================================================================================
2026-01-08 17:17:54 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-08 17:17:54 - app.main - INFO - ================================================================================
2026-01-08 17:17:54 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-08 17:17:54 - app.main - INFO -    Min confidence: low
2026-01-08 17:17:54 - app.main - INFO - ================================================================================
2026-01-08 17:17:54 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-08 17:17:54 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-08 17:17:54 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-08 17:17:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Serbia' -> (44.0243229, 21.0765743)
2026-01-08 17:17:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Serbia' -> (44.0243229, 21.0765743)
2026-01-08 17:17:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Seychelles' -> (-4.6574977, 55.4540146)
2026-01-08 17:17:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Seychelles' -> (-4.6574977, 55.4540146)
2026-01-08 17:18:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Czech Republic' -> (49.7439047, 15.3381061)
2026-01-08 17:18:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Czech Republic' -> (49.7439047, 15.3381061)
2026-01-08 17:18:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Georgia' -> (32.3293809, -83.1137366)
2026-01-08 17:18:03 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 57 countries
2026-01-08 17:18:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-08 17:18:03 - app.main - INFO -    Countries returned: 57
2026-01-08 17:18:03 - app.main - INFO - ================================================================================
2026-01-08 17:18:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Georgia' -> (32.3293809, -83.1137366)
2026-01-08 17:18:04 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 57 countries
2026-01-08 17:18:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-08 17:18:04 - app.main - INFO -    Countries returned: 57
2026-01-08 17:18:04 - app.main - INFO - ================================================================================
2026-01-08 17:19:48 - app.main - INFO - ================================================================================
2026-01-08 17:19:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-08 17:19:48 - app.main - INFO -    Min confidence: low
2026-01-08 17:19:48 - app.main - INFO - ================================================================================
2026-01-08 17:19:48 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-08 17:19:48 - app.main - INFO - ================================================================================
2026-01-08 17:19:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-08 17:19:48 - app.main - INFO -    Min confidence: low
2026-01-08 17:19:48 - app.main - INFO - ================================================================================
2026-01-08 17:19:48 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-08 17:19:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-08 17:19:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-08 17:19:48 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 57 countries
2026-01-08 17:19:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-08 17:19:48 - app.main - INFO -    Countries returned: 57
2026-01-08 17:19:48 - app.main - INFO - ================================================================================
2026-01-08 17:19:49 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 57 countries
2026-01-08 17:19:49 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-08 17:19:49 - app.main - INFO -    Countries returned: 57
2026-01-08 17:19:49 - app.main - INFO - ================================================================================
2026-01-08 17:19:59 - app.main - INFO - ================================================================================
2026-01-08 17:19:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-08 17:19:59 - app.main - INFO -    Country: China, Min confidence: low
2026-01-08 17:19:59 - app.main - INFO - ================================================================================
2026-01-08 17:19:59 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-08 17:19:59 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-08 17:19:59 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 22 cities in China
2026-01-08 17:19:59 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-08 17:19:59 - app.main - INFO -    Cities returned: 22
2026-01-08 17:19:59 - app.main - INFO - ================================================================================
2026-01-09 08:44:41 - root - INFO - ================================================================================
2026-01-09 08:44:41 - root - INFO - Logging initialized - output to console and log.txt
2026-01-09 08:44:41 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-09 08:44:41 - root - INFO - ================================================================================
2026-01-09 09:40:16 - root - INFO - ================================================================================
2026-01-09 09:40:16 - root - INFO - Logging initialized - output to console and log.txt
2026-01-09 09:40:16 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-09 09:40:16 - root - INFO - ================================================================================
2026-01-09 09:40:20 - root - INFO - ================================================================================
2026-01-09 09:40:20 - root - INFO - Logging initialized - output to console and log.txt
2026-01-09 09:40:20 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-09 09:40:20 - root - INFO - ================================================================================
2026-01-09 09:40:42 - root - INFO - ================================================================================
2026-01-09 09:40:42 - root - INFO - Logging initialized - output to console and log.txt
2026-01-09 09:40:42 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-09 09:40:42 - root - INFO - ================================================================================
2026-01-09 09:40:48 - root - INFO - ================================================================================
2026-01-09 09:40:48 - root - INFO - Logging initialized - output to console and log.txt
2026-01-09 09:40:48 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-09 09:40:48 - root - INFO - ================================================================================
2026-01-09 09:41:02 - root - INFO - ================================================================================
2026-01-09 09:41:02 - root - INFO - Logging initialized - output to console and log.txt
2026-01-09 09:41:02 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-09 09:41:02 - root - INFO - ================================================================================
2026-01-09 09:41:13 - root - INFO - ================================================================================
2026-01-09 09:41:13 - root - INFO - Logging initialized - output to console and log.txt
2026-01-09 09:41:13 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-09 09:41:13 - root - INFO - ================================================================================
2026-01-09 09:41:28 - root - INFO - ================================================================================
2026-01-09 09:41:28 - root - INFO - Logging initialized - output to console and log.txt
2026-01-09 09:41:28 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-09 09:41:28 - root - INFO - ================================================================================
2026-01-09 09:41:39 - root - INFO - ================================================================================
2026-01-09 09:41:39 - root - INFO - Logging initialized - output to console and log.txt
2026-01-09 09:41:39 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-09 09:41:39 - root - INFO - ================================================================================
2026-01-09 09:41:51 - root - INFO - ================================================================================
2026-01-09 09:41:51 - root - INFO - Logging initialized - output to console and log.txt
2026-01-09 09:41:51 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-09 09:41:51 - root - INFO - ================================================================================
2026-01-09 09:43:04 - root - INFO - ================================================================================
2026-01-09 09:43:04 - root - INFO - Logging initialized - output to console and log.txt
2026-01-09 09:43:04 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-09 09:43:04 - root - INFO - ================================================================================
2026-01-09 09:52:23 - root - INFO - ================================================================================
2026-01-09 09:52:23 - root - INFO - Logging initialized - output to console and log.txt
2026-01-09 09:52:23 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-09 09:52:23 - root - INFO - ================================================================================
2026-01-11 02:03:36 - root - INFO - ================================================================================
2026-01-11 02:03:36 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 02:03:36 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 02:03:36 - root - INFO - ================================================================================
2026-01-11 02:04:28 - app.main - INFO - ================================================================================
2026-01-11 02:04:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 02:04:28 - app.main - INFO -    Min confidence: low
2026-01-11 02:04:28 - app.main - INFO - ================================================================================
2026-01-11 02:04:28 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 02:04:28 - app.main - INFO - ================================================================================
2026-01-11 02:04:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 02:04:28 - app.main - INFO -    Min confidence: low
2026-01-11 02:04:28 - app.main - INFO - ================================================================================
2026-01-11 02:04:28 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 02:04:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 02:04:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 02:04:29 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 57 countries
2026-01-11 02:04:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 02:04:29 - app.main - INFO -    Countries returned: 57
2026-01-11 02:04:29 - app.main - INFO - ================================================================================
2026-01-11 02:04:29 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 57 countries
2026-01-11 02:04:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 02:04:29 - app.main - INFO -    Countries returned: 57
2026-01-11 02:04:29 - app.main - INFO - ================================================================================
2026-01-11 02:04:32 - app.main - INFO - ================================================================================
2026-01-11 02:04:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 02:04:32 - app.main - INFO -    Country: Morocco, Min confidence: low
2026-01-11 02:04:32 - app.main - INFO - ================================================================================
2026-01-11 02:04:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Morocco (normalized: Morocco)...
2026-01-11 02:04:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 02:04:34 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Cambridge, Morocco' (from affiliation: Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139.)
2026-01-11 02:04:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 4 cities in Morocco
2026-01-11 02:04:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Morocco
2026-01-11 02:04:35 - app.main - INFO -    Cities returned: 4
2026-01-11 02:04:35 - app.main - INFO - ================================================================================
2026-01-11 02:33:22 - app.main - INFO - ================================================================================
2026-01-11 02:33:22 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 02:33:22 - app.main - INFO -    Force refresh: False
2026-01-11 02:33:22 - app.main - INFO - ================================================================================
2026-01-11 02:33:22 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:33:22 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 02:33:22 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 02:33:22 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 02:33:22 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:33:22 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 02:33:25 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 02:33:25 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 02:33:25 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:33:25 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 02:33:25 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 02:33:25 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 02:33:26 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41275704%2C31419636%2C30064321%2C24904404%2C30596439%2C37995287%2C26136107%2C27182530%2C32442776%2C41177674%2C15876624%2C25570869%2C30500619%2C37292795%2C34421555%2C41386385%2C25122702%2C31741702%2C38343801%2C33293456%2C30847390%2C41129388%2C37120741%2C22207857%2C40039596%2C27019106%2C31824257%2C39248654%2C21750369%2C25118584%2C32498058%2C34753819%2C39870041%2C28666338%2C28269552%2C34892495%2C40800288%2C37066306%2C26737497%2C29087324%2C40018762%2C30216929%2C24672012%2C41105453%2C41042753%2C31578420%2C32105726%2C37019103%2C41282818%2C33142282%2C41349179%2C24845600%2C37086161%2C35121181%2C25616459%2C14656066%2C32410969%2C17271737%2C40490093%2C37382208%2C36634533%2C41335998%2C29674950%2C27377299%2C19349241%2C12614397%2C36121939%2C30700532%2C28993231%2C38969758%2C22890647%2C26888939%2C34918613%2C31363096%2C37745380%2C35311092%2C40800829%2C30256217%2C28918128%2C35695785%2C39371161%2C25571558%2C39134741%2C32656294%2C30134167%2C37217308%2C27524194%2C40830488%2C20026224%2C27935031%2C39990398%2C17071238%2C40610484%2C31692177%2C31820736%2C36086071%2C32610290%2C38581367%2C16175856%2C26124702%2C34958951%2C27450996%2C29779940%2C38496670%2C35118367%2C30367077%2C34408717%2C24122368%2C34130614%2C25352799%2C26991386%2C30414541%2C37437189%2C24982625%2C35907491%2C39808939%2C36828156%2C31287601%2C32788249%2C24681353%2C38222047%2C40343020%2C36731812%2C27199720%2C30504559%2C40766385%2C33776668%2C31875441%2C41279744%2C36246502%2C29430213%2C33360179%2C26408491%2C36645968%2C20811093%2C39153482%2C38813793%2C21471374%2C24285843%2C27249656%2C40147418%2C27148018%2C38935898%2C40354107%2C27199638%2C32378738%2C30249918%2C28406383%2C27926827%2C26642090&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 02:33:26 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 02:33:26 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 02:33:27 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=30440349%2C30721879%2C29268943%2C36872854%2C29018336%2C34489664%2C38318272%2C23032488%2C31103409%2C37105171%2C29439164%2C33935673%2C37582062%2C17971857%2C34823894%2C21029784%2C29460482%2C32198060%2C19033707%2C29678760%2C23482627%2C29958109%2C32435182%2C29397190%2C38559163%2C35819528%2C34260835%2C20087111%2C20478745%2C38808652%2C35099768%2C36327599%2C26679420%2C34849596%2C28399442%2C38260011%2C39386565%2C33942078%2C23577157%2C35169837%2C19732923%2C31056408%2C38083559%2C23366629%2C40832215%2C31339411%2C37819985%2C29271713%2C39345158%2C32577713%2C35534226%2C26232713%2C29052465%2C26072003%2C38909761%2C38306217%2C26446212%2C40461573%2C36989073%2C30038000%2C41135818%2C40239679%2C22573665%2C38063368%2C38041253%2C31946284%2C33789135%2C25822912%2C36966852%2C38582333%2C39332803%2C18440570%2C41021378%2C29093659%2C25571556%2C37487487%2C21529188%2C22255777%2C32694561%2C32289685%2C28622530%2C29033809%2C15817517%2C28236761%2C37215328%2C15677998%2C38787551%2C29891885%2C27671642%2C35313351%2C40913768%2C27325763%2C29190521%2C29404403%2C32686761%2C33419861%2C39484239%2C30389490%2C27408802%2C23072156%2C27956570%2C25571553%2C27046113%2C30257858%2C18982128%2C37638314%2C35966994%2C28268617%2C39922365%2C27311642%2C41397928%2C40910467%2C40253415%2C33372958%2C32828921%2C41205609%2C30827578%2C27534393%2C31342677%2C27408803%2C23465430%2C36356309%2C27918346%2C35878727%2C33137575%2C27686506%2C25909573%2C39096896%2C39485790%2C28268620%2C22255402%2C24639642%2C37841873%2C39479009%2C32231340%2C30617653%2C33306299%2C37961305%2C26818506%2C29247963%2C40817733%2C34587350%2C30971792%2C35708911%2C39194182%2C21307246%2C16792292%2C25948269%2C38769115%2C41034198&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 02:33:28 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 02:33:28 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 02:33:28 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=27729844%2C40260174%2C35013268%2C37875404%2C40309789%2C26949710%2C38988764%2C39554006%2C38769157%2C40825359%2C39990331%2C41081527%2C37968869%2C24293161%2C25816090%2C39005394%2C30740659%2C19279495%2C37441880%2C36570848%2C41039113%2C27635975%2C34301825%2C37060887%2C21373361%2C30342252%2C40055549%2C37739786%2C30238309%2C31220442%2C20465359%2C30831567%2C39213665%2C40695313%2C39464426%2C35185491%2C32180695%2C28268618%2C41144819%2C41266624%2C40302941%2C37467739%2C29525721%2C22144944%2C39968245%2C25266305%2C27578414%2C23643922%2C28839071%2C40972658%2C37203491%2C33912122%2C39433597%2C24315545%2C35568349%2C26935890%2C40516665%2C37229140%2C34774771%2C38183998%2C33283856%2C23774120%2C35113857%2C34347873%2C40720979%2C35395633%2C41022986%2C41167038%2C28396294%2C23696279%2C37932250%2C23914170%2C30238924%2C34607318%2C25259669%2C25000321%2C24995815%2C41453123%2C39322094%2C21708506%2C40144585%2C39579033%2C27484713%2C35528322%2C30643130%2C35276657%2C25273279%2C41191764%2C37460730%2C30279650%2C31525179%2C38486966%2C41254404%2C34906982%2C21724424%2C37900727%2C40490003%2C38671062%2C37425292%2C25570199%2C38885688%2C38696121%2C38925110%2C31207466%2C24836588%2C34965874%2C28716965%2C21471638%2C35654375%2C28334963%2C28676308%2C35248810%2C21419227%2C34536230%2C39974103%2C40769034%2C39399739%2C33506209%2C34717248%2C29414401%2C33408621%2C22563311%2C26386644%2C25157216%2C22874396%2C37798921%2C40913530%2C35989149%2C32439539%2C41363150%2C39819752%2C15329073%2C28119593%2C38335090%2C25759647%2C25571555%2C38514133%2C22973215%2C22750156%2C28894834%2C41397373%2C29977189%2C28225156%2C41324025%2C20921326%2C38948730%2C31277857%2C28335018%2C29861132%2C40040033&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 02:33:29 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 02:33:29 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 02:33:29 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=31445890%2C9737437%2C33841081%2C41062786%2C29576436%2C22875868%2C32372065%2C17980999%2C39162748%2C33867912%2C36054730%2C33133815%2C29378977%2C39867597%2C27413155%2C9419036%2C32840483%2C41427281%2C8892373%2C35777988%2C26262160%2C25761260%2C40894619%2C24877680%2C41332755%2C30837823%2C39985774%2C37245559%2C30710356%2C38242691%2C26188384%2C35869138%2C19163831%2C39582595%2C25819402%2C40417558%2C38648781%2C34411517%2C17712784%2C40697162%2C39850351%2C38729074%2C38093008%2C34123657%2C24904069%2C22941838%2C39455254%2C37459853%2C32888480%2C39374038&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 02:33:29 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 02:33:29 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 02:33:30 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 02:33:30 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 02:33:30 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:33:30 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 02:33:30 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 02:33:30 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:33:30 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 02:33:30 - app.phase2.pg_ingest - INFO -    Extracting 2545 affiliations via rule-based (with cache)
2026-01-11 02:33:30 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 02:33:30 - app.phase2.rule_based_extractor - INFO -    Batch checking cache for 2545 affiliations...
2026-01-11 02:33:31 - app.phase2.rule_based_extractor - INFO -    âœ… Batch cache check complete: 2545 hits, 0 to extract
2026-01-11 02:33:34 - app.phase2.pg_ingest - INFO -    Cached 2545 affiliation extraction results
2026-01-11 02:33:34 - app.phase2.pg_ingest - INFO -    Extraction complete: 2545 affiliations, 2444 with country
2026-01-11 02:33:34 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 02:33:34 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 02:33:34 - app.phase2.pg_ingest - INFO -    With country: 2444
2026-01-11 02:33:34 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 02:33:34 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:33:34 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 02:33:34 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 02:33:35 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 02:33:35 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 02:33:35 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 02:33:35 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Run: 13092a22728c
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2444
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO -    LLM calls made: 0
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:33:43 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 02:33:43 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:33:43 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 02:33:44 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 02:34:09 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-11 02:34:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-11 02:34:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-11 02:34:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-11 02:34:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-11 02:34:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-11 02:34:10 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Departments of Neurology (Y.W., A.K., M.C.C., D.F.B.-R., N.E.C.), Biomedical Engineering (M.S.F.), and Neurosurgery (W.S.A.), Johns Hopkins University, Baltimore, MD; Fischell Department of Bioengineering (Y.W.), University of Maryland College Park; and Department of Psychology (A.F.), New York University, New York.', country: 'Moldova, Republic of', city: 'New York', PMID: 26935890
2026-01-11 02:34:20 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Mathematical Sciences, KAIST, Daejoen, 34141 Republic of Korea', country: 'Korea, Republic of', city: 'Daejoen', PMID: 27534393
2026-01-11 02:34:26 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'INSERM U846, Stem Cell and Brain Research Institute, Bron Cedex, France', country: 'France', city: 'Bron Cedex', PMID: 27534393
2026-01-11 02:34:27 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-11 02:34:27 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-11 02:34:27 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-11 02:34:27 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-11 02:34:45 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'RIKEN Brain Science Institute, Wako, Saitama 351-0198 Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-11 02:34:45 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Physics, Institute for Research in Fundamental Sciences (IPM), Tehran, 19395-5531 Iran', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 27534393
2026-01-11 02:35:12 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139.', country: 'Morocco', city: 'Cambridge', PMID: 27671642
2026-01-11 02:35:12 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139 evelina.fedorenko@mgh.harvard.edu ngk@mit.edu.', country: 'Morocco', city: 'Cambridge', PMID: 27671642
2026-01-11 02:35:28 - app.main - INFO - ================================================================================
2026-01-11 02:35:28 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 02:35:28 - app.main - INFO -    Force refresh: False
2026-01-11 02:35:28 - app.main - INFO - ================================================================================
2026-01-11 02:35:28 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:35:28 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 02:35:28 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 02:35:28 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 02:35:28 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:35:28 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 02:35:32 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurosurgery, Emory University, Atlanta, GA 30307.', country: 'Gabon', city: 'Atlanta', PMID: 29404403
2026-01-11 02:35:33 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 02:35:33 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 02:35:33 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:35:33 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 02:35:33 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 02:35:33 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 02:35:33 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41275704%2C31419636%2C30064321%2C24904404%2C30596439%2C37995287%2C26136107%2C27182530%2C32442776%2C41177674%2C15876624%2C25570869%2C30500619%2C37292795%2C34421555%2C41386385%2C25122702%2C31741702%2C38343801%2C33293456%2C30847390%2C41129388%2C37120741%2C22207857%2C40039596%2C27019106%2C31824257%2C39248654%2C21750369%2C25118584%2C32498058%2C34753819%2C39870041%2C28666338%2C28269552%2C34892495%2C40800288%2C37066306%2C26737497%2C29087324%2C40018762%2C30216929%2C24672012%2C41105453%2C41042753%2C31578420%2C32105726%2C37019103%2C41282818%2C33142282%2C41349179%2C24845600%2C37086161%2C35121181%2C25616459%2C14656066%2C32410969%2C17271737%2C40490093%2C37382208%2C36634533%2C41335998%2C29674950%2C27377299%2C19349241%2C12614397%2C36121939%2C30700532%2C28993231%2C38969758%2C22890647%2C26888939%2C34918613%2C31363096%2C37745380%2C35311092%2C40800829%2C30256217%2C28918128%2C35695785%2C39371161%2C25571558%2C39134741%2C32656294%2C30134167%2C37217308%2C27524194%2C40830488%2C20026224%2C27935031%2C39990398%2C17071238%2C40610484%2C31692177%2C31820736%2C36086071%2C32610290%2C38581367%2C16175856%2C26124702%2C34958951%2C27450996%2C29779940%2C38496670%2C35118367%2C30367077%2C34408717%2C24122368%2C34130614%2C25352799%2C26991386%2C30414541%2C37437189%2C24982625%2C35907491%2C39808939%2C36828156%2C31287601%2C32788249%2C24681353%2C38222047%2C40343020%2C36731812%2C27199720%2C30504559%2C40766385%2C33776668%2C31875441%2C41279744%2C36246502%2C29430213%2C33360179%2C26408491%2C36645968%2C20811093%2C39153482%2C38813793%2C21471374%2C24285843%2C27249656%2C40147418%2C27148018%2C38935898%2C40354107%2C27199638%2C32378738%2C30249918%2C28406383%2C27926827%2C26642090&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 02:35:34 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 02:35:34 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 02:35:34 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=30440349%2C30721879%2C29268943%2C36872854%2C29018336%2C34489664%2C38318272%2C23032488%2C31103409%2C37105171%2C29439164%2C33935673%2C37582062%2C17971857%2C34823894%2C21029784%2C29460482%2C32198060%2C19033707%2C29678760%2C23482627%2C29958109%2C32435182%2C29397190%2C38559163%2C35819528%2C34260835%2C20087111%2C20478745%2C38808652%2C35099768%2C36327599%2C26679420%2C34849596%2C28399442%2C38260011%2C39386565%2C33942078%2C23577157%2C35169837%2C19732923%2C31056408%2C38083559%2C23366629%2C40832215%2C31339411%2C37819985%2C29271713%2C39345158%2C32577713%2C35534226%2C26232713%2C29052465%2C26072003%2C38909761%2C38306217%2C26446212%2C40461573%2C36989073%2C30038000%2C41135818%2C40239679%2C22573665%2C38063368%2C38041253%2C31946284%2C33789135%2C25822912%2C36966852%2C38582333%2C39332803%2C18440570%2C41021378%2C29093659%2C25571556%2C37487487%2C21529188%2C22255777%2C32694561%2C32289685%2C28622530%2C29033809%2C15817517%2C28236761%2C37215328%2C15677998%2C38787551%2C29891885%2C27671642%2C35313351%2C40913768%2C27325763%2C29190521%2C29404403%2C32686761%2C33419861%2C39484239%2C30389490%2C27408802%2C23072156%2C27956570%2C25571553%2C27046113%2C30257858%2C18982128%2C37638314%2C35966994%2C28268617%2C39922365%2C27311642%2C41397928%2C40910467%2C40253415%2C33372958%2C32828921%2C41205609%2C30827578%2C27534393%2C31342677%2C27408803%2C23465430%2C36356309%2C27918346%2C35878727%2C33137575%2C27686506%2C25909573%2C39096896%2C39485790%2C28268620%2C22255402%2C24639642%2C37841873%2C39479009%2C32231340%2C30617653%2C33306299%2C37961305%2C26818506%2C29247963%2C40817733%2C34587350%2C30971792%2C35708911%2C39194182%2C21307246%2C16792292%2C25948269%2C38769115%2C41034198&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 02:35:35 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 02:35:35 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 02:35:35 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=27729844%2C40260174%2C35013268%2C37875404%2C40309789%2C26949710%2C38988764%2C39554006%2C38769157%2C40825359%2C39990331%2C41081527%2C37968869%2C24293161%2C25816090%2C39005394%2C30740659%2C19279495%2C37441880%2C36570848%2C41039113%2C27635975%2C34301825%2C37060887%2C21373361%2C30342252%2C40055549%2C37739786%2C30238309%2C31220442%2C20465359%2C30831567%2C39213665%2C40695313%2C39464426%2C35185491%2C32180695%2C28268618%2C41144819%2C41266624%2C40302941%2C37467739%2C29525721%2C22144944%2C39968245%2C25266305%2C27578414%2C23643922%2C28839071%2C40972658%2C37203491%2C33912122%2C39433597%2C24315545%2C35568349%2C26935890%2C40516665%2C37229140%2C34774771%2C38183998%2C33283856%2C23774120%2C35113857%2C34347873%2C40720979%2C35395633%2C41022986%2C41167038%2C28396294%2C23696279%2C37932250%2C23914170%2C30238924%2C34607318%2C25259669%2C25000321%2C24995815%2C41453123%2C39322094%2C21708506%2C40144585%2C39579033%2C27484713%2C35528322%2C30643130%2C35276657%2C25273279%2C41191764%2C37460730%2C30279650%2C31525179%2C38486966%2C41254404%2C34906982%2C21724424%2C37900727%2C40490003%2C38671062%2C37425292%2C25570199%2C38885688%2C38696121%2C38925110%2C31207466%2C24836588%2C34965874%2C28716965%2C21471638%2C35654375%2C28334963%2C28676308%2C35248810%2C21419227%2C34536230%2C39974103%2C40769034%2C39399739%2C33506209%2C34717248%2C29414401%2C33408621%2C22563311%2C26386644%2C25157216%2C22874396%2C37798921%2C40913530%2C35989149%2C32439539%2C41363150%2C39819752%2C15329073%2C28119593%2C38335090%2C25759647%2C25571555%2C38514133%2C22973215%2C22750156%2C28894834%2C41397373%2C29977189%2C28225156%2C41324025%2C20921326%2C38948730%2C31277857%2C28335018%2C29861132%2C40040033&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 02:35:36 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 02:35:36 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 02:35:36 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=31445890%2C9737437%2C33841081%2C41062786%2C29576436%2C22875868%2C32372065%2C17980999%2C39162748%2C33867912%2C36054730%2C33133815%2C29378977%2C39867597%2C27413155%2C9419036%2C32840483%2C41427281%2C8892373%2C35777988%2C26262160%2C25761260%2C40894619%2C24877680%2C41332755%2C30837823%2C39985774%2C37245559%2C30710356%2C38242691%2C26188384%2C35869138%2C19163831%2C39582595%2C25819402%2C40417558%2C38648781%2C34411517%2C17712784%2C40697162%2C39850351%2C38729074%2C38093008%2C34123657%2C24904069%2C22941838%2C39455254%2C37459853%2C32888480%2C39374038&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 02:35:36 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 02:35:36 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 02:35:37 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 02:35:37 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 02:35:37 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:35:37 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 02:35:37 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 02:35:37 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:35:37 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 02:35:37 - app.phase2.pg_ingest - INFO -    Extracting 2545 affiliations via rule-based (with cache)
2026-01-11 02:35:37 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 02:35:37 - app.phase2.rule_based_extractor - INFO -    Batch checking cache for 2545 affiliations...
2026-01-11 02:35:38 - app.phase2.rule_based_extractor - INFO -    âœ… Batch cache check complete: 0 hits, 2545 to extract
2026-01-11 02:35:38 - app.phase2.rule_based_extractor - INFO -    Extracting 2545 affiliations using rule-based parser...
2026-01-11 02:35:56 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurosurgery, Emory University, Atlanta, GA 30322.', country: 'Gabon', city: 'Atlanta', PMID: 30847390
2026-01-11 02:36:41 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'From the Department of Medical Imaging and Intervention (T.Y.S., C.H.T.) and Neuroscience Research Center, Department of Neurology, Medical Center and College of Medicine (J.-L.H.), Chang Gung University College of Medicine, and Division of Acupuncture and Moxibustion, Department of Traditional Chinese Medicine (G.-H.L.), Department of Psychiatry (S.-H.L.), Department of Pulmonary and Critical Care Medicine (N.-H.C.), Biomedical Informatics Unit, Clinical Trial Center (C.J.F.), and Department of Nephrology (J.-T.F.), Chang Gung Memorial Hospital at Linkou, Taoyuan; Graduate Institute of Mind, Brain, & Consciousness (J.-L.H.), Taipei Medical University; Brain & Consciousness Research Center (J.-L.H.), Shuang Ho Hospital, New Taipei City; School of Traditional Chinese Medicine (G.-H.L., N.-H.C.) and School of Medicine (J.-T.F.), College of Medicine (S.-H.L.), Chang Gung University; Sleep Center (G.-H.L., N.-H.C.), Chang Gung Memorial Hospital, Taoyuan, Taiwan; and Department of Radiology (M.C.), University of North Carolina School of Medicine, Chapel Hill. eldomtoh@hotmail.com.', country: 'Taiwan, Province of China', city: 'Chapel Hill', PMID: 34906982
2026-01-11 02:37:55 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA.', country: 'Morocco', city: 'Cambridge', PMID: 39005394
2026-01-11 02:37:57 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Princeton Neuroscience Institute and Department of Psychology, Princeton University, Princeton, NJ 08544, USA; Faculty of Engineering, Holon Institute of Technology, Holon 5810201, Israel.', country: 'Israel', city: 'Princeton', PMID: 39096896
2026-01-11 02:38:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurosurgery, Duke School of Medicine, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-11 02:38:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurosurgery, Duke School of Medicine, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-11 02:38:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurosurgery, Duke School of Medicine, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-11 02:38:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurosurgery, Duke School of Medicine, Durham, NC.', country: 'New Caledonia', city: 'Durham', PMID: 40894619
2026-01-11 02:38:56 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran.', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 41042753
2026-01-11 02:38:56 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran.', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 41042753
2026-01-11 02:38:56 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran.', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 41042753
2026-01-11 02:38:56 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran.', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 41042753
2026-01-11 02:38:58 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Otolaryngology, Head and Neck Surgery, WrocÅ‚aw Medical University, Poland.', country: 'Poland', city: 'Head and Neck Surgery', PMID: 41135818
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4432
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3637
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO -    Cache misses: 0
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 0
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 0
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 0
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 13092a22728c
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO -    No errors found - all geocoding successful
2026-01-11 02:39:12 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:39:12 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-11 02:39:12 - app.phase2.pg_ingest - INFO -    Affiliations fixed: 0
2026-01-11 02:39:12 - app.phase2.pg_ingest - INFO -    Geocoding failures found: 0
2026-01-11 02:39:12 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 02:39:12 - app.main - INFO - ================================================================================
2026-01-11 02:39:12 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 02:39:12 - app.main - INFO -    Total PMIDs: 500
2026-01-11 02:39:12 - app.main - INFO -    Papers parsed: 500
2026-01-11 02:39:12 - app.main - INFO -    Authorships created: 4432
2026-01-11 02:39:12 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 02:39:12 - app.main - INFO -    Affiliations with country: 2444
2026-01-11 02:39:12 - app.main - INFO -    LLM calls made: 0
2026-01-11 02:39:12 - app.main - INFO - ================================================================================
2026-01-11 02:57:35 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 254/2545 (9%)
2026-01-11 02:58:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 508/2545 (19%)
2026-01-11 02:59:11 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 762/2545 (29%)
2026-01-11 02:59:57 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1016/2545 (39%)
2026-01-11 03:00:36 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1270/2545 (49%)
2026-01-11 03:01:22 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1524/2545 (59%)
2026-01-11 03:02:05 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1778/2545 (69%)
2026-01-11 03:04:20 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 2540/2545 (99%)
2026-01-11 03:04:21 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 2545/2545 (100%)
2026-01-11 03:04:21 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 2545 results
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO -    Cached 2545 affiliation extraction results
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO -    Extraction complete: 2545 affiliations, 2486 with country
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO -    With country: 2486
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 03:04:23 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Run: 13092a22728c
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2486
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO -    LLM calls made: 0
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 03:04:29 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 03:04:29 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 03:04:29 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 03:04:30 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 03:04:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Swansea, United Kingdom' -> (51.6195955, -3.9459248)
2026-01-11 03:04:37 - app.phase2.pg_geocoding - WARNING - Could not geocode 'East China Normal, China (Mainland)' (from affiliation: Center for Bioinformatics and Computational Biology, and The Institute of Biomedical Sciences, School of Life Sciences, East China Normal University, Shanghai 200241, China. (PMID: 37995287))
2026-01-11 03:04:38 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Center for Bioinformatics and Computational Biology, and The Institute of Biomedical Sciences, School of Life Sciences, East China Normal University, Shanghai 200241, China.', country: 'China (Mainland)', city: 'East China Normal', PMID: 37995287
2026-01-11 03:04:38 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Center for Bioinformatics and Computational Biology, and The Institute of Biomedical Sciences, School of Life Sciences, East China Normal University, Shanghai 200241, China.', country: 'China (Mainland)', city: 'East China Normal', PMID: 37995287
2026-01-11 03:04:38 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Center for Bioinformatics and Computational Biology, and The Institute of Biomedical Sciences, School of Life Sciences, East China Normal University, Shanghai 200241, China.', country: 'China (Mainland)', city: 'East China Normal', PMID: 37995287
2026-01-11 03:04:38 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Center for Bioinformatics and Computational Biology, and The Institute of Biomedical Sciences, School of Life Sciences, East China Normal University, Shanghai 200241, China.', country: 'China (Mainland)', city: 'East China Normal', PMID: 37995287
2026-01-11 03:04:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Iowa, United States' -> (41.9216734, -93.3122705)
2026-01-11 03:04:46 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 30847390
2026-01-11 03:04:46 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Electrical and Computer Engineering, University of Illinois, Urbana-Champaign, IL 61801.', country: 'Israel', city: 'Urbana-Champaign', PMID: 30847390
2026-01-11 03:04:46 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 30847390
2026-01-11 03:04:46 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 30847390
2026-01-11 03:04:46 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 30847390
2026-01-11 03:04:46 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 30847390
2026-01-11 03:04:47 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Electrical and Computer Engineering, University of Illinois, Urbana-Champaign, IL 61801.', country: 'Israel', city: 'Urbana-Champaign', PMID: 30847390
2026-01-11 03:04:47 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 30847390
2026-01-11 03:04:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Virginia Commonwealth, United States' -> (40.1066758, -80.5091108)
2026-01-11 03:05:00 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran.', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 41042753
2026-01-11 03:05:00 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran.', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 41042753
2026-01-11 03:05:00 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran.', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 41042753
2026-01-11 03:05:00 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran.', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 41042753
2026-01-11 03:05:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Xiamen, China' -> (24.5438732, 118.0768065)
2026-01-11 03:05:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Sendai, Japan' -> (38.252782, 140.8851343)
2026-01-11 03:05:17 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurobiology, University of Pittsburgh School of Medicine, Pittsburgh, Pennsylvania 15213, and.', country: 'Andorra', city: 'Pittsburgh', PMID: 30700532
2026-01-11 03:05:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Texas at Austin, United States' -> (30.2547951, -97.8340141)
2026-01-11 03:05:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Paris-Saclay, France' -> (48.7119805, 2.2009355)
2026-01-11 03:05:41 - app.phase2.pg_geocoding - INFO - Geocoded 'New Mexico, United States' -> (34.5802074, -105.996047)
2026-01-11 03:05:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Alfaisal, Saudi Arabia' -> (21.5142048, 39.1875585)
2026-01-11 03:05:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Wayne State, United States' -> (43.0627627, -76.9930279)
2026-01-11 03:05:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Troy, United States' -> (42.7284117, -73.6917878)
2026-01-11 03:06:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong, Hong Kong SAR, China' -> (22.2534635, 114.190975)
2026-01-11 03:06:14 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Psychiatry, University of Cambridge UK; Behavioural and Clinical Neuroscience Institute, University of Cambridge UK; Cambridge and Peterborough NHS Foundation Trust UK.', country: 'United Kingdom', city: 'Cambridge and Peterborough NHS Foundation Trust UK', PMID: 36645968
2026-01-11 03:06:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Bar-Ilan, Israel' -> (31.7949403, 35.2185528)
2026-01-11 03:06:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Utah, United States' -> (39.4225192, -111.714358)
2026-01-11 03:06:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Florida, United States' -> (27.7567667, -81.4639835)
2026-01-11 03:06:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Central Florida, United States' -> (28.599591, -81.1971284)
2026-01-11 03:06:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Louis, United States' -> (34.5653451, -99.8014857)
2026-01-11 03:06:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Kobe, Japan' -> (34.6932379, 135.1943764)
2026-01-11 03:07:02 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: '3Center for Advanced Research and Education, School of Medicine, Asahikawa Medical University, Hokkaido, Japan; and.', country: 'Andorra', city: 'Japan', PMID: 29271713
2026-01-11 03:07:08 - app.phase2.pg_geocoding - INFO - Geocoded 'York, Canada' -> (44.0007518, -79.4372217)
2026-01-11 03:07:09 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'King Fahad Medical City, KFMC Neurosciences Center, Riyadh, Saudi Arabia; and.', country: 'Andorra', city: 'Saudi Arabia', PMID: 38306217
2026-01-11 03:07:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Lorraine, France' -> (48.4845157, 6.113035)
2026-01-11 03:07:14 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Otolaryngology, Head and Neck Surgery, WrocÅ‚aw Medical University, Poland. Electronic address: karolina.dorobisz@umw.edu.pl.', country: 'Poland', city: 'Head and Neck Surgery', PMID: 41135818
2026-01-11 03:07:14 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Otolaryngology, Head and Neck Surgery, WrocÅ‚aw Medical University, Poland.', country: 'Poland', city: 'Head and Neck Surgery', PMID: 41135818
2026-01-11 03:07:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Espoo, Finland' -> (60.2049651, 24.6559808)
2026-01-11 03:07:23 - app.phase2.pg_geocoding - INFO - Geocoded 'South Carolina, United States' -> (33.6874388, -80.4363743)
2026-01-11 03:07:35 - urllib3.connectionpool - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='nominatim.openstreetmap.org', port=443): Read timed out. (read timeout=10)")': /search?q=Birmingham%2C+United+Kingdom&format=json&limit=1
2026-01-11 03:07:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Birmingham, United Kingdom' -> (52.4796992, -1.9026911)
2026-01-11 03:07:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Hangzhou, China (Mainland)' -> (40.03555, 116.3162393)
2026-01-11 03:07:46 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139.', country: 'Morocco', city: 'Cambridge', PMID: 27671642
2026-01-11 03:07:46 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139 evelina.fedorenko@mgh.harvard.edu ngk@mit.edu.', country: 'Morocco', city: 'Cambridge', PMID: 27671642
2026-01-11 03:07:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-11 03:07:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-11 03:07:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-11 03:07:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-11 03:07:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-11 03:07:50 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-11 03:07:50 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Neurology, Mayo Clinic, Rochester, MN 55905.', country: 'Mongolia', city: 'Rochester', PMID: 29404403
2026-01-11 04:05:33 - urllib3.connectionpool - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='nominatim.openstreetmap.org', port=443): Read timed out. (read timeout=10)")': /search?q=Hong+Kong%2C+Hong+Kong&format=json&limit=1
2026-01-11 04:05:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong, Hong Kong' -> (22.2534635, 114.190975)
2026-01-11 04:05:35 - app.phase2.pg_ingest - ERROR - âŒ Validation and fix failed: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.ConnectionDoesNotExistError'>: connection was closed in the middle of operation
[SQL: SELECT geocoding_cache.location_key, geocoding_cache.latitude, geocoding_cache.longitude, geocoding_cache.affiliations, geocoding_cache.created_at 
FROM geocoding_cache 
WHERE geocoding_cache.location_key = $1::VARCHAR]
[parameters: ('city:Shenzhen,China',)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
ConnectionResetError: [Errno 54] Connection reset by peer

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 550, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 177, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 268, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 257, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 205, in bind_execute
asyncpg.exceptions.ConnectionDoesNotExistError: connection was closed in the middle of operation

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.Error: <class 'asyncpg.exceptions.ConnectionDoesNotExistError'>: connection was closed in the middle of operation

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_ingest.py", line 150, in ingest_run
    logger.info(f"      âœ… affiliation_cache table updated: {extractor_stats.get('affiliation_cache_updated', 0)}")
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/affiliation_validator.py", line 105, in validate_and_fix_run
    cached = await cache_repo.get_cached(location_key)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 463, in get_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2249, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1419, in execute
    return meth(
           ^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 527, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1641, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1986, in _exec_single_context
    self._handle_dbapi_exception(
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1967, in _exec_single_context
    self.dialect.do_execute(
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 952, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 585, in execute
    self._adapt_connection.await_(
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 563, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 513, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.DBAPIError: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.ConnectionDoesNotExistError'>: connection was closed in the middle of operation
[SQL: SELECT geocoding_cache.location_key, geocoding_cache.latitude, geocoding_cache.longitude, geocoding_cache.affiliations, geocoding_cache.created_at 
FROM geocoding_cache 
WHERE geocoding_cache.location_key = $1::VARCHAR]
[parameters: ('city:Shenzhen,China',)]
(Background on this error at: https://sqlalche.me/e/20/dbapi)
2026-01-11 04:05:35 - app.main - INFO - ================================================================================
2026-01-11 04:05:35 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 04:05:35 - app.main - INFO -    Total PMIDs: 500
2026-01-11 04:05:35 - app.main - INFO -    Papers parsed: 500
2026-01-11 04:05:35 - app.main - INFO -    Authorships created: 4432
2026-01-11 04:05:35 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 04:05:35 - app.main - INFO -    Affiliations with country: 2486
2026-01-11 04:05:35 - app.main - INFO -    LLM calls made: 0
2026-01-11 04:05:35 - app.main - INFO - ================================================================================
2026-01-11 04:05:37 - root - INFO - ================================================================================
2026-01-11 04:05:37 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 04:05:37 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 04:05:37 - root - INFO - ================================================================================
2026-01-11 09:34:40 - root - INFO - ================================================================================
2026-01-11 09:34:40 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 09:34:40 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 09:34:40 - root - INFO - ================================================================================
2026-01-11 09:44:00 - app.main - INFO - ================================================================================
2026-01-11 09:44:00 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 09:44:00 - app.main - INFO -    Force refresh: False
2026-01-11 09:44:00 - app.main - INFO - ================================================================================
2026-01-11 09:44:00 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 09:44:00 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 09:44:00 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 09:44:00 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 09:44:00 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 09:44:00 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 09:44:02 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 09:44:02 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 09:44:02 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 09:44:02 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 09:44:02 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 09:44:02 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 09:44:02 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=36645968%2C39579033%2C21307246%2C30414541%2C41034198%2C29033809%2C34958951%2C25571556%2C15329073%2C39922365%2C29268943%2C19279495%2C28225156%2C33776668%2C20465359%2C38222047%2C40302941%2C25761260%2C34301825%2C16175856%2C39371161%2C8892373%2C35121181%2C35528322%2C38769115%2C35878727%2C30249918%2C25909573%2C22144944%2C39096896%2C23072156%2C40354107%2C35695785%2C30279650%2C30643130%2C34123657%2C39194182%2C37460730%2C29439164%2C35248810%2C26124702%2C38935898%2C34823894%2C34918613%2C39374038%2C37382208%2C37425292%2C39345158%2C23914170%2C24122368%2C26232713%2C31525179%2C36054730%2C27671642%2C33142282%2C33935673%2C34411517%2C36731812%2C37105171%2C31287601%2C21419227%2C31820736%2C23482627%2C25259669%2C29271713%2C17071238%2C22207857%2C21029784%2C41279744%2C35534226%2C28335018%2C28236761%2C33867912%2C38671062%2C17271737%2C30342252%2C21750369%2C38769157%2C29397190%2C38808652%2C37739786%2C29247963%2C39870041%2C25819402%2C40260174%2C34607318%2C26386644%2C39248654%2C37995287%2C39134741%2C26991386%2C39433597%2C21471638%2C34906982%2C35169837%2C28268620%2C32610290%2C38242691%2C38925110%2C28119593%2C37487487%2C38083559%2C27046113%2C29052465%2C28993231%2C40910467%2C33912122%2C23696279%2C39968245%2C20026224%2C15876624%2C31277857%2C34130614%2C29674950%2C38696121%2C28396294%2C28918128%2C38948730%2C37875404%2C40825359%2C37638314%2C26262160%2C29958109%2C32577713%2C22874396%2C38729074%2C17971857%2C36570848%2C31875441%2C26818506%2C30440349%2C22941838%2C28334963%2C35819528%2C26679420%2C29576436%2C39554006%2C40800829%2C40516665%2C19349241%2C27413155%2C38582333%2C21471374%2C40490003%2C39399739%2C22750156%2C37229140%2C41363150%2C27408802%2C32686761&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 09:44:03 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 09:44:03 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 09:44:04 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=24982625%2C38306217%2C27199720%2C32840483%2C40343020%2C32498058%2C37932250%2C40800288%2C41022986%2C34892495%2C25816090%2C36872854%2C41039113%2C37582062%2C26949710%2C22890647%2C40417558%2C41177674%2C39985774%2C35313351%2C39479009%2C37441880%2C41135818%2C25157216%2C37292795%2C33360179%2C37798921%2C40894619%2C30238924%2C27578414%2C19163831%2C40253415%2C35185491%2C26737497%2C23643922%2C41386385%2C32828921%2C27249656%2C32442776%2C31056408%2C37019103%2C31339411%2C26188384%2C41062786%2C32435182%2C28676308%2C41167038%2C38885688%2C27182530%2C41191764%2C18982128%2C41081527%2C24904404%2C37819985%2C36828156%2C30971792%2C28716965%2C22875868%2C33789135%2C37841873%2C35311092%2C34536230%2C31342677%2C41282818%2C37968869%2C39005394%2C40817733%2C26888939%2C23577157%2C17712784%2C28622530%2C32788249%2C35777988%2C27635975%2C30827578%2C35099768%2C33293456%2C30596439%2C29891885%2C40461573%2C32198060%2C26935890%2C35113857%2C32105726%2C39455254%2C40144585%2C27199638%2C25822912%2C24836588%2C19033707%2C38486966%2C22255402%2C34587350%2C30710356%2C23366629%2C15817517%2C34965874%2C41021378%2C36246502%2C33419861%2C36989073%2C41332755%2C39867597%2C37217308%2C32439539%2C29018336%2C29190521%2C31363096%2C25571558%2C37203491%2C27956570%2C25759647%2C32372065%2C24315545%2C40697162%2C38063368%2C30216929%2C29779940%2C27918346%2C36327599%2C40018762%2C25118584%2C17980999%2C38559163%2C29861132%2C35989149%2C29093659%2C40490093%2C37961305%2C30500619%2C28839071%2C9737437%2C37066306%2C28399442%2C38496670%2C24904069%2C20811093%2C31692177%2C28268618%2C24681353%2C27935031%2C40309789%2C35118367%2C25570199%2C35395633%2C26136107%2C40769034%2C38514133%2C9419036%2C38041253&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 09:44:04 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 09:44:04 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 09:44:05 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=34717248%2C31220442%2C34408717%2C33133815%2C40695313%2C22255777%2C30740659%2C19732923%2C40039596%2C24845600%2C40830488%2C30389490%2C32180695%2C39808939%2C41453123%2C26408491%2C35966994%2C29977189%2C27534393%2C27926827%2C36966852%2C20921326%2C30831567%2C40040033%2C34774771%2C35013268%2C30257858%2C38343801%2C40239679%2C39332803%2C33506209%2C37120741%2C34849596%2C41105453%2C31578420%2C37437189%2C38648781%2C30256217%2C41266624%2C30504559%2C26642090%2C38988764%2C30837823%2C38909761%2C41427281%2C34260835%2C30367077%2C28666338%2C31419636%2C39386565%2C27311642%2C21708506%2C25273279%2C33841081%2C35907491%2C30617653%2C33306299%2C36086071%2C14656066%2C35708911%2C41275704%2C28894834%2C41349179%2C27377299%2C41335998%2C41254404%2C39819752%2C40913768%2C31741702%2C39582595%2C12614397%2C37459853%2C39990331%2C24672012%2C37745380%2C27686506%2C30700532%2C35276657%2C39850351%2C24877680%2C25948269%2C40972658%2C28268617%2C41129388%2C40766385%2C38260011%2C30238309%2C25571553%2C35654375%2C37060887%2C32694561%2C23774120%2C38318272%2C25352799%2C24293161%2C31946284%2C33372958%2C30064321%2C32410969%2C34753819%2C25000321%2C41397928%2C40720979%2C33942078%2C27019106%2C21529188%2C22563311%2C31103409%2C26072003%2C29430213%2C24995815%2C29404403%2C29378977%2C41042753%2C37086161%2C40610484%2C37467739%2C39485790%2C32378738%2C16792292%2C41205609%2C31445890%2C36121939%2C25570869%2C37215328%2C27450996%2C29525721%2C37245559%2C29414401%2C40832215%2C34421555%2C40055549%2C38813793%2C28269552%2C39213665%2C38969758%2C40147418%2C21724424%2C27325763%2C20478745%2C31207466%2C32289685%2C29678760%2C23032488%2C25122702%2C33283856%2C32656294%2C15677998%2C27524194%2C29087324&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 09:44:05 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 09:44:05 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 09:44:06 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=33408621%2C39162748%2C40913530%2C38335090%2C27148018%2C36356309%2C28406383%2C35869138%2C29460482%2C20087111%2C30038000%2C25571555%2C30134167%2C39153482%2C27729844%2C23465430%2C27408803%2C38581367%2C22973215%2C25266305%2C33137575%2C38787551%2C36634533%2C34347873%2C38093008%2C34489664%2C27484713%2C32888480%2C32231340%2C22573665%2C41324025%2C25616459%2C39464426%2C39990398%2C24285843%2C41144819%2C41397373%2C35568349%2C39322094%2C39974103%2C26446212%2C38183998%2C24639642%2C30721879%2C18440570%2C31824257%2C37900727%2C39484239%2C21373361%2C30847390&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 09:44:06 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 09:44:06 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 09:44:06 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 09:44:06 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 09:44:06 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 09:44:06 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 09:44:07 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 09:44:07 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 09:44:07 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 09:44:07 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 09:44:07 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 09:44:07 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 09:44:08 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 2545 need extraction
2026-01-11 09:44:08 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2545 affiliations...
2026-01-11 09:44:46 - app.phase2.institution_matcher - WARNING - Institution matching failed for 'CRAN, UniversitÃ©Ì de Lorraine, CNRS, Nancy, France.': Multiple rows were found when one or none was required
2026-01-11 09:58:30 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 2357 matches found
2026-01-11 09:58:30 - app.phase2.rule_based_extractor - INFO -    Extracting 188 affiliations using rule-based parser...
2026-01-11 09:58:32 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 18/188 (9%)
2026-01-11 09:58:35 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 36/188 (19%)
2026-01-11 09:58:37 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 54/188 (28%)
2026-01-11 09:58:40 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 72/188 (38%)
2026-01-11 09:58:42 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 90/188 (47%)
2026-01-11 09:58:44 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 108/188 (57%)
2026-01-11 09:58:46 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 126/188 (67%)
2026-01-11 09:58:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 144/188 (76%)
2026-01-11 09:58:51 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 162/188 (86%)
2026-01-11 09:58:52 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 180/188 (95%)
2026-01-11 09:58:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 188/188 (100%)
2026-01-11 09:58:53 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 188 results
2026-01-11 09:58:56 - app.phase2.pg_ingest - INFO -    Cached 2545 new affiliation extraction results to affiliation_cache table
2026-01-11 09:58:56 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2521 with country
2026-01-11 09:58:56 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 09:58:56 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 09:58:56 - app.phase2.pg_ingest - INFO -    With country: 2521
2026-01-11 09:58:56 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 09:58:56 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 09:58:56 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 09:58:56 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 09:58:56 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 09:58:56 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 09:58:57 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 09:58:57 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 09:59:01 - root - INFO - ================================================================================
2026-01-11 09:59:01 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 09:59:01 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 09:59:01 - root - INFO - ================================================================================
2026-01-11 09:59:42 - root - INFO - ================================================================================
2026-01-11 09:59:42 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 09:59:42 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 09:59:42 - root - INFO - ================================================================================
2026-01-11 10:00:31 - app.main - INFO - ================================================================================
2026-01-11 10:00:31 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 10:00:31 - app.main - INFO -    Force refresh: False
2026-01-11 10:00:31 - app.main - INFO - ================================================================================
2026-01-11 10:00:31 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:00:31 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 10:00:31 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 10:00:31 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 10:00:31 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:00:31 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 10:00:33 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 10:00:33 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 10:00:33 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:00:33 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 10:00:33 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 10:00:33 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 10:00:34 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=38769115%2C37739786%2C22563311%2C38343801%2C37105171%2C30249918%2C32289685%2C31875441%2C35966994%2C41349179%2C41034198%2C31419636%2C24904404%2C35118367%2C34130614%2C38729074%2C29674950%2C32788249%2C35878727%2C20465359%2C35121181%2C26072003%2C33776668%2C39005394%2C34489664%2C39248654%2C27408803%2C25759647%2C28918128%2C40354107%2C26642090%2C29052465%2C34411517%2C31339411%2C35777988%2C38988764%2C37875404%2C17712784%2C37425292%2C34918613%2C19732923%2C28269552%2C27377299%2C27019106%2C24845600%2C39484239%2C27311642%2C37441880%2C37217308%2C31946284%2C26232713%2C38969758%2C25570199%2C29271713%2C40144585%2C26935890%2C23696279%2C41105453%2C41177674%2C38306217%2C37995287%2C37487487%2C24836588%2C35395633%2C20478745%2C28268618%2C33506209%2C14656066%2C25273279%2C39974103%2C28839071%2C22144944%2C21419227%2C38514133%2C27450996%2C26408491%2C30504559%2C22573665%2C31692177%2C35013268%2C33942078%2C38260011%2C35907491%2C26446212%2C37798921%2C31277857%2C16175856%2C25118584%2C39554006%2C41363150%2C39922365%2C29891885%2C23482627%2C22255777%2C22890647%2C33137575%2C32686761%2C36731812%2C38581367%2C29678760%2C39399739%2C41266624%2C35528322%2C31287601%2C41081527%2C32442776%2C40695313%2C26386644%2C40825359%2C18440570%2C39134741%2C31741702%2C25822912%2C36645968%2C37459853%2C32198060%2C37932250%2C39990331%2C41022986%2C20087111%2C15329073%2C34906982%2C37961305%2C28676308%2C24904069%2C33867912%2C20811093%2C32610290%2C41191764%2C39582595%2C34892495%2C41335998%2C27484713%2C24293161%2C21373361%2C38486966%2C32180695%2C41205609%2C28268617%2C17071238%2C36872854%2C24639642%2C40343020%2C30134167%2C41427281%2C34408717%2C28406383%2C39096896%2C30064321%2C39479009&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:00:34 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 10:00:34 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 10:00:35 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=26262160%2C25266305%2C29397190%2C41397373%2C25352799%2C41144819%2C41386385%2C29033809%2C41062786%2C21529188%2C25570869%2C40253415%2C37229140%2C38318272%2C33142282%2C34823894%2C40055549%2C31207466%2C38935898%2C35695785%2C36121939%2C21750369%2C27918346%2C39433597%2C39808939%2C38183998%2C34536230%2C8892373%2C32694561%2C30837823%2C40040033%2C27671642%2C12614397%2C32888480%2C25816090%2C39968245%2C40766385%2C33408621%2C30414541%2C29247963%2C36966852%2C41282818%2C37968869%2C38335090%2C23914170%2C23032488%2C31342677%2C9737437%2C29087324%2C41167038%2C40610484%2C29439164%2C39579033%2C39386565%2C28396294%2C38093008%2C28268620%2C28622530%2C39985774%2C38671062%2C29018336%2C32372065%2C32656294%2C41039113%2C28993231%2C36828156%2C39819752%2C37382208%2C33419861%2C32410969%2C27046113%2C34301825%2C25761260%2C34347873%2C31824257%2C27635975%2C34421555%2C40302941%2C31220442%2C34260835%2C27413155%2C37582062%2C38813793%2C34774771%2C22874396%2C40769034%2C25948269%2C39374038%2C37203491%2C17271737%2C29093659%2C40309789%2C41275704%2C40800829%2C27956570%2C21471374%2C21471638%2C35276657%2C30831567%2C40018762%2C38696121%2C40697162%2C38041253%2C38948730%2C27408802%2C33789135%2C34123657%2C30367077%2C30710356%2C25259669%2C37467739%2C37745380%2C39990398%2C21724424%2C36054730%2C35989149%2C30238924%2C40039596%2C40910467%2C29576436%2C21708506%2C30740659%2C29460482%2C22973215%2C32378738%2C41332755%2C30643130%2C24995815%2C40913768%2C25157216%2C22207857%2C23366629%2C36570848%2C29525721%2C31578420%2C27524194%2C23643922%2C40913530%2C29404403%2C36086071%2C39371161%2C34587350%2C15677998%2C29378977%2C40516665%2C37460730%2C28225156%2C35869138%2C28335018%2C27199638&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:00:35 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 10:00:35 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 10:00:36 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=37819985%2C34849596%2C34717248%2C40147418%2C39850351%2C33841081%2C40417558%2C41042753%2C37638314%2C33293456%2C25571553%2C37086161%2C37019103%2C38925110%2C19349241%2C19033707%2C40490093%2C41397928%2C39867597%2C38885688%2C34753819%2C40832215%2C30257858%2C30342252%2C22255402%2C37900727%2C16792292%2C40260174%2C27935031%2C30596439%2C31445890%2C36634533%2C29430213%2C35099768%2C38222047%2C38787551%2C35169837%2C31056408%2C33306299%2C26949710%2C32498058%2C29414401%2C36246502%2C29861132%2C31820736%2C37841873%2C30971792%2C27926827%2C25909573%2C25122702%2C30389490%2C30847390%2C27148018%2C30617653%2C35654375%2C27534393%2C39464426%2C30238309%2C28119593%2C41021378%2C27325763%2C25571558%2C26888939%2C30279650%2C20026224%2C34607318%2C28894834%2C29977189%2C40800288%2C31363096%2C30827578%2C39322094%2C40830488%2C30500619%2C39455254%2C39870041%2C38648781%2C25571556%2C9419036%2C24672012%2C17980999%2C35708911%2C41453123%2C35113857%2C37215328%2C32577713%2C24315545%2C40720979%2C35568349%2C40490003%2C40817733%2C35311092%2C32435182%2C24122368%2C33283856%2C23774120%2C26188384%2C28716965%2C26737497%2C26679420%2C23465430%2C21029784%2C20921326%2C32231340%2C33372958%2C40894619%2C33935673%2C24877680%2C41129388%2C33912122%2C30216929%2C23072156%2C41135818%2C38242691%2C39332803%2C35185491%2C32840483%2C26136107%2C26124702%2C34958951%2C36327599%2C21307246%2C33360179%2C28666338%2C27182530%2C35819528%2C30700532%2C35313351%2C24982625%2C29190521%2C22750156%2C38496670%2C30440349%2C40461573%2C39485790%2C39194182%2C38063368%2C40972658%2C27199720%2C19279495%2C18982128%2C25571555%2C32828921%2C27578414%2C27686506%2C38083559%2C39213665%2C29779940%2C38909761%2C32439539&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:00:36 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 10:00:36 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 10:00:37 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=22941838%2C27249656%2C30038000%2C38559163%2C24681353%2C39162748%2C34965874%2C35248810%2C38582333%2C31103409%2C28334963%2C37066306%2C39153482%2C22875868%2C37437189%2C29958109%2C38769157%2C30256217%2C23577157%2C39345158%2C30721879%2C28399442%2C27729844%2C37292795%2C24285843%2C19163831%2C26991386%2C37245559%2C29268943%2C25616459%2C32105726%2C26818506%2C33133815%2C36356309%2C15876624%2C41324025%2C31525179%2C25819402%2C35534226%2C41254404%2C17971857%2C25000321%2C40239679%2C15817517%2C37120741%2C36989073%2C41279744%2C28236761%2C37060887%2C38808652&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:00:37 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 10:00:37 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 10:00:38 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 10:00:38 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 10:00:38 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:00:38 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 10:00:38 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 10:00:38 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:00:38 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 10:00:38 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 10:00:38 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 10:00:38 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 10:00:39 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 2545 need extraction
2026-01-11 10:00:39 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2545 affiliations...
2026-01-11 10:01:13 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2545 (3%), matches found: 97
2026-01-11 10:01:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2545 (7%), matches found: 187
2026-01-11 10:02:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2545 (11%), matches found: 274
2026-01-11 10:02:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2545 (15%), matches found: 366
2026-01-11 10:05:13 - root - INFO - ================================================================================
2026-01-11 10:05:13 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 10:05:13 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 10:05:13 - root - INFO - ================================================================================
2026-01-11 10:05:23 - app.main - INFO - ================================================================================
2026-01-11 10:05:23 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 10:05:23 - app.main - INFO -    Force refresh: False
2026-01-11 10:05:23 - app.main - INFO - ================================================================================
2026-01-11 10:05:23 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:05:23 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 10:05:23 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 10:05:23 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 10:05:23 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:05:23 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 10:05:25 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 10:05:25 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 10:05:25 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:05:25 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 10:05:25 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 10:05:25 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 10:05:26 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=31277857%2C31824257%2C30837823%2C36327599%2C41254404%2C40144585%2C40832215%2C37459853%2C30617653%2C25157216%2C27918346%2C39819752%2C27199720%2C22255777%2C38671062%2C27199638%2C40490003%2C40766385%2C35276657%2C25759647%2C40910467%2C31339411%2C29378977%2C32610290%2C29674950%2C38093008%2C26818506%2C28269552%2C27635975%2C25571556%2C40972658%2C39867597%2C38729074%2C41349179%2C33867912%2C37229140%2C39455254%2C41427281%2C34774771%2C33360179%2C24639642%2C34753819%2C16792292%2C32577713%2C39974103%2C40894619%2C37968869%2C32888480%2C17712784%2C40239679%2C39248654%2C18440570%2C39005394%2C30847390%2C20465359%2C21750369%2C36966852%2C19279495%2C33841081%2C34347873%2C27148018%2C29268943%2C24877680%2C39322094%2C40147418%2C29460482%2C30721879%2C36054730%2C39134741%2C31363096%2C29430213%2C14656066%2C38909761%2C20478745%2C37932250%2C28406383%2C26386644%2C24845600%2C27408803%2C30256217%2C22750156%2C35654375%2C23643922%2C36645968%2C26188384%2C27325763%2C25570199%2C37961305%2C33419861%2C21471374%2C41386385%2C37900727%2C27484713%2C28676308%2C29397190%2C35311092%2C39332803%2C31287601%2C35989149%2C37739786%2C29087324%2C37105171%2C39554006%2C39850351%2C20811093%2C32378738%2C41062786%2C24681353%2C29404403%2C25352799%2C38813793%2C40302941%2C37745380%2C32828921%2C29093659%2C37425292%2C34408717%2C34849596%2C28225156%2C27408802%2C41177674%2C41453123%2C26679420%2C39485790%2C34123657%2C25948269%2C32442776%2C24982625%2C22874396%2C36731812%2C28894834%2C28716965%2C40695313%2C41144819%2C40354107%2C41021378%2C40490093%2C30596439%2C28268618%2C26136107%2C33133815%2C32289685%2C41324025%2C32439539%2C9737437%2C25822912%2C29414401%2C24293161%2C38343801%2C27671642&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:05:26 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 10:05:26 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 10:05:27 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40913530%2C33293456%2C38885688%2C29033809%2C20026224%2C40040033%2C37467739%2C35013268%2C27377299%2C36086071%2C30238924%2C39985774%2C35819528%2C31056408%2C41081527%2C28918128%2C34489664%2C21724424%2C26949710%2C32180695%2C34301825%2C27311642%2C19033707%2C21419227%2C23482627%2C41397373%2C37441880%2C17980999%2C38335090%2C19732923%2C35121181%2C25571555%2C27534393%2C34717248%2C31445890%2C35113857%2C15677998%2C23577157%2C38260011%2C38808652%2C41039113%2C39870041%2C41105453%2C40769034%2C33372958%2C36356309%2C29247963%2C35528322%2C25816090%2C37437189%2C16175856%2C40461573%2C32410969%2C31692177%2C21029784%2C40697162%2C41279744%2C26262160%2C36872854%2C29439164%2C37638314%2C31220442%2C28396294%2C37120741%2C39194182%2C41266624%2C41205609%2C27019106%2C38787551%2C39096896%2C38769115%2C37066306%2C38063368%2C27578414%2C38925110%2C36246502%2C30414541%2C37060887%2C23366629%2C35568349%2C31875441%2C40018762%2C28622530%2C37841873%2C30257858%2C36570848%2C28666338%2C30700532%2C30279650%2C34260835%2C38948730%2C40800288%2C26072003%2C31946284%2C28839071%2C23465430%2C37487487%2C41363150%2C41397928%2C26232713%2C39484239%2C41282818%2C35695785%2C31419636%2C30134167%2C39808939%2C39399739%2C33789135%2C27935031%2C9419036%2C30216929%2C19163831%2C37875404%2C27249656%2C22875868%2C30740659%2C38582333%2C22144944%2C40825359%2C39162748%2C26737497%2C34965874%2C15329073%2C40516665%2C24836588%2C37582062%2C38486966%2C34823894%2C39464426%2C29271713%2C39922365%2C25571553%2C29190521%2C33283856%2C32435182%2C32198060%2C30367077%2C31103409%2C39582595%2C21307246%2C40260174%2C27926827%2C32105726%2C35878727%2C26124702%2C36634533%2C27956570%2C40720979%2C29779940%2C40830488&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:05:28 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 10:05:28 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 10:05:28 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40913768%2C22573665%2C40343020%2C37245559%2C29861132%2C33942078%2C27686506%2C28993231%2C24995815%2C20921326%2C22563311%2C15876624%2C38581367%2C35118367%2C37819985%2C34906982%2C25122702%2C30389490%2C22890647%2C23914170%2C25259669%2C30971792%2C35708911%2C37292795%2C41135818%2C41332755%2C22973215%2C29018336%2C39579033%2C39968245%2C37203491%2C40055549%2C38083559%2C40800829%2C32694561%2C24315545%2C38242691%2C37217308%2C34918613%2C30038000%2C31525179%2C35907491%2C30238309%2C25909573%2C38769157%2C24122368%2C30504559%2C25266305%2C25616459%2C37460730%2C30831567%2C39990398%2C29525721%2C29891885%2C21708506%2C34536230%2C18982128%2C35248810%2C8892373%2C33912122%2C26642090%2C41191764%2C27524194%2C17071238%2C38514133%2C31207466%2C28268620%2C26935890%2C35534226%2C35869138%2C24904404%2C30500619%2C23774120%2C41034198%2C32840483%2C31342677%2C39386565%2C30710356%2C41335998%2C38935898%2C21529188%2C39990331%2C21373361%2C30064321%2C27046113%2C28334963%2C40253415%2C28119593%2C39433597%2C31578420%2C27450996%2C23072156%2C36989073%2C40417558%2C32231340%2C38183998%2C33935673%2C28335018%2C33137575%2C34958951%2C34411517%2C12614397%2C38969758%2C39213665%2C25273279%2C37798921%2C40309789%2C29576436%2C41022986%2C37382208%2C38559163%2C37995287%2C39371161%2C32656294%2C27729844%2C41275704%2C25118584%2C39345158%2C40610484%2C25570869%2C32788249%2C34607318%2C35185491%2C17971857%2C30249918%2C26446212%2C28399442%2C32686761%2C27413155%2C25571558%2C34130614%2C21471638%2C26888939%2C36828156%2C35966994%2C36121939%2C19349241%2C26408491%2C26991386%2C35099768%2C22941838%2C29977189%2C41129388%2C38496670%2C41042753%2C40039596%2C35169837%2C32372065%2C34421555%2C37215328&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:05:29 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 10:05:29 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 10:05:29 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=30643130%2C31741702%2C38988764%2C22207857%2C24672012%2C28268617%2C39153482%2C33142282%2C28236761%2C29678760%2C23696279%2C39479009%2C30827578%2C30342252%2C33306299%2C22255402%2C32498058%2C27182530%2C31820736%2C29052465%2C38318272%2C38041253%2C40817733%2C29958109%2C17271737%2C35313351%2C25761260%2C15817517%2C23032488%2C39374038%2C25819402%2C37019103%2C38222047%2C30440349%2C37086161%2C41167038%2C25000321%2C20087111%2C38648781%2C35777988%2C24904069%2C35395633%2C33776668%2C34587350%2C33506209%2C24285843%2C38696121%2C38306217%2C33408621%2C34892495&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:05:30 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 10:05:30 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 10:05:30 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 10:05:30 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 10:05:30 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:05:30 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 10:05:30 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 10:05:30 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:05:30 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 10:05:30 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 10:05:30 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 10:05:30 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 10:05:32 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 2545 need extraction
2026-01-11 10:05:32 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2545 affiliations...
2026-01-11 10:05:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2545 (3%), matches found: 93
2026-01-11 10:05:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2545 (7%), matches found: 183
2026-01-11 10:06:06 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2545 (11%), matches found: 278
2026-01-11 10:06:18 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2545 (15%), matches found: 364
2026-01-11 10:06:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/2545 (19%), matches found: 459
2026-01-11 10:06:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/2545 (23%), matches found: 553
2026-01-11 10:06:56 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/2545 (27%), matches found: 648
2026-01-11 10:07:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/2545 (31%), matches found: 742
2026-01-11 10:07:20 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/2545 (35%), matches found: 836
2026-01-11 10:07:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/2545 (39%), matches found: 928
2026-01-11 10:07:44 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/2545 (43%), matches found: 1021
2026-01-11 10:07:56 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/2545 (47%), matches found: 1114
2026-01-11 10:08:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/2545 (51%), matches found: 1208
2026-01-11 10:08:19 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/2545 (55%), matches found: 1301
2026-01-11 10:08:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/2545 (58%), matches found: 1394
2026-01-11 10:08:42 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/2545 (62%), matches found: 1486
2026-01-11 10:08:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1700/2545 (66%), matches found: 1578
2026-01-11 10:09:05 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1800/2545 (70%), matches found: 1669
2026-01-11 10:09:16 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1900/2545 (74%), matches found: 1760
2026-01-11 10:09:28 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2000/2545 (78%), matches found: 1849
2026-01-11 10:09:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2100/2545 (82%), matches found: 1942
2026-01-11 10:09:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2200/2545 (86%), matches found: 2035
2026-01-11 10:10:05 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2300/2545 (90%), matches found: 2127
2026-01-11 10:10:16 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2400/2545 (94%), matches found: 2218
2026-01-11 10:10:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2500/2545 (98%), matches found: 2312
2026-01-11 10:10:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2545/2545 (100%), matches found: 2352
2026-01-11 10:10:32 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 2352 matches found
2026-01-11 10:10:32 - app.phase2.rule_based_extractor - INFO -    Extracting 193 affiliations using rule-based parser...
2026-01-11 10:10:34 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 19/193 (9%)
2026-01-11 10:10:35 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 38/193 (19%)
2026-01-11 10:10:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 57/193 (29%)
2026-01-11 10:10:39 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 76/193 (39%)
2026-01-11 10:10:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 95/193 (49%)
2026-01-11 10:10:44 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 114/193 (59%)
2026-01-11 10:10:47 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 133/193 (68%)
2026-01-11 10:10:49 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 152/193 (78%)
2026-01-11 10:10:51 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 171/193 (88%)
2026-01-11 10:10:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 190/193 (98%)
2026-01-11 10:10:54 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 193/193 (100%)
2026-01-11 10:10:54 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 193 results
2026-01-11 10:10:57 - app.phase2.pg_ingest - INFO -    Cached 2545 new affiliation extraction results to affiliation_cache table
2026-01-11 10:10:57 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2516 with country
2026-01-11 10:10:57 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 10:10:57 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 10:10:57 - app.phase2.pg_ingest - INFO -    With country: 2516
2026-01-11 10:10:57 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 10:10:57 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:10:57 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 10:10:57 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 10:10:58 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 10:10:58 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 10:10:58 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 10:10:58 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 10:11:05 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 10:11:05 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2516
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO - 
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 0
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 2352
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 193
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 189
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO - 
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO - 
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 10:11:06 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 10:11:06 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:11:06 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 10:11:08 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 10:11:12 - app.phase2.pg_geocoding - INFO - Geocoded 'St. Paul, United States' -> (44.9497487, -93.0931028)
2026-01-11 10:11:31 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Anesthesiology and Perioperative Care; and.', country: 'Andorra', city: 'Anesthesiology and Perioperative Care', PMID: 25909573
2026-01-11 10:11:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Mathematical Sciences, KAIST, Daejoen, 34141 Republic of Korea', country: 'Korea, Republic of', city: 'Daejoen', PMID: 27534393
2026-01-11 10:11:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Bournemouth, United Kingdom' -> (50.7201514, -1.8799118)
2026-01-11 10:11:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Hertfordshire, United Kingdom' -> (51.8400523, -0.0978552)
2026-01-11 10:11:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Shanghai, China (Mainland)' -> (31.1427359, 121.8041131)
2026-01-11 10:12:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Fribourg, Switzerland' -> (46.6789116, 7.1027113)
2026-01-11 10:16:14 - root - INFO - ================================================================================
2026-01-11 10:16:14 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 10:16:14 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 10:16:14 - root - INFO - ================================================================================
2026-01-11 10:16:19 - app.main - INFO - ================================================================================
2026-01-11 10:16:19 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 10:16:19 - app.main - INFO -    Force refresh: False
2026-01-11 10:16:19 - app.main - INFO - ================================================================================
2026-01-11 10:16:19 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:16:19 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 10:16:19 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 10:16:19 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 10:16:19 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:16:19 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 10:16:21 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 10:16:21 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 10:16:21 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:16:21 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 10:16:21 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 10:16:21 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 10:16:22 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=14656066%2C38813793%2C39399739%2C38648781%2C38935898%2C15817517%2C25948269%2C28918128%2C28268617%2C24995815%2C24639642%2C33283856%2C37995287%2C29247963%2C40417558%2C41324025%2C36828156%2C21307246%2C22941838%2C38808652%2C37798921%2C28269552%2C38581367%2C41279744%2C22875868%2C39974103%2C30827578%2C16175856%2C38222047%2C25266305%2C39554006%2C37437189%2C29414401%2C26262160%2C32498058%2C33408621%2C9737437%2C25352799%2C29674950%2C38925110%2C31103409%2C36327599%2C25571555%2C27046113%2C34536230%2C40302941%2C40800829%2C34123657%2C39579033%2C35311092%2C39345158%2C26232713%2C29052465%2C28676308%2C39808939%2C37203491%2C19163831%2C39990331%2C39922365%2C26818506%2C40040033%2C38183998%2C25000321%2C17712784%2C26136107%2C17271737%2C31525179%2C36086071%2C41135818%2C25761260%2C40720979%2C29404403%2C40817733%2C30134167%2C25571556%2C41363150%2C21029784%2C31578420%2C31875441%2C30837823%2C25822912%2C30440349%2C27671642%2C25616459%2C33133815%2C29018336%2C29779940%2C25273279%2C40018762%2C27413155%2C27635975%2C30249918%2C41275704%2C41191764%2C27325763%2C21373361%2C27249656%2C17071238%2C34958951%2C38885688%2C28399442%2C28993231%2C25816090%2C36246502%2C24904404%2C39485790%2C28666338%2C29678760%2C30256217%2C32442776%2C35534226%2C31419636%2C37245559%2C27199720%2C39479009%2C38909761%2C27926827%2C26679420%2C22255402%2C40490003%2C39194182%2C35248810%2C36989073%2C26124702%2C38696121%2C37086161%2C35869138%2C33935673%2C28119593%2C38260011%2C41335998%2C16792292%2C41397928%2C41034198%2C41397373%2C40610484%2C26386644%2C28236761%2C25759647%2C21471638%2C40309789%2C35989149%2C15329073%2C37961305%2C34408717%2C26737497%2C37739786%2C35878727%2C33841081%2C39968245&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:16:22 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 10:16:22 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 10:16:23 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40769034%2C26072003%2C27534393%2C31692177%2C31363096%2C21471374%2C32694561%2C40055549%2C20478745%2C36054730%2C28334963%2C36121939%2C21419227%2C23482627%2C30389490%2C40825359%2C31287601%2C34130614%2C23577157%2C27199638%2C32610290%2C37467739%2C32686761%2C37638314%2C28406383%2C28268620%2C26446212%2C38969758%2C39464426%2C31820736%2C38559163%2C30596439%2C21750369%2C39582595%2C35568349%2C38083559%2C28716965%2C39867597%2C37425292%2C24672012%2C20921326%2C19033707%2C40516665%2C33293456%2C27524194%2C34892495%2C28839071%2C36356309%2C22890647%2C30504559%2C33306299%2C25571558%2C31220442%2C41266624%2C35276657%2C34489664%2C30740659%2C29958109%2C8892373%2C34301825%2C30847390%2C39248654%2C38242691%2C25570869%2C35185491%2C37215328%2C32372065%2C38769157%2C34260835%2C32435182%2C22973215%2C39371161%2C33776668%2C37292795%2C37900727%2C31207466%2C25819402%2C29268943%2C40239679%2C37229140%2C40147418%2C28396294%2C25157216%2C33789135%2C35654375%2C23643922%2C23914170%2C23072156%2C30038000%2C20026224%2C31277857%2C41386385%2C37968869%2C35966994%2C40695313%2C24982625%2C35695785%2C23774120%2C32888480%2C29861132%2C19349241%2C41332755%2C41205609%2C24845600%2C29087324%2C25259669%2C26949710%2C20465359%2C22144944%2C40354107%2C35907491%2C27408803%2C31824257%2C24877680%2C18440570%2C34587350%2C33372958%2C24293161%2C29576436%2C38514133%2C12614397%2C37875404%2C41022986%2C33142282%2C34411517%2C20087111%2C32198060%2C17971857%2C34347873%2C34823894%2C28622530%2C26935890%2C31339411%2C32439539%2C34717248%2C34774771%2C27956570%2C40913530%2C30721879%2C39386565%2C32378738%2C38041253%2C32410969%2C30279650%2C27578414%2C37120741%2C35819528%2C29033809%2C39096896%2C41427281&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:16:25 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 10:16:25 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 10:16:25 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=29190521%2C33942078%2C40800288%2C35395633%2C32828921%2C39322094%2C29460482%2C19732923%2C30257858%2C38988764%2C37841873%2C31342677%2C25118584%2C22207857%2C29093659%2C39985774%2C30414541%2C40832215%2C34421555%2C35777988%2C41062786%2C32289685%2C40830488%2C28894834%2C27019106%2C40461573%2C38948730%2C30238309%2C24285843%2C38093008%2C40766385%2C22563311%2C40913768%2C36731812%2C37060887%2C39870041%2C38729074%2C27935031%2C37582062%2C27484713%2C40039596%2C37066306%2C23465430%2C37217308%2C35013268%2C41129388%2C35113857%2C29397190%2C33506209%2C31056408%2C23696279%2C30971792%2C38671062%2C35121181%2C23032488%2C37019103%2C34753819%2C39433597%2C34607318%2C32180695%2C32656294%2C29525721%2C24836588%2C41042753%2C30500619%2C36570848%2C32105726%2C32840483%2C41039113%2C34906982%2C33867912%2C38582333%2C27729844%2C22874396%2C39162748%2C35169837%2C38787551%2C38496670%2C29977189%2C37459853%2C41105453%2C31741702%2C41453123%2C40972658%2C39213665%2C25571553%2C21724424%2C30710356%2C29439164%2C37745380%2C29271713%2C36966852%2C22750156%2C38343801%2C38306217%2C30831567%2C30367077%2C25122702%2C26188384%2C41144819%2C30238924%2C27148018%2C24315545%2C40910467%2C30700532%2C24122368%2C20811093%2C9419036%2C29378977%2C24681353%2C26408491%2C33360179%2C26642090%2C40697162%2C32577713%2C27377299%2C39153482%2C38769115%2C37460730%2C24904069%2C27182530%2C18982128%2C27450996%2C30216929%2C34918613%2C39134741%2C40260174%2C40253415%2C35099768%2C39332803%2C30342252%2C40490093%2C37487487%2C22255777%2C41021378%2C23366629%2C15677998%2C41167038%2C21708506%2C40144585%2C26888939%2C40343020%2C28268618%2C33419861%2C25909573%2C41081527%2C19279495%2C37932250%2C32231340%2C30643130&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:16:26 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 10:16:26 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 10:16:26 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=36872854%2C35708911%2C37441880%2C35313351%2C25570199%2C38063368%2C29430213%2C36634533%2C33912122%2C17980999%2C38486966%2C30617653%2C28225156%2C38335090%2C41177674%2C28335018%2C21529188%2C41282818%2C31445890%2C29891885%2C41254404%2C41349179%2C34849596%2C37105171%2C34965874%2C30064321%2C26991386%2C39850351%2C35118367%2C27311642%2C27686506%2C22573665%2C39374038%2C39484239%2C39990398%2C27918346%2C39819752%2C31946284%2C27408802%2C37819985%2C39455254%2C38318272%2C37382208%2C40894619%2C32788249%2C36645968%2C39005394%2C15876624%2C33137575%2C35528322&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:16:27 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 10:16:27 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 10:16:27 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 10:16:27 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 10:16:27 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:16:27 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 10:16:27 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 10:16:27 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:16:27 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 10:16:27 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 10:16:27 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 10:16:27 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 10:16:29 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 2545 need extraction
2026-01-11 10:16:29 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2545 affiliations...
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    Loaded 1716 institutions to memory (1716 normalized names, 205 aliases)
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2545 (3%), matches found: 90
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2545 (7%), matches found: 181
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2545 (11%), matches found: 273
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2545 (15%), matches found: 368
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/2545 (19%), matches found: 460
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/2545 (23%), matches found: 545
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/2545 (27%), matches found: 638
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/2545 (31%), matches found: 729
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/2545 (35%), matches found: 820
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/2545 (39%), matches found: 912
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/2545 (43%), matches found: 1007
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/2545 (47%), matches found: 1101
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/2545 (51%), matches found: 1198
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/2545 (55%), matches found: 1288
2026-01-11 10:16:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/2545 (58%), matches found: 1382
2026-01-11 10:16:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/2545 (62%), matches found: 1472
2026-01-11 10:16:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1700/2545 (66%), matches found: 1566
2026-01-11 10:16:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1800/2545 (70%), matches found: 1657
2026-01-11 10:16:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1900/2545 (74%), matches found: 1752
2026-01-11 10:16:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2000/2545 (78%), matches found: 1844
2026-01-11 10:16:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2100/2545 (82%), matches found: 1937
2026-01-11 10:16:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2200/2545 (86%), matches found: 2028
2026-01-11 10:16:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2300/2545 (90%), matches found: 2124
2026-01-11 10:16:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2400/2545 (94%), matches found: 2218
2026-01-11 10:16:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2500/2545 (98%), matches found: 2312
2026-01-11 10:16:30 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2545/2545 (100%), matches found: 2352
2026-01-11 10:16:30 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 2352 matches found
2026-01-11 10:16:30 - app.phase2.rule_based_extractor - INFO -    Extracting 193 affiliations using rule-based parser...
2026-01-11 10:16:32 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 19/193 (9%)
2026-01-11 10:16:34 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 38/193 (19%)
2026-01-11 10:16:37 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 57/193 (29%)
2026-01-11 10:16:40 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 76/193 (39%)
2026-01-11 10:16:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 95/193 (49%)
2026-01-11 10:16:43 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 114/193 (59%)
2026-01-11 10:16:47 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 133/193 (68%)
2026-01-11 10:16:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 152/193 (78%)
2026-01-11 10:16:52 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 171/193 (88%)
2026-01-11 10:16:54 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 190/193 (98%)
2026-01-11 10:16:54 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 193/193 (100%)
2026-01-11 10:16:54 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 193 results
2026-01-11 10:16:54 - app.phase2.rule_based_extractor - INFO -       Auto-added to institution_geo table: 2 institutions
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO -    Cached 2545 new affiliation extraction results to affiliation_cache table
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2516 with country
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO -    With country: 2516
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 10:16:57 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2516
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO - 
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 0
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 2352
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 193
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 2
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 189
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO - 
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO - 
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 10:17:04 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 10:17:04 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:17:04 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 10:17:06 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 10:17:25 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Anesthesiology and Perioperative Care; and.', country: 'Andorra', city: 'Anesthesiology and Perioperative Care', PMID: 25909573
2026-01-11 10:17:41 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Mathematical Sciences, KAIST, Daejoen, 34141 Republic of Korea', country: 'Korea, Republic of', city: 'Daejoen', PMID: 27534393
2026-01-11 10:17:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Fribourg, Switzerland' -> (46.6789116, 7.1027113)
2026-01-11 10:17:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Waikato, New Zealand' -> (-37.7792272, 175.2010324)
2026-01-11 10:17:53 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'INSERM U846, Stem Cell and Brain Research Institute, Bron Cedex, France', country: 'France', city: 'Bron Cedex', PMID: 27534393
2026-01-11 10:17:53 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-11 10:17:53 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-11 10:17:53 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-11 10:17:53 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan', country: 'Japan', city: 'Saitama Japan', PMID: 27534393
2026-01-11 10:17:56 - app.phase2.pg_geocoding - INFO - Geocoded 'North Texas, United States' -> (32.8559987, -97.2134349)
2026-01-11 10:18:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Georgia State, United States' -> (33.7501652, -84.3859566)
2026-01-11 10:18:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Drexel, United States' -> (38.4794593, -94.6085663)
2026-01-11 10:18:02 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Mathematical Sciences, Indiana University â€“ Purdue University, Indianapolis, IN 46202 USA', country: 'Korea, Republic of', city: 'Daejoen', PMID: 27534393
2026-01-11 10:18:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Keele, United Kingdom' -> (53.0038078, -2.2877425)
2026-01-11 10:18:09 - app.phase2.pg_geocoding - INFO - Geocoded 'College Station, United States' -> (30.6183939, -96.3455991)
2026-01-11 10:18:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Beijing, China (Mainland)' -> (39.9918215, 116.3039468)
2026-01-11 10:18:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Texas Tech, United States' -> (33.5475956, -101.8841907)
2026-01-11 10:18:24 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'National Institute for Physiological Sciences, Okazaki, Aichi Japan', country: 'Japan', city: 'Aichi Japan', PMID: 27534393
2026-01-11 10:18:25 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Physics, Institute for Research in Fundamental Sciences (IPM), Tehran, 19395-5531 Iran', country: 'Iran, Islamic Republic of', city: 'Tehran', PMID: 27534393
2026-01-11 10:18:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Sussex, United Kingdom' -> (50.9445139, -0.0622673)
2026-01-11 10:18:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Ewha Womans, South Korea' -> (37.5643371, 126.9468925)
2026-01-11 10:18:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Science and Technology, South Korea' -> (36.3698812, 127.3623793)
2026-01-11 10:18:45 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Nonlinear Dynamics and Complex Systems, Institute of Computer Science, The Czech Academy of Sciences, 182 07 Prague, Czech Republic', country: 'Czechia', city: 'The Czech Academy of Sciences', PMID: 27534393
2026-01-11 10:18:45 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Nonlinear Dynamics and Complex Systems, Institute of Computer Science, The Czech Academy of Sciences, 182 07 Prague, Czech Republic', country: 'Czechia', city: 'The Czech Academy of Sciences', PMID: 27534393
2026-01-11 10:18:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Herston, Australia' -> (-27.4496625, 153.0237294)
2026-01-11 10:18:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Life Sciences, Brain Mind Institute and School of Computer and Communication Sciences, Ecole Polytechnique Federal de Lausanne (EPFL), 1015 Lausanne, Switzerland', country: 'Switzerland', city: 'Ecole Polytechnique Federal de Lausanne (EPFL', PMID: 27534393
2026-01-11 10:18:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Life Sciences, Brain Mind Institute and School of Computer and Communication Sciences, Ecole Polytechnique Federal de Lausanne (EPFL), 1015 Lausanne, Switzerland', country: 'Switzerland', city: 'Ecole Polytechnique Federal de Lausanne (EPFL', PMID: 27534393
2026-01-11 10:18:50 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'School of Life Sciences, Brain Mind Institute and School of Computer and Communication Sciences, Ecole Polytechnique Federal de Lausanne (EPFL), 1015 Lausanne, Switzerland', country: 'Switzerland', city: 'Ecole Polytechnique Federal de Lausanne (EPFL', PMID: 27534393
2026-01-11 10:18:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Southern Denmark, Denmark' -> (55.4873075, 9.4827284)
2026-01-11 10:19:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Ashburn, United States' -> (39.0437192, -77.4874899)
2026-01-11 10:19:03 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139.', country: 'Morocco', city: 'Cambridge', PMID: 27671642
2026-01-11 10:19:03 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139 evelina.fedorenko@mgh.harvard.edu ngk@mit.edu.', country: 'Morocco', city: 'Cambridge', PMID: 27671642
2026-01-11 10:19:21 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: '3Center for Advanced Research and Education, School of Medicine, Asahikawa Medical University, Hokkaido, Japan; and.', country: 'Andorra', city: 'Japan', PMID: 29271713
2026-01-11 10:19:46 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Electrical and Computer Engineering, University of Illinois, Urbana-Champaign, IL 61801.', country: 'Israel', city: 'Urbana-Champaign', PMID: 30847390
2026-01-11 10:19:48 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Department of Electrical and Computer Engineering, University of Illinois, Urbana-Champaign, IL 61801.', country: 'Israel', city: 'Urbana-Champaign', PMID: 30847390
2026-01-11 10:19:49 - app.phase2.affiliation_validator - INFO - Geocoding cache hit with null coordinates - affiliation: 'Center for Functional Imaging, Molecular Biophysics and Integrated Bioimaging, Lawrence Berkeley National Laboratory, Berkeley, CA, USA.', country: 'United States', city: 'Molecular Biophysics and Integrated Bioimaging', PMID: 31207466
2026-01-11 10:19:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Kwazulu-Natal, South Africa' -> (-28.503833, 30.8875009)
2026-01-11 10:19:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Cape Town, South Africa' -> (-33.9288301, 18.4172197)
2026-01-11 10:20:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Texas at Dallas, United States' -> (32.8707905, -96.7668501)
2026-01-11 10:20:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Taipei Medical, Taiwan' -> (25.0252486, 121.5614621)
2026-01-11 10:31:08 - root - INFO - ================================================================================
2026-01-11 10:31:08 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 10:31:08 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 10:31:08 - root - INFO - ================================================================================
2026-01-11 10:31:17 - app.main - INFO - ================================================================================
2026-01-11 10:31:17 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 10:31:17 - app.main - INFO -    Force refresh: False
2026-01-11 10:31:17 - app.main - INFO - ================================================================================
2026-01-11 10:31:17 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:31:17 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 10:31:17 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 10:31:17 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 10:31:17 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:31:17 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 10:31:19 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 10:31:19 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 10:31:19 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:31:19 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 10:31:19 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 10:31:19 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 10:31:20 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40417558%2C32180695%2C37060887%2C25616459%2C40309789%2C33133815%2C35528322%2C28622530%2C29414401%2C40830488%2C35013268%2C31207466%2C22875868%2C26818506%2C27311642%2C26188384%2C35708911%2C36327599%2C23482627%2C27524194%2C29268943%2C37120741%2C30279650%2C38969758%2C39870041%2C38242691%2C41266624%2C40913768%2C27450996%2C26679420%2C9737437%2C22941838%2C40490093%2C35313351%2C21471638%2C27635975%2C24836588%2C21029784%2C26386644%2C35169837%2C39322094%2C16792292%2C39867597%2C35878727%2C38582333%2C32378738%2C32105726%2C30389490%2C34347873%2C14656066%2C38648781%2C27199720%2C40018762%2C20811093%2C39332803%2C34774771%2C33506209%2C23072156%2C27534393%2C29087324%2C19033707%2C40825359%2C30440349%2C23643922%2C41332755%2C34587350%2C27578414%2C34411517%2C28993231%2C41397928%2C35695785%2C37229140%2C27377299%2C15677998%2C37245559%2C40695313%2C21708506%2C15817517%2C21529188%2C32686761%2C33942078%2C37932250%2C27408803%2C25273279%2C41427281%2C20465359%2C34753819%2C41039113%2C32498058%2C29674950%2C21750369%2C40817733%2C20026224%2C30238924%2C24995815%2C31946284%2C38222047%2C25759647%2C35777988%2C38988764%2C30342252%2C33935673%2C32435182%2C36054730%2C40260174%2C26124702%2C30710356%2C40039596%2C37019103%2C31692177%2C37841873%2C39162748%2C32442776%2C38183998%2C22144944%2C37437189%2C40516665%2C30367077%2C25000321%2C40910467%2C27199638%2C8892373%2C41081527%2C36356309%2C29525721%2C32888480%2C40800829%2C30643130%2C39134741%2C24293161%2C39371161%2C33408621%2C31741702%2C26737497%2C38769115%2C41397373%2C30238309%2C36086071%2C18982128%2C39485790%2C21471374%2C41034198%2C39990331%2C35099768%2C41167038%2C30740659%2C23577157%2C26446212%2C25157216%2C41022986&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:31:21 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 10:31:21 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 10:31:21 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=32198060%2C28335018%2C33360179%2C37875404%2C31578420%2C30249918%2C24315545%2C41324025%2C25822912%2C34130614%2C26949710%2C24845600%2C35568349%2C39005394%2C39345158%2C35869138%2C26072003%2C37086161%2C38671062%2C37217308%2C24122368%2C31103409%2C41386385%2C35185491%2C34906982%2C22890647%2C38486966%2C19349241%2C29460482%2C23465430%2C33283856%2C40913530%2C31820736%2C27926827%2C33776668%2C24285843%2C26642090%2C27413155%2C35907491%2C22255402%2C41335998%2C34489664%2C39484239%2C37460730%2C23914170%2C40147418%2C31287601%2C28268620%2C31445890%2C37215328%2C28119593%2C22207857%2C36121939%2C38260011%2C29093659%2C19732923%2C27046113%2C41062786%2C41279744%2C31342677%2C33841081%2C35113857%2C37638314%2C23032488%2C29861132%2C30596439%2C40720979%2C22573665%2C29033809%2C28839071%2C38343801%2C36966852%2C41254404%2C23696279%2C25571556%2C17980999%2C38925110%2C26888939%2C24672012%2C39433597%2C39922365%2C38559163%2C28918128%2C34260835%2C16175856%2C27484713%2C29977189%2C25118584%2C33419861%2C32694561%2C22255777%2C23774120%2C32610290%2C31277857%2C41135818%2C34849596%2C28396294%2C34301825%2C15876624%2C34892495%2C41177674%2C30721879%2C25352799%2C27671642%2C40253415%2C25909573%2C26408491%2C28666338%2C30256217%2C40144585%2C25948269%2C38063368%2C37739786%2C27148018%2C38696121%2C33867912%2C27686506%2C34717248%2C39579033%2C30971792%2C19163831%2C28225156%2C21307246%2C36634533%2C32840483%2C30257858%2C26991386%2C39985774%2C28334963%2C41042753%2C38808652%2C17071238%2C39386565%2C27249656%2C37745380%2C38729074%2C38083559%2C29891885%2C24639642%2C38581367%2C35534226%2C29439164%2C25570199%2C40239679%2C36645968%2C19279495%2C27935031%2C39248654%2C41129388%2C41275704&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:31:22 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 10:31:22 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 10:31:22 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=38948730%2C26935890%2C40972658%2C35654375%2C41363150%2C23366629%2C37441880%2C40055549%2C17712784%2C28406383%2C37961305%2C24877680%2C32439539%2C29247963%2C38909761%2C30414541%2C39968245%2C37382208%2C37292795%2C33372958%2C37467739%2C30134167%2C27956570%2C37900727%2C34607318%2C28399442%2C27729844%2C28268617%2C29018336%2C36872854%2C33142282%2C28269552%2C25570869%2C40800288%2C20921326%2C39194182%2C38514133%2C17971857%2C37105171%2C31824257%2C25571555%2C35989149%2C36828156%2C30831567%2C27182530%2C33306299%2C30837823%2C30700532%2C38769157%2C35248810%2C22563311%2C35311092%2C28894834%2C39974103%2C37798921%2C22973215%2C12614397%2C33293456%2C40490003%2C31875441%2C39213665%2C40769034%2C41205609%2C38496670%2C40766385%2C35121181%2C28268618%2C40302941%2C34421555%2C39096896%2C26136107%2C37203491%2C36731812%2C30038000%2C24681353%2C38318272%2C37995287%2C41144819%2C27325763%2C38306217%2C32372065%2C35118367%2C37582062%2C34408717%2C32828921%2C40832215%2C38041253%2C27019106%2C29678760%2C39850351%2C41349179%2C32577713%2C29397190%2C21373361%2C21724424%2C20087111%2C35966994%2C39374038%2C29404403%2C29958109%2C41021378%2C20478745%2C39399739%2C41453123%2C25819402%2C41105453%2C37487487%2C35395633%2C24982625%2C39455254%2C40894619%2C25122702%2C30827578%2C29576436%2C32656294%2C40610484%2C39554006%2C38787551%2C21419227%2C40040033%2C39464426%2C30617653%2C34823894%2C29779940%2C40354107%2C28716965%2C25571553%2C36570848%2C34965874%2C31525179%2C40697162%2C40343020%2C22750156%2C27918346%2C37425292%2C30504559%2C29271713%2C25571558%2C34958951%2C34918613%2C37459853%2C27408802%2C37968869%2C31220442%2C25761260%2C35819528%2C28676308%2C39153482%2C26262160%2C29052465&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:31:23 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 10:31:23 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 10:31:24 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=15329073%2C36246502%2C30847390%2C38885688%2C41282818%2C24904069%2C38813793%2C29378977%2C39479009%2C25259669%2C34123657%2C24904404%2C39819752%2C33789135%2C39990398%2C32788249%2C29430213%2C37819985%2C31339411%2C9419036%2C30216929%2C28236761%2C34536230%2C38093008%2C31363096%2C25816090%2C41191764%2C38335090%2C26232713%2C39808939%2C39582595%2C38935898%2C35276657%2C32410969%2C25266305%2C17271737%2C30500619%2C22874396%2C37066306%2C31056408%2C32231340%2C36989073%2C33912122%2C40461573%2C29190521%2C31419636%2C32289685%2C33137575%2C30064321%2C18440570&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 10:31:24 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 10:31:24 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 10:31:24 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 10:31:24 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 10:31:24 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:31:24 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 10:31:25 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 10:31:25 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:31:25 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 10:31:25 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 10:31:25 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 10:31:25 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 10:31:26 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 2545 need extraction
2026-01-11 10:31:26 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2545 affiliations...
2026-01-11 10:31:26 - app.phase2.institution_matcher - INFO -    Loaded 1718 institutions to memory (1718 normalized names, 205 aliases)
2026-01-11 10:31:26 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2545 (3%), matches found: 96
2026-01-11 10:31:26 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2545 (7%), matches found: 189
2026-01-11 10:31:26 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2545 (11%), matches found: 273
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2545 (15%), matches found: 363
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/2545 (19%), matches found: 456
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/2545 (23%), matches found: 550
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/2545 (27%), matches found: 640
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/2545 (31%), matches found: 733
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/2545 (35%), matches found: 822
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/2545 (39%), matches found: 917
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/2545 (43%), matches found: 1009
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/2545 (47%), matches found: 1103
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/2545 (51%), matches found: 1197
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/2545 (55%), matches found: 1291
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/2545 (58%), matches found: 1379
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/2545 (62%), matches found: 1472
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1700/2545 (66%), matches found: 1559
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1800/2545 (70%), matches found: 1653
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1900/2545 (74%), matches found: 1749
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2000/2545 (78%), matches found: 1842
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2100/2545 (82%), matches found: 1939
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2200/2545 (86%), matches found: 2032
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2300/2545 (90%), matches found: 2128
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2400/2545 (94%), matches found: 2224
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2500/2545 (98%), matches found: 2313
2026-01-11 10:31:27 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2545/2545 (100%), matches found: 2352
2026-01-11 10:31:27 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 2352 matches found
2026-01-11 10:31:27 - app.phase2.rule_based_extractor - INFO -    Extracting 193 affiliations using rule-based parser...
2026-01-11 10:31:29 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 19/193 (9%)
2026-01-11 10:31:31 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 38/193 (19%)
2026-01-11 10:31:34 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 57/193 (29%)
2026-01-11 10:31:36 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 76/193 (39%)
2026-01-11 10:31:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 95/193 (49%)
2026-01-11 10:31:40 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 114/193 (59%)
2026-01-11 10:31:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 133/193 (68%)
2026-01-11 10:31:44 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 152/193 (78%)
2026-01-11 10:31:46 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 171/193 (88%)
2026-01-11 10:31:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 190/193 (98%)
2026-01-11 10:31:49 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 193/193 (100%)
2026-01-11 10:31:49 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 193 results
2026-01-11 10:31:51 - app.phase2.pg_ingest - INFO -    Cached 2545 new affiliation extraction results to affiliation_cache table
2026-01-11 10:31:51 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2516 with country
2026-01-11 10:31:51 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 10:31:51 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 10:31:51 - app.phase2.pg_ingest - INFO -    With country: 2516
2026-01-11 10:31:51 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 10:31:51 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:31:51 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 10:31:51 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 10:31:51 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 10:31:51 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 10:31:52 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 10:31:52 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2516
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO - 
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 0
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 2352
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 193
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 189
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO - 
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO - 
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 10:31:58 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 10:31:58 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:31:58 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 10:31:59 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 10:31:59 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:31:59 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-11 10:31:59 - app.phase2.affiliation_validator - INFO -    Found 343 unique location keys from 4432 authorships
2026-01-11 10:32:00 - app.phase2.affiliation_validator - INFO -    Batch query complete: 336/343 found in cache
2026-01-11 10:32:00 - app.phase2.affiliation_validator - INFO -    Processing 7 unique location keys via Nominatim...
2026-01-11 10:32:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Vienna, Austria' -> (48.2083537, 16.3725042)
2026-01-11 10:32:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Southern California, United States' -> (33.9510011, -118.2062682)
2026-01-11 10:32:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Agriculture and Technology, Japan' -> (35.699409, 139.5184335)
2026-01-11 10:32:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Changsha, China (Mainland)' -> (22.9556779, 113.4220234)
2026-01-11 10:32:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Alpes, France' -> (45.2968119, 4.6604809)
2026-01-11 10:32:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Technology Sydney, Australia' -> (-33.8832536, 151.2003294)
2026-01-11 10:32:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Essex, United Kingdom' -> (51.7704679, 0.4646698)
2026-01-11 10:32:15 - app.phase2.affiliation_validator - INFO -    Batch updating affiliations for 321 cached locations...
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 321 locations
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4432
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3756
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO -    Cache misses: 32
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 32
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 23
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 13
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 23 error affiliations with LLM...
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO -    Collecting 23 unique error affiliations for LLM fix
2026-01-11 10:34:58 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-11 10:34:58 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 23 affiliations...
2026-01-11 10:34:58 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 23 affiliations...
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    Loaded 1718 institutions to memory (1718 normalized names, 205 aliases)
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/23 (8%), matches found: 1
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/23 (17%), matches found: 3
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/23 (26%), matches found: 5
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/23 (34%), matches found: 7
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/23 (43%), matches found: 9
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/23 (52%), matches found: 11
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/23 (60%), matches found: 13
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/23 (69%), matches found: 15
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/23 (78%), matches found: 17
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/23 (86%), matches found: 19
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 22/23 (95%), matches found: 20
2026-01-11 10:34:59 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 23/23 (100%), matches found: 21
2026-01-11 10:34:59 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 21 matches found
2026-01-11 10:34:59 - app.phase2.affiliation_extractor - INFO -    Extracting 2 affiliations via LLM (affiliation_cache: 0, institution_geo: 21) in batches of 20
2026-01-11 10:34:59 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/1 (2 affiliations)
2026-01-11 10:35:00 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-11 10:35:00 - app.phase2.affiliation_extractor - WARNING - Failed to auto-add institution King Fahad Medical City, KFMC Neurosciences Center: name 'db_manager' is not defined
2026-01-11 10:35:00 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 2 affiliations processed
2026-01-11 10:35:00 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 23 results from 1 LLM calls
2026-01-11 10:35:00 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 23 LLM results...
2026-01-11 10:35:01 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 23 LLM results
2026-01-11 10:35:01 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-11 10:35:03 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Daejoen, South Korea' (from affiliation: Department of Mathematical Sciences, KAIST, Daejoen, 34141 Republic of Korea (PMIDs: 27534393))
2026-01-11 10:35:06 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Daejoen, South Korea' (from affiliation: Department of Mathematical Sciences, Indiana University â€“ Purdue University, Indianapolis, IN 46202 USA (PMIDs: 27534393))
2026-01-11 10:35:08 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Bron Cedex, France' (from affiliation: INSERM U846, Stem Cell and Brain Research Institute, Bron Cedex, France (PMIDs: 27534393))
2026-01-11 10:35:10 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Saitama Japan, Japan' (from affiliation: Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan (PMIDs: 27534393))
2026-01-11 10:35:12 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Aichi Japan, Japan' (from affiliation: National Institute for Physiological Sciences, Okazaki, Aichi Japan (PMIDs: 27534393))
2026-01-11 10:35:14 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Tehran, Iran, Islamic Republic of' (from affiliation: School of Physics, Institute for Research in Fundamental Sciences (IPM), Tehran, 19395-5531 Iran (PMIDs: 27534393))
2026-01-11 10:35:16 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Tehran, Iran, Islamic Republic of' (from affiliation: School of Cognitive Sciences, Institute for Research in Fundamental Sciences (IPM), Tehran, Iran. (PMIDs: 41042753))
2026-01-11 10:35:18 - app.phase2.pg_geocoding - WARNING - Could not geocode 'The Czech Academy of Sciences, Czechia' (from affiliation: Department of Nonlinear Dynamics and Complex Systems, Institute of Computer Science, The Czech Academy of Sciences, 182 07 Prague, Czech Republic (PMIDs: 27534393))
2026-01-11 10:35:20 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Ecole Polytechnique Federal de Lausanne (EPFL, Switzerland' (from affiliation: School of Life Sciences, Brain Mind Institute and School of Computer and Communication Sciences, Ecole Polytechnique Federal de Lausanne (EPFL), 1015 Lausanne, Switzerland (PMIDs: 27534393))
2026-01-11 10:35:22 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Cambridge, Morocco' (from affiliation: Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139. (PMIDs: 27671642))
2026-01-11 10:35:24 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Cambridge, Morocco' (from affiliation: Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139 evelina.fedorenko@mgh.harvard.edu ngk@mit.edu. (PMIDs: 27671642))
2026-01-11 10:35:26 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Cambridge, Morocco' (from affiliation: McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA. (PMIDs: 39005394))
2026-01-11 10:35:28 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Japan, Andorra' (from affiliation: 3Center for Advanced Research and Education, School of Medicine, Asahikawa Medical University, Hokkaido, Japan; and. (PMIDs: 29271713))
2026-01-11 10:35:30 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Urbana-Champaign, Israel' (from affiliation: Department of Electrical and Computer Engineering, University of Illinois, Urbana-Champaign, IL 61801. (PMIDs: 30847390))
2026-01-11 10:35:32 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Urbana-Champaign, Israel' (from affiliation: Department of Electrical and Computer Engineering, University of Illinois, Urbana, Illinois, USA. (PMIDs: 34536230))
2026-01-11 10:35:34 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Molecular Biophysics and Integrated Bioimaging, United States' (from affiliation: Center for Functional Imaging, Molecular Biophysics and Integrated Bioimaging, Lawrence Berkeley National Laboratory, Berkeley, CA, USA. (PMIDs: 31207466))
2026-01-11 10:35:36 - app.phase2.pg_geocoding - WARNING - Could not geocode 'East China Normal, China (Mainland)' (from affiliation: Center for Bioinformatics and Computational Biology, and The Institute of Biomedical Sciences, School of Life Sciences, East China Normal University, Shanghai 200241, China. (PMIDs: 37995287))
2026-01-11 10:35:38 - app.phase2.pg_geocoding - WARNING - Could not geocode 'East China Normal, China (Mainland)' (from affiliation: Key Laboratory of Brain Functional Genomics, East China Normal University, Shanghai, China. (PMIDs: 41062786))
2026-01-11 10:35:40 - app.phase2.pg_geocoding - WARNING - Could not geocode 'East China Normal, China (Mainland)' (from affiliation: Shanghai Key Laboratory of Brain Functional Genomics (Ministry of Education), School of Psychology and Cognitive Science, East China Normal University, Shanghai, China. (PMIDs: 41062786))
2026-01-11 10:35:42 - app.phase2.pg_geocoding - WARNING - Could not geocode 'East China Normal, China (Mainland)' (from affiliation: Shanghai Key Laboratory of Brain Functional Genomics (Ministry of Education), School of Psychology and Cognitive Science, East China Normal University, Shanghai, China. xing.tian@nyu.edu. (PMIDs: 41062786))
2026-01-11 10:35:44 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Head and Neck Surgery, Poland' (from affiliation: Department of Vascular and General Surgery, WrocÅ‚aw Medical University, Poland. (PMIDs: 41135818))
2026-01-11 10:35:45 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 23 affiliations
2026-01-11 10:35:45 - app.phase2.affiliation_validator - INFO -    âœ… Updated 38 authorships
2026-01-11 10:35:45 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 1 locations
2026-01-11 10:35:45 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:35:45 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 13092a22728c
2026-01-11 10:35:45 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 23
2026-01-11 10:35:45 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 23
2026-01-11 10:35:45 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 38
2026-01-11 10:35:45 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 1
2026-01-11 10:35:45 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 10:35:45 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-11 10:35:45 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-11 10:35:45 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 23
2026-01-11 10:35:45 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 23
2026-01-11 10:35:45 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 38
2026-01-11 10:35:45 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 1
2026-01-11 10:35:45 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-11 10:35:45 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 10:35:45 - app.main - INFO - ================================================================================
2026-01-11 10:35:45 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 10:35:45 - app.main - INFO -    Total PMIDs: 500
2026-01-11 10:35:45 - app.main - INFO -    Papers parsed: 500
2026-01-11 10:35:45 - app.main - INFO -    Authorships created: 4432
2026-01-11 10:35:45 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 10:35:45 - app.main - INFO -    Affiliations with country: 2516
2026-01-11 10:35:45 - app.main - INFO -    LLM calls made: 0
2026-01-11 10:35:45 - app.main - INFO - ================================================================================
2026-01-11 11:11:28 - root - INFO - ================================================================================
2026-01-11 11:11:28 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:11:28 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:11:28 - root - INFO - ================================================================================
2026-01-11 11:11:36 - root - INFO - ================================================================================
2026-01-11 11:11:36 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:11:36 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:11:36 - root - INFO - ================================================================================
2026-01-11 11:11:42 - root - INFO - ================================================================================
2026-01-11 11:11:42 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:11:42 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:11:42 - root - INFO - ================================================================================
2026-01-11 11:11:57 - root - INFO - ================================================================================
2026-01-11 11:11:57 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:11:57 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:11:57 - root - INFO - ================================================================================
2026-01-11 11:12:19 - root - INFO - ================================================================================
2026-01-11 11:12:19 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:12:19 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:12:19 - root - INFO - ================================================================================
2026-01-11 11:19:18 - root - INFO - ================================================================================
2026-01-11 11:19:18 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:19:18 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:19:18 - root - INFO - ================================================================================
2026-01-11 11:21:20 - root - INFO - ================================================================================
2026-01-11 11:21:20 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:21:20 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:21:20 - root - INFO - ================================================================================
2026-01-11 11:21:40 - root - INFO - ================================================================================
2026-01-11 11:21:40 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:21:40 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:21:40 - root - INFO - ================================================================================
2026-01-11 11:21:47 - root - INFO - ================================================================================
2026-01-11 11:21:47 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:21:47 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:21:47 - root - INFO - ================================================================================
2026-01-11 11:21:56 - root - INFO - ================================================================================
2026-01-11 11:21:56 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:21:56 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:21:56 - root - INFO - ================================================================================
2026-01-11 11:24:39 - root - INFO - ================================================================================
2026-01-11 11:24:39 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:24:39 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:24:39 - root - INFO - ================================================================================
2026-01-11 11:28:53 - root - INFO - ================================================================================
2026-01-11 11:28:53 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:28:53 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:28:53 - root - INFO - ================================================================================
2026-01-11 11:29:10 - root - INFO - ================================================================================
2026-01-11 11:29:10 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:29:10 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:29:10 - root - INFO - ================================================================================
2026-01-11 11:29:39 - root - INFO - ================================================================================
2026-01-11 11:29:39 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:29:39 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:29:39 - root - INFO - ================================================================================
2026-01-11 11:40:45 - root - INFO - ================================================================================
2026-01-11 11:40:45 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:40:45 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:40:45 - root - INFO - ================================================================================
2026-01-11 11:41:19 - root - INFO - ================================================================================
2026-01-11 11:41:19 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:41:19 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:41:19 - root - INFO - ================================================================================
2026-01-11 11:57:52 - root - INFO - ================================================================================
2026-01-11 11:57:52 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:57:52 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:57:52 - root - INFO - ================================================================================
2026-01-11 11:58:51 - root - INFO - ================================================================================
2026-01-11 11:58:51 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 11:58:51 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 11:58:51 - root - INFO - ================================================================================
2026-01-11 12:00:12 - root - INFO - ================================================================================
2026-01-11 12:00:12 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:00:12 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:00:12 - root - INFO - ================================================================================
2026-01-11 12:00:42 - root - INFO - ================================================================================
2026-01-11 12:00:42 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:00:42 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:00:42 - root - INFO - ================================================================================
2026-01-11 12:00:52 - root - INFO - ================================================================================
2026-01-11 12:00:52 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:00:52 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:00:52 - root - INFO - ================================================================================
2026-01-11 12:01:07 - root - INFO - ================================================================================
2026-01-11 12:01:07 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:01:07 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:01:07 - root - INFO - ================================================================================
2026-01-11 12:01:34 - root - INFO - ================================================================================
2026-01-11 12:01:34 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:01:34 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:01:34 - root - INFO - ================================================================================
2026-01-11 12:02:06 - root - INFO - ================================================================================
2026-01-11 12:02:06 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:02:06 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:02:06 - root - INFO - ================================================================================
2026-01-11 12:02:32 - root - INFO - ================================================================================
2026-01-11 12:02:32 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:02:32 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:02:32 - root - INFO - ================================================================================
2026-01-11 12:03:20 - root - INFO - ================================================================================
2026-01-11 12:03:20 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:03:20 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:03:20 - root - INFO - ================================================================================
2026-01-11 12:03:35 - root - INFO - ================================================================================
2026-01-11 12:03:35 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:03:35 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:03:35 - root - INFO - ================================================================================
2026-01-11 12:03:45 - root - INFO - ================================================================================
2026-01-11 12:03:45 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:03:45 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:03:45 - root - INFO - ================================================================================
2026-01-11 12:04:04 - root - INFO - ================================================================================
2026-01-11 12:04:04 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:04:04 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:04:04 - root - INFO - ================================================================================
2026-01-11 12:04:58 - root - INFO - ================================================================================
2026-01-11 12:04:58 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:04:58 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:04:58 - root - INFO - ================================================================================
2026-01-11 12:05:20 - app.main - INFO - ================================================================================
2026-01-11 12:05:20 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:05:20 - app.main - INFO -    Force refresh: False
2026-01-11 12:05:20 - app.main - INFO - ================================================================================
2026-01-11 12:05:20 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:05:20 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 12:05:20 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 12:05:20 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 12:05:20 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:05:20 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 12:05:22 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 12:05:22 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 12:05:22 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:05:22 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 12:05:22 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 12:05:22 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:05:22 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=35869138%2C37739786%2C40800829%2C24845600%2C41021378%2C40343020%2C25157216%2C27249656%2C38769115%2C40055549%2C38242691%2C22255777%2C29460482%2C30414541%2C39485790%2C22875868%2C24315545%2C29093659%2C36086071%2C33372958%2C24293161%2C40817733%2C36989073%2C29404403%2C37961305%2C33867912%2C38514133%2C19279495%2C28399442%2C32435182%2C38041253%2C30038000%2C36634533%2C22874396%2C33789135%2C32439539%2C25616459%2C17980999%2C34489664%2C36645968%2C29958109%2C30847390%2C20465359%2C23643922%2C34892495%2C40832215%2C35819528%2C32694561%2C30238309%2C27046113%2C30971792%2C37292795%2C27450996%2C34607318%2C29190521%2C24836588%2C37460730%2C38925110%2C23482627%2C27578414%2C34421555%2C37875404%2C26991386%2C33408621%2C38063368%2C29576436%2C38885688%2C29247963%2C40417558%2C27918346%2C27534393%2C41135818%2C27408802%2C35907491%2C31419636%2C27686506%2C21708506%2C31342677%2C34260835%2C38335090%2C32378738%2C28236761%2C41363150%2C30504559%2C35695785%2C37215328%2C40769034%2C36731812%2C28993231%2C38988764%2C37441880%2C38969758%2C30440349%2C37900727%2C34123657%2C30249918%2C25352799%2C25571555%2C41039113%2C26642090%2C28268617%2C29052465%2C25761260%2C39332803%2C31578420%2C20478745%2C32180695%2C24122368%2C22144944%2C31820736%2C20921326%2C41275704%2C39974103%2C28269552%2C37203491%2C30216929%2C39922365%2C21529188%2C24639642%2C39374038%2C33935673%2C35276657%2C28225156%2C9419036%2C40910467%2C39819752%2C25822912%2C39248654%2C26408491%2C25570869%2C20811093%2C28666338%2C25571556%2C32840483%2C33306299%2C37437189%2C30831567%2C25118584%2C29977189%2C22750156%2C23366629%2C41167038%2C21471374%2C27019106%2C28335018%2C39968245%2C26072003%2C30500619%2C40800288%2C39371161&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:05:23 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 12:05:23 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:05:23 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=36966852%2C37582062%2C37060887%2C32577713%2C35966994%2C34753819%2C26949710%2C39386565%2C33912122%2C36054730%2C31207466%2C27148018%2C25122702%2C26232713%2C35099768%2C25571558%2C40695313%2C35169837%2C40260174%2C37487487%2C41453123%2C39096896%2C22973215%2C9737437%2C32198060%2C40830488%2C39808939%2C41282818%2C28268620%2C38318272%2C37798921%2C32410969%2C38948730%2C41279744%2C40697162%2C27199638%2C40894619%2C36356309%2C39867597%2C31220442%2C27484713%2C25266305%2C31445890%2C33942078%2C33293456%2C35248810%2C28918128%2C41397928%2C34408717%2C34130614%2C30721879%2C37745380%2C34965874%2C26188384%2C38093008%2C26262160%2C39850351%2C35113857%2C35311092%2C21373361%2C40354107%2C21471638%2C26737497%2C15817517%2C38343801%2C29891885%2C35118367%2C39345158%2C40040033%2C26386644%2C40309789%2C29678760%2C19163831%2C39479009%2C32888480%2C20087111%2C23577157%2C40490093%2C37019103%2C38813793%2C41191764%2C30837823%2C37638314%2C29414401%2C24681353%2C35654375%2C38260011%2C40239679%2C39162748%2C31875441%2C27311642%2C41144819%2C39134741%2C36828156%2C23072156%2C30710356%2C29430213%2C12614397%2C38083559%2C17971857%2C16175856%2C40039596%2C27377299%2C30257858%2C39213665%2C22255402%2C26679420%2C30700532%2C31946284%2C34411517%2C38581367%2C30596439%2C33419861%2C40913768%2C27935031%2C27182530%2C21419227%2C38935898%2C24285843%2C41205609%2C37841873%2C39399739%2C37229140%2C34774771%2C28839071%2C24672012%2C29861132%2C38582333%2C31525179%2C15677998%2C32372065%2C31056408%2C29018336%2C33841081%2C26935890%2C41254404%2C31363096%2C39870041%2C25819402%2C37819985%2C32105726%2C26124702%2C41081527%2C33137575%2C34958951%2C37467739%2C25759647%2C29268943%2C33133815%2C38648781&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:05:24 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 12:05:24 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:05:25 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=28268618%2C27408803%2C39484239%2C40302941%2C35708911%2C30064321%2C31741702%2C39582595%2C33506209%2C40766385%2C35534226%2C15329073%2C34717248%2C27635975%2C32231340%2C27956570%2C41105453%2C40461573%2C30238924%2C38729074%2C38496670%2C37105171%2C25571553%2C40972658%2C38696121%2C41042753%2C35395633%2C34347873%2C39985774%2C39322094%2C28334963%2C38183998%2C26818506%2C34587350%2C30279650%2C39194182%2C38222047%2C40490003%2C29779940%2C30617653%2C34849596%2C21724424%2C16792292%2C35313351%2C28622530%2C32289685%2C29087324%2C29033809%2C30256217%2C17712784%2C31287601%2C37459853%2C25273279%2C40516665%2C32828921%2C35989149%2C29439164%2C41034198%2C41386385%2C37066306%2C33776668%2C14656066%2C39579033%2C33142282%2C19732923%2C33283856%2C8892373%2C29674950%2C22890647%2C39990331%2C15876624%2C36570848%2C33360179%2C29271713%2C35568349%2C31824257%2C21307246%2C41397373%2C24904404%2C37217308%2C34536230%2C28716965%2C41427281%2C34823894%2C38559163%2C37086161%2C19349241%2C39554006%2C30740659%2C38306217%2C40610484%2C28676308%2C26446212%2C41022986%2C38769157%2C37968869%2C37245559%2C27729844%2C35777988%2C39464426%2C24982625%2C32610290%2C41349179%2C39455254%2C39005394%2C28396294%2C28119593%2C40253415%2C31692177%2C32656294%2C24995815%2C35878727%2C36121939%2C38808652%2C23465430%2C30827578%2C23774120%2C22941838%2C36246502%2C40720979%2C37120741%2C19033707%2C38671062%2C22207857%2C21029784%2C26888939%2C18982128%2C39433597%2C34906982%2C37932250%2C34301825%2C24904069%2C23032488%2C28894834%2C41062786%2C30134167%2C28406383%2C30389490%2C40147418%2C27671642%2C35121181%2C34918613%2C41332755%2C30342252%2C36327599%2C22563311%2C35528322%2C30367077%2C38909761%2C40913530&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:05:26 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 12:05:26 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 12:05:26 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=35185491%2C17071238%2C40825359%2C32788249%2C25000321%2C37425292%2C25816090%2C29525721%2C23914170%2C23696279%2C25570199%2C21750369%2C32498058%2C37995287%2C18440570%2C25259669%2C27325763%2C36872854%2C40018762%2C25948269%2C38787551%2C25909573%2C32442776%2C31339411%2C38486966%2C27524194%2C39153482%2C30643130%2C41266624%2C32686761%2C31103409%2C31277857%2C27413155%2C37382208%2C20026224%2C26136107%2C35013268%2C17271737%2C41324025%2C41177674%2C41335998%2C29378977%2C39990398%2C27926827%2C22573665%2C27199720%2C29397190%2C40144585%2C41129388%2C24877680&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:05:26 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 12:05:26 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 12:05:27 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 12:05:27 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 12:05:27 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:05:27 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 12:05:27 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 12:05:27 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:05:27 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 12:05:27 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 12:05:27 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 12:05:27 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 12:05:28 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 2545 need extraction
2026-01-11 12:05:28 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2545 affiliations...
2026-01-11 12:05:28 - app.phase2.institution_matcher - INFO -    Loaded 1718 institutions to memory (1718 normalized names, 205 aliases)
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2545 (3%), matches found: 91
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2545 (7%), matches found: 180
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2545 (11%), matches found: 274
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2545 (15%), matches found: 367
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/2545 (19%), matches found: 460
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/2545 (23%), matches found: 550
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/2545 (27%), matches found: 643
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/2545 (31%), matches found: 740
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/2545 (35%), matches found: 830
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/2545 (39%), matches found: 923
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/2545 (43%), matches found: 1020
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/2545 (47%), matches found: 1114
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/2545 (51%), matches found: 1206
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/2545 (55%), matches found: 1302
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/2545 (58%), matches found: 1393
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/2545 (62%), matches found: 1483
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1700/2545 (66%), matches found: 1576
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1800/2545 (70%), matches found: 1669
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1900/2545 (74%), matches found: 1757
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2000/2545 (78%), matches found: 1851
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2100/2545 (82%), matches found: 1944
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2200/2545 (86%), matches found: 2034
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2300/2545 (90%), matches found: 2127
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2400/2545 (94%), matches found: 2217
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2500/2545 (98%), matches found: 2311
2026-01-11 12:05:29 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2545/2545 (100%), matches found: 2350
2026-01-11 12:05:29 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 2350 matches found
2026-01-11 12:05:29 - app.phase2.rule_based_extractor - INFO -    Extracting 195 affiliations using rule-based parser...
2026-01-11 12:05:32 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 19/195 (9%)
2026-01-11 12:05:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 38/195 (19%)
2026-01-11 12:05:35 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 57/195 (29%)
2026-01-11 12:05:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 76/195 (38%)
2026-01-11 12:05:40 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 95/195 (48%)
2026-01-11 12:05:42 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 114/195 (58%)
2026-01-11 12:05:45 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 133/195 (68%)
2026-01-11 12:05:47 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 152/195 (77%)
2026-01-11 12:05:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 171/195 (87%)
2026-01-11 12:05:52 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 190/195 (97%)
2026-01-11 12:05:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 195/195 (100%)
2026-01-11 12:05:53 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 195 results
2026-01-11 12:05:55 - app.phase2.pg_ingest - INFO -    Cached 2545 new affiliation extraction results to affiliation_cache table
2026-01-11 12:05:55 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2516 with country
2026-01-11 12:05:55 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 12:05:55 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 12:05:55 - app.phase2.pg_ingest - INFO -    With country: 2516
2026-01-11 12:05:55 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 12:05:55 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:05:55 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 12:05:55 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 12:05:56 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 12:05:56 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 12:05:56 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 12:05:56 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 12:06:02 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 12:06:02 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2516
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 0
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 2350
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 195
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 191
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:06:03 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 12:06:03 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:06:03 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 12:06:06 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 12:06:06 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:06:06 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-11 12:06:06 - app.phase2.affiliation_validator - INFO -    Found 343 unique location keys from 4432 authorships
2026-01-11 12:06:06 - app.phase2.affiliation_validator - INFO -    Batch query complete: 343/343 found in cache
2026-01-11 12:06:06 - app.phase2.affiliation_validator - INFO -    Processing 0 unique location keys via Nominatim...
2026-01-11 12:06:06 - app.phase2.affiliation_validator - INFO -    Batch updating 3749 affiliations for 328 cached locations...
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 328 locations (3749 total affiliations)
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4432
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3788
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO -    Cache misses: 0
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 0
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 23
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 13
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 23 error affiliations with LLM...
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO -    Collecting 23 unique error affiliations for LLM fix
2026-01-11 12:06:22 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-11 12:06:22 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 23 affiliations...
2026-01-11 12:06:22 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 23 affiliations...
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    Loaded 1718 institutions to memory (1718 normalized names, 205 aliases)
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/23 (8%), matches found: 2
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/23 (17%), matches found: 4
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/23 (26%), matches found: 6
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/23 (34%), matches found: 8
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/23 (43%), matches found: 10
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/23 (52%), matches found: 12
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/23 (60%), matches found: 14
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/23 (69%), matches found: 15
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/23 (78%), matches found: 17
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/23 (86%), matches found: 19
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 22/23 (95%), matches found: 21
2026-01-11 12:06:22 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 23/23 (100%), matches found: 21
2026-01-11 12:06:22 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 21 matches found
2026-01-11 12:06:22 - app.phase2.affiliation_extractor - INFO -    Extracting 2 affiliations via LLM (affiliation_cache: 0, institution_geo: 21) in batches of 20
2026-01-11 12:06:22 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/1 (2 affiliations)
2026-01-11 12:06:27 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-11 12:06:28 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 2 affiliations processed
2026-01-11 12:06:28 - app.phase2.affiliation_extractor - INFO -       Auto-added to institution_geo table: 1 institutions
2026-01-11 12:06:28 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 23 results from 1 LLM calls
2026-01-11 12:06:28 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 23 LLM results...
2026-01-11 12:06:28 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 23 LLM results
2026-01-11 12:06:28 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-11 12:06:28 - app.phase2.affiliation_validator - INFO -    Processing 14 unique location keys for re-geocoding...
2026-01-11 12:06:34 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 23 affiliations
2026-01-11 12:06:34 - app.phase2.affiliation_validator - INFO -    âœ… Updated 38 authorships
2026-01-11 12:06:34 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 1 locations
2026-01-11 12:06:34 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:06:34 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 13092a22728c
2026-01-11 12:06:34 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 23
2026-01-11 12:06:34 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 23
2026-01-11 12:06:34 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 38
2026-01-11 12:06:34 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 1
2026-01-11 12:06:34 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:06:34 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-11 12:06:34 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-11 12:06:34 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 23
2026-01-11 12:06:34 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 23
2026-01-11 12:06:34 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 38
2026-01-11 12:06:34 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 1
2026-01-11 12:06:34 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-11 12:06:34 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:06:34 - app.main - INFO - ================================================================================
2026-01-11 12:06:34 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:06:34 - app.main - INFO -    Total PMIDs: 500
2026-01-11 12:06:34 - app.main - INFO -    Papers parsed: 500
2026-01-11 12:06:34 - app.main - INFO -    Authorships created: 4432
2026-01-11 12:06:34 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 12:06:34 - app.main - INFO -    Affiliations with country: 2516
2026-01-11 12:06:34 - app.main - INFO -    LLM calls made: 0
2026-01-11 12:06:34 - app.main - INFO - ================================================================================
2026-01-11 12:09:17 - app.main - INFO - ================================================================================
2026-01-11 12:09:17 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:09:17 - app.main - INFO -    Force refresh: False
2026-01-11 12:09:17 - app.main - INFO - ================================================================================
2026-01-11 12:09:17 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:09:17 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 12:09:17 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 12:09:17 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 12:09:17 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:09:17 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 12:09:20 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 12:09:20 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 12:09:20 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:09:20 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 12:09:20 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 12:09:20 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:09:21 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=35869138%2C37739786%2C40800829%2C24845600%2C41021378%2C40343020%2C25157216%2C27249656%2C38769115%2C40055549%2C38242691%2C22255777%2C29460482%2C30414541%2C39485790%2C22875868%2C24315545%2C29093659%2C36086071%2C33372958%2C24293161%2C40817733%2C36989073%2C29404403%2C37961305%2C33867912%2C38514133%2C19279495%2C28399442%2C32435182%2C38041253%2C30038000%2C36634533%2C22874396%2C33789135%2C32439539%2C25616459%2C17980999%2C34489664%2C36645968%2C29958109%2C30847390%2C20465359%2C23643922%2C34892495%2C40832215%2C35819528%2C32694561%2C30238309%2C27046113%2C30971792%2C37292795%2C27450996%2C34607318%2C29190521%2C24836588%2C37460730%2C38925110%2C23482627%2C27578414%2C34421555%2C37875404%2C26991386%2C33408621%2C38063368%2C29576436%2C38885688%2C29247963%2C40417558%2C27918346%2C27534393%2C41135818%2C27408802%2C35907491%2C31419636%2C27686506%2C21708506%2C31342677%2C34260835%2C38335090%2C32378738%2C28236761%2C41363150%2C30504559%2C35695785%2C37215328%2C40769034%2C36731812%2C28993231%2C38988764%2C37441880%2C38969758%2C30440349%2C37900727%2C34123657%2C30249918%2C25352799%2C25571555%2C41039113%2C26642090%2C28268617%2C29052465%2C25761260%2C39332803%2C31578420%2C20478745%2C32180695%2C24122368%2C22144944%2C31820736%2C20921326%2C41275704%2C39974103%2C28269552%2C37203491%2C30216929%2C39922365%2C21529188%2C24639642%2C39374038%2C33935673%2C35276657%2C28225156%2C9419036%2C40910467%2C39819752%2C25822912%2C39248654%2C26408491%2C25570869%2C20811093%2C28666338%2C25571556%2C32840483%2C33306299%2C37437189%2C30831567%2C25118584%2C29977189%2C22750156%2C23366629%2C41167038%2C21471374%2C27019106%2C28335018%2C39968245%2C26072003%2C30500619%2C40800288%2C39371161&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:09:21 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 12:09:21 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:09:22 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=36966852%2C37582062%2C37060887%2C32577713%2C35966994%2C34753819%2C26949710%2C39386565%2C33912122%2C36054730%2C31207466%2C27148018%2C25122702%2C26232713%2C35099768%2C25571558%2C40695313%2C35169837%2C40260174%2C37487487%2C41453123%2C39096896%2C22973215%2C9737437%2C32198060%2C40830488%2C39808939%2C41282818%2C28268620%2C38318272%2C37798921%2C32410969%2C38948730%2C41279744%2C40697162%2C27199638%2C40894619%2C36356309%2C39867597%2C31220442%2C27484713%2C25266305%2C31445890%2C33942078%2C33293456%2C35248810%2C28918128%2C41397928%2C34408717%2C34130614%2C30721879%2C37745380%2C34965874%2C26188384%2C38093008%2C26262160%2C39850351%2C35113857%2C35311092%2C21373361%2C40354107%2C21471638%2C26737497%2C15817517%2C38343801%2C29891885%2C35118367%2C39345158%2C40040033%2C26386644%2C40309789%2C29678760%2C19163831%2C39479009%2C32888480%2C20087111%2C23577157%2C40490093%2C37019103%2C38813793%2C41191764%2C30837823%2C37638314%2C29414401%2C24681353%2C35654375%2C38260011%2C40239679%2C39162748%2C31875441%2C27311642%2C41144819%2C39134741%2C36828156%2C23072156%2C30710356%2C29430213%2C12614397%2C38083559%2C17971857%2C16175856%2C40039596%2C27377299%2C30257858%2C39213665%2C22255402%2C26679420%2C30700532%2C31946284%2C34411517%2C38581367%2C30596439%2C33419861%2C40913768%2C27935031%2C27182530%2C21419227%2C38935898%2C24285843%2C41205609%2C37841873%2C39399739%2C37229140%2C34774771%2C28839071%2C24672012%2C29861132%2C38582333%2C31525179%2C15677998%2C32372065%2C31056408%2C29018336%2C33841081%2C26935890%2C41254404%2C31363096%2C39870041%2C25819402%2C37819985%2C32105726%2C26124702%2C41081527%2C33137575%2C34958951%2C37467739%2C25759647%2C29268943%2C33133815%2C38648781&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:09:22 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 12:09:22 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:09:23 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=28268618%2C27408803%2C39484239%2C40302941%2C35708911%2C30064321%2C31741702%2C39582595%2C33506209%2C40766385%2C35534226%2C15329073%2C34717248%2C27635975%2C32231340%2C27956570%2C41105453%2C40461573%2C30238924%2C38729074%2C38496670%2C37105171%2C25571553%2C40972658%2C38696121%2C41042753%2C35395633%2C34347873%2C39985774%2C39322094%2C28334963%2C38183998%2C26818506%2C34587350%2C30279650%2C39194182%2C38222047%2C40490003%2C29779940%2C30617653%2C34849596%2C21724424%2C16792292%2C35313351%2C28622530%2C32289685%2C29087324%2C29033809%2C30256217%2C17712784%2C31287601%2C37459853%2C25273279%2C40516665%2C32828921%2C35989149%2C29439164%2C41034198%2C41386385%2C37066306%2C33776668%2C14656066%2C39579033%2C33142282%2C19732923%2C33283856%2C8892373%2C29674950%2C22890647%2C39990331%2C15876624%2C36570848%2C33360179%2C29271713%2C35568349%2C31824257%2C21307246%2C41397373%2C24904404%2C37217308%2C34536230%2C28716965%2C41427281%2C34823894%2C38559163%2C37086161%2C19349241%2C39554006%2C30740659%2C38306217%2C40610484%2C28676308%2C26446212%2C41022986%2C38769157%2C37968869%2C37245559%2C27729844%2C35777988%2C39464426%2C24982625%2C32610290%2C41349179%2C39455254%2C39005394%2C28396294%2C28119593%2C40253415%2C31692177%2C32656294%2C24995815%2C35878727%2C36121939%2C38808652%2C23465430%2C30827578%2C23774120%2C22941838%2C36246502%2C40720979%2C37120741%2C19033707%2C38671062%2C22207857%2C21029784%2C26888939%2C18982128%2C39433597%2C34906982%2C37932250%2C34301825%2C24904069%2C23032488%2C28894834%2C41062786%2C30134167%2C28406383%2C30389490%2C40147418%2C27671642%2C35121181%2C34918613%2C41332755%2C30342252%2C36327599%2C22563311%2C35528322%2C30367077%2C38909761%2C40913530&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:09:23 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 12:09:23 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 12:09:24 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=35185491%2C17071238%2C40825359%2C32788249%2C25000321%2C37425292%2C25816090%2C29525721%2C23914170%2C23696279%2C25570199%2C21750369%2C32498058%2C37995287%2C18440570%2C25259669%2C27325763%2C36872854%2C40018762%2C25948269%2C38787551%2C25909573%2C32442776%2C31339411%2C38486966%2C27524194%2C39153482%2C30643130%2C41266624%2C32686761%2C31103409%2C31277857%2C27413155%2C37382208%2C20026224%2C26136107%2C35013268%2C17271737%2C41324025%2C41177674%2C41335998%2C29378977%2C39990398%2C27926827%2C22573665%2C27199720%2C29397190%2C40144585%2C41129388%2C24877680&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:09:24 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 12:09:24 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 12:09:25 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 12:09:25 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 12:09:25 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:09:25 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 12:09:25 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 12:09:25 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:09:25 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 12:09:25 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 12:09:25 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 12:09:25 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 12:09:26 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 2545 hits, 0 need extraction
2026-01-11 12:09:26 - app.phase2.rule_based_extractor - INFO -    âœ… All 2545 affiliations found in affiliation_cache table
2026-01-11 12:09:26 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2515 with country
2026-01-11 12:09:26 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 12:09:26 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 12:09:26 - app.phase2.pg_ingest - INFO -    With country: 2515
2026-01-11 12:09:26 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 12:09:26 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:09:26 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 12:09:26 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 12:09:26 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 12:09:26 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 12:09:27 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 12:09:27 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 12:09:47 - root - INFO - ================================================================================
2026-01-11 12:09:47 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:09:47 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:09:47 - root - INFO - ================================================================================
2026-01-11 12:09:58 - app.main - INFO - ================================================================================
2026-01-11 12:09:58 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:09:58 - app.main - INFO -    Force refresh: False
2026-01-11 12:09:58 - app.main - INFO - ================================================================================
2026-01-11 12:09:58 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:09:58 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 12:09:58 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 12:09:58 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 12:09:58 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:09:58 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 12:10:00 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 12:10:00 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 12:10:00 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:10:00 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 12:10:00 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 12:10:00 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:10:01 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=30721879%2C38496670%2C28894834%2C28269552%2C23032488%2C31875441%2C33912122%2C27408802%2C29977189%2C25570199%2C40697162%2C35169837%2C30216929%2C28268617%2C30837823%2C25266305%2C32610290%2C38083559%2C31525179%2C17271737%2C32435182%2C33935673%2C27019106%2C32788249%2C37425292%2C37961305%2C33789135%2C41427281%2C40040033%2C25571555%2C31287601%2C37066306%2C37060887%2C28839071%2C36356309%2C31445890%2C38925110%2C14656066%2C37459853%2C29891885%2C30440349%2C41324025%2C28676308%2C41386385%2C37229140%2C23465430%2C40769034%2C29414401%2C32289685%2C41266624%2C41021378%2C37215328%2C25273279%2C17980999%2C35313351%2C28225156%2C39968245%2C37441880%2C23072156%2C27729844%2C38969758%2C33419861%2C37841873%2C20811093%2C21471374%2C30414541%2C39386565%2C33867912%2C27182530%2C40039596%2C34421555%2C36054730%2C38514133%2C34123657%2C32442776%2C25819402%2C31419636%2C24904069%2C40417558%2C9737437%2C28406383%2C23482627%2C38222047%2C37968869%2C27413155%2C31207466%2C37460730%2C25118584%2C29430213%2C29525721%2C31578420%2C37798921%2C40720979%2C28399442%2C27199720%2C23696279%2C37019103%2C37467739%2C27148018%2C15817517%2C36246502%2C35654375%2C40894619%2C35907491%2C38582333%2C33372958%2C39433597%2C41177674%2C27578414%2C34607318%2C18440570%2C39134741%2C39484239%2C23774120%2C22890647%2C21307246%2C25759647%2C37086161%2C20921326%2C29674950%2C29779940%2C12614397%2C37745380%2C15876624%2C29678760%2C17071238%2C38808652%2C30038000%2C39345158%2C27926827%2C38183998%2C31103409%2C34849596%2C21029784%2C33283856%2C26408491%2C40695313%2C26262160%2C40309789%2C38486966%2C40913530%2C39399739%2C39867597%2C30847390%2C19033707%2C21419227%2C39485790%2C34130614%2C26888939%2C24836588&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:10:02 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 12:10:02 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:10:02 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=29958109%2C33408621%2C34774771%2C38306217%2C38093008%2C30617653%2C28993231%2C24315545%2C28236761%2C36327599%2C30342252%2C39554006%2C38813793%2C39870041%2C35121181%2C30971792%2C33360179%2C35819528%2C25352799%2C22563311%2C27325763%2C25822912%2C26136107%2C27046113%2C25948269%2C26642090%2C32888480%2C41282818%2C38787551%2C37487487%2C24681353%2C29190521%2C41279744%2C29052465%2C34347873%2C21724424%2C30134167%2C39153482%2C29404403%2C38318272%2C40260174%2C30827578%2C27199638%2C32577713%2C39464426%2C40461573%2C16792292%2C26949710%2C41349179%2C41191764%2C38909761%2C38935898%2C15677998%2C39374038%2C27534393%2C40832215%2C35695785%2C41129388%2C34411517%2C41144819%2C35878727%2C32828921%2C30596439%2C34918613%2C34301825%2C40144585%2C32231340%2C37382208%2C39579033%2C29271713%2C29576436%2C32686761%2C33841081%2C39194182%2C15329073%2C39322094%2C30367077%2C34753819%2C26818506%2C37739786%2C29268943%2C20478745%2C27686506%2C39005394%2C40910467%2C29378977%2C9419036%2C33506209%2C40018762%2C34892495%2C22973215%2C38885688%2C31824257%2C37582062%2C36570848%2C29033809%2C25571558%2C31692177%2C35248810%2C26737497%2C19279495%2C32105726%2C28666338%2C30256217%2C32694561%2C33942078%2C26991386%2C41335998%2C28918128%2C40354107%2C22750156%2C39248654%2C27450996%2C34906982%2C29861132%2C30500619%2C37292795%2C22875868%2C35568349%2C40610484%2C35395633%2C36828156%2C27635975%2C36634533%2C19732923%2C30238924%2C27484713%2C17712784%2C40147418%2C25909573%2C41397373%2C35534226%2C30389490%2C34536230%2C26679420%2C38988764%2C32372065%2C29093659%2C25616459%2C31342677%2C38559163%2C21471638%2C34587350%2C40055549%2C39985774%2C24122368%2C24285843%2C41397928%2C34823894%2C25570869&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:10:03 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 12:10:03 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:10:03 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=34260835%2C41275704%2C40253415%2C37217308%2C35113857%2C30238309%2C24845600%2C26124702%2C36086071%2C38260011%2C34408717%2C28334963%2C22207857%2C23914170%2C19163831%2C29439164%2C27377299%2C41135818%2C31339411%2C39990331%2C20465359%2C38696121%2C26446212%2C31220442%2C25571553%2C40972658%2C33137575%2C40516665%2C32378738%2C30279650%2C25000321%2C40490093%2C41254404%2C33293456%2C39808939%2C34489664%2C35185491%2C36989073%2C34717248%2C27918346%2C32656294%2C31820736%2C39455254%2C39479009%2C22874396%2C22573665%2C25259669%2C41453123%2C20087111%2C23577157%2C40490003%2C32840483%2C39850351%2C38729074%2C40817733%2C27524194%2C22144944%2C30710356%2C40800288%2C35989149%2C35966994%2C33776668%2C29247963%2C19349241%2C38581367%2C35118367%2C37932250%2C40239679%2C21529188%2C27671642%2C41363150%2C8892373%2C21750369%2C33133815%2C31741702%2C21708506%2C31277857%2C38648781%2C29018336%2C21373361%2C38041253%2C35276657%2C31056408%2C27249656%2C32439539%2C35099768%2C28622530%2C39922365%2C31946284%2C36731812%2C39096896%2C28268620%2C41039113%2C39990398%2C34958951%2C37900727%2C30643130%2C37105171%2C27956570%2C33142282%2C41062786%2C41022986%2C32498058%2C30249918%2C26188384%2C38063368%2C25157216%2C24904404%2C39371161%2C28119593%2C16175856%2C24982625%2C38769157%2C28335018%2C41332755%2C26386644%2C29460482%2C23366629%2C40830488%2C37437189%2C41105453%2C27935031%2C39819752%2C36121939%2C41167038%2C40343020%2C35777988%2C25816090%2C22255402%2C33306299%2C30257858%2C37120741%2C39582595%2C22255777%2C35869138%2C30831567%2C28396294%2C24995815%2C17971857%2C25761260%2C38343801%2C38242691%2C37245559%2C31363096%2C27311642%2C24639642%2C37995287%2C35708911%2C22941838%2C40825359&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:10:04 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 12:10:04 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 12:10:04 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=29087324%2C41205609%2C35013268%2C25571556%2C23643922%2C39332803%2C28716965%2C30064321%2C28268618%2C26935890%2C30504559%2C26072003%2C38769115%2C32410969%2C39974103%2C40302941%2C34965874%2C35311092%2C20026224%2C40913768%2C39162748%2C27408803%2C30700532%2C26232713%2C18982128%2C41042753%2C38948730%2C39213665%2C32198060%2C36966852%2C36645968%2C37638314%2C24877680%2C37875404%2C25122702%2C24293161%2C35528322%2C38671062%2C38335090%2C30740659%2C32180695%2C40766385%2C36872854%2C29397190%2C24672012%2C37203491%2C40800829%2C37819985%2C41081527%2C41034198&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:10:04 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 12:10:04 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 12:10:05 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 12:10:05 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 12:10:05 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:10:05 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 12:10:05 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 12:10:05 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:10:05 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 12:10:05 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 12:10:05 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 12:10:05 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 12:10:07 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 2545 need extraction
2026-01-11 12:10:07 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2545 affiliations...
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    Loaded 1719 institutions to memory (1719 normalized names, 205 aliases)
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2545 (3%), matches found: 93
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2545 (7%), matches found: 189
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2545 (11%), matches found: 280
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2545 (15%), matches found: 370
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/2545 (19%), matches found: 461
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/2545 (23%), matches found: 551
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/2545 (27%), matches found: 645
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/2545 (31%), matches found: 739
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/2545 (35%), matches found: 836
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/2545 (39%), matches found: 922
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/2545 (43%), matches found: 1013
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/2545 (47%), matches found: 1100
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/2545 (51%), matches found: 1191
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/2545 (55%), matches found: 1281
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/2545 (58%), matches found: 1374
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/2545 (62%), matches found: 1469
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1700/2545 (66%), matches found: 1565
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1800/2545 (70%), matches found: 1656
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1900/2545 (74%), matches found: 1749
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2000/2545 (78%), matches found: 1841
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2100/2545 (82%), matches found: 1933
2026-01-11 12:10:07 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2200/2545 (86%), matches found: 2028
2026-01-11 12:10:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2300/2545 (90%), matches found: 2123
2026-01-11 12:10:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2400/2545 (94%), matches found: 2217
2026-01-11 12:10:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2500/2545 (98%), matches found: 2310
2026-01-11 12:10:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2545/2545 (100%), matches found: 2353
2026-01-11 12:10:08 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 2353 matches found
2026-01-11 12:10:08 - app.phase2.rule_based_extractor - INFO -    Extracting 192 affiliations using rule-based parser...
2026-01-11 12:10:09 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 19/192 (9%)
2026-01-11 12:10:12 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 38/192 (19%)
2026-01-11 12:10:14 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 57/192 (29%)
2026-01-11 12:10:17 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 76/192 (39%)
2026-01-11 12:10:19 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 95/192 (49%)
2026-01-11 12:10:22 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 114/192 (59%)
2026-01-11 12:10:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 133/192 (69%)
2026-01-11 12:10:26 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 152/192 (79%)
2026-01-11 12:10:28 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 171/192 (89%)
2026-01-11 12:10:30 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 190/192 (98%)
2026-01-11 12:10:30 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 192/192 (100%)
2026-01-11 12:10:30 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 192 results
2026-01-11 12:10:33 - app.phase2.pg_ingest - INFO -    Cached 2545 new affiliation extraction results to affiliation_cache table
2026-01-11 12:10:33 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2516 with country
2026-01-11 12:10:33 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 12:10:33 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 12:10:33 - app.phase2.pg_ingest - INFO -    With country: 2516
2026-01-11 12:10:33 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 12:10:33 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:10:33 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 12:10:33 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 12:10:33 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 12:10:33 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 12:10:34 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 12:10:34 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2516
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 0
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 2353
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 192
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 188
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:10:40 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 12:10:40 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:10:40 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 12:10:42 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 12:10:42 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:10:42 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-11 12:10:42 - app.phase2.affiliation_validator - INFO -    Found 341 unique location keys from 4432 authorships
2026-01-11 12:10:42 - app.phase2.affiliation_validator - INFO -    Batch query complete: 341/341 found in cache
2026-01-11 12:10:42 - app.phase2.affiliation_validator - INFO -    Processing 0 unique location keys via Nominatim...
2026-01-11 12:10:42 - app.phase2.affiliation_validator - INFO -    Batch updating 3750 affiliations for 327 cached locations...
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 327 locations (3750 total affiliations)
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4432
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3788
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO -    Cache misses: 0
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 0
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 22
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 12
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 22 error affiliations with LLM...
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO -    Collecting 22 unique error affiliations for LLM fix
2026-01-11 12:10:59 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-11 12:10:59 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 22 affiliations...
2026-01-11 12:10:59 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 22 affiliations...
2026-01-11 12:11:00 - app.phase2.institution_matcher - INFO -    Loaded 1719 institutions to memory (1719 normalized names, 205 aliases)
2026-01-11 12:11:00 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/22 (9%), matches found: 1
2026-01-11 12:11:00 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/22 (18%), matches found: 3
2026-01-11 12:11:00 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/22 (27%), matches found: 5
2026-01-11 12:11:00 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/22 (36%), matches found: 7
2026-01-11 12:11:00 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/22 (45%), matches found: 9
2026-01-11 12:11:00 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/22 (54%), matches found: 11
2026-01-11 12:11:00 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/22 (63%), matches found: 13
2026-01-11 12:11:00 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/22 (72%), matches found: 15
2026-01-11 12:11:00 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/22 (81%), matches found: 17
2026-01-11 12:11:00 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/22 (90%), matches found: 19
2026-01-11 12:11:00 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 22/22 (100%), matches found: 21
2026-01-11 12:11:00 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 21 matches found
2026-01-11 12:11:00 - app.phase2.affiliation_extractor - INFO -    Extracting 1 affiliations via LLM (affiliation_cache: 0, institution_geo: 21) in batches of 20
2026-01-11 12:11:00 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/1 (1 affiliations)
2026-01-11 12:11:02 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-11 12:11:02 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 1 affiliations processed
2026-01-11 12:11:02 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 22 results from 1 LLM calls
2026-01-11 12:11:02 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 22 LLM results...
2026-01-11 12:11:02 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 22 LLM results
2026-01-11 12:11:02 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-11 12:11:02 - app.phase2.affiliation_validator - INFO -    Processing 13 unique location keys for re-geocoding...
2026-01-11 12:11:09 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 22 affiliations
2026-01-11 12:11:09 - app.phase2.affiliation_validator - INFO -    âœ… Updated 37 authorships
2026-01-11 12:11:09 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 0 locations
2026-01-11 12:11:09 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:11:09 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 13092a22728c
2026-01-11 12:11:09 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 22
2026-01-11 12:11:09 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 22
2026-01-11 12:11:09 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 37
2026-01-11 12:11:09 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 0
2026-01-11 12:11:09 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:11:09 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-11 12:11:09 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-11 12:11:09 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 22
2026-01-11 12:11:09 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 22
2026-01-11 12:11:09 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 37
2026-01-11 12:11:09 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 0
2026-01-11 12:11:09 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-11 12:11:09 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:11:09 - app.main - INFO - ================================================================================
2026-01-11 12:11:09 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:11:09 - app.main - INFO -    Total PMIDs: 500
2026-01-11 12:11:09 - app.main - INFO -    Papers parsed: 500
2026-01-11 12:11:09 - app.main - INFO -    Authorships created: 4432
2026-01-11 12:11:09 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 12:11:09 - app.main - INFO -    Affiliations with country: 2516
2026-01-11 12:11:09 - app.main - INFO -    LLM calls made: 0
2026-01-11 12:11:09 - app.main - INFO - ================================================================================
2026-01-11 12:28:58 - root - INFO - ================================================================================
2026-01-11 12:28:58 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:28:58 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:28:58 - root - INFO - ================================================================================
2026-01-11 12:29:06 - root - INFO - ================================================================================
2026-01-11 12:29:06 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:29:06 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:29:06 - root - INFO - ================================================================================
2026-01-11 12:29:16 - root - INFO - ================================================================================
2026-01-11 12:29:16 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:29:16 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:29:16 - root - INFO - ================================================================================
2026-01-11 12:29:19 - root - INFO - ================================================================================
2026-01-11 12:29:19 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:29:19 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:29:19 - root - INFO - ================================================================================
2026-01-11 12:31:07 - root - INFO - ================================================================================
2026-01-11 12:31:07 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:31:07 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:31:07 - root - INFO - ================================================================================
2026-01-11 12:31:21 - app.main - INFO - ================================================================================
2026-01-11 12:31:21 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:31:21 - app.main - INFO -    Force refresh: False
2026-01-11 12:31:21 - app.main - INFO - ================================================================================
2026-01-11 12:31:22 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:31:22 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 12:31:22 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 12:31:22 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 12:31:22 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:31:22 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 12:31:24 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 12:31:24 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 12:31:24 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:31:24 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 12:31:24 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 12:31:24 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:31:25 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=38988764%2C30064321%2C30700532%2C40695313%2C27408803%2C21471374%2C36327599%2C34347873%2C30389490%2C23072156%2C24845600%2C20921326%2C26888939%2C40610484%2C30643130%2C27578414%2C16792292%2C33293456%2C31946284%2C39922365%2C38183998%2C41021378%2C28918128%2C34965874%2C34408717%2C30710356%2C28335018%2C27311642%2C38948730%2C35819528%2C25571558%2C34823894%2C21029784%2C23577157%2C31875441%2C28268620%2C19163831%2C26446212%2C30721879%2C30414541%2C28236761%2C29271713%2C22890647%2C35395633%2C40417558%2C28225156%2C34587350%2C38041253%2C20478745%2C30238924%2C30971792%2C27046113%2C39134741%2C38335090%2C37425292%2C37739786%2C33372958%2C40253415%2C24122368%2C39819752%2C26124702%2C23643922%2C30367077%2C35185491%2C32888480%2C23696279%2C36966852%2C27635975%2C30831567%2C41081527%2C39332803%2C30500619%2C22144944%2C32180695%2C22750156%2C37875404%2C8892373%2C34774771%2C33789135%2C24836588%2C29977189%2C34918613%2C22875868%2C21419227%2C15677998%2C39386565%2C34536230%2C35121181%2C33137575%2C29891885%2C37459853%2C41349179%2C29861132%2C32828921%2C33419861%2C32610290%2C38063368%2C37215328%2C25259669%2C39850351%2C38813793%2C36828156%2C41191764%2C34421555%2C33133815%2C29414401%2C37437189%2C41282818%2C39579033%2C41129388%2C24904404%2C38671062%2C28993231%2C40894619%2C28676308%2C41397373%2C40913768%2C31287601%2C34123657%2C39162748%2C28268618%2C30617653%2C36121939%2C36054730%2C39345158%2C24315545%2C32498058%2C38696121%2C38242691%2C31578420%2C36086071%2C38559163%2C28406383%2C23774120%2C35113857%2C34717248%2C29404403%2C36872854%2C27671642%2C31207466%2C28716965%2C21708506%2C40800829%2C40913530%2C37441880%2C41332755%2C25570199%2C17971857%2C39968245%2C36570848&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:31:25 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 12:31:25 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:31:26 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=37745380%2C40697162%2C34301825%2C37819985%2C37382208%2C35276657%2C41254404%2C37961305%2C37995287%2C27686506%2C39248654%2C34892495%2C38318272%2C41144819%2C35528322%2C37900727%2C9737437%2C37086161%2C34849596%2C27019106%2C26935890%2C37467739%2C41062786%2C27249656%2C22255402%2C34753819%2C29247963%2C35777988%2C41386385%2C32442776%2C21307246%2C38582333%2C12614397%2C26949710%2C37229140%2C27956570%2C31525179%2C33935673%2C39433597%2C30837823%2C38514133%2C32198060%2C25816090%2C39005394%2C39554006%2C36989073%2C15329073%2C37841873%2C39374038%2C40720979%2C37203491%2C32686761%2C35118367%2C20087111%2C25266305%2C33360179%2C27450996%2C34489664%2C24982625%2C41034198%2C30038000%2C36645968%2C38648781%2C29093659%2C35989149%2C18982128%2C41397928%2C28119593%2C32289685%2C35966994%2C32410969%2C39808939%2C38885688%2C21750369%2C30504559%2C40302941%2C39464426%2C37487487%2C34906982%2C37105171%2C25571553%2C17071238%2C41022986%2C27199720%2C29018336%2C36356309%2C30238309%2C19279495%2C35695785%2C41279744%2C31824257%2C38222047%2C39322094%2C28268617%2C31445890%2C26072003%2C40490003%2C31820736%2C31741702%2C27935031%2C35311092%2C33283856%2C39990398%2C27377299%2C41177674%2C38306217%2C30847390%2C27182530%2C35013268%2C26386644%2C28269552%2C23366629%2C40490093%2C40040033%2C38935898%2C40832215%2C32378738%2C27524194%2C37798921%2C22941838%2C29268943%2C37060887%2C35869138%2C33841081%2C26188384%2C29958109%2C26232713%2C29460482%2C41039113%2C23465430%2C27325763%2C33942078%2C40055549%2C25122702%2C9419036%2C31363096%2C38769115%2C38969758%2C32105726%2C40910467%2C39371161%2C32372065%2C25819402%2C26262160%2C31692177%2C38808652%2C30279650%2C25273279%2C28396294%2C32788249&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:31:27 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 12:31:27 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:31:28 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=34260835%2C32656294%2C30440349%2C24995815%2C19349241%2C39974103%2C40309789%2C17271737%2C32439539%2C25616459%2C40354107%2C34607318%2C40972658%2C26991386%2C39484239%2C39485790%2C29087324%2C22573665%2C30256217%2C35878727%2C29678760%2C32435182%2C31103409%2C34130614%2C41042753%2C29190521%2C40516665%2C20026224%2C30740659%2C34958951%2C40766385%2C38769157%2C39213665%2C40018762%2C27408802%2C41205609%2C35169837%2C31419636%2C26679420%2C24639642%2C36634533%2C22973215%2C24672012%2C26737497%2C40343020%2C35568349%2C21724424%2C15876624%2C27729844%2C35099768%2C40147418%2C25822912%2C38496670%2C39582595%2C28399442%2C32577713%2C33867912%2C24293161%2C25571555%2C27926827%2C30342252%2C41363150%2C15817517%2C30596439%2C37932250%2C27534393%2C25118584%2C21471638%2C37066306%2C39096896%2C31220442%2C37460730%2C39194182%2C33776668%2C23914170%2C25909573%2C41324025%2C39985774%2C28334963%2C35313351%2C40461573%2C29378977%2C37120741%2C37638314%2C28622530%2C38729074%2C30257858%2C32694561%2C37245559%2C21529188%2C40825359%2C33142282%2C24681353%2C39399739%2C39479009%2C19732923%2C16175856%2C40817733%2C22255777%2C30249918%2C17980999%2C40039596%2C39867597%2C29779940%2C37582062%2C19033707%2C35534226%2C31056408%2C29430213%2C24285843%2C25570869%2C39990331%2C28666338%2C29439164%2C14656066%2C27199638%2C40800288%2C41427281%2C40144585%2C41105453%2C26642090%2C38260011%2C25761260%2C29576436%2C30216929%2C41453123%2C41167038%2C21373361%2C25352799%2C25759647%2C20465359%2C18440570%2C33306299%2C38083559%2C41135818%2C29674950%2C26408491%2C36731812%2C35248810%2C39153482%2C33506209%2C31277857%2C29397190%2C25948269%2C32840483%2C27148018%2C26818506%2C22874396%2C28839071%2C37217308&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:31:28 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 12:31:28 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 12:31:29 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=25157216%2C32231340%2C26136107%2C41275704%2C38581367%2C20811093%2C39870041%2C28894834%2C35708911%2C41266624%2C33912122%2C40830488%2C30827578%2C29033809%2C38787551%2C37292795%2C35907491%2C27484713%2C23032488%2C31342677%2C37968869%2C27918346%2C38343801%2C22563311%2C27413155%2C22207857%2C38925110%2C33408621%2C40260174%2C31339411%2C29052465%2C29525721%2C36246502%2C24904069%2C41335998%2C38093008%2C35654375%2C24877680%2C39455254%2C30134167%2C37019103%2C25571556%2C40239679%2C25000321%2C17712784%2C40769034%2C38909761%2C23482627%2C34411517%2C38486966&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:31:29 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 12:31:29 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 12:31:29 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 12:31:29 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 12:31:29 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:31:29 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 12:31:30 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 12:31:30 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:31:30 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 12:31:30 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 12:31:30 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 12:31:30 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 12:31:31 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 2545 need extraction
2026-01-11 12:31:31 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2545 affiliations...
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    Loaded 1719 institutions to memory (1719 normalized names, 205 aliases)
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2545 (3%), matches found: 94
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2545 (7%), matches found: 187
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2545 (11%), matches found: 282
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2545 (15%), matches found: 369
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/2545 (19%), matches found: 461
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/2545 (23%), matches found: 551
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/2545 (27%), matches found: 646
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/2545 (31%), matches found: 737
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/2545 (35%), matches found: 829
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/2545 (39%), matches found: 920
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/2545 (43%), matches found: 1013
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/2545 (47%), matches found: 1106
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/2545 (51%), matches found: 1198
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/2545 (55%), matches found: 1293
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/2545 (58%), matches found: 1385
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/2545 (62%), matches found: 1477
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1700/2545 (66%), matches found: 1569
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1800/2545 (70%), matches found: 1657
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1900/2545 (74%), matches found: 1748
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2000/2545 (78%), matches found: 1837
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2100/2545 (82%), matches found: 1933
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2200/2545 (86%), matches found: 2026
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2300/2545 (90%), matches found: 2121
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2400/2545 (94%), matches found: 2213
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2500/2545 (98%), matches found: 2305
2026-01-11 12:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2545/2545 (100%), matches found: 2344
2026-01-11 12:31:32 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 2344 matches found
2026-01-11 12:31:32 - app.phase2.rule_based_extractor - INFO -    Extracting 201 affiliations using rule-based parser...
2026-01-11 12:31:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 20/201 (9%)
2026-01-11 12:31:37 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 40/201 (19%)
2026-01-11 12:31:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 60/201 (29%)
2026-01-11 12:31:40 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 80/201 (39%)
2026-01-11 12:31:42 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 100/201 (49%)
2026-01-11 12:31:44 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 120/201 (59%)
2026-01-11 12:31:47 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 140/201 (69%)
2026-01-11 12:31:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 160/201 (79%)
2026-01-11 12:31:52 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 180/201 (89%)
2026-01-11 12:31:55 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 200/201 (99%)
2026-01-11 12:31:55 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 201/201 (100%)
2026-01-11 12:31:55 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 201 results
2026-01-11 12:31:57 - app.phase2.pg_ingest - INFO -    Cached 2545 new affiliation extraction results to affiliation_cache table
2026-01-11 12:31:57 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2512 with country
2026-01-11 12:31:57 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 12:31:57 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 12:31:57 - app.phase2.pg_ingest - INFO -    With country: 2512
2026-01-11 12:31:57 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 12:31:57 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:31:57 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 12:31:57 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 12:31:57 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 12:31:57 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 12:31:58 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 12:31:58 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 12:32:03 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 12:32:03 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2512
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 0
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 2344
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 201
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 197
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:32:04 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 12:32:04 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:32:04 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 12:32:05 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 12:32:05 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:32:05 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-11 12:32:05 - app.phase2.affiliation_validator - INFO -    Found 342 unique location keys from 4432 authorships
2026-01-11 12:32:06 - app.phase2.affiliation_validator - INFO -    Batch query complete: 342/342 found in cache
2026-01-11 12:32:06 - app.phase2.affiliation_validator - INFO -    Processing 0 unique location keys via Nominatim...
2026-01-11 12:32:06 - app.phase2.affiliation_validator - INFO -    Batch updating 3745 affiliations for 328 cached locations...
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 328 locations (3745 total affiliations)
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4432
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3783
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO -    Cache misses: 0
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 0
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 22
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 12
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 22 error affiliations with LLM...
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO -    Collecting 22 unique error affiliations for LLM fix
2026-01-11 12:32:21 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-11 12:32:21 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 22 affiliations...
2026-01-11 12:32:21 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 22 affiliations...
2026-01-11 12:32:21 - app.phase2.institution_matcher - INFO -    Loaded 1719 institutions to memory (1719 normalized names, 205 aliases)
2026-01-11 12:32:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/22 (9%), matches found: 2
2026-01-11 12:32:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/22 (18%), matches found: 4
2026-01-11 12:32:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/22 (27%), matches found: 6
2026-01-11 12:32:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/22 (36%), matches found: 8
2026-01-11 12:32:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/22 (45%), matches found: 10
2026-01-11 12:32:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/22 (54%), matches found: 12
2026-01-11 12:32:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/22 (63%), matches found: 14
2026-01-11 12:32:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/22 (72%), matches found: 16
2026-01-11 12:32:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/22 (81%), matches found: 18
2026-01-11 12:32:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/22 (90%), matches found: 20
2026-01-11 12:32:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 22/22 (100%), matches found: 21
2026-01-11 12:32:21 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 21 matches found
2026-01-11 12:32:21 - app.phase2.affiliation_extractor - INFO -    Extracting 1 affiliations via LLM (affiliation_cache: 0, institution_geo: 21) in batches of 20
2026-01-11 12:32:21 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/1 (1 affiliations)
2026-01-11 12:32:23 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-11 12:32:23 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 1 affiliations processed
2026-01-11 12:32:23 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 22 results from 1 LLM calls
2026-01-11 12:32:23 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 22 LLM results...
2026-01-11 12:32:23 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 22 LLM results
2026-01-11 12:32:23 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-11 12:32:23 - app.phase2.affiliation_validator - INFO -    Processing 13 unique location keys for re-geocoding...
2026-01-11 12:32:30 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 22 affiliations
2026-01-11 12:32:30 - app.phase2.affiliation_validator - INFO -    âœ… Updated 37 authorships
2026-01-11 12:32:30 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 0 locations
2026-01-11 12:32:30 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:32:30 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 13092a22728c
2026-01-11 12:32:30 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 22
2026-01-11 12:32:30 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 22
2026-01-11 12:32:30 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 37
2026-01-11 12:32:30 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 0
2026-01-11 12:32:30 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:32:30 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-11 12:32:30 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-11 12:32:30 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 22
2026-01-11 12:32:30 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 22
2026-01-11 12:32:30 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 37
2026-01-11 12:32:30 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 0
2026-01-11 12:32:30 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-11 12:32:30 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:32:30 - app.main - INFO - ================================================================================
2026-01-11 12:32:30 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:32:30 - app.main - INFO -    Total PMIDs: 500
2026-01-11 12:32:30 - app.main - INFO -    Papers parsed: 500
2026-01-11 12:32:30 - app.main - INFO -    Authorships created: 4432
2026-01-11 12:32:30 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 12:32:30 - app.main - INFO -    Affiliations with country: 2512
2026-01-11 12:32:30 - app.main - INFO -    LLM calls made: 0
2026-01-11 12:32:30 - app.main - INFO - ================================================================================
2026-01-11 12:35:35 - root - INFO - ================================================================================
2026-01-11 12:35:35 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:35:35 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:35:35 - root - INFO - ================================================================================
2026-01-11 12:37:31 - root - INFO - ================================================================================
2026-01-11 12:37:31 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:37:31 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:37:31 - root - INFO - ================================================================================
2026-01-11 12:37:38 - root - INFO - ================================================================================
2026-01-11 12:37:38 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:37:38 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:37:38 - root - INFO - ================================================================================
2026-01-11 12:37:43 - root - INFO - ================================================================================
2026-01-11 12:37:43 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 12:37:43 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 12:37:43 - root - INFO - ================================================================================
2026-01-11 12:38:21 - app.main - INFO - ================================================================================
2026-01-11 12:38:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:38:21 - app.main - INFO -    Min confidence: low
2026-01-11 12:38:21 - app.main - INFO - ================================================================================
2026-01-11 12:38:21 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 12:38:21 - app.main - INFO - ================================================================================
2026-01-11 12:38:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:38:21 - app.main - INFO -    Min confidence: low
2026-01-11 12:38:21 - app.main - INFO - ================================================================================
2026-01-11 12:38:21 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 12:38:21 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 12:38:21 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 12:38:24 - app.phase2.pg_geocoding - INFO - Geocoded 'China (Mainland)' -> (60.1672949, 24.9365563)
2026-01-11 12:38:25 - app.phase2.pg_geocoding - INFO - Geocoded 'China (Mainland)' -> (60.1672949, 24.9365563)
2026-01-11 12:38:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong SAR, China' -> (22.3492155, 114.1857978)
2026-01-11 12:38:26 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 12:38:26 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 12:38:26 - app.main - INFO -    Countries returned: 51
2026-01-11 12:38:26 - app.main - INFO - ================================================================================
2026-01-11 12:38:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong SAR, China' -> (22.3492155, 114.1857978)
2026-01-11 12:38:27 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 12:38:27 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 12:38:27 - app.main - INFO -    Countries returned: 51
2026-01-11 12:38:27 - app.main - INFO - ================================================================================
2026-01-11 12:38:32 - app.main - INFO - ================================================================================
2026-01-11 12:38:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:38:32 - app.main - INFO -    Country: Morocco, Min confidence: low
2026-01-11 12:38:32 - app.main - INFO - ================================================================================
2026-01-11 12:38:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Morocco (normalized: Morocco)...
2026-01-11 12:38:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 12:38:34 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Cambridge, Morocco' (from affiliation: Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139.)
2026-01-11 12:38:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Morocco
2026-01-11 12:38:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Morocco
2026-01-11 12:38:35 - app.main - INFO -    Cities returned: 3
2026-01-11 12:38:35 - app.main - INFO - ================================================================================
2026-01-11 12:38:47 - app.main - INFO - ================================================================================
2026-01-11 12:38:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:38:47 - app.main - INFO -    Min confidence: low
2026-01-11 12:38:47 - app.main - INFO - ================================================================================
2026-01-11 12:38:47 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 12:38:47 - app.main - INFO - ================================================================================
2026-01-11 12:38:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:38:47 - app.main - INFO -    Min confidence: low
2026-01-11 12:38:47 - app.main - INFO - ================================================================================
2026-01-11 12:38:47 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 12:38:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 12:38:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 12:38:48 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 12:38:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 12:38:48 - app.main - INFO -    Countries returned: 51
2026-01-11 12:38:48 - app.main - INFO - ================================================================================
2026-01-11 12:38:48 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 12:38:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 12:38:48 - app.main - INFO -    Countries returned: 51
2026-01-11 12:38:48 - app.main - INFO - ================================================================================
2026-01-11 12:39:05 - app.main - INFO - ================================================================================
2026-01-11 12:39:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:39:05 - app.main - INFO -    Country: Morocco, Min confidence: low
2026-01-11 12:39:05 - app.main - INFO - ================================================================================
2026-01-11 12:39:05 - app.phase2.pg_aggregations - INFO -    Getting country map for Morocco (normalized: Morocco)...
2026-01-11 12:39:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 12:39:08 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Cambridge, Morocco' (from affiliation: Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139.)
2026-01-11 12:39:08 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Morocco
2026-01-11 12:39:08 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Morocco
2026-01-11 12:39:08 - app.main - INFO -    Cities returned: 3
2026-01-11 12:39:08 - app.main - INFO - ================================================================================
2026-01-11 12:40:24 - app.main - INFO - ================================================================================
2026-01-11 12:40:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:40:24 - app.main - INFO -    Country: Morocco, Min confidence: low
2026-01-11 12:40:24 - app.main - INFO - ================================================================================
2026-01-11 12:40:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Morocco (normalized: Morocco)...
2026-01-11 12:40:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 12:40:26 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Cambridge, Morocco' (from affiliation: Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139.)
2026-01-11 12:40:27 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Morocco
2026-01-11 12:40:27 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Morocco
2026-01-11 12:40:27 - app.main - INFO -    Cities returned: 3
2026-01-11 12:40:27 - app.main - INFO - ================================================================================
2026-01-11 12:47:26 - app.main - INFO - ================================================================================
2026-01-11 12:47:26 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:47:26 - app.main - INFO -    Force refresh: False
2026-01-11 12:47:26 - app.main - INFO - ================================================================================
2026-01-11 12:47:26 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:47:26 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 12:47:26 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 12:47:26 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 12:47:26 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:47:26 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 12:47:28 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 12:47:28 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 12:47:28 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:47:28 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 12:47:28 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 12:47:28 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:47:28 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=38335090%2C19279495%2C32105726%2C27019106%2C29052465%2C25761260%2C26949710%2C30249918%2C40144585%2C40800288%2C25822912%2C26679420%2C39819752%2C33776668%2C27484713%2C38648781%2C35568349%2C35013268%2C33419861%2C26935890%2C41205609%2C32231340%2C29678760%2C32656294%2C33133815%2C22144944%2C41135818%2C39134741%2C37739786%2C19349241%2C17971857%2C31741702%2C33306299%2C28236761%2C40343020%2C19732923%2C41349179%2C30038000%2C23577157%2C38935898%2C39194182%2C28918128%2C24315545%2C40417558%2C34123657%2C39386565%2C38582333%2C36989073%2C39322094%2C31820736%2C37875404%2C36872854%2C30740659%2C37900727%2C40039596%2C22875868%2C32888480%2C15817517%2C39922365%2C31103409%2C29430213%2C28993231%2C41042753%2C35777988%2C18440570%2C27635975%2C41034198%2C34489664%2C38769115%2C33942078%2C37066306%2C8892373%2C21373361%2C39162748%2C27578414%2C38769157%2C37582062%2C37060887%2C35121181%2C30700532%2C28839071%2C28399442%2C38343801%2C25273279%2C38222047%2C38260011%2C34918613%2C30710356%2C14656066%2C26262160%2C35248810%2C23032488%2C41397928%2C24845600%2C40766385%2C26818506%2C33372958%2C28716965%2C21529188%2C27325763%2C30134167%2C40769034%2C37217308%2C39248654%2C34347873%2C27249656%2C38696121%2C22255402%2C20921326%2C27450996%2C25816090%2C30500619%2C36327599%2C30389490%2C36634533%2C35654375%2C22874396%2C34587350%2C29087324%2C34607318%2C38559163%2C17271737%2C28676308%2C39484239%2C37968869%2C34892495%2C32694561%2C25122702%2C37086161%2C28268618%2C21029784%2C34536230%2C41266624%2C27408803%2C37932250%2C30257858%2C40239679%2C37245559%2C39345158%2C35695785%2C33360179%2C40309789%2C28622530%2C21419227%2C32410969%2C38083559%2C38808652%2C24672012%2C36645968%2C28396294&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:47:29 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 12:47:29 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:47:30 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=36121939%2C29525721%2C29414401%2C31445890%2C33142282%2C39153482%2C32788249%2C31339411%2C25570199%2C23366629%2C37382208%2C39332803%2C41335998%2C39582595%2C9737437%2C35099768%2C34421555%2C21307246%2C41021378%2C39990398%2C33293456%2C20465359%2C41129388%2C37995287%2C26386644%2C25571555%2C32442776%2C30238309%2C33506209%2C30440349%2C40260174%2C40147418%2C31056408%2C36966852%2C30216929%2C31207466%2C40913530%2C41081527%2C31419636%2C39850351%2C40253415%2C41397373%2C38948730%2C41105453%2C27524194%2C39455254%2C28225156%2C15677998%2C24995815%2C15876624%2C38063368%2C30971792%2C38909761%2C33789135%2C41332755%2C27199638%2C27199720%2C26188384%2C37459853%2C41022986%2C40695313%2C28334963%2C32180695%2C40697162%2C28666338%2C37819985%2C26991386%2C18982128%2C32686761%2C29033809%2C20811093%2C41282818%2C29674950%2C35534226%2C27935031%2C39867597%2C28119593%2C25570869%2C26124702%2C39579033%2C23482627%2C40830488%2C34753819%2C29977189%2C26408491%2C17071238%2C35185491%2C40832215%2C35169837%2C29460482%2C22890647%2C35276657%2C38486966%2C28406383%2C30596439%2C27918346%2C26888939%2C39554006%2C34823894%2C24293161%2C36570848%2C37292795%2C35118367%2C32828921%2C38041253%2C30827578%2C37441880%2C35395633%2C35966994%2C28268617%2C35907491%2C21471638%2C38813793%2C38093008%2C31578420%2C32198060%2C27377299%2C28335018%2C34906982%2C29271713%2C31824257%2C29439164%2C29018336%2C20478745%2C27148018%2C35113857%2C38183998%2C41039113%2C30837823%2C22573665%2C40040033%2C40354107%2C29861132%2C35708911%2C39479009%2C29958109%2C38581367%2C39974103%2C33867912%2C34965874%2C35869138%2C38318272%2C27926827%2C20026224%2C39968245%2C30367077%2C38306217%2C40913768%2C41062786%2C40610484&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:47:30 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 12:47:30 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:47:31 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40490003%2C41386385%2C29779940%2C25000321%2C26136107%2C25819402%2C25909573%2C23465430%2C34301825%2C24285843%2C39485790%2C25266305%2C38671062%2C21724424%2C31287601%2C39870041%2C30643130%2C28268620%2C30847390%2C41453123%2C38885688%2C30256217%2C39374038%2C37841873%2C22973215%2C40055549%2C30831567%2C24122368%2C29093659%2C37961305%2C41363150%2C27311642%2C24639642%2C36356309%2C39985774%2C26446212%2C23914170%2C22750156%2C31363096%2C29397190%2C40720979%2C17712784%2C39005394%2C27046113%2C26737497%2C29378977%2C32378738%2C20087111%2C30617653%2C36246502%2C32840483%2C23643922%2C35819528%2C27413155%2C39433597%2C39213665%2C31220442%2C34849596%2C30504559%2C37229140%2C30342252%2C35878727%2C37798921%2C22941838%2C9419036%2C24877680%2C23072156%2C38242691%2C33408621%2C40894619%2C37215328%2C28269552%2C21708506%2C41427281%2C34774771%2C25759647%2C30414541%2C33912122%2C16792292%2C31525179%2C23774120%2C36828156%2C40516665%2C34411517%2C41167038%2C25352799%2C27671642%2C38969758%2C26072003%2C16175856%2C37437189%2C37019103%2C32289685%2C38925110%2C37638314%2C27534393%2C41324025%2C27729844%2C32498058%2C33283856%2C37425292%2C25571553%2C35311092%2C36086071%2C37745380%2C34958951%2C32439539%2C24904069%2C19163831%2C34408717%2C29190521%2C41254404%2C29247963%2C37487487%2C25948269%2C32372065%2C34717248%2C40490093%2C37467739%2C40910467%2C39371161%2C31692177%2C30721879%2C24982625%2C21471374%2C41191764%2C33841081%2C40800829%2C29576436%2C40972658%2C35313351%2C41177674%2C32577713%2C27182530%2C24681353%2C38787551%2C41279744%2C41275704%2C34130614%2C40018762%2C39464426%2C17980999%2C36054730%2C21750369%2C39399739%2C25616459%2C25571556%2C25571558%2C40825359%2C24836588&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:47:32 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 12:47:32 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 12:47:32 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=37120741%2C37105171%2C22255777%2C34260835%2C40302941%2C40461573%2C28894834%2C39096896%2C35528322%2C33935673%2C24904404%2C15329073%2C29404403%2C25118584%2C38496670%2C40817733%2C25157216%2C39990331%2C27686506%2C27956570%2C23696279%2C36731812%2C38514133%2C27408802%2C25259669%2C32435182%2C29891885%2C26232713%2C30238924%2C33137575%2C26642090%2C32610290%2C41144819%2C31946284%2C22207857%2C38729074%2C31342677%2C31277857%2C12614397%2C31875441%2C37203491%2C29268943%2C39808939%2C35989149%2C30279650%2C22563311%2C19033707%2C37460730%2C30064321%2C38988764&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:47:32 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 12:47:32 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 12:47:33 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 12:47:33 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 12:47:33 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:47:33 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 12:47:34 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 12:47:34 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:47:34 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 12:47:34 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 12:47:34 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 12:47:34 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 12:47:35 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 2545 need extraction
2026-01-11 12:47:35 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2545 affiliations...
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    Loaded 1719 institutions to memory (1719 normalized names, 205 aliases)
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2545 (3%), matches found: 88
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2545 (7%), matches found: 179
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2545 (11%), matches found: 275
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2545 (15%), matches found: 369
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/2545 (19%), matches found: 459
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/2545 (23%), matches found: 550
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/2545 (27%), matches found: 643
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/2545 (31%), matches found: 734
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/2545 (35%), matches found: 826
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/2545 (39%), matches found: 915
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/2545 (43%), matches found: 1007
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/2545 (47%), matches found: 1102
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/2545 (51%), matches found: 1194
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/2545 (55%), matches found: 1287
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/2545 (58%), matches found: 1374
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/2545 (62%), matches found: 1467
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1700/2545 (66%), matches found: 1560
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1800/2545 (70%), matches found: 1652
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1900/2545 (74%), matches found: 1749
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2000/2545 (78%), matches found: 1839
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2100/2545 (82%), matches found: 1927
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2200/2545 (86%), matches found: 2022
2026-01-11 12:47:35 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2300/2545 (90%), matches found: 2115
2026-01-11 12:47:36 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2400/2545 (94%), matches found: 2206
2026-01-11 12:47:36 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2500/2545 (98%), matches found: 2302
2026-01-11 12:47:36 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2545/2545 (100%), matches found: 2346
2026-01-11 12:47:36 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 2346 matches found
2026-01-11 12:47:36 - app.phase2.rule_based_extractor - INFO -    Extracting 199 affiliations using rule-based parser...
2026-01-11 12:47:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 19/199 (9%)
2026-01-11 12:47:39 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 38/199 (19%)
2026-01-11 12:47:42 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 57/199 (28%)
2026-01-11 12:47:44 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 76/199 (38%)
2026-01-11 12:47:46 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 95/199 (47%)
2026-01-11 12:47:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 114/199 (57%)
2026-01-11 12:47:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 133/199 (66%)
2026-01-11 12:47:52 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 152/199 (76%)
2026-01-11 12:47:55 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 171/199 (85%)
2026-01-11 12:47:57 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 190/199 (95%)
2026-01-11 12:47:58 - app.main - INFO - ================================================================================
2026-01-11 12:47:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:47:58 - app.main - INFO -    Min confidence: low
2026-01-11 12:47:58 - app.main - INFO - ================================================================================
2026-01-11 12:47:58 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 12:47:58 - app.main - INFO - ================================================================================
2026-01-11 12:47:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:47:58 - app.main - INFO -    Min confidence: low
2026-01-11 12:47:58 - app.main - INFO - ================================================================================
2026-01-11 12:47:58 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 12:47:58 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 12:47:58 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 12:47:58 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 12:47:58 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 12:47:58 - app.main - INFO -    Countries returned: 51
2026-01-11 12:47:58 - app.main - INFO - ================================================================================
2026-01-11 12:47:58 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 199/199 (100%)
2026-01-11 12:47:58 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 199 results
2026-01-11 12:47:59 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 12:47:59 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 12:47:59 - app.main - INFO -    Countries returned: 51
2026-01-11 12:47:59 - app.main - INFO - ================================================================================
2026-01-11 12:48:01 - app.phase2.pg_ingest - INFO -    Cached 2545 new affiliation extraction results to affiliation_cache table
2026-01-11 12:48:01 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2512 with country
2026-01-11 12:48:01 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 12:48:01 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 12:48:01 - app.phase2.pg_ingest - INFO -    With country: 2512
2026-01-11 12:48:01 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 12:48:01 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:48:01 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 12:48:01 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 12:48:01 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 12:48:01 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 12:48:02 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 12:48:02 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2512
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 0
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 2346
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 199
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 195
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:48:10 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 12:48:10 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:48:10 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 12:48:11 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 12:48:11 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:48:11 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-11 12:48:11 - app.phase2.affiliation_validator - INFO -    Found 341 unique location keys from 4432 authorships
2026-01-11 12:48:12 - app.phase2.affiliation_validator - INFO -    Batch query complete: 341/341 found in cache
2026-01-11 12:48:12 - app.phase2.affiliation_validator - INFO -    Processing 0 unique location keys via Nominatim...
2026-01-11 12:48:12 - app.phase2.affiliation_validator - INFO -    Batch updating 3745 affiliations for 327 cached locations...
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 327 locations (3745 total affiliations)
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4432
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3783
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO -    Cache misses: 0
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 0
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 22
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 12
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 22 error affiliations with LLM...
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO -    Collecting 22 unique error affiliations for LLM fix
2026-01-11 12:48:28 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-11 12:48:28 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 22 affiliations...
2026-01-11 12:48:28 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 22 affiliations...
2026-01-11 12:48:28 - app.phase2.institution_matcher - INFO -    Loaded 1719 institutions to memory (1719 normalized names, 205 aliases)
2026-01-11 12:48:28 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/22 (9%), matches found: 1
2026-01-11 12:48:28 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/22 (18%), matches found: 3
2026-01-11 12:48:28 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/22 (27%), matches found: 5
2026-01-11 12:48:28 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/22 (36%), matches found: 7
2026-01-11 12:48:28 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/22 (45%), matches found: 9
2026-01-11 12:48:28 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/22 (54%), matches found: 11
2026-01-11 12:48:28 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/22 (63%), matches found: 13
2026-01-11 12:48:28 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/22 (72%), matches found: 15
2026-01-11 12:48:28 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/22 (81%), matches found: 17
2026-01-11 12:48:28 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/22 (90%), matches found: 19
2026-01-11 12:48:28 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 22/22 (100%), matches found: 21
2026-01-11 12:48:28 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 21 matches found
2026-01-11 12:48:28 - app.phase2.affiliation_extractor - INFO -    Extracting 1 affiliations via LLM (affiliation_cache: 0, institution_geo: 21) in batches of 20
2026-01-11 12:48:28 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/1 (1 affiliations)
2026-01-11 12:48:29 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-11 12:48:29 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 1 affiliations processed
2026-01-11 12:48:29 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 22 results from 1 LLM calls
2026-01-11 12:48:29 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 22 LLM results...
2026-01-11 12:48:29 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 22 LLM results
2026-01-11 12:48:29 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-11 12:48:29 - app.phase2.affiliation_validator - INFO -    Processing 13 unique location keys for re-geocoding...
2026-01-11 12:48:35 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 22 affiliations
2026-01-11 12:48:35 - app.phase2.affiliation_validator - INFO -    âœ… Updated 37 authorships
2026-01-11 12:48:35 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 0 locations
2026-01-11 12:48:35 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:48:35 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 13092a22728c
2026-01-11 12:48:35 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 22
2026-01-11 12:48:35 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 22
2026-01-11 12:48:35 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 37
2026-01-11 12:48:35 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 0
2026-01-11 12:48:35 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:48:35 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-11 12:48:35 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-11 12:48:35 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 22
2026-01-11 12:48:35 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 22
2026-01-11 12:48:35 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 37
2026-01-11 12:48:35 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 0
2026-01-11 12:48:35 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-11 12:48:35 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:48:35 - app.main - INFO - ================================================================================
2026-01-11 12:48:35 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:48:35 - app.main - INFO -    Total PMIDs: 500
2026-01-11 12:48:35 - app.main - INFO -    Papers parsed: 500
2026-01-11 12:48:35 - app.main - INFO -    Authorships created: 4432
2026-01-11 12:48:35 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 12:48:35 - app.main - INFO -    Affiliations with country: 2512
2026-01-11 12:48:35 - app.main - INFO -    LLM calls made: 0
2026-01-11 12:48:35 - app.main - INFO - ================================================================================
2026-01-11 12:53:59 - app.main - INFO - ================================================================================
2026-01-11 12:53:59 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:53:59 - app.main - INFO -    Force refresh: False
2026-01-11 12:53:59 - app.main - INFO - ================================================================================
2026-01-11 12:53:59 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:53:59 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 12:53:59 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 12:53:59 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 12:53:59 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:53:59 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 12:54:02 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 12:54:02 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 12:54:02 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:54:02 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 12:54:02 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 12:54:02 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:54:02 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=38335090%2C19279495%2C32105726%2C27019106%2C29052465%2C25761260%2C26949710%2C30249918%2C40144585%2C40800288%2C25822912%2C26679420%2C39819752%2C33776668%2C27484713%2C38648781%2C35568349%2C35013268%2C33419861%2C26935890%2C41205609%2C32231340%2C29678760%2C32656294%2C33133815%2C22144944%2C41135818%2C39134741%2C37739786%2C19349241%2C17971857%2C31741702%2C33306299%2C28236761%2C40343020%2C19732923%2C41349179%2C30038000%2C23577157%2C38935898%2C39194182%2C28918128%2C24315545%2C40417558%2C34123657%2C39386565%2C38582333%2C36989073%2C39322094%2C31820736%2C37875404%2C36872854%2C30740659%2C37900727%2C40039596%2C22875868%2C32888480%2C15817517%2C39922365%2C31103409%2C29430213%2C28993231%2C41042753%2C35777988%2C18440570%2C27635975%2C41034198%2C34489664%2C38769115%2C33942078%2C37066306%2C8892373%2C21373361%2C39162748%2C27578414%2C38769157%2C37582062%2C37060887%2C35121181%2C30700532%2C28839071%2C28399442%2C38343801%2C25273279%2C38222047%2C38260011%2C34918613%2C30710356%2C14656066%2C26262160%2C35248810%2C23032488%2C41397928%2C24845600%2C40766385%2C26818506%2C33372958%2C28716965%2C21529188%2C27325763%2C30134167%2C40769034%2C37217308%2C39248654%2C34347873%2C27249656%2C38696121%2C22255402%2C20921326%2C27450996%2C25816090%2C30500619%2C36327599%2C30389490%2C36634533%2C35654375%2C22874396%2C34587350%2C29087324%2C34607318%2C38559163%2C17271737%2C28676308%2C39484239%2C37968869%2C34892495%2C32694561%2C25122702%2C37086161%2C28268618%2C21029784%2C34536230%2C41266624%2C27408803%2C37932250%2C30257858%2C40239679%2C37245559%2C39345158%2C35695785%2C33360179%2C40309789%2C28622530%2C21419227%2C32410969%2C38083559%2C38808652%2C24672012%2C36645968%2C28396294&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:54:03 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 12:54:03 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:54:03 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=36121939%2C29525721%2C29414401%2C31445890%2C33142282%2C39153482%2C32788249%2C31339411%2C25570199%2C23366629%2C37382208%2C39332803%2C41335998%2C39582595%2C9737437%2C35099768%2C34421555%2C21307246%2C41021378%2C39990398%2C33293456%2C20465359%2C41129388%2C37995287%2C26386644%2C25571555%2C32442776%2C30238309%2C33506209%2C30440349%2C40260174%2C40147418%2C31056408%2C36966852%2C30216929%2C31207466%2C40913530%2C41081527%2C31419636%2C39850351%2C40253415%2C41397373%2C38948730%2C41105453%2C27524194%2C39455254%2C28225156%2C15677998%2C24995815%2C15876624%2C38063368%2C30971792%2C38909761%2C33789135%2C41332755%2C27199638%2C27199720%2C26188384%2C37459853%2C41022986%2C40695313%2C28334963%2C32180695%2C40697162%2C28666338%2C37819985%2C26991386%2C18982128%2C32686761%2C29033809%2C20811093%2C41282818%2C29674950%2C35534226%2C27935031%2C39867597%2C28119593%2C25570869%2C26124702%2C39579033%2C23482627%2C40830488%2C34753819%2C29977189%2C26408491%2C17071238%2C35185491%2C40832215%2C35169837%2C29460482%2C22890647%2C35276657%2C38486966%2C28406383%2C30596439%2C27918346%2C26888939%2C39554006%2C34823894%2C24293161%2C36570848%2C37292795%2C35118367%2C32828921%2C38041253%2C30827578%2C37441880%2C35395633%2C35966994%2C28268617%2C35907491%2C21471638%2C38813793%2C38093008%2C31578420%2C32198060%2C27377299%2C28335018%2C34906982%2C29271713%2C31824257%2C29439164%2C29018336%2C20478745%2C27148018%2C35113857%2C38183998%2C41039113%2C30837823%2C22573665%2C40040033%2C40354107%2C29861132%2C35708911%2C39479009%2C29958109%2C38581367%2C39974103%2C33867912%2C34965874%2C35869138%2C38318272%2C27926827%2C20026224%2C39968245%2C30367077%2C38306217%2C40913768%2C41062786%2C40610484&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:54:04 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 12:54:04 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 12:54:04 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40490003%2C41386385%2C29779940%2C25000321%2C26136107%2C25819402%2C25909573%2C23465430%2C34301825%2C24285843%2C39485790%2C25266305%2C38671062%2C21724424%2C31287601%2C39870041%2C30643130%2C28268620%2C30847390%2C41453123%2C38885688%2C30256217%2C39374038%2C37841873%2C22973215%2C40055549%2C30831567%2C24122368%2C29093659%2C37961305%2C41363150%2C27311642%2C24639642%2C36356309%2C39985774%2C26446212%2C23914170%2C22750156%2C31363096%2C29397190%2C40720979%2C17712784%2C39005394%2C27046113%2C26737497%2C29378977%2C32378738%2C20087111%2C30617653%2C36246502%2C32840483%2C23643922%2C35819528%2C27413155%2C39433597%2C39213665%2C31220442%2C34849596%2C30504559%2C37229140%2C30342252%2C35878727%2C37798921%2C22941838%2C9419036%2C24877680%2C23072156%2C38242691%2C33408621%2C40894619%2C37215328%2C28269552%2C21708506%2C41427281%2C34774771%2C25759647%2C30414541%2C33912122%2C16792292%2C31525179%2C23774120%2C36828156%2C40516665%2C34411517%2C41167038%2C25352799%2C27671642%2C38969758%2C26072003%2C16175856%2C37437189%2C37019103%2C32289685%2C38925110%2C37638314%2C27534393%2C41324025%2C27729844%2C32498058%2C33283856%2C37425292%2C25571553%2C35311092%2C36086071%2C37745380%2C34958951%2C32439539%2C24904069%2C19163831%2C34408717%2C29190521%2C41254404%2C29247963%2C37487487%2C25948269%2C32372065%2C34717248%2C40490093%2C37467739%2C40910467%2C39371161%2C31692177%2C30721879%2C24982625%2C21471374%2C41191764%2C33841081%2C40800829%2C29576436%2C40972658%2C35313351%2C41177674%2C32577713%2C27182530%2C24681353%2C38787551%2C41279744%2C41275704%2C34130614%2C40018762%2C39464426%2C17980999%2C36054730%2C21750369%2C39399739%2C25616459%2C25571556%2C25571558%2C40825359%2C24836588&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:54:05 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 12:54:05 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 12:54:05 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=37120741%2C37105171%2C22255777%2C34260835%2C40302941%2C40461573%2C28894834%2C39096896%2C35528322%2C33935673%2C24904404%2C15329073%2C29404403%2C25118584%2C38496670%2C40817733%2C25157216%2C39990331%2C27686506%2C27956570%2C23696279%2C36731812%2C38514133%2C27408802%2C25259669%2C32435182%2C29891885%2C26232713%2C30238924%2C33137575%2C26642090%2C32610290%2C41144819%2C31946284%2C22207857%2C38729074%2C31342677%2C31277857%2C12614397%2C31875441%2C37203491%2C29268943%2C39808939%2C35989149%2C30279650%2C22563311%2C19033707%2C37460730%2C30064321%2C38988764&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 12:54:05 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 12:54:05 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 12:54:06 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 12:54:06 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 12:54:06 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:54:06 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 12:54:06 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 12:54:06 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:54:06 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 12:54:07 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 12:54:07 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 12:54:07 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 12:54:07 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 2545 need extraction
2026-01-11 12:54:07 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2545 affiliations...
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    Loaded 1719 institutions to memory (1719 normalized names, 205 aliases)
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2545 (3%), matches found: 88
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2545 (7%), matches found: 179
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2545 (11%), matches found: 275
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2545 (15%), matches found: 369
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/2545 (19%), matches found: 459
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/2545 (23%), matches found: 550
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/2545 (27%), matches found: 643
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/2545 (31%), matches found: 734
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/2545 (35%), matches found: 826
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/2545 (39%), matches found: 915
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/2545 (43%), matches found: 1007
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/2545 (47%), matches found: 1102
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/2545 (51%), matches found: 1194
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/2545 (55%), matches found: 1287
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/2545 (58%), matches found: 1374
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/2545 (62%), matches found: 1467
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1700/2545 (66%), matches found: 1560
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1800/2545 (70%), matches found: 1652
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1900/2545 (74%), matches found: 1749
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2000/2545 (78%), matches found: 1839
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2100/2545 (82%), matches found: 1927
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2200/2545 (86%), matches found: 2022
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2300/2545 (90%), matches found: 2115
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2400/2545 (94%), matches found: 2206
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2500/2545 (98%), matches found: 2302
2026-01-11 12:54:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2545/2545 (100%), matches found: 2346
2026-01-11 12:54:08 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 2346 matches found
2026-01-11 12:54:08 - app.phase2.rule_based_extractor - INFO -    Extracting 199 affiliations using rule-based parser...
2026-01-11 12:54:10 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 19/199 (9%)
2026-01-11 12:54:12 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 38/199 (19%)
2026-01-11 12:54:15 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 57/199 (28%)
2026-01-11 12:54:16 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 76/199 (38%)
2026-01-11 12:54:19 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 95/199 (47%)
2026-01-11 12:54:21 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 114/199 (57%)
2026-01-11 12:54:23 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 133/199 (66%)
2026-01-11 12:54:25 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 152/199 (76%)
2026-01-11 12:54:28 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 171/199 (85%)
2026-01-11 12:54:31 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 190/199 (95%)
2026-01-11 12:54:32 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 199/199 (100%)
2026-01-11 12:54:32 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 199 results
2026-01-11 12:54:35 - app.phase2.pg_ingest - INFO -    Cached 2545 new affiliation extraction results to affiliation_cache table
2026-01-11 12:54:35 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2512 with country
2026-01-11 12:54:35 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 12:54:35 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 12:54:35 - app.phase2.pg_ingest - INFO -    With country: 2512
2026-01-11 12:54:35 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 12:54:35 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:54:35 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 12:54:35 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 12:54:36 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 12:54:36 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 12:54:36 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 12:54:36 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2512
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 0
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 2346
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 199
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 195
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO - 
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:54:44 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 12:54:44 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:54:44 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 12:54:45 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 12:54:45 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:54:45 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-11 12:54:45 - app.phase2.affiliation_validator - INFO -    Found 341 unique location keys from 4432 authorships
2026-01-11 12:54:46 - app.phase2.affiliation_validator - INFO -    Batch query complete: 341/341 found in cache
2026-01-11 12:54:46 - app.phase2.affiliation_validator - INFO -    Processing 0 unique location keys via Nominatim...
2026-01-11 12:54:46 - app.phase2.affiliation_validator - INFO -    Batch updating 3745 affiliations for 327 cached locations...
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 327 locations (3745 total affiliations)
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4432
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3783
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO -    Cache misses: 0
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 0
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 22
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 12
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 22 error affiliations with LLM...
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO -    Collecting 22 unique error affiliations for LLM fix
2026-01-11 12:55:04 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-11 12:55:04 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 22 affiliations...
2026-01-11 12:55:04 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 22 affiliations...
2026-01-11 12:55:04 - app.phase2.institution_matcher - INFO -    Loaded 1719 institutions to memory (1719 normalized names, 205 aliases)
2026-01-11 12:55:04 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/22 (9%), matches found: 1
2026-01-11 12:55:04 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/22 (18%), matches found: 3
2026-01-11 12:55:04 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/22 (27%), matches found: 5
2026-01-11 12:55:04 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/22 (36%), matches found: 7
2026-01-11 12:55:04 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/22 (45%), matches found: 9
2026-01-11 12:55:04 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/22 (54%), matches found: 11
2026-01-11 12:55:04 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/22 (63%), matches found: 13
2026-01-11 12:55:04 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/22 (72%), matches found: 15
2026-01-11 12:55:04 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/22 (81%), matches found: 17
2026-01-11 12:55:04 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/22 (90%), matches found: 19
2026-01-11 12:55:04 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 22/22 (100%), matches found: 21
2026-01-11 12:55:04 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 21 matches found
2026-01-11 12:55:04 - app.phase2.affiliation_extractor - INFO -    Extracting 1 affiliations via LLM (affiliation_cache: 0, institution_geo: 21) in batches of 20
2026-01-11 12:55:04 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/1 (1 affiliations)
2026-01-11 12:55:06 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-11 12:55:06 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 1 affiliations processed
2026-01-11 12:55:06 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 22 results from 1 LLM calls
2026-01-11 12:55:06 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 22 LLM results...
2026-01-11 12:55:06 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 22 LLM results
2026-01-11 12:55:06 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-11 12:55:06 - app.phase2.affiliation_validator - INFO -    Processing 13 unique location keys for re-geocoding...
2026-01-11 12:55:14 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 22 affiliations
2026-01-11 12:55:14 - app.phase2.affiliation_validator - INFO -    âœ… Updated 37 authorships
2026-01-11 12:55:14 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 0 locations
2026-01-11 12:55:14 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:55:14 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 13092a22728c
2026-01-11 12:55:14 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 22
2026-01-11 12:55:14 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 22
2026-01-11 12:55:14 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 37
2026-01-11 12:55:14 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 0
2026-01-11 12:55:14 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 12:55:14 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-11 12:55:14 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-11 12:55:14 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 22
2026-01-11 12:55:14 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 22
2026-01-11 12:55:14 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 37
2026-01-11 12:55:14 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 0
2026-01-11 12:55:14 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-11 12:55:14 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 12:55:14 - app.main - INFO - ================================================================================
2026-01-11 12:55:14 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:55:14 - app.main - INFO -    Total PMIDs: 500
2026-01-11 12:55:14 - app.main - INFO -    Papers parsed: 500
2026-01-11 12:55:14 - app.main - INFO -    Authorships created: 4432
2026-01-11 12:55:14 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 12:55:14 - app.main - INFO -    Affiliations with country: 2512
2026-01-11 12:55:14 - app.main - INFO -    LLM calls made: 0
2026-01-11 12:55:14 - app.main - INFO - ================================================================================
2026-01-11 12:55:17 - app.main - INFO - ================================================================================
2026-01-11 12:55:17 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:55:17 - app.main - INFO -    Min confidence: low
2026-01-11 12:55:17 - app.main - INFO - ================================================================================
2026-01-11 12:55:17 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 12:55:17 - app.main - INFO - ================================================================================
2026-01-11 12:55:17 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:55:17 - app.main - INFO -    Min confidence: low
2026-01-11 12:55:17 - app.main - INFO - ================================================================================
2026-01-11 12:55:17 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 12:55:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 12:55:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 12:55:18 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 12:55:18 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 12:55:18 - app.main - INFO -    Countries returned: 51
2026-01-11 12:55:18 - app.main - INFO - ================================================================================
2026-01-11 12:55:19 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 12:55:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 12:55:19 - app.main - INFO -    Countries returned: 51
2026-01-11 12:55:19 - app.main - INFO - ================================================================================
2026-01-11 12:55:25 - app.main - INFO - ================================================================================
2026-01-11 12:55:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 12:55:25 - app.main - INFO -    Country: Morocco, Min confidence: low
2026-01-11 12:55:25 - app.main - INFO - ================================================================================
2026-01-11 12:55:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Morocco (normalized: Morocco)...
2026-01-11 12:55:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 12:55:28 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Cambridge, Morocco' (from affiliation: Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139.)
2026-01-11 12:55:28 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Morocco
2026-01-11 12:55:28 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Morocco
2026-01-11 12:55:28 - app.main - INFO -    Cities returned: 3
2026-01-11 12:55:28 - app.main - INFO - ================================================================================
2026-01-11 13:25:34 - root - INFO - ================================================================================
2026-01-11 13:25:34 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:25:34 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:25:34 - root - INFO - ================================================================================
2026-01-11 13:25:40 - root - INFO - ================================================================================
2026-01-11 13:25:40 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:25:40 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:25:40 - root - INFO - ================================================================================
2026-01-11 13:25:44 - root - INFO - ================================================================================
2026-01-11 13:25:44 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:25:44 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:25:44 - root - INFO - ================================================================================
2026-01-11 13:25:49 - root - INFO - ================================================================================
2026-01-11 13:25:49 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:25:49 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:25:49 - root - INFO - ================================================================================
2026-01-11 13:25:52 - root - INFO - ================================================================================
2026-01-11 13:25:52 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:25:52 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:25:52 - root - INFO - ================================================================================
2026-01-11 13:25:56 - root - INFO - ================================================================================
2026-01-11 13:25:56 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:25:56 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:25:56 - root - INFO - ================================================================================
2026-01-11 13:26:10 - root - INFO - ================================================================================
2026-01-11 13:26:10 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:26:10 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:26:10 - root - INFO - ================================================================================
2026-01-11 13:26:12 - root - INFO - ================================================================================
2026-01-11 13:26:12 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:26:12 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:26:12 - root - INFO - ================================================================================
2026-01-11 13:26:18 - root - INFO - ================================================================================
2026-01-11 13:26:18 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:26:18 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:26:18 - root - INFO - ================================================================================
2026-01-11 13:26:21 - root - INFO - ================================================================================
2026-01-11 13:26:21 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:26:21 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:26:21 - root - INFO - ================================================================================
2026-01-11 13:26:35 - root - INFO - ================================================================================
2026-01-11 13:26:35 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:26:35 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:26:35 - root - INFO - ================================================================================
2026-01-11 13:26:39 - root - INFO - ================================================================================
2026-01-11 13:26:39 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:26:39 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:26:39 - root - INFO - ================================================================================
2026-01-11 13:26:44 - root - INFO - ================================================================================
2026-01-11 13:26:44 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:26:44 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:26:44 - root - INFO - ================================================================================
2026-01-11 13:27:00 - root - INFO - ================================================================================
2026-01-11 13:27:00 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:27:00 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:27:00 - root - INFO - ================================================================================
2026-01-11 13:27:04 - root - INFO - ================================================================================
2026-01-11 13:27:04 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:27:04 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:27:04 - root - INFO - ================================================================================
2026-01-11 13:27:18 - root - INFO - ================================================================================
2026-01-11 13:27:18 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:27:18 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:27:18 - root - INFO - ================================================================================
2026-01-11 13:27:28 - root - INFO - ================================================================================
2026-01-11 13:27:28 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:27:28 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:27:28 - root - INFO - ================================================================================
2026-01-11 13:27:37 - root - INFO - ================================================================================
2026-01-11 13:27:37 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:27:37 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:27:37 - root - INFO - ================================================================================
2026-01-11 13:30:56 - root - INFO - ================================================================================
2026-01-11 13:30:56 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 13:30:56 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 13:30:56 - root - INFO - ================================================================================
2026-01-11 13:31:23 - app.main - INFO - ================================================================================
2026-01-11 13:31:23 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 13:31:23 - app.main - INFO -    Force refresh: False
2026-01-11 13:31:23 - app.main - INFO - ================================================================================
2026-01-11 13:31:23 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:31:23 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 13:31:23 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 13:31:23 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 13:31:23 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:31:23 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 13:31:25 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 13:31:25 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 13:31:25 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:31:25 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 13:31:25 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 13:31:25 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 13:31:26 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=30257858%2C39248654%2C31220442%2C29271713%2C8892373%2C24315545%2C38969758%2C36872854%2C40260174%2C26737497%2C35185491%2C39484239%2C31525179%2C39850351%2C36327599%2C33419861%2C27956570%2C24995815%2C38260011%2C26408491%2C38093008%2C39464426%2C40830488%2C37245559%2C27578414%2C22563311%2C40825359%2C38909761%2C34411517%2C39579033%2C27729844%2C30134167%2C24672012%2C41266624%2C40490093%2C40610484%2C39485790%2C41349179%2C26072003%2C24681353%2C32105726%2C21029784%2C39819752%2C40800288%2C30038000%2C27408802%2C24836588%2C27408803%2C25570869%2C34717248%2C36086071%2C36054730%2C28236761%2C18440570%2C35118367%2C32610290%2C30617653%2C20465359%2C21471638%2C35819528%2C31875441%2C15876624%2C37841873%2C37437189%2C28396294%2C31363096%2C27926827%2C41427281%2C38948730%2C38318272%2C37961305%2C41254404%2C40417558%2C31578420%2C23643922%2C22941838%2C38183998%2C24293161%2C36989073%2C37995287%2C23577157%2C40913530%2C34489664%2C28918128%2C34849596%2C28839071%2C32198060%2C22207857%2C29430213%2C41397928%2C39213665%2C30971792%2C37425292%2C37382208%2C31741702%2C34347873%2C37019103%2C37968869%2C37582062%2C31056408%2C26124702%2C41144819%2C40817733%2C34965874%2C35113857%2C38769157%2C25570199%2C39134741%2C29093659%2C29378977%2C29977189%2C28406383%2C39371161%2C24285843%2C27311642%2C40910467%2C14656066%2C25259669%2C39554006%2C40766385%2C38083559%2C29958109%2C21708506%2C36634533%2C32577713%2C34421555%2C38813793%2C41335998%2C30596439%2C9419036%2C33841081%2C39990331%2C41021378%2C41081527%2C31419636%2C29779940%2C28335018%2C27199720%2C29891885%2C32439539%2C37217308%2C35099768%2C33789135%2C33506209%2C35313351%2C33293456%2C38671062%2C20087111%2C32442776%2C25571556&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 13:31:27 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 13:31:27 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 13:31:27 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=39922365%2C38885688%2C41135818%2C39582595%2C41062786%2C30831567%2C20921326%2C40697162%2C37487487%2C17071238%2C39867597%2C31103409%2C35248810%2C30440349%2C41039113%2C32372065%2C35878727%2C40972658%2C31824257%2C26818506%2C41275704%2C35311092%2C21750369%2C27935031%2C21419227%2C31692177%2C23072156%2C25819402%2C35121181%2C34753819%2C34607318%2C29414401%2C27249656%2C25571558%2C27686506%2C36356309%2C41205609%2C32686761%2C33360179%2C38514133%2C38935898%2C39153482%2C32180695%2C26991386%2C38729074%2C41129388%2C26386644%2C38988764%2C27671642%2C39345158%2C24639642%2C17271737%2C30504559%2C38925110%2C25571555%2C39194182%2C27377299%2C39479009%2C30367077%2C9737437%2C34130614%2C26232713%2C36246502%2C31820736%2C30700532%2C26136107%2C41324025%2C28225156%2C41332755%2C17980999%2C37441880%2C22255777%2C39005394%2C32435182%2C34918613%2C38343801%2C38808652%2C34123657%2C28666338%2C18982128%2C21724424%2C25266305%2C41105453%2C29018336%2C35654375%2C40913768%2C41034198%2C20478745%2C33408621%2C40040033%2C35966994%2C23482627%2C29576436%2C28334963%2C25616459%2C30837823%2C32378738%2C24122368%2C27148018%2C33133815%2C28676308%2C40490003%2C38787551%2C39455254%2C29033809%2C31445890%2C35169837%2C38222047%2C37120741%2C41397373%2C26642090%2C28993231%2C23465430%2C28268620%2C41386385%2C40055549%2C16792292%2C39870041%2C40039596%2C36570848%2C41279744%2C37459853%2C40769034%2C41282818%2C23696279%2C24904404%2C31207466%2C30710356%2C40239679%2C35013268%2C30643130%2C38581367%2C35907491%2C39399739%2C28622530%2C28716965%2C17971857%2C39974103%2C30279650%2C36828156%2C35528322%2C37932250%2C21471374%2C32694561%2C32231340%2C38648781%2C32840483%2C38041253%2C34587350%2C37203491&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 13:31:27 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 13:31:27 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 13:31:28 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=39985774%2C20026224%2C31342677%2C29404403%2C35869138%2C16175856%2C19163831%2C37215328%2C29247963%2C29674950%2C41177674%2C38582333%2C34906982%2C32888480%2C33867912%2C32289685%2C40343020%2C37105171%2C38769115%2C30216929%2C34536230%2C25157216%2C15329073%2C29190521%2C40894619%2C25122702%2C36645968%2C22573665%2C29087324%2C26888939%2C37745380%2C40018762%2C26949710%2C23032488%2C12614397%2C33776668%2C15817517%2C41453123%2C29861132%2C39332803%2C39990398%2C25948269%2C30740659%2C25118584%2C29678760%2C35989149%2C27484713%2C25352799%2C28399442%2C27524194%2C35708911%2C29525721%2C38335090%2C38306217%2C19349241%2C25000321%2C27413155%2C23774120%2C30414541%2C31946284%2C33306299%2C41191764%2C17712784%2C38496670%2C19279495%2C32410969%2C33137575%2C25816090%2C31287601%2C31277857%2C30500619%2C21529188%2C32498058%2C39162748%2C40144585%2C33142282%2C35777988%2C22750156%2C40832215%2C29439164%2C37819985%2C26935890%2C40309789%2C40695313%2C38063368%2C34301825%2C24877680%2C34774771%2C40147418%2C36731812%2C39386565%2C41167038%2C40800829%2C26446212%2C28894834%2C34260835%2C32656294%2C34823894%2C39322094%2C37460730%2C37229140%2C34892495%2C33372958%2C30721879%2C30827578%2C39096896%2C26262160%2C23914170%2C29397190%2C38486966%2C40302941%2C29268943%2C28268617%2C32788249%2C27182530%2C37066306%2C21373361%2C19732923%2C33912122%2C35534226%2C39808939%2C37739786%2C32828921%2C25822912%2C22255402%2C24904069%2C35276657%2C30064321%2C27046113%2C27019106%2C30389490%2C30256217%2C35568349%2C40720979%2C40461573%2C37060887%2C29460482%2C20811093%2C34958951%2C28119593%2C26679420%2C27199638%2C22890647%2C15677998%2C39968245%2C37900727%2C34408717%2C29052465%2C37086161%2C30342252&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 13:31:29 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 13:31:29 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 13:31:29 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=25571553%2C30249918%2C23366629%2C25273279%2C40253415%2C21307246%2C27918346%2C37638314%2C41363150%2C30238924%2C24982625%2C22144944%2C37875404%2C27534393%2C37467739%2C33283856%2C27325763%2C19033707%2C41022986%2C27635975%2C22875868%2C35695785%2C28269552%2C33942078%2C24845600%2C22973215%2C40354107%2C39433597%2C36121939%2C25759647%2C40516665%2C28268618%2C30847390%2C37798921%2C37292795%2C38559163%2C39374038%2C27450996%2C36966852%2C25909573%2C31339411%2C41042753%2C38242691%2C25761260%2C30238309%2C35395633%2C22874396%2C33935673%2C38696121%2C26188384&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 13:31:29 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 13:31:29 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 13:31:30 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 13:31:30 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 13:31:30 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:31:30 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 13:31:31 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 13:31:31 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:31:31 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 13:31:31 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 13:31:31 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 13:31:31 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 13:31:32 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 2545 need extraction
2026-01-11 13:31:32 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2545 affiliations...
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    Loaded 1713 institutions to memory (1713 normalized names, 205 aliases)
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2545 (3%), matches found: 94
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2545 (7%), matches found: 181
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2545 (11%), matches found: 277
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2545 (15%), matches found: 368
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/2545 (19%), matches found: 458
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/2545 (23%), matches found: 545
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/2545 (27%), matches found: 635
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/2545 (31%), matches found: 725
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/2545 (35%), matches found: 821
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/2545 (39%), matches found: 909
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/2545 (43%), matches found: 1000
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/2545 (47%), matches found: 1094
2026-01-11 13:31:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/2545 (51%), matches found: 1187
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/2545 (55%), matches found: 1277
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/2545 (58%), matches found: 1363
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/2545 (62%), matches found: 1454
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1700/2545 (66%), matches found: 1542
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1800/2545 (70%), matches found: 1632
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1900/2545 (74%), matches found: 1725
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2000/2545 (78%), matches found: 1820
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2100/2545 (82%), matches found: 1913
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2200/2545 (86%), matches found: 2007
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2300/2545 (90%), matches found: 2096
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2400/2545 (94%), matches found: 2188
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2500/2545 (98%), matches found: 2285
2026-01-11 13:31:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2545/2545 (100%), matches found: 2324
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 2324 matches found
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    Extracting 221 affiliations using rule-based parser...
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 22/221 (9%)
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 44/221 (19%)
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 66/221 (29%)
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 88/221 (39%)
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 110/221 (49%)
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 132/221 (59%)
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 154/221 (69%)
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 176/221 (79%)
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 198/221 (89%)
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 220/221 (99%)
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 221/221 (100%)
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 221 results
2026-01-11 13:31:33 - app.phase2.rule_based_extractor - INFO -       Pending validation: 108 institutions
2026-01-11 13:31:35 - app.phase2.pg_ingest - INFO -    Cached 2545 new affiliation extraction results to affiliation_cache table
2026-01-11 13:31:35 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2512 with country
2026-01-11 13:31:35 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 13:31:35 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 13:31:35 - app.phase2.pg_ingest - INFO -    With country: 2512
2026-01-11 13:31:35 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 13:31:35 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:31:35 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 13:31:35 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 13:31:36 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 13:31:36 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 13:31:36 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 13:31:36 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2512
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO - 
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 0
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 2324
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 221
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 217
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO - 
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 108
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO - 
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 13:31:42 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 13:31:42 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 108
2026-01-11 13:31:42 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:31:42 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 13:31:43 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 13:31:43 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:31:43 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-11 13:31:43 - app.phase2.affiliation_validator - INFO -    Found 342 unique location keys from 4432 authorships
2026-01-11 13:31:43 - app.phase2.affiliation_validator - INFO -    Batch query complete: 342/342 found in cache
2026-01-11 13:31:43 - app.phase2.affiliation_validator - INFO -    Processing 0 unique location keys via Nominatim...
2026-01-11 13:31:43 - app.phase2.affiliation_validator - INFO -    Batch updating 3746 affiliations for 328 cached locations...
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 328 locations (3746 total affiliations)
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 108 pending institutions to institution_geo...
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO -    âš ï¸  No institutions passed geocoding validation
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4432
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3783
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO -    Cache misses: 0
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 0
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 21
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 11
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 0/108
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 21 error affiliations with LLM...
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO -    Collecting 21 unique error affiliations for LLM fix
2026-01-11 13:32:01 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-11 13:32:01 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 21 affiliations...
2026-01-11 13:32:01 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 21 affiliations...
2026-01-11 13:32:01 - app.phase2.institution_matcher - INFO -    Loaded 1713 institutions to memory (1713 normalized names, 205 aliases)
2026-01-11 13:32:01 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/21 (9%), matches found: 1
2026-01-11 13:32:01 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/21 (19%), matches found: 3
2026-01-11 13:32:01 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/21 (28%), matches found: 5
2026-01-11 13:32:01 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/21 (38%), matches found: 7
2026-01-11 13:32:01 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/21 (47%), matches found: 9
2026-01-11 13:32:01 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/21 (57%), matches found: 9
2026-01-11 13:32:01 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/21 (66%), matches found: 11
2026-01-11 13:32:01 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/21 (76%), matches found: 13
2026-01-11 13:32:01 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/21 (85%), matches found: 15
2026-01-11 13:32:01 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/21 (95%), matches found: 17
2026-01-11 13:32:01 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 21/21 (100%), matches found: 18
2026-01-11 13:32:01 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 18 matches found
2026-01-11 13:32:01 - app.phase2.affiliation_extractor - INFO -    Extracting 3 affiliations via LLM (affiliation_cache: 0, institution_geo: 18) in batches of 20
2026-01-11 13:32:01 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/1 (3 affiliations)
2026-01-11 13:32:03 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-11 13:32:04 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 3 affiliations processed
2026-01-11 13:32:04 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 21 results from 1 LLM calls
2026-01-11 13:32:04 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 21 LLM results...
2026-01-11 13:32:04 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 21 LLM results
2026-01-11 13:32:04 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-11 13:32:04 - app.phase2.affiliation_validator - INFO -    Processing 13 unique location keys for re-geocoding...
2026-01-11 13:32:11 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 21 affiliations
2026-01-11 13:32:11 - app.phase2.affiliation_validator - INFO -    âœ… Updated 36 authorships
2026-01-11 13:32:11 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 1 locations
2026-01-11 13:32:11 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:32:11 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 13092a22728c
2026-01-11 13:32:11 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 21
2026-01-11 13:32:11 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 21
2026-01-11 13:32:11 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 36
2026-01-11 13:32:11 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 1
2026-01-11 13:32:11 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 13:32:11 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-11 13:32:11 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-11 13:32:11 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 21
2026-01-11 13:32:11 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 21
2026-01-11 13:32:11 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 36
2026-01-11 13:32:11 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 1
2026-01-11 13:32:11 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 0
2026-01-11 13:32:11 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-11 13:32:11 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 13:32:11 - app.main - INFO - ================================================================================
2026-01-11 13:32:11 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 13:32:11 - app.main - INFO -    Total PMIDs: 500
2026-01-11 13:32:11 - app.main - INFO -    Papers parsed: 500
2026-01-11 13:32:11 - app.main - INFO -    Authorships created: 4432
2026-01-11 13:32:11 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 13:32:11 - app.main - INFO -    Affiliations with country: 2512
2026-01-11 13:32:11 - app.main - INFO -    LLM calls made: 0
2026-01-11 13:32:11 - app.main - INFO - ================================================================================
2026-01-11 13:32:45 - app.main - INFO - ================================================================================
2026-01-11 13:32:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 13:32:45 - app.main - INFO -    Min confidence: low
2026-01-11 13:32:45 - app.main - INFO - ================================================================================
2026-01-11 13:32:45 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 13:32:45 - app.main - INFO - ================================================================================
2026-01-11 13:32:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 13:32:45 - app.main - INFO -    Min confidence: low
2026-01-11 13:32:45 - app.main - INFO - ================================================================================
2026-01-11 13:32:45 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 13:32:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 13:32:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 13:32:46 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 13:32:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 13:32:46 - app.main - INFO -    Countries returned: 51
2026-01-11 13:32:46 - app.main - INFO - ================================================================================
2026-01-11 13:32:47 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 13:32:47 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 13:32:47 - app.main - INFO -    Countries returned: 51
2026-01-11 13:32:47 - app.main - INFO - ================================================================================
2026-01-11 13:32:51 - app.main - INFO - ================================================================================
2026-01-11 13:32:51 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 13:32:51 - app.main - INFO -    Country: Morocco, Min confidence: low
2026-01-11 13:32:51 - app.main - INFO - ================================================================================
2026-01-11 13:32:51 - app.phase2.pg_aggregations - INFO -    Getting country map for Morocco (normalized: Morocco)...
2026-01-11 13:32:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 13:32:52 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Morocco
2026-01-11 13:32:52 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Morocco
2026-01-11 13:32:52 - app.main - INFO -    Cities returned: 2
2026-01-11 13:32:52 - app.main - INFO - ================================================================================
2026-01-11 13:33:05 - app.main - INFO - ================================================================================
2026-01-11 13:33:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 13:33:05 - app.main - INFO -    Country: Morocco, City: Tangier, Min confidence: low
2026-01-11 13:33:05 - app.main - INFO - ================================================================================
2026-01-11 13:33:05 - app.phase2.pg_aggregations - INFO -    Getting city map for Tangier, Morocco...
2026-01-11 13:33:05 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 13:33:05 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Tangier, Morocco
2026-01-11 13:33:05 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Tangier, Morocco
2026-01-11 13:33:05 - app.main - INFO -    Institutions returned: 1
2026-01-11 13:33:05 - app.main - INFO - ================================================================================
2026-01-11 13:33:54 - app.main - INFO - ================================================================================
2026-01-11 13:33:54 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 13:33:54 - app.main - INFO -    Country: Morocco, Min confidence: low
2026-01-11 13:33:54 - app.main - INFO - ================================================================================
2026-01-11 13:33:54 - app.phase2.pg_aggregations - INFO -    Getting country map for Morocco (normalized: Morocco)...
2026-01-11 13:33:54 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 13:33:55 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Morocco
2026-01-11 13:33:55 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Morocco
2026-01-11 13:33:55 - app.main - INFO -    Cities returned: 2
2026-01-11 13:33:55 - app.main - INFO - ================================================================================
2026-01-11 14:01:47 - app.main - INFO - ================================================================================
2026-01-11 14:01:47 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:01:47 - app.main - INFO -    Force refresh: False
2026-01-11 14:01:47 - app.main - INFO - ================================================================================
2026-01-11 14:01:47 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:01:47 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 14:01:47 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 14:01:47 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 14:01:47 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:01:47 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 14:01:54 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 14:01:54 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 14:01:54 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:01:54 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 14:01:54 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 14:01:54 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 14:01:54 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=30257858%2C39248654%2C31220442%2C29271713%2C8892373%2C24315545%2C38969758%2C36872854%2C40260174%2C26737497%2C35185491%2C39484239%2C31525179%2C39850351%2C36327599%2C33419861%2C27956570%2C24995815%2C38260011%2C26408491%2C38093008%2C39464426%2C40830488%2C37245559%2C27578414%2C22563311%2C40825359%2C38909761%2C34411517%2C39579033%2C27729844%2C30134167%2C24672012%2C41266624%2C40490093%2C40610484%2C39485790%2C41349179%2C26072003%2C24681353%2C32105726%2C21029784%2C39819752%2C40800288%2C30038000%2C27408802%2C24836588%2C27408803%2C25570869%2C34717248%2C36086071%2C36054730%2C28236761%2C18440570%2C35118367%2C32610290%2C30617653%2C20465359%2C21471638%2C35819528%2C31875441%2C15876624%2C37841873%2C37437189%2C28396294%2C31363096%2C27926827%2C41427281%2C38948730%2C38318272%2C37961305%2C41254404%2C40417558%2C31578420%2C23643922%2C22941838%2C38183998%2C24293161%2C36989073%2C37995287%2C23577157%2C40913530%2C34489664%2C28918128%2C34849596%2C28839071%2C32198060%2C22207857%2C29430213%2C41397928%2C39213665%2C30971792%2C37425292%2C37382208%2C31741702%2C34347873%2C37019103%2C37968869%2C37582062%2C31056408%2C26124702%2C41144819%2C40817733%2C34965874%2C35113857%2C38769157%2C25570199%2C39134741%2C29093659%2C29378977%2C29977189%2C28406383%2C39371161%2C24285843%2C27311642%2C40910467%2C14656066%2C25259669%2C39554006%2C40766385%2C38083559%2C29958109%2C21708506%2C36634533%2C32577713%2C34421555%2C38813793%2C41335998%2C30596439%2C9419036%2C33841081%2C39990331%2C41021378%2C41081527%2C31419636%2C29779940%2C28335018%2C27199720%2C29891885%2C32439539%2C37217308%2C35099768%2C33789135%2C33506209%2C35313351%2C33293456%2C38671062%2C20087111%2C32442776%2C25571556&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:01:55 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 14:01:55 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 14:01:55 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=39922365%2C38885688%2C41135818%2C39582595%2C41062786%2C30831567%2C20921326%2C40697162%2C37487487%2C17071238%2C39867597%2C31103409%2C35248810%2C30440349%2C41039113%2C32372065%2C35878727%2C40972658%2C31824257%2C26818506%2C41275704%2C35311092%2C21750369%2C27935031%2C21419227%2C31692177%2C23072156%2C25819402%2C35121181%2C34753819%2C34607318%2C29414401%2C27249656%2C25571558%2C27686506%2C36356309%2C41205609%2C32686761%2C33360179%2C38514133%2C38935898%2C39153482%2C32180695%2C26991386%2C38729074%2C41129388%2C26386644%2C38988764%2C27671642%2C39345158%2C24639642%2C17271737%2C30504559%2C38925110%2C25571555%2C39194182%2C27377299%2C39479009%2C30367077%2C9737437%2C34130614%2C26232713%2C36246502%2C31820736%2C30700532%2C26136107%2C41324025%2C28225156%2C41332755%2C17980999%2C37441880%2C22255777%2C39005394%2C32435182%2C34918613%2C38343801%2C38808652%2C34123657%2C28666338%2C18982128%2C21724424%2C25266305%2C41105453%2C29018336%2C35654375%2C40913768%2C41034198%2C20478745%2C33408621%2C40040033%2C35966994%2C23482627%2C29576436%2C28334963%2C25616459%2C30837823%2C32378738%2C24122368%2C27148018%2C33133815%2C28676308%2C40490003%2C38787551%2C39455254%2C29033809%2C31445890%2C35169837%2C38222047%2C37120741%2C41397373%2C26642090%2C28993231%2C23465430%2C28268620%2C41386385%2C40055549%2C16792292%2C39870041%2C40039596%2C36570848%2C41279744%2C37459853%2C40769034%2C41282818%2C23696279%2C24904404%2C31207466%2C30710356%2C40239679%2C35013268%2C30643130%2C38581367%2C35907491%2C39399739%2C28622530%2C28716965%2C17971857%2C39974103%2C30279650%2C36828156%2C35528322%2C37932250%2C21471374%2C32694561%2C32231340%2C38648781%2C32840483%2C38041253%2C34587350%2C37203491&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:01:56 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 14:01:56 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 14:01:56 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=39985774%2C20026224%2C31342677%2C29404403%2C35869138%2C16175856%2C19163831%2C37215328%2C29247963%2C29674950%2C41177674%2C38582333%2C34906982%2C32888480%2C33867912%2C32289685%2C40343020%2C37105171%2C38769115%2C30216929%2C34536230%2C25157216%2C15329073%2C29190521%2C40894619%2C25122702%2C36645968%2C22573665%2C29087324%2C26888939%2C37745380%2C40018762%2C26949710%2C23032488%2C12614397%2C33776668%2C15817517%2C41453123%2C29861132%2C39332803%2C39990398%2C25948269%2C30740659%2C25118584%2C29678760%2C35989149%2C27484713%2C25352799%2C28399442%2C27524194%2C35708911%2C29525721%2C38335090%2C38306217%2C19349241%2C25000321%2C27413155%2C23774120%2C30414541%2C31946284%2C33306299%2C41191764%2C17712784%2C38496670%2C19279495%2C32410969%2C33137575%2C25816090%2C31287601%2C31277857%2C30500619%2C21529188%2C32498058%2C39162748%2C40144585%2C33142282%2C35777988%2C22750156%2C40832215%2C29439164%2C37819985%2C26935890%2C40309789%2C40695313%2C38063368%2C34301825%2C24877680%2C34774771%2C40147418%2C36731812%2C39386565%2C41167038%2C40800829%2C26446212%2C28894834%2C34260835%2C32656294%2C34823894%2C39322094%2C37460730%2C37229140%2C34892495%2C33372958%2C30721879%2C30827578%2C39096896%2C26262160%2C23914170%2C29397190%2C38486966%2C40302941%2C29268943%2C28268617%2C32788249%2C27182530%2C37066306%2C21373361%2C19732923%2C33912122%2C35534226%2C39808939%2C37739786%2C32828921%2C25822912%2C22255402%2C24904069%2C35276657%2C30064321%2C27046113%2C27019106%2C30389490%2C30256217%2C35568349%2C40720979%2C40461573%2C37060887%2C29460482%2C20811093%2C34958951%2C28119593%2C26679420%2C27199638%2C22890647%2C15677998%2C39968245%2C37900727%2C34408717%2C29052465%2C37086161%2C30342252&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:01:57 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 14:01:57 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 14:01:57 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=25571553%2C30249918%2C23366629%2C25273279%2C40253415%2C21307246%2C27918346%2C37638314%2C41363150%2C30238924%2C24982625%2C22144944%2C37875404%2C27534393%2C37467739%2C33283856%2C27325763%2C19033707%2C41022986%2C27635975%2C22875868%2C35695785%2C28269552%2C33942078%2C24845600%2C22973215%2C40354107%2C39433597%2C36121939%2C25759647%2C40516665%2C28268618%2C30847390%2C37798921%2C37292795%2C38559163%2C39374038%2C27450996%2C36966852%2C25909573%2C31339411%2C41042753%2C38242691%2C25761260%2C30238309%2C35395633%2C22874396%2C33935673%2C38696121%2C26188384&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:01:58 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 14:01:58 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 14:01:58 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 14:01:58 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 14:01:58 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:01:58 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 14:01:58 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 14:01:58 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:01:58 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 14:01:58 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 14:01:58 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 14:01:58 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 14:01:59 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 2544 hits, 1 need extraction
2026-01-11 14:01:59 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 1 affiliations...
2026-01-11 14:02:00 - app.phase2.institution_matcher - INFO -    Loaded 1713 institutions to memory (1713 normalized names, 205 aliases)
2026-01-11 14:02:00 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1/1 (100%), matches found: 0
2026-01-11 14:02:00 - app.phase2.rule_based_extractor - INFO -    Extracting 1 affiliations using rule-based parser...
2026-01-11 14:02:00 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1/1 (100%)
2026-01-11 14:02:00 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 1 results
2026-01-11 14:02:00 - app.phase2.rule_based_extractor - INFO -       Pending validation: 1 institutions
2026-01-11 14:02:00 - app.phase2.pg_ingest - INFO -    Cached 1 new affiliation extraction results to affiliation_cache table
2026-01-11 14:02:00 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2511 with country
2026-01-11 14:02:00 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 14:02:00 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 14:02:00 - app.phase2.pg_ingest - INFO -    With country: 2511
2026-01-11 14:02:00 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 14:02:00 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:02:00 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 14:02:00 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 14:02:01 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 14:02:01 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 14:02:01 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 14:02:01 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2511
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO - 
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 2544
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 0
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 1
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 1
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO - 
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 1
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO - 
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 14:02:08 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 14:02:08 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 1
2026-01-11 14:02:08 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:02:08 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 14:02:09 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 14:02:09 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:02:09 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-11 14:02:09 - app.phase2.affiliation_validator - INFO -    Found 340 unique location keys from 4432 authorships
2026-01-11 14:02:10 - app.phase2.affiliation_validator - INFO -    Batch query complete: 339/340 found in cache
2026-01-11 14:02:10 - app.phase2.affiliation_validator - INFO -    Processing 1 unique location keys via Nominatim...
2026-01-11 14:02:12 - app.phase2.pg_geocoding - INFO - Geocoded 'U.S.A, Morocco' -> (40.9463651, -87.4529316)
2026-01-11 14:02:12 - app.phase2.affiliation_validator - INFO -    Batch updating 3747 affiliations for 327 cached locations...
2026-01-11 14:02:28 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 327 locations (3747 total affiliations)
2026-01-11 14:02:28 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:02:28 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 1 pending institutions to institution_geo...
2026-01-11 14:02:28 - app.phase2.pg_ingest - ERROR - âŒ Validation and fix failed: 'InstitutionGeoRepository' object has no attribute 'get_by_normalized_name'
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_ingest.py", line 183, in ingest_run
    validation_stats = await validator.validate_and_fix_run(
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/affiliation_validator.py", line 290, in validate_and_fix_run
    added_count = await self._batch_add_to_institution_geo(institutions_to_add)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/affiliation_validator.py", line 363, in _batch_add_to_institution_geo
    existing = await repo.get_by_normalized_name(normalized_name)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'InstitutionGeoRepository' object has no attribute 'get_by_normalized_name'
2026-01-11 14:02:28 - app.main - INFO - ================================================================================
2026-01-11 14:02:28 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:02:28 - app.main - INFO -    Total PMIDs: 500
2026-01-11 14:02:28 - app.main - INFO -    Papers parsed: 500
2026-01-11 14:02:28 - app.main - INFO -    Authorships created: 4432
2026-01-11 14:02:28 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 14:02:28 - app.main - INFO -    Affiliations with country: 2511
2026-01-11 14:02:28 - app.main - INFO -    LLM calls made: 0
2026-01-11 14:02:28 - app.main - INFO - ================================================================================
2026-01-11 14:04:06 - root - INFO - ================================================================================
2026-01-11 14:04:06 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 14:04:06 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 14:04:06 - root - INFO - ================================================================================
2026-01-11 14:06:36 - root - INFO - ================================================================================
2026-01-11 14:06:36 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 14:06:36 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 14:06:36 - root - INFO - ================================================================================
2026-01-11 14:07:06 - app.main - INFO - ================================================================================
2026-01-11 14:07:06 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:07:06 - app.main - INFO -    Force refresh: False
2026-01-11 14:07:06 - app.main - INFO - ================================================================================
2026-01-11 14:07:06 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:06 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 14:07:06 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 14:07:06 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 14:07:06 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:06 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 14:07:08 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 14:07:08 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 14:07:08 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:08 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 14:07:08 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 14:07:08 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 14:07:09 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=35313351%2C14656066%2C23032488%2C32180695%2C41105453%2C35113857%2C16175856%2C26188384%2C35185491%2C39484239%2C39322094%2C37382208%2C29033809%2C40913768%2C31220442%2C31339411%2C24982625%2C36054730%2C37582062%2C27019106%2C30238924%2C38041253%2C30342252%2C25259669%2C32435182%2C27686506%2C29093659%2C32610290%2C38183998%2C27956570%2C27671642%2C31103409%2C39162748%2C39371161%2C22875868%2C37745380%2C37841873%2C39985774%2C38729074%2C34823894%2C40417558%2C22563311%2C24122368%2C30710356%2C38260011%2C39554006%2C28399442%2C30064321%2C25816090%2C40144585%2C21724424%2C39867597%2C39345158%2C38969758%2C29779940%2C38306217%2C37066306%2C31525179%2C17712784%2C8892373%2C20811093%2C38559163%2C29958109%2C31287601%2C29271713%2C24285843%2C20465359%2C28396294%2C40302941%2C30038000%2C40018762%2C22255777%2C33142282%2C41282818%2C28236761%2C19163831%2C32694561%2C36731812%2C23465430%2C26642090%2C18440570%2C25122702%2C29576436%2C33776668%2C41081527%2C37120741%2C9737437%2C38988764%2C39153482%2C27935031%2C39096896%2C35311092%2C24904069%2C26818506%2C21373361%2C41144819%2C39968245%2C25616459%2C21029784%2C37638314%2C34753819%2C40039596%2C35819528%2C25571558%2C36828156%2C36086071%2C37245559%2C21529188%2C30238309%2C29891885%2C35121181%2C26072003%2C40825359%2C35528322%2C36121939%2C28334963%2C25571553%2C34536230%2C23774120%2C22573665%2C41135818%2C38769157%2C23072156%2C37217308%2C31946284%2C41266624%2C31445890%2C27413155%2C39455254%2C29460482%2C23696279%2C27450996%2C30721879%2C39399739%2C32105726%2C40147418%2C37441880%2C31820736%2C34301825%2C41254404%2C25948269%2C41279744%2C31419636%2C38093008%2C34906982%2C17980999%2C38242691%2C38063368%2C29678760%2C25000321&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:07:09 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 14:07:09 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 14:07:10 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=26935890%2C35966994%2C24672012%2C9419036%2C41349179%2C39374038%2C39819752%2C29525721%2C41177674%2C37229140%2C34411517%2C21708506%2C28666338%2C34965874%2C40800829%2C39922365%2C39464426%2C37086161%2C33293456%2C30249918%2C32442776%2C31578420%2C23577157%2C37060887%2C41386385%2C41332755%2C26737497%2C37459853%2C12614397%2C38335090%2C34123657%2C21307246%2C36327599%2C35276657%2C27408802%2C22207857%2C40697162%2C35777988%2C30596439%2C21471638%2C40913530%2C38486966%2C37798921%2C28622530%2C37968869%2C28839071%2C38222047%2C25571556%2C35169837%2C38909761%2C41427281%2C40972658%2C26136107%2C30504559%2C27199720%2C28676308%2C40800288%2C28268620%2C39194182%2C25352799%2C22973215%2C41129388%2C36246502%2C28225156%2C17071238%2C39332803%2C22750156%2C39134741%2C39990331%2C35989149%2C25571555%2C19033707%2C34918613%2C33506209%2C25759647%2C41397928%2C26262160%2C38083559%2C35395633%2C37467739%2C37739786%2C37460730%2C40832215%2C32498058%2C38769115%2C39248654%2C35869138%2C28993231%2C40309789%2C23482627%2C35013268%2C39433597%2C34587350%2C37215328%2C30643130%2C33137575%2C37425292%2C23914170%2C24681353%2C32289685%2C32656294%2C31741702%2C37900727%2C32840483%2C27578414%2C22874396%2C17971857%2C31056408%2C29378977%2C30414541%2C38696121%2C18982128%2C40610484%2C24845600%2C34260835%2C25266305%2C38514133%2C37203491%2C24639642%2C29861132%2C38671062%2C35248810%2C23643922%2C37995287%2C27325763%2C34717248%2C28268617%2C32439539%2C28406383%2C32888480%2C29397190%2C24877680%2C30256217%2C28269552%2C38925110%2C27249656%2C41062786%2C35118367%2C41042753%2C37292795%2C29430213%2C26232713%2C35695785%2C32378738%2C29977189%2C30617653%2C34347873%2C40516665%2C26949710%2C39990398&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:07:11 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 14:07:11 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 14:07:11 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=34421555%2C40769034%2C37961305%2C25570199%2C19349241%2C25118584%2C36872854%2C19732923%2C38582333%2C30440349%2C33133815%2C39479009%2C40910467%2C39485790%2C36570848%2C28335018%2C35708911%2C28716965%2C38343801%2C30389490%2C39005394%2C29404403%2C30831567%2C25273279%2C40817733%2C35907491%2C37932250%2C38885688%2C33942078%2C33912122%2C39386565%2C39582595%2C40239679%2C27182530%2C29052465%2C41453123%2C34408717%2C31692177%2C28119593%2C29247963%2C34489664%2C39850351%2C26124702%2C30367077%2C25909573%2C27377299%2C33867912%2C17271737%2C25761260%2C30257858%2C38496670%2C20921326%2C25819402%2C40354107%2C37019103%2C34774771%2C27199638%2C35654375%2C39808939%2C39870041%2C41022986%2C27926827%2C15876624%2C40260174%2C38813793%2C27148018%2C24293161%2C29439164%2C34892495%2C34607318%2C24904404%2C21471374%2C36989073%2C41205609%2C27408803%2C29268943%2C40253415%2C30837823%2C23366629%2C27046113%2C26408491%2C27729844%2C38935898%2C22144944%2C40830488%2C24995815%2C21750369%2C33360179%2C38318272%2C15677998%2C26386644%2C27534393%2C34849596%2C35568349%2C32410969%2C22941838%2C27635975%2C33372958%2C27524194%2C41039113%2C31363096%2C16792292%2C26446212%2C36966852%2C31342677%2C28918128%2C28268618%2C21419227%2C26888939%2C33789135%2C15817517%2C41324025%2C25157216%2C15329073%2C33419861%2C26679420%2C39974103%2C33283856%2C41167038%2C27918346%2C40894619%2C30279650%2C30847390%2C38581367%2C37819985%2C26991386%2C35099768%2C33841081%2C33306299%2C27311642%2C27484713%2C34130614%2C30971792%2C38648781%2C24315545%2C35534226%2C41363150%2C40490093%2C31875441%2C25822912%2C40040033%2C41021378%2C33935673%2C30827578%2C31824257%2C30500619%2C37487487%2C29018336%2C20087111%2C35878727&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:07:12 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 14:07:12 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 14:07:12 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=32577713%2C31277857%2C40720979%2C25570869%2C41335998%2C32828921%2C31207466%2C40055549%2C30134167%2C24836588%2C22255402%2C20478745%2C41397373%2C29414401%2C20026224%2C19279495%2C37105171%2C38808652%2C32231340%2C39579033%2C22890647%2C40766385%2C33408621%2C29674950%2C40343020%2C30740659%2C38787551%2C29190521%2C28894834%2C34958951%2C32686761%2C41034198%2C30216929%2C29087324%2C39213665%2C40490003%2C38948730%2C32372065%2C37875404%2C36645968%2C41191764%2C32198060%2C30700532%2C32788249%2C40461573%2C40695313%2C36634533%2C41275704%2C37437189%2C36356309&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:07:12 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 14:07:12 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 14:07:13 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 14:07:13 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 14:07:13 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:13 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 14:07:13 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 14:07:13 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:13 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 14:07:13 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 14:07:13 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 14:07:13 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 14:07:14 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 2544 hits, 1 need extraction
2026-01-11 14:07:14 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 1 affiliations...
2026-01-11 14:07:14 - app.phase2.institution_matcher - INFO -    Loaded 1713 institutions to memory (1713 normalized names, 205 aliases)
2026-01-11 14:07:15 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1/1 (100%), matches found: 0
2026-01-11 14:07:15 - app.phase2.rule_based_extractor - INFO -    Extracting 1 affiliations using rule-based parser...
2026-01-11 14:07:15 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1/1 (100%)
2026-01-11 14:07:15 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 1 results
2026-01-11 14:07:15 - app.phase2.rule_based_extractor - INFO -       Pending validation: 1 institutions
2026-01-11 14:07:15 - app.phase2.pg_ingest - INFO -    Cached 1 new affiliation extraction results to affiliation_cache table
2026-01-11 14:07:15 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2511 with country
2026-01-11 14:07:15 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 14:07:15 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 14:07:15 - app.phase2.pg_ingest - INFO -    With country: 2511
2026-01-11 14:07:15 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 14:07:15 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:15 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 14:07:15 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 14:07:15 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 14:07:15 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 14:07:16 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 14:07:16 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2511
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO - 
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 2544
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 0
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 1
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 1
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO - 
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 1
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO - 
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 14:07:22 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 14:07:22 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 1
2026-01-11 14:07:22 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:22 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 14:07:23 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 14:07:23 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:23 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-11 14:07:23 - app.phase2.affiliation_validator - INFO -    Found 340 unique location keys from 4432 authorships
2026-01-11 14:07:23 - app.phase2.affiliation_validator - INFO -    Batch query complete: 339/340 found in cache
2026-01-11 14:07:23 - app.phase2.affiliation_validator - INFO -    Processing 1 unique location keys via Nominatim...
2026-01-11 14:07:25 - app.phase2.pg_geocoding - INFO - Geocoded 'U.S.A, Morocco' -> (40.9463651, -87.4529316)
2026-01-11 14:07:26 - app.phase2.affiliation_validator - INFO -    Batch updating 3747 affiliations for 327 cached locations...
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 327 locations (3747 total affiliations)
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 1 pending institutions to institution_geo...
2026-01-11 14:07:40 - app.phase2.affiliation_validator - WARNING - Failed to add institution Massachusetts General Hospital: 'InstitutionGeoRepository' object has no attribute 'create'
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO -    âœ… Added 0 validated institutions to institution_geo table
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4432
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3781
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO -    Cache misses: 1
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 1
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 18
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 9
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 0/1
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 18 error affiliations with LLM...
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO -    Collecting 18 unique error affiliations for LLM fix
2026-01-11 14:07:40 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-11 14:07:40 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 18 affiliations...
2026-01-11 14:07:40 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 18 affiliations...
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    Loaded 1713 institutions to memory (1713 normalized names, 205 aliases)
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1/18 (5%), matches found: 1
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/18 (11%), matches found: 2
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 3/18 (16%), matches found: 3
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/18 (22%), matches found: 4
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 5/18 (27%), matches found: 5
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/18 (33%), matches found: 6
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 7/18 (38%), matches found: 7
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/18 (44%), matches found: 8
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 9/18 (50%), matches found: 9
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/18 (55%), matches found: 10
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 11/18 (61%), matches found: 11
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/18 (66%), matches found: 12
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 13/18 (72%), matches found: 13
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/18 (77%), matches found: 14
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 15/18 (83%), matches found: 15
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/18 (88%), matches found: 16
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 17/18 (94%), matches found: 17
2026-01-11 14:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/18 (100%), matches found: 18
2026-01-11 14:07:41 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 18 matches found
2026-01-11 14:07:41 - app.phase2.affiliation_extractor - INFO -    âœ… All 18 affiliations found in cache/institution_geo
2026-01-11 14:07:41 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 18 results from 0 LLM calls
2026-01-11 14:07:41 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 18 LLM results...
2026-01-11 14:07:41 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 18 LLM results
2026-01-11 14:07:41 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-11 14:07:41 - app.phase2.affiliation_validator - INFO -    Processing 12 unique location keys for re-geocoding...
2026-01-11 14:07:47 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 18 affiliations
2026-01-11 14:07:47 - app.phase2.affiliation_validator - INFO -    âœ… Updated 34 authorships
2026-01-11 14:07:47 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 0 locations
2026-01-11 14:07:47 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:47 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 13092a22728c
2026-01-11 14:07:47 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 18
2026-01-11 14:07:47 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 18
2026-01-11 14:07:47 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 34
2026-01-11 14:07:47 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 0
2026-01-11 14:07:47 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:07:47 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-11 14:07:47 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-11 14:07:47 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 18
2026-01-11 14:07:47 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 18
2026-01-11 14:07:47 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 34
2026-01-11 14:07:47 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 0
2026-01-11 14:07:47 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 0
2026-01-11 14:07:47 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-11 14:07:47 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 14:07:47 - app.main - INFO - ================================================================================
2026-01-11 14:07:47 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:07:47 - app.main - INFO -    Total PMIDs: 500
2026-01-11 14:07:47 - app.main - INFO -    Papers parsed: 500
2026-01-11 14:07:47 - app.main - INFO -    Authorships created: 4432
2026-01-11 14:07:47 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 14:07:47 - app.main - INFO -    Affiliations with country: 2511
2026-01-11 14:07:47 - app.main - INFO -    LLM calls made: 0
2026-01-11 14:07:47 - app.main - INFO - ================================================================================
2026-01-11 14:10:00 - app.main - INFO - ================================================================================
2026-01-11 14:10:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:10:00 - app.main - INFO -    Min confidence: low
2026-01-11 14:10:00 - app.main - INFO - ================================================================================
2026-01-11 14:10:00 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 14:10:01 - app.main - INFO - ================================================================================
2026-01-11 14:10:01 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:10:01 - app.main - INFO -    Min confidence: low
2026-01-11 14:10:01 - app.main - INFO - ================================================================================
2026-01-11 14:10:01 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 14:10:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 14:10:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 14:10:01 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 14:10:01 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 14:10:01 - app.main - INFO -    Countries returned: 51
2026-01-11 14:10:01 - app.main - INFO - ================================================================================
2026-01-11 14:10:02 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 14:10:02 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 14:10:02 - app.main - INFO -    Countries returned: 51
2026-01-11 14:10:02 - app.main - INFO - ================================================================================
2026-01-11 14:10:04 - app.main - INFO - ================================================================================
2026-01-11 14:10:04 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:10:04 - app.main - INFO -    Country: Morocco, Min confidence: low
2026-01-11 14:10:04 - app.main - INFO - ================================================================================
2026-01-11 14:10:04 - app.phase2.pg_aggregations - INFO -    Getting country map for Morocco (normalized: Morocco)...
2026-01-11 14:10:05 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 14:10:05 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Morocco
2026-01-11 14:10:05 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Morocco
2026-01-11 14:10:05 - app.main - INFO -    Cities returned: 2
2026-01-11 14:10:05 - app.main - INFO - ================================================================================
2026-01-11 14:12:01 - root - INFO - ================================================================================
2026-01-11 14:12:01 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 14:12:01 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 14:12:01 - root - INFO - ================================================================================
2026-01-11 14:12:59 - app.main - INFO - ================================================================================
2026-01-11 14:12:59 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:12:59 - app.main - INFO -    Force refresh: False
2026-01-11 14:12:59 - app.main - INFO - ================================================================================
2026-01-11 14:12:59 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:12:59 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 14:12:59 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 14:12:59 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 14:12:59 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:12:59 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 14:13:00 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 14:13:00 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 14:13:00 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:13:00 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 14:13:00 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 14:13:00 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 14:13:01 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=39433597%2C24285843%2C40018762%2C33776668%2C39134741%2C31363096%2C35989149%2C30700532%2C32378738%2C37060887%2C29378977%2C15876624%2C39399739%2C27046113%2C31287601%2C35708911%2C25816090%2C35777988%2C25122702%2C34958951%2C25000321%2C40800288%2C40910467%2C21708506%2C36121939%2C37203491%2C37441880%2C41275704%2C40239679%2C38063368%2C27199720%2C33142282%2C32498058%2C24639642%2C25822912%2C39808939%2C36645968%2C35568349%2C35185491%2C40913768%2C34965874%2C29977189%2C30617653%2C41324025%2C37582062%2C41453123%2C40817733%2C39332803%2C37995287%2C28399442%2C29958109%2C30279650%2C39386565%2C38306217%2C39579033%2C9419036%2C22144944%2C24995815%2C39248654%2C31875441%2C30740659%2C41129388%2C40894619%2C22874396%2C29460482%2C29674950%2C29678760%2C25571555%2C35907491%2C38083559%2C32656294%2C39867597%2C24681353%2C40039596%2C39850351%2C41042753%2C19279495%2C40147418%2C35966994%2C16175856%2C38769115%2C40832215%2C31692177%2C24904404%2C36634533%2C35878727%2C15329073%2C38769157%2C36872854%2C31220442%2C33935673%2C34906982%2C30414541%2C27484713%2C31277857%2C33306299%2C30500619%2C25909573%2C28918128%2C22941838%2C40800829%2C32788249%2C33137575%2C12614397%2C30064321%2C40830488%2C34123657%2C26991386%2C25948269%2C26072003%2C38969758%2C27199638%2C27686506%2C41363150%2C40343020%2C25259669%2C30721879%2C37638314%2C35534226%2C30504559%2C36327599%2C39455254%2C38925110%2C27408802%2C24836588%2C17071238%2C15677998%2C28268617%2C30831567%2C37467739%2C31946284%2C25118584%2C27918346%2C36246502%2C37745380%2C40695313%2C21471638%2C40697162%2C33293456%2C25616459%2C28993231%2C32686761%2C24982625%2C21529188%2C23696279%2C36731812%2C33789135%2C39484239%2C38581367%2C37932250&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:13:02 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 14:13:02 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 14:13:03 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=33419861%2C22207857%2C40720979%2C29397190%2C21471374%2C14656066%2C41081527%2C38496670%2C40490093%2C21307246%2C29414401%2C30256217%2C32828921%2C25571553%2C37292795%2C34489664%2C41034198%2C36054730%2C18982128%2C40825359%2C37217308%2C33867912%2C26446212%2C25352799%2C20087111%2C22750156%2C34421555%2C20921326%2C16792292%2C27148018%2C39990398%2C38948730%2C38486966%2C19349241%2C26124702%2C40417558%2C40461573%2C32180695%2C17271737%2C38514133%2C29033809%2C26188384%2C38559163%2C35528322%2C30971792%2C34587350%2C32840483%2C33372958%2C28334963%2C35121181%2C28119593%2C38813793%2C26737497%2C28225156%2C39819752%2C26136107%2C27413155%2C24904069%2C23914170%2C37798921%2C36086071%2C27019106%2C26232713%2C26818506%2C32442776%2C25157216%2C31056408%2C39096896%2C39374038%2C35113857%2C31445890%2C35118367%2C27377299%2C27182530%2C26679420%2C21373361%2C30596439%2C40769034%2C37968869%2C26888939%2C35099768%2C32198060%2C37215328%2C29087324%2C28268620%2C27524194%2C38222047%2C27578414%2C32577713%2C34607318%2C32694561%2C37105171%2C21419227%2C19732923%2C34536230%2C30367077%2C38696121%2C39213665%2C34347873%2C32439539%2C30249918%2C30216929%2C40972658%2C22973215%2C40490003%2C35695785%2C41386385%2C23643922%2C35248810%2C27729844%2C28236761%2C27311642%2C37382208%2C38242691%2C36966852%2C39371161%2C28666338%2C34408717%2C21750369%2C25570869%2C40040033%2C41332755%2C38093008%2C25819402%2C38183998%2C39485790%2C34301825%2C35819528%2C30837823%2C22255402%2C22573665%2C35395633%2C22255777%2C29404403%2C36356309%2C28894834%2C39345158%2C23577157%2C41039113%2C21029784%2C35869138%2C23032488%2C21724424%2C41021378%2C39005394%2C40309789%2C25570199%2C38935898%2C34753819%2C30827578&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:13:04 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 14:13:04 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 14:13:04 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41266624%2C29430213%2C39968245%2C31207466%2C28268618%2C23465430%2C40144585%2C33912122%2C28622530%2C38885688%2C31525179%2C40766385%2C32435182%2C41427281%2C18440570%2C29093659%2C37841873%2C29861132%2C41144819%2C32372065%2C40055549%2C26386644%2C32231340%2C33841081%2C38988764%2C27534393%2C40516665%2C37900727%2C37245559%2C17980999%2C41191764%2C38909761%2C35313351%2C17712784%2C27408803%2C36570848%2C37437189%2C41062786%2C37819985%2C33360179%2C20465359%2C26935890%2C22890647%2C24845600%2C35013268%2C33942078%2C30238924%2C41397928%2C29525721%2C15817517%2C39582595%2C24122368%2C33283856%2C39990331%2C26949710%2C19163831%2C26408491%2C27671642%2C33133815%2C41135818%2C37066306%2C25759647%2C30342252%2C30038000%2C27249656%2C26262160%2C22563311%2C41254404%2C38343801%2C39464426%2C36828156%2C29052465%2C36989073%2C41397373%2C39162748%2C38318272%2C24672012%2C34774771%2C31103409%2C40354107%2C29268943%2C41335998%2C31419636%2C41167038%2C30134167%2C27325763%2C41205609%2C35654375%2C37425292%2C29576436%2C27926827%2C35311092%2C30440349%2C37086161%2C34918613%2C28406383%2C23482627%2C34717248%2C34411517%2C29247963%2C34260835%2C24315545%2C37961305%2C26642090%2C24877680%2C29271713%2C39153482%2C17971857%2C31824257%2C30710356%2C39922365%2C30238309%2C31339411%2C37120741%2C39194182%2C32410969%2C25266305%2C37487487%2C33408621%2C32105726%2C33506209%2C25571558%2C35169837%2C40913530%2C41349179%2C39322094%2C29439164%2C38787551%2C19033707%2C28269552%2C37739786%2C37019103%2C38648781%2C20478745%2C24293161%2C35276657%2C40260174%2C28396294%2C38729074%2C28839071%2C29891885%2C31741702%2C23366629%2C20026224%2C41022986%2C39974103%2C39985774%2C38671062%2C28716965%2C40253415&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:13:05 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 14:13:05 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 14:13:05 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=27450996%2C8892373%2C38041253%2C41282818%2C39479009%2C37459853%2C34823894%2C29190521%2C31820736%2C38582333%2C9737437%2C38335090%2C41177674%2C22875868%2C34130614%2C30257858%2C40610484%2C29779940%2C28335018%2C30389490%2C31578420%2C32888480%2C40302941%2C25273279%2C29018336%2C39554006%2C38260011%2C34849596%2C27635975%2C23774120%2C20811093%2C41279744%2C30643130%2C27956570%2C23072156%2C31342677%2C25571556%2C25761260%2C41105453%2C37460730%2C37875404%2C32610290%2C39870041%2C34892495%2C32289685%2C30847390%2C28676308%2C37229140%2C27935031%2C38808652&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:13:05 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 14:13:05 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 14:13:06 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 14:13:06 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 14:13:06 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:13:06 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 14:13:06 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 14:13:06 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:13:06 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 14:13:06 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 14:13:06 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 14:13:06 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 14:13:07 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 2544 hits, 1 need extraction
2026-01-11 14:13:07 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 1 affiliations...
2026-01-11 14:13:08 - app.phase2.institution_matcher - INFO -    Loaded 1713 institutions to memory (1713 normalized names, 205 aliases)
2026-01-11 14:13:08 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1/1 (100%), matches found: 0
2026-01-11 14:13:08 - app.phase2.rule_based_extractor - INFO -    Extracting 1 affiliations using rule-based parser...
2026-01-11 14:13:08 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1/1 (100%)
2026-01-11 14:13:08 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 1 results
2026-01-11 14:13:08 - app.phase2.rule_based_extractor - INFO -       Pending validation: 1 institutions
2026-01-11 14:13:08 - app.phase2.pg_ingest - INFO -    Cached 1 new affiliation extraction results to affiliation_cache table
2026-01-11 14:13:08 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2511 with country
2026-01-11 14:13:08 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 14:13:08 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 14:13:08 - app.phase2.pg_ingest - INFO -    With country: 2511
2026-01-11 14:13:08 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 14:13:08 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:13:08 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 14:13:08 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 14:13:08 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 14:13:08 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 14:13:09 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 14:13:09 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2511
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO - 
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 2544
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 0
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 1
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 1
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO - 
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 1
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO - 
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 14:13:15 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 14:13:15 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 1
2026-01-11 14:13:15 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:13:15 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 14:13:16 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 14:13:16 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:13:16 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-11 14:13:16 - app.phase2.affiliation_validator - INFO -    Found 340 unique location keys from 4432 authorships
2026-01-11 14:13:16 - app.phase2.affiliation_validator - INFO -    Batch query complete: 340/340 found in cache
2026-01-11 14:13:16 - app.phase2.affiliation_validator - INFO -    Processing 0 unique location keys via Nominatim...
2026-01-11 14:13:16 - app.phase2.affiliation_validator - INFO -    Batch updating 3748 affiliations for 328 cached locations...
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 328 locations (3748 total affiliations)
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 1 pending institutions to institution_geo...
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO -    âš ï¸  No institutions passed geocoding validation
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4432
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3782
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO -    Cache misses: 0
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 0
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 18
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 9
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 0/1
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 18 error affiliations with LLM...
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO -    Collecting 18 unique error affiliations for LLM fix
2026-01-11 14:13:31 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-11 14:13:31 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 18 affiliations...
2026-01-11 14:13:31 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 18 affiliations...
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    Loaded 1713 institutions to memory (1713 normalized names, 205 aliases)
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1/18 (5%), matches found: 1
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/18 (11%), matches found: 2
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 3/18 (16%), matches found: 3
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/18 (22%), matches found: 4
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 5/18 (27%), matches found: 5
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/18 (33%), matches found: 6
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 7/18 (38%), matches found: 7
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/18 (44%), matches found: 8
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 9/18 (50%), matches found: 9
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/18 (55%), matches found: 10
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 11/18 (61%), matches found: 11
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/18 (66%), matches found: 12
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 13/18 (72%), matches found: 13
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/18 (77%), matches found: 14
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 15/18 (83%), matches found: 15
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/18 (88%), matches found: 16
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 17/18 (94%), matches found: 17
2026-01-11 14:13:32 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/18 (100%), matches found: 18
2026-01-11 14:13:32 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 18 matches found
2026-01-11 14:13:32 - app.phase2.affiliation_extractor - INFO -    âœ… All 18 affiliations found in cache/institution_geo
2026-01-11 14:13:32 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 18 results from 0 LLM calls
2026-01-11 14:13:32 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 18 LLM results...
2026-01-11 14:13:32 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 18 LLM results
2026-01-11 14:13:32 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-11 14:13:32 - app.phase2.affiliation_validator - INFO -    Processing 12 unique location keys for re-geocoding...
2026-01-11 14:13:38 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 18 affiliations
2026-01-11 14:13:38 - app.phase2.affiliation_validator - INFO -    âœ… Updated 34 authorships
2026-01-11 14:13:38 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 0 locations
2026-01-11 14:13:38 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:13:38 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 13092a22728c
2026-01-11 14:13:38 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 18
2026-01-11 14:13:38 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 18
2026-01-11 14:13:38 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 34
2026-01-11 14:13:38 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 0
2026-01-11 14:13:38 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:13:38 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-11 14:13:38 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-11 14:13:38 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 18
2026-01-11 14:13:38 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 18
2026-01-11 14:13:38 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 34
2026-01-11 14:13:38 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 0
2026-01-11 14:13:38 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 0
2026-01-11 14:13:38 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-11 14:13:38 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 14:13:38 - app.main - INFO - ================================================================================
2026-01-11 14:13:38 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:13:38 - app.main - INFO -    Total PMIDs: 500
2026-01-11 14:13:38 - app.main - INFO -    Papers parsed: 500
2026-01-11 14:13:38 - app.main - INFO -    Authorships created: 4432
2026-01-11 14:13:38 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 14:13:38 - app.main - INFO -    Affiliations with country: 2511
2026-01-11 14:13:38 - app.main - INFO -    LLM calls made: 0
2026-01-11 14:13:38 - app.main - INFO - ================================================================================
2026-01-11 14:25:17 - root - INFO - ================================================================================
2026-01-11 14:25:17 - root - INFO - Logging initialized - output to console and log.txt
2026-01-11 14:25:17 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-11 14:25:17 - root - INFO - ================================================================================
2026-01-11 14:30:54 - app.main - INFO - ================================================================================
2026-01-11 14:30:54 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:30:54 - app.main - INFO -    Force refresh: False
2026-01-11 14:30:54 - app.main - INFO - ================================================================================
2026-01-11 14:30:54 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:30:54 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 13092a22728c
2026-01-11 14:30:54 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-11 14:30:54 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-11 14:30:54 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:30:54 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-11 14:30:55 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 13092a22728c
2026-01-11 14:30:55 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-11 14:30:55 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:30:55 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-11 14:30:55 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-11 14:30:55 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 14:30:56 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=37105171%2C27578414%2C33776668%2C37459853%2C40825359%2C26446212%2C41129388%2C28993231%2C26124702%2C39162748%2C23072156%2C24315545%2C17271737%2C37441880%2C19732923%2C35118367%2C26818506%2C37425292%2C39484239%2C35099768%2C28236761%2C34965874%2C39371161%2C31946284%2C34301825%2C30134167%2C18982128%2C37932250%2C25118584%2C30249918%2C39579033%2C22144944%2C40018762%2C37215328%2C28676308%2C27918346%2C23366629%2C39479009%2C38671062%2C30700532%2C36356309%2C23696279%2C38222047%2C17980999%2C25909573%2C34411517%2C24904404%2C40913768%2C33935673%2C28894834%2C29779940%2C30414541%2C31056408%2C39374038%2C41397928%2C22941838%2C28622530%2C25819402%2C35248810%2C37086161%2C25571558%2C27671642%2C22973215%2C29414401%2C40817733%2C35311092%2C27413155%2C41363150%2C33506209%2C31445890%2C40695313%2C39455254%2C39386565%2C36054730%2C28268620%2C38582333%2C27524194%2C31207466%2C28225156%2C33912122%2C26888939%2C40972658%2C29052465%2C40343020%2C25616459%2C41453123%2C39345158%2C35989149%2C35121181%2C17971857%2C31220442%2C23465430%2C36828156%2C25761260%2C38885688%2C31525179%2C38769115%2C41275704%2C37467739%2C33942078%2C41034198%2C20921326%2C34607318%2C29397190%2C35113857%2C34958951%2C27635975%2C32686761%2C30440349%2C32231340%2C35695785%2C30064321%2C21373361%2C22207857%2C24845600%2C28268618%2C32828921%2C34421555%2C35777988%2C27926827%2C37875404%2C41266624%2C38083559%2C27686506%2C39922365%2C32442776%2C38559163%2C37245559%2C25571555%2C40800288%2C41282818%2C25822912%2C31419636%2C20478745%2C30721879%2C34774771%2C39582595%2C29087324%2C26642090%2C27408803%2C29678760%2C40309789%2C31363096%2C39194182%2C36634533%2C30971792%2C41335998%2C30847390%2C34536230%2C32888480&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:30:56 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-11 14:30:56 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 14:30:57 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=29093659%2C35395633%2C33137575%2C27450996%2C40417558%2C39464426%2C37229140%2C35878727%2C21529188%2C25759647%2C9737437%2C36989073%2C34918613%2C29378977%2C26188384%2C23577157%2C34823894%2C39554006%2C38093008%2C30238309%2C9419036%2C26232713%2C41144819%2C37798921%2C25570869%2C30504559%2C31277857%2C30596439%2C38988764%2C27148018%2C8892373%2C21029784%2C28396294%2C35276657%2C33142282%2C17071238%2C37437189%2C35708911%2C33133815%2C34906982%2C26737497%2C39819752%2C37019103%2C35869138%2C39332803%2C28269552%2C29439164%2C36645968%2C30827578%2C38581367%2C39985774%2C37638314%2C35169837%2C19163831%2C30038000%2C36121939%2C37066306%2C24285843%2C29861132%2C30257858%2C21750369%2C37745380%2C28268617%2C40260174%2C32410969%2C26262160%2C37819985%2C32378738%2C20811093%2C29674950%2C38335090%2C35819528%2C28406383%2C21708506%2C22874396%2C21471638%2C41022986%2C39485790%2C38306217%2C22750156%2C37292795%2C30279650%2C40040033%2C37060887%2C25352799%2C32656294%2C34408717%2C30643130%2C23032488%2C12614397%2C33293456%2C22875868%2C41105453%2C38486966%2C40302941%2C38041253%2C26991386%2C23914170%2C28839071%2C21471374%2C34587350%2C38969758%2C34260835%2C27484713%2C40239679%2C33419861%2C24293161%2C41039113%2C39990331%2C35185491%2C32610290%2C38925110%2C36086071%2C30342252%2C27729844%2C24904069%2C39399739%2C34717248%2C36966852%2C27956570%2C37995287%2C29977189%2C32577713%2C33360179%2C29033809%2C32788249%2C35907491%2C37203491%2C34347873%2C33306299%2C25266305%2C26072003%2C27249656%2C37120741%2C40697162%2C26408491%2C20087111%2C40894619%2C40490093%2C41021378%2C25000321%2C40910467%2C27182530%2C33789135%2C39322094%2C38242691%2C29268943%2C31287601%2C29018336%2C22255777&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:30:58 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-11 14:30:58 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-11 14:30:59 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=31692177%2C16792292%2C26949710%2C34753819%2C28918128%2C40913530%2C37582062%2C39870041%2C30216929%2C33372958%2C19349241%2C38260011%2C41081527%2C39850351%2C19279495%2C32439539%2C30256217%2C35013268%2C27325763%2C41427281%2C24877680%2C35966994%2C41279744%2C34892495%2C40055549%2C26386644%2C38909761%2C38063368%2C28119593%2C24672012%2C30238924%2C26679420%2C16175856%2C38318272%2C27046113%2C34130614%2C37961305%2C36731812%2C41177674%2C31820736%2C28666338%2C22563311%2C28399442%2C36246502%2C35528322%2C38343801%2C39974103%2C30710356%2C39213665%2C21419227%2C32372065%2C37968869%2C14656066%2C20026224%2C40610484%2C40800829%2C27935031%2C25571556%2C24639642%2C38935898%2C41324025%2C15329073%2C32435182%2C31741702%2C41042753%2C32289685%2C24681353%2C40039596%2C38648781%2C31875441%2C28335018%2C15677998%2C36872854%2C41332755%2C33283856%2C27377299%2C30617653%2C40516665%2C38769157%2C41397373%2C31103409%2C29247963%2C32694561%2C27019106%2C39153482%2C20465359%2C41205609%2C25948269%2C29404403%2C21307246%2C25259669%2C41386385%2C38496670%2C39808939%2C38183998%2C15876624%2C41167038%2C39096896%2C31339411%2C29891885%2C40720979%2C37487487%2C40147418%2C29460482%2C17712784%2C27534393%2C40769034%2C29271713%2C28716965%2C38514133%2C41254404%2C32105726%2C37217308%2C30389490%2C31578420%2C35568349%2C33408621%2C23643922%2C39248654%2C34123657%2C33841081%2C36570848%2C40766385%2C15817517%2C40354107%2C24122368%2C23774120%2C27311642%2C37739786%2C41191764%2C37900727%2C36327599%2C29576436%2C29190521%2C40253415%2C29430213%2C25273279%2C24982625%2C41062786%2C32180695%2C39005394%2C30740659%2C25122702%2C22573665%2C27199720%2C40832215%2C39968245%2C27408802%2C31824257%2C18440570&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:31:00 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-11 14:31:00 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-11 14:31:00 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=26136107%2C39433597%2C39990398%2C28334963%2C40830488%2C29525721%2C22255402%2C35313351%2C32840483%2C38787551%2C40461573%2C38813793%2C29958109%2C25571553%2C25570199%2C24836588%2C24995815%2C41349179%2C26935890%2C40144585%2C41135818%2C32498058%2C30367077%2C21724424%2C25816090%2C39867597%2C22890647%2C38696121%2C35654375%2C38948730%2C34849596%2C39134741%2C25157216%2C30837823%2C27199638%2C40490003%2C35534226%2C32198060%2C37382208%2C30831567%2C33867912%2C37841873%2C34489664%2C37460730%2C31342677%2C23482627%2C19033707%2C38729074%2C38808652%2C30500619&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-11 14:31:01 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-11 14:31:01 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-11 14:31:01 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-11 14:31:01 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-11 14:31:01 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:31:01 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-11 14:31:02 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-11 14:31:02 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:31:02 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-11 14:31:02 - app.phase2.pg_ingest - INFO -    Extracting 2545 unique affiliations via rule-based method
2026-01-11 14:31:02 - app.phase2.rule_based_extractor - INFO -    Processing 2545 affiliations...
2026-01-11 14:31:02 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2545 affiliations...
2026-01-11 14:31:02 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 2545 need extraction
2026-01-11 14:31:02 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2545 affiliations...
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    Loaded 1713 institutions to memory (1713 normalized names, 205 aliases)
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2545 (3%), matches found: 95
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2545 (7%), matches found: 183
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2545 (11%), matches found: 277
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2545 (15%), matches found: 370
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/2545 (19%), matches found: 461
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/2545 (23%), matches found: 553
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/2545 (27%), matches found: 644
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/2545 (31%), matches found: 734
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/2545 (35%), matches found: 825
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/2545 (39%), matches found: 915
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/2545 (43%), matches found: 1000
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/2545 (47%), matches found: 1092
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/2545 (51%), matches found: 1184
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/2545 (55%), matches found: 1279
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/2545 (58%), matches found: 1373
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/2545 (62%), matches found: 1465
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1700/2545 (66%), matches found: 1559
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1800/2545 (70%), matches found: 1652
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1900/2545 (74%), matches found: 1739
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2000/2545 (78%), matches found: 1826
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2100/2545 (82%), matches found: 1915
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2200/2545 (86%), matches found: 2006
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2300/2545 (90%), matches found: 2099
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2400/2545 (94%), matches found: 2194
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2500/2545 (98%), matches found: 2289
2026-01-11 14:31:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2545/2545 (100%), matches found: 2326
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 2326 matches found
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    Extracting 219 affiliations using rule-based parser...
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 21/219 (9%)
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 42/219 (19%)
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 63/219 (28%)
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 84/219 (38%)
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 105/219 (47%)
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 126/219 (57%)
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 147/219 (67%)
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 168/219 (76%)
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 189/219 (86%)
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 210/219 (95%)
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 219/219 (100%)
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 219 results
2026-01-11 14:31:03 - app.phase2.rule_based_extractor - INFO -       Pending validation: 106 institutions
2026-01-11 14:31:06 - app.phase2.pg_ingest - INFO -    Cached 2545 new affiliation extraction results to affiliation_cache table
2026-01-11 14:31:06 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2545 affiliations processed, 2512 with country
2026-01-11 14:31:06 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2545 affiliations
2026-01-11 14:31:06 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 14:31:06 - app.phase2.pg_ingest - INFO -    With country: 2512
2026-01-11 14:31:06 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-11 14:31:06 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:31:06 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-11 14:31:06 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 13092a22728c...
2026-01-11 14:31:06 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-11 14:31:06 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-11 14:31:07 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-11 14:31:07 - app.phase2.pg_ingest - INFO -    Inserting 4432 authorships (bulk operation)...
2026-01-11 14:31:12 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4432
2026-01-11 14:31:12 - app.phase2.pg_ingest - INFO -    Linking run 13092a22728c to 500 papers...
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4432 authorships
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -    Authorships created: 4432
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2545
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2512
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO - 
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 0
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 2326
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 219
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 215
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO - 
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2545 = 2545 (matches)
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 106
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO - 
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 14:31:13 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-11 14:31:13 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 106
2026-01-11 14:31:13 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:31:13 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 13092a22728c...
2026-01-11 14:31:13 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4432 authorships from 500 papers
2026-01-11 14:31:13 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:31:13 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-11 14:31:13 - app.phase2.affiliation_validator - INFO -    Found 341 unique location keys from 4432 authorships
2026-01-11 14:31:14 - app.phase2.affiliation_validator - INFO -    Batch query complete: 0/341 found in cache
2026-01-11 14:31:14 - app.phase2.affiliation_validator - INFO -    Processing 341 unique location keys via Nominatim...
2026-01-11 14:31:16 - app.phase2.pg_geocoding - INFO - Geocoded 'London, United Kingdom' -> (51.5074456, -0.1277653)
2026-01-11 14:31:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Baltimore, United States' -> (39.2908816, -76.610759)
2026-01-11 14:31:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Lyon, France' -> (45.7578137, 4.8320114)
2026-01-11 14:31:24 - app.phase2.pg_geocoding - INFO - Geocoded 'St. Paul, United States' -> (44.9497487, -93.0931028)
2026-01-11 14:31:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Jacksonville, United States' -> (30.3321838, -81.655651)
2026-01-11 14:31:28 - app.phase2.pg_geocoding - INFO - Geocoded 'New York, United States' -> (40.7127281, -74.0060152)
2026-01-11 14:31:32 - app.phase2.pg_geocoding - INFO - Geocoded 'California Univ, United States' -> (33.9727335, -117.3474449)
2026-01-11 14:31:34 - app.phase2.pg_geocoding - INFO - Geocoded 'St. Petersburg, Russian Federation' -> (59.938732, 30.316229)
2026-01-11 14:31:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Paris, France' -> (48.8534951, 2.3483915)
2026-01-11 14:31:38 - app.phase2.pg_geocoding - INFO - Geocoded 'United States' -> (39.7837304, -100.445882)
2026-01-11 14:31:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Rochester, United States' -> (43.157285, -77.615214)
2026-01-11 14:31:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Washington, United States' -> (38.8950368, -77.0365427)
2026-01-11 14:31:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Durham, United States' -> (35.996653, -78.9018053)
2026-01-11 14:31:47 - app.phase2.pg_geocoding - INFO - Geocoded 'St. Louis, United States' -> (38.6254063, -90.190009)
2026-01-11 14:31:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Utah, United States' -> (39.4225192, -111.714358)
2026-01-11 14:31:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Norfolk, United States' -> (36.8493695, -76.2899539)
2026-01-11 14:31:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Albany, United States' -> (42.6511674, -73.754968)
2026-01-11 14:31:56 - app.phase2.pg_geocoding - INFO - Geocoded 'D- Bonn, Germany' -> (50.8181182, 6.8931658)
2026-01-11 14:31:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Louis, United States' -> (34.5653451, -99.8014857)
2026-01-11 14:32:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Pittsburgh, United States' -> (40.4406968, -80.0025666)
2026-01-11 14:32:03 - app.phase2.pg_geocoding - INFO - Geocoded 'SÃ£o Paulo, Brazil' -> (-23.5506507, -46.6333824)
2026-01-11 14:32:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Troy, United States' -> (42.7284117, -73.6917878)
2026-01-11 14:32:07 - app.phase2.pg_geocoding - INFO - Geocoded 'France' -> (46.603354, 1.8883335)
2026-01-11 14:32:12 - app.phase2.pg_geocoding - INFO - Geocoded 'F- Bron, France' -> (45.7337532, 4.9092352)
2026-01-11 14:32:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Dept. of Mathematics, Italy' -> (45.479966, 9.2292682)
2026-01-11 14:32:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Germany' -> (51.1638175, 10.4478313)
2026-01-11 14:32:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Shanghai, China' -> (31.2312707, 121.4700152)
2026-01-11 14:32:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Beijing, China' -> (40.190632, 116.412144)
2026-01-11 14:32:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Los Angeles, United States' -> (34.0536909, -118.242766)
2026-01-11 14:32:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Marseille, France' -> (43.2961743, 5.3699525)
2026-01-11 14:32:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Iowa, United States' -> (41.9216734, -93.3122705)
2026-01-11 14:32:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Freiburg, Germany' -> (47.9960901, 7.8494005)
2026-01-11 14:32:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Houston, United States' -> (29.7589382, -95.3676974)
2026-01-11 14:32:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Bethesda, United States' -> (38.9812726, -77.1233587)
2026-01-11 14:32:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Haifa, Israel' -> (32.8191218, 34.9983856)
2026-01-11 14:32:39 - app.phase2.pg_geocoding - INFO - Geocoded 'San Francisco, United States' -> (37.7879363, -122.4075201)
2026-01-11 14:32:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Tokyo, Japan' -> (35.6768601, 139.7638947)
2026-01-11 14:32:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Kyoto, Japan' -> (35.0115754, 135.7681441)
2026-01-11 14:32:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Detroit, United States' -> (42.3315509, -83.0466403)
2026-01-11 14:32:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Wayne State, United States' -> (43.0627627, -76.9930279)
2026-01-11 14:32:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Japan' -> (36.5748441, 139.2394179)
2026-01-11 14:32:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Chicago, United States' -> (41.8755616, -87.6244212)
2026-01-11 14:32:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Geneva, Switzerland' -> (46.2017559, 6.1466014)
2026-01-11 14:32:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Orlando, United States' -> (28.5421218, -81.379045)
2026-01-11 14:33:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Brockton, United States' -> (42.0834335, -71.0183787)
2026-01-11 14:33:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Chapel Hill, United States' -> (35.9131542, -79.05578)
2026-01-11 14:33:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Philadelphia, United States' -> (39.9527237, -75.1635262)
2026-01-11 14:33:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Bronx, United States' -> (40.8466508, -73.8785937)
2026-01-11 14:33:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Utrecht, Netherlands' -> (52.0907006, 5.1215634)
2026-01-11 14:33:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Cincinnati, United States' -> (39.1014537, -84.5124602)
2026-01-11 14:33:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Singapore Singapore, Singapore' -> (1.2959845, 103.7766186)
2026-01-11 14:33:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Graz, Austria' -> (47.0708678, 15.4382786)
2026-01-11 14:33:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Andorra' -> (42.5407167, 1.5732033)
2026-01-11 14:33:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Nagoya, Japan' -> (35.1851045, 136.8998438)
2026-01-11 14:33:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Milan, Italy' -> (45.4641943, 9.1896346)
2026-01-11 14:33:25 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Anesthesiology and Perioperative Care, Andorra' (from affiliation: Anesthesiology and Perioperative Care; and. (PMID: 25909573))
2026-01-11 14:33:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Bonn, Germany' -> (50.7352621, 7.1024635)
2026-01-11 14:33:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Copenhagen Denmark, Denmark' -> (55.6747103, 12.5743545)
2026-01-11 14:33:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Manchester, United Kingdom' -> (53.4794892, -2.2451148)
2026-01-11 14:33:33 - app.phase2.pg_geocoding - INFO - Geocoded 'IMI, Austria' -> (47.276017, 12.4851009)
2026-01-11 14:33:35 - app.phase2.pg_geocoding - INFO - Geocoded 'United Kingdom' -> (54.7023545, -3.2765753)
2026-01-11 14:33:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Stockholm, Sweden' -> (59.3251172, 18.0710935)
2026-01-11 14:33:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Cleveland, United States' -> (41.4996574, -81.6936772)
2026-01-11 14:33:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Memphis, United States' -> (35.1460249, -90.0517638)
2026-01-11 14:33:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Evanston, United States' -> (42.0470043, -87.6846053)
2026-01-11 14:33:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Gainesville, United States' -> (29.6519684, -82.3249846)
2026-01-11 14:33:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Radboud Univ Nijmegen, Netherlands' -> (51.8215173, 5.8634209)
2026-01-11 14:33:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Austria, Andorra' -> (48.2019133, 16.3701204)
2026-01-11 14:33:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Asahikawa, Japan' -> (43.770625, 142.3649743)
2026-01-11 14:33:53 - app.phase2.pg_geocoding - INFO - Geocoded 'California, United States' -> (36.7014631, -118.755997)
2026-01-11 14:33:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Birmingham, United States' -> (33.5206824, -86.8024326)
2026-01-11 14:33:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Mobile, United States' -> (30.6913462, -88.0437509)
2026-01-11 14:34:00 - app.phase2.pg_geocoding - INFO - Geocoded 'D- Sankt Augustin, Germany' -> (50.7752776, 7.1895507)
2026-01-11 14:34:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Atlanta, United States' -> (33.7544657, -84.3898151)
2026-01-11 14:34:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Ecole Polytechnique FÃ©dÃ©rale de Lausanne, Switzerland' -> (46.5186594, 6.5665615)
2026-01-11 14:34:07 - app.phase2.pg_geocoding - INFO - Geocoded 'San Diego, United States' -> (32.7174202, -117.162772)
2026-01-11 14:34:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Gif sur Yvette, France' -> (48.7018823, 2.134529)
2026-01-11 14:34:11 - app.phase2.pg_geocoding - INFO - Geocoded 'ON Canada, Canada' -> (43.2572053, -79.0750293)
2026-01-11 14:34:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Warsaw, Poland' -> (52.2333742, 21.0711489)
2026-01-11 14:34:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Budapest, Hungary' -> (47.4978789, 19.0402383)
2026-01-11 14:34:18 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Daejoen, South Korea' (from affiliation: Department of Mathematical Sciences, KAIST, Daejoen, 34141 Republic of Korea (PMID: 27534393))
2026-01-11 14:34:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Madrid, Spain' -> (40.416782, -3.703507)
2026-01-11 14:34:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Seoul, South Korea' -> (37.5666791, 126.9782914)
2026-01-11 14:34:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Bournemouth, United Kingdom' -> (50.7201514, -1.8799118)
2026-01-11 14:34:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Heidelberg, Germany' -> (49.4093582, 8.694724)
2026-01-11 14:34:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Carlton, Australia' -> (-37.8004228, 144.9684343)
2026-01-11 14:34:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Melbourne, Australia' -> (-37.8142454, 144.9631732)
2026-01-11 14:34:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Berlin, Germany' -> (52.5173885, 13.3951309)
2026-01-11 14:34:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Hertfordshire, United Kingdom' -> (51.8400523, -0.0978552)
2026-01-11 14:34:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Shanghai, China (Mainland)' -> (31.1427359, 121.8041131)
2026-01-11 14:34:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Linyi, China' -> (35.1032403, 118.3506988)
2026-01-11 14:34:40 - app.phase2.pg_geocoding - INFO - Geocoded 'New Haven, United States' -> (41.3082138, -72.9250518)
2026-01-11 14:34:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Seattle, United States' -> (47.6038321, -122.330062)
2026-01-11 14:34:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Tempe, United States' -> (33.4255117, -111.940016)
2026-01-11 14:34:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Nijmegen, Netherlands' -> (51.8474946, 5.8637771)
2026-01-11 14:34:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Bern, Switzerland' -> (46.9484742, 7.4521749)
2026-01-11 14:34:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Fribourg, Switzerland' -> (46.6789116, 7.1027113)
2026-01-11 14:34:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Norway' -> (61.1529386, 8.7876653)
2026-01-11 14:34:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Oslo, Norway' -> (59.9133301, 10.7389701)
2026-01-11 14:34:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Lausanne, Switzerland' -> (46.5218269, 6.6327025)
2026-01-11 14:34:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Waikato, New Zealand' -> (-37.7792272, 175.2010324)
2026-01-11 14:35:00 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Bron Cedex, France' (from affiliation: INSERM U846, Stem Cell and Brain Research Institute, Bron Cedex, France (PMID: 27534393))
2026-01-11 14:35:02 - app.phase2.pg_geocoding - INFO - Geocoded 'GÃ¶ttingen, Germany' -> (51.5328328, 9.9351811)
2026-01-11 14:35:04 - app.phase2.pg_geocoding - INFO - Geocoded 'TÃ¼bingen, Germany' -> (48.5203263, 9.053596)
2026-01-11 14:35:06 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Saitama Japan, Japan' (from affiliation: Riken Brai Science Institute, 2-1 Hirosawa, Wako, Saitama Japan (PMID: 27534393))
2026-01-11 14:35:08 - app.phase2.pg_geocoding - INFO - Geocoded 'North Texas, United States' -> (32.8559987, -97.2134349)
2026-01-11 14:35:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Reading, United Kingdom' -> (51.4514953, -0.9836342)
2026-01-11 14:35:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Plymouth, United Kingdom' -> (50.3714122, -4.1424451)
2026-01-11 14:35:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Pohang, South Korea' -> (36.0189315, 129.3429384)
2026-01-11 14:35:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Tsukuba, Japan' -> (36.0833265, 140.077279)
2026-01-11 14:35:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Daejeon, South Korea' -> (36.3497007, 127.3849016)
2026-01-11 14:35:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Prague, Czechia' -> (50.0874654, 14.4212535)
2026-01-11 14:35:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Busan, South Korea' -> (35.1799528, 129.0752365)
2026-01-11 14:35:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Georgia State, United States' -> (33.7501652, -84.3859566)
2026-01-11 14:35:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Drexel, United States' -> (38.4794593, -94.6085663)
2026-01-11 14:35:28 - app.phase2.pg_geocoding - INFO - Geocoded 'ETH ZÃ¼rich, Switzerland' -> (47.413218, 8.5374914)
2026-01-11 14:35:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Okinawa, Japan' -> (26.5707754, 128.0255901)
2026-01-11 14:35:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Keele, United Kingdom' -> (53.0038078, -2.2877425)
2026-01-11 14:35:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Luebeck, Germany' -> (53.866444, 10.684738)
2026-01-11 14:35:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Ann Arbor, United States' -> (42.2813722, -83.7484616)
2026-01-11 14:35:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong, Hong Kong SAR, China' -> (22.2534635, 114.190975)
2026-01-11 14:35:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Sydney, Australia' -> (-33.8698439, 151.2082848)
2026-01-11 14:35:42 - app.phase2.pg_geocoding - INFO - Geocoded 'College Station, United States' -> (30.6183939, -96.3455991)
2026-01-11 14:35:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Taipei, Taiwan' -> (25.0375198, 121.5636796)
2026-01-11 14:35:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Yorktown Heights, United States' -> (41.270178, -73.7753539)
2026-01-11 14:35:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Lancaster, United States' -> (40.0379958, -76.3056707)
2026-01-11 14:35:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Boston, United States' -> (42.3588336, -71.0578303)
2026-01-11 14:35:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Shenzhen, China' -> (22.5445741, 114.0545429)
2026-01-11 14:35:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Beijing, China (Mainland)' -> (39.9918215, 116.3039468)
2026-01-11 14:35:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Oxford, United Kingdom' -> (51.7520131, -1.2578499)
2026-01-11 14:36:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Louvain, Belgium' -> (50.879202, 4.7011675)
2026-01-11 14:36:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Granada, Spain' -> (37.1734995, -3.5995337)
2026-01-11 14:36:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Maastricht, Netherlands' -> (50.8512438, 5.6909768)
2026-01-11 14:36:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Bristol, United Kingdom' -> (51.4538022, -2.5972985)
2026-01-11 14:36:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Exeter, United Kingdom' -> (50.7256138, -3.5269209)
2026-01-11 14:36:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Frankfurt am Main, Germany' -> (50.1106444, 8.6820917)
2026-01-11 14:36:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Adelaide, Australia' -> (-34.9281805, 138.5999312)
2026-01-11 14:36:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Salem, United States' -> (44.9391565, -123.033121)
2026-01-11 14:36:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Louisville, United States' -> (38.2542376, -85.759407)
2026-01-11 14:36:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Lexington, United States' -> (38.0464066, -84.4970393)
2026-01-11 14:36:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Texas Tech, United States' -> (33.5475956, -101.8841907)
2026-01-11 14:36:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Cambridge, United States' -> (42.3656347, -71.1040018)
2026-01-11 14:36:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Toronto, Canada' -> (43.6534817, -79.3839347)
2026-01-11 14:36:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Brooklyn, United States' -> (40.6526006, -73.9497211)
2026-01-11 14:36:31 - app.phase2.pg_geocoding - INFO - Geocoded 'La Jolla, United States' -> (32.8458529, -117.2575702)
2026-01-11 14:36:32 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Aichi Japan, Japan' (from affiliation: National Institute for Physiological Sciences, Okazaki, Aichi Japan (PMID: 27534393))
2026-01-11 14:36:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Indianapolis, United States' -> (39.7683331, -86.1583502)
2026-01-11 14:36:37 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Tehran, Iran, Islamic Republic of' (from affiliation: School of Physics, Institute for Research in Fundamental Sciences (IPM), Tehran, 19395-5531 Iran (PMID: 27534393))
2026-01-11 14:36:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Princeton, United States' -> (40.3496953, -74.6597376)
2026-01-11 14:36:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Stony Brook, United States' -> (40.908482, -73.1325471)
2026-01-11 14:36:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Hyogo Japan, Japan' -> (34.6970944, 135.2124403)
2026-01-11 14:36:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Turkey, Turkey' -> (39.294076, 35.2316631)
2026-01-11 14:36:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Sussex, United Kingdom' -> (50.9445139, -0.0622673)
2026-01-11 14:36:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Oldenburg, Germany' -> (53.1389753, 8.2146017)
2026-01-11 14:36:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Offenbach, Germany' -> (50.1055002, 8.7610698)
2026-01-11 14:36:54 - app.phase2.pg_geocoding - INFO - Geocoded 'JÃ¼lich, Germany' -> (50.9220931, 6.3611015)
2026-01-11 14:36:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Nottingham, United Kingdom' -> (52.9534193, -1.1496461)
2026-01-11 14:36:59 - app.phase2.pg_geocoding - INFO - Geocoded 'TN Italy, Italy' -> (44.8873175, 7.3548152)
2026-01-11 14:37:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Tangier, Morocco' -> (35.7696302, -5.8033522)
2026-01-11 14:37:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Orangeburg, United States' -> (33.4918203, -80.8556476)
2026-01-11 14:37:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Ewha Womans, South Korea' -> (37.5643371, 126.9468925)
2026-01-11 14:37:07 - app.phase2.pg_geocoding - INFO - Geocoded 'ROC, Taiwan' -> (22.6142518, 120.3722709)
2026-01-11 14:37:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Alicante, Spain' -> (38.3436365, -0.4881708)
2026-01-11 14:37:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Cold Spring Harbor, United States' -> (40.8601065, -73.4529025)
2026-01-11 14:37:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Ilmenau, Germany' -> (50.6867695, 10.9142385)
2026-01-11 14:37:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Science and Technology, South Korea' -> (36.3698812, 127.3623793)
2026-01-11 14:37:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Helsinki, Finland' -> (60.1666204, 24.9435408)
2026-01-11 14:37:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Greensboro, United States' -> (36.0726355, -79.7919754)
2026-01-11 14:37:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Greenville, United States' -> (34.851354, -82.3984882)
2026-01-11 14:37:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Okinawa Japan, Japan' -> (26.2463518, 127.766086)
2026-01-11 14:37:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Nara Japan, Japan' -> (23.7623401, 90.358369)
2026-01-11 14:37:27 - app.phase2.pg_geocoding - INFO - Geocoded 'WÃ¼rzburg, Germany' -> (49.7780356, 9.9434769)
2026-01-11 14:37:29 - app.phase2.pg_geocoding - WARNING - Could not geocode 'The Czech Academy of Sciences, Czechia' (from affiliation: Department of Nonlinear Dynamics and Complex Systems, Institute of Computer Science, The Czech Academy of Sciences, 182 07 Prague, Czech Republic (PMID: 27534393))
2026-01-11 14:37:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Milwaukee, United States' -> (43.0386475, -87.9090751)
2026-01-11 14:37:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Herston, Australia' -> (-27.4496625, 153.0237294)
2026-01-11 14:37:35 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Ecole Polytechnique Federal de Lausanne (EPFL, Switzerland' (from affiliation: School of Life Sciences, Brain Mind Institute and School of Computer and Communication Sciences, Ecole Polytechnique Federal de Lausanne (EPFL), 1015 Lausanne, Switzerland (PMID: 27534393))
2026-01-11 14:37:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Netherlands' -> (52.2434979, 5.6343227)
2026-01-11 14:37:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Delaware, United States' -> (38.6920451, -75.4013315)
2026-01-11 14:37:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Bremen, Germany' -> (53.0758196, 8.8071646)
2026-01-11 14:37:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Hamburg, Germany' -> (53.550341, 10.000654)
2026-01-11 14:37:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Singapore' -> (1.357107, 103.8194992)
2026-01-11 14:37:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Barcelona, Spain' -> (41.3825802, 2.177073)
2026-01-11 14:37:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Aarhus, Denmark' -> (56.1496278, 10.2134046)
2026-01-11 14:37:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Lisbon, Portugal' -> (38.7077507, -9.1365919)
2026-01-11 14:37:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Southern Denmark, Denmark' -> (55.4873075, 9.4827284)
2026-01-11 14:37:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Daejon, South Korea' -> (36.3497007, 127.3849016)
2026-01-11 14:37:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Tamil Nadu India, India' -> (13.0530054, 80.2279292)
2026-01-11 14:37:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Ashburn, United States' -> (39.0437192, -77.4874899)
2026-01-11 14:38:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Morgantown, United States' -> (39.6296809, -79.9559437)
2026-01-11 14:38:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Arlington, United States' -> (32.7355816, -97.1071186)
2026-01-11 14:38:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Dallas, United States' -> (32.7762719, -96.7968559)
2026-01-11 14:38:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Nancy, France' -> (48.6937223, 6.1834097)
2026-01-11 14:38:09 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Cambridge, Morocco' (from affiliation: Brain & Cognitive Sciences Department, McGovern Institute for Brain Research, Massachusetts Institute of Technology, Cambridge, MA 02139. (PMID: 27671642))
2026-01-11 14:38:15 - app.phase2.pg_geocoding - INFO - Geocoded 'U.S.A, Lebanon' -> (40.375713, -76.4626118)
2026-01-11 14:38:17 - app.phase2.pg_geocoding - INFO - Geocoded 'South Carolina, United States' -> (33.6874388, -80.4363743)
2026-01-11 14:38:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Philadelphia, Panama' -> (39.9470753, -75.1737717)
2026-01-11 14:38:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Lebanon, United States' -> (40.375713, -76.4626118)
2026-01-11 14:38:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Philadelphia PN, United States' -> (39.9527237, -75.1635262)
2026-01-11 14:38:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Mountain View, United States' -> (37.3893889, -122.0832101)
2026-01-11 14:38:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Hangzhou, China (Mainland)' -> (40.03555, 116.3162393)
2026-01-11 14:38:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Hangzhou, China' -> (30.2489634, 120.2052342)
2026-01-11 14:38:34 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Japan, Andorra' (from affiliation: 3Center for Advanced Research and Education, School of Medicine, Asahikawa Medical University, Hokkaido, Japan; and. (PMID: 29271713))
2026-01-11 14:38:36 - app.phase2.pg_geocoding - INFO - Geocoded 'UCLouvain, Belgium' -> (50.8534643, 4.3611421)
2026-01-11 14:38:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Lorraine, France' -> (48.4845157, 6.113035)
2026-01-11 14:38:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Manhasset, United States' -> (40.786702, -73.6967338)
2026-01-11 14:38:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Rensselaer, United States' -> (42.7091389, -73.5107732)
2026-01-11 14:38:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Ulsan, South Korea' -> (35.5391697, 129.3119136)
2026-01-11 14:38:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Bucharest, Romania' -> (44.4361414, 26.102684)
2026-01-11 14:38:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Karnataka, India' -> (14.9562045, 75.7896741)
2026-01-11 14:38:53 - app.phase2.pg_geocoding - INFO - Geocoded 'CNRS UMR, France' -> (48.8480448, 2.3467365)
2026-01-11 14:38:56 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Urbana-Champaign, Israel' (from affiliation: Department of Electrical and Computer Engineering, University of Illinois, Urbana-Champaign, IL 61801. (PMID: 30847390))
2026-01-11 14:38:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Yokohama, Japan' -> (35.4503381, 139.6343802)
2026-01-11 14:39:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Nashville, United States' -> (36.1622767, -86.7742984)
2026-01-11 14:39:02 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Molecular Biophysics and Integrated Bioimaging, United States' (from affiliation: Center for Functional Imaging, Molecular Biophysics and Integrated Bioimaging, Lawrence Berkeley National Laboratory, Berkeley, CA, USA. (PMID: 31207466))
2026-01-11 14:39:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Dublin, Ireland' -> (53.3493795, -6.2605593)
2026-01-11 14:39:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Kwazulu-Natal, South Africa' -> (-28.503833, 30.8875009)
2026-01-11 14:39:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Cape Town, South Africa' -> (-33.9288301, 18.4172197)
2026-01-11 14:39:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Miami, United States' -> (25.7741566, -80.1935973)
2026-01-11 14:39:13 - app.phase2.pg_geocoding - INFO - Geocoded 'New Mexico, United States' -> (34.5802074, -105.996047)
2026-01-11 14:39:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Stanford, United States' -> (37.4265407, -122.1703055)
2026-01-11 14:39:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Providence, United States' -> (41.8239891, -71.4128343)
2026-01-11 14:39:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Virginia Commonwealth, United States' -> (40.1066758, -80.5091108)
2026-01-11 14:39:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Chengdu, China' -> (30.659867, 104.063315)
2026-01-11 14:39:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Pisa, Italy' -> (43.4714722, 10.6797912)
2026-01-11 14:39:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Pavia, Italy' -> (45.0368547, 9.1378251)
2026-01-11 14:39:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Rozzano, Italy' -> (45.3829973, 9.1545305)
2026-01-11 14:39:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Central Florida, United States' -> (28.599591, -81.1971284)
2026-01-11 14:39:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Universidad de San AndrÃ©s, Argentina' -> (-34.4461878, -58.5302426)
2026-01-11 14:39:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Argentina' -> (-34.9964963, -64.9672817)
2026-01-11 14:39:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Universidad de Buenos Aires, Argentina' -> (-34.5086718, -58.688352)
2026-01-11 14:39:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Buenos Aires, Argentina' -> (-34.6095579, -58.3887904)
2026-01-11 14:39:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Texas at Austin, United States' -> (30.2547951, -97.8340141)
2026-01-11 14:39:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Switzerland' -> (46.7985624, 8.2319736)
2026-01-11 14:39:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Hvidovre, Denmark' -> (55.6644909, 12.4750154)
2026-01-11 14:39:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Davis, United States' -> (40.7474784, -92.3965311)
2026-01-11 14:39:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Richardson, United States' -> (32.9481789, -96.7297206)
2026-01-11 14:39:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Texas at Dallas, United States' -> (32.8707905, -96.7668501)
2026-01-11 14:39:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Moscow, Russian Federation' -> (55.625578, 37.6063916)
2026-01-11 14:39:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Taipei Medical, Taiwan' -> (25.0252486, 121.5614621)
2026-01-11 14:40:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Ivanovo, Russian Federation' -> (56.9956855, 40.9812104)
2026-01-11 14:40:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Antioquia, Colombia' -> (7.0000085, -75.5000086)
2026-01-11 14:40:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Hempstead, United States' -> (40.6736812, -73.6190736)
2026-01-11 14:40:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Snekkersten, Denmark' -> (56.0107273, 12.579952)
2026-01-11 14:40:08 - app.phase2.pg_geocoding - INFO - Geocoded 'SmÃ¸rum, Denmark' -> (55.7158721, 12.3196104)
2026-01-11 14:40:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Hokkaido, Japan' -> (43.4519831, 142.8197834)
2026-01-11 14:40:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Kobe, Japan' -> (34.6932379, 135.1943764)
2026-01-11 14:40:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Ferrara, Italy' -> (44.7667642, 11.827939)
2026-01-11 14:40:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Udine, Italy' -> (46.0634632, 13.2358377)
2026-01-11 14:40:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Montreal, Canada' -> (45.5031824, -73.5698065)
2026-01-11 14:40:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Amsterdam, Netherlands' -> (52.3730796, 4.8924534)
2026-01-11 14:40:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Braine-L'Alleud, Belgium' -> (50.6828722, 4.3692706)
2026-01-11 14:40:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Bordeaux, France' -> (44.841225, -0.5800364)
2026-01-11 14:40:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Uxbridge, United Kingdom' -> (51.5449509, -0.4816672)
2026-01-11 14:40:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Leeds, United Kingdom' -> (53.7974185, -1.5437941)
2026-01-11 14:40:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Portland, United States' -> (45.5202471, -122.674194)
2026-01-11 14:40:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Pieve Di Soligo, Italy' -> (45.8997613, 12.1730811)
2026-01-11 14:40:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Alfaisal, Saudi Arabia' -> (21.5142048, 39.1875585)
2026-01-11 14:40:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Dammam, Saudi Arabia' -> (26.4367824, 50.1039991)
2026-01-11 14:40:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Vienna, Austria' -> (48.2083537, 16.3725042)
2026-01-11 14:40:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Ulm, Germany' -> (48.3984968, 9.9912458)
2026-01-11 14:40:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Aix-en-Provence, France' -> (43.5298424, 5.4474738)
2026-01-11 14:40:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Mexico City, Mexico' -> (19.3207722, -99.1514678)
2026-01-11 14:40:46 - app.phase2.pg_geocoding - INFO - Geocoded 'UMR, France' -> (48.8480448, 2.3467365)
2026-01-11 14:40:49 - app.phase2.pg_geocoding - INFO - Geocoded 'New Taipei City, Taiwan' -> (25.0600269, 121.4595689)
2026-01-11 14:40:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Derry, United Kingdom' -> (54.9978678, -7.3213056)
2026-01-11 14:40:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Jordanstown, United Kingdom' -> (54.6871277, -5.8951026)
2026-01-11 14:40:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Guangzhou, China' -> (23.1288454, 113.2590064)
2026-01-11 14:40:57 - app.phase2.pg_geocoding - INFO - Geocoded 'France, Brazil' -> (16.2649793, -61.5945856)
2026-01-11 14:40:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Sheffield, United Kingdom' -> (53.3806626, -1.4702278)
2026-01-11 14:41:01 - app.phase2.pg_geocoding - INFO - Geocoded 'LinkÃ¶ping, Sweden' -> (58.4098135, 15.6245252)
2026-01-11 14:41:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Bar-Ilan, Israel' -> (31.7949403, 35.2185528)
2026-01-11 14:41:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Espoo, Finland' -> (60.2049651, 24.6559808)
2026-01-11 14:41:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Omaha, United States' -> (41.2587459, -95.9383758)
2026-01-11 14:41:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Columbus, United States' -> (39.9622601, -83.0007065)
2026-01-11 14:41:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Pontedera, Italy' -> (43.6634536, 10.6354851)
2026-01-11 14:41:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Sendai, Japan' -> (38.252782, 140.8851343)
2026-01-11 14:41:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Philippines' -> (12.7503486, 122.7312101)
2026-01-11 14:41:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Bet Shemesh, Israel' -> (31.746214, 34.9886825)
2026-01-11 14:41:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Tel Aviv, Israel' -> (32.0852997, 34.7818064)
2026-01-11 14:41:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Conegliano, Italy' -> (45.8862172, 12.2977566)
2026-01-11 14:41:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Gif-sur-Yvette, France' -> (48.7018823, 2.134529)
2026-01-11 14:41:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Paris-Saclay, France' -> (48.7119805, 2.2009355)
2026-01-11 14:41:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Heidelberg, Australia' -> (-37.7524788, 145.0701284)
2026-01-11 14:41:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Grenoble, France' -> (45.1875602, 5.7357819)
2026-01-11 14:41:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Tianjin, China' -> (39.0844897, 117.1956724)
2026-01-11 14:41:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Henan, China' -> (34.0000001, 113.9999999)
2026-01-11 14:41:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Cognition and Behaviour, Netherlands' -> (51.8260925, 5.8630169)
2026-01-11 14:41:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Florida, United States' -> (27.7567667, -81.4639835)
2026-01-11 14:41:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Daegu, South Korea' -> (35.8713, 128.6018)
2026-01-11 14:41:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Laurel, United States' -> (37.1000973, -84.1148273)
2026-01-11 14:41:45 - app.phase2.pg_geocoding - WARNING - Could not geocode 'East China Normal, China (Mainland)' (from affiliation: Center for Bioinformatics and Computational Biology, and The Institute of Biomedical Sciences, School of Life Sciences, East China Normal University, Shanghai 200241, China. (PMID: 37995287))
2026-01-11 14:41:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Alderley Park, United Kingdom' -> (53.3027551, -2.2378849)
2026-01-11 14:41:49 - app.phase2.pg_geocoding - INFO - Geocoded 'New Cairo, Egypt' -> (30.0277688, 31.4756825)
2026-01-11 14:41:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Jefferson, United States' -> (29.834772, -94.1704496)
2026-01-11 14:41:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Ridgefield, United States' -> (41.2814842, -73.4981792)
2026-01-11 14:41:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Middletown, United States' -> (41.5623178, -72.6509061)
2026-01-11 14:41:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Leuven, Belgium' -> (50.879202, 4.7011675)
2026-01-11 14:42:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Southern California, United States' -> (33.9510011, -118.2062682)
2026-01-11 14:42:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Minneapolis, United States' -> (44.9772995, -93.2654692)
2026-01-11 14:42:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Springfield, United States' -> (39.7990175, -89.6439575)
2026-01-11 14:42:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Calgary, Canada' -> (51.0456064, -114.057541)
2026-01-11 14:42:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Riyadh, Saudi Arabia' -> (23.333333, 45.333333)
2026-01-11 14:42:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Morocco' -> (28.3347722, -10.3713379)
2026-01-11 14:42:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Majadahonda, Spain' -> (40.4728425, -3.8723542)
2026-01-11 14:42:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Suita, Japan' -> (34.7594193, 135.516835)
2026-01-11 14:42:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Agriculture and Technology, Japan' -> (35.699409, 139.5184335)
2026-01-11 14:42:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Epping, Australia' -> (-37.6523847, 145.0315487)
2026-01-11 14:42:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Bath, United Kingdom' -> (51.3813864, -2.3596963)
2026-01-11 14:42:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Aurora, Colombia' -> (6.0218228, -75.1359969)
2026-01-11 14:42:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Denver, Colombia' -> (5.3431816, -72.395988)
2026-01-11 14:42:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Jerusalem, Israel' -> (31.7788472, 35.2257856)
2026-01-11 14:42:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Hanover, United States' -> (43.7023545, -72.2892164)
2026-01-11 14:42:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Birmingham, United Kingdom' -> (52.4796992, -1.9026911)
2026-01-11 14:42:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Changsha, China (Mainland)' -> (22.9556779, 113.4220234)
2026-01-11 14:42:37 - app.phase2.pg_geocoding - INFO - Geocoded 'China' -> (35.000074, 104.999927)
2026-01-11 14:42:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Salzburg, Austria' -> (47.7981346, 13.0464806)
2026-01-11 14:42:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Shaanxi China, China' -> (34.1552786, 108.8866313)
2026-01-11 14:42:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Hoboken, United States' -> (40.7433066, -74.0323752)
2026-01-11 14:42:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Orange, United States' -> (33.750631, -117.8722311)
2026-01-11 14:42:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Alpes, France' -> (45.2968119, 4.6604809)
2026-01-11 14:42:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Belgium' -> (50.6402809, 4.6667145)
2026-01-11 14:42:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong, Hong Kong' -> (22.2534635, 114.190975)
2026-01-11 14:42:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Wuhan, China' -> (30.5951051, 114.2999353)
2026-01-11 14:42:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Technology Sydney, Australia' -> (-33.8832536, 151.2003294)
2026-01-11 14:43:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Cambridge, United Kingdom' -> (52.2055314, 0.1186637)
2026-01-11 14:43:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Essex, United Kingdom' -> (51.7704679, 0.4646698)
2026-01-11 14:43:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Stevenage, United Kingdom' -> (51.9016663, -0.2027155)
2026-01-11 14:43:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Newcastle upon Tyne, United Kingdom' -> (54.9738474, -1.6131572)
2026-01-11 14:43:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Copenhagen, Denmark' -> (55.6867243, 12.5700724)
2026-01-11 14:43:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Lyngby, Denmark' -> (55.7718649, 12.5051413)
2026-01-11 14:43:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Redmond, United States' -> (47.6694141, -122.1238767)
2026-01-11 14:43:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Silver Spring, United States' -> (38.9997621, -77.0240371)
2026-01-11 14:43:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Chieti-Pescara, Italy' -> (42.1536142, 13.270973)
2026-01-11 14:43:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Victoria, Australia' -> (-36.5986096, 144.6780052)
2026-01-11 14:43:24 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Head and Neck Surgery, Poland' (from affiliation: Department of Vascular and General Surgery, WrocÅ‚aw Medical University, Poland. (PMID: 41135818))
2026-01-11 14:43:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Wroclaw, Poland' -> (51.1089776, 17.0326689)
2026-01-11 14:43:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Shenyang, China' -> (41.8026095, 123.4279105)
2026-01-11 14:43:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Islamabad, Pakistan' -> (33.6938118, 73.0651511)
2026-01-11 14:43:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Xiamen, China' -> (24.5438732, 118.0768065)
2026-01-11 14:43:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Cali, Colombia' -> (3.4519988, -76.5325259)
2026-01-11 14:43:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Urushiyama, Japan' -> (38.314412, 140.3476006)
2026-01-11 14:43:37 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:43:37 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 106 pending institutions to institution_geo...
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO -    âœ… Added 3 validated institutions to institution_geo table
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4432
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 0
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO -    Cache misses: 3783
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 3746
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 37
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 21
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 11
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 3/106
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 21 error affiliations with LLM...
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO -    Collecting 21 unique error affiliations for LLM fix
2026-01-11 14:43:41 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-11 14:43:41 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 21 affiliations...
2026-01-11 14:43:41 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 21 affiliations...
2026-01-11 14:43:42 - app.phase2.institution_matcher - INFO -    Loaded 1716 institutions to memory (1716 normalized names, 205 aliases)
2026-01-11 14:43:42 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/21 (9%), matches found: 1
2026-01-11 14:43:42 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/21 (19%), matches found: 3
2026-01-11 14:43:42 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/21 (28%), matches found: 5
2026-01-11 14:43:42 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/21 (38%), matches found: 7
2026-01-11 14:43:42 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/21 (47%), matches found: 9
2026-01-11 14:43:42 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/21 (57%), matches found: 9
2026-01-11 14:43:42 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/21 (66%), matches found: 11
2026-01-11 14:43:42 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/21 (76%), matches found: 13
2026-01-11 14:43:42 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/21 (85%), matches found: 15
2026-01-11 14:43:42 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/21 (95%), matches found: 17
2026-01-11 14:43:42 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 21/21 (100%), matches found: 18
2026-01-11 14:43:42 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 18 matches found
2026-01-11 14:43:42 - app.phase2.affiliation_extractor - INFO -    Extracting 3 affiliations via LLM (affiliation_cache: 0, institution_geo: 18) in batches of 20
2026-01-11 14:43:42 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/1 (3 affiliations)
2026-01-11 14:43:45 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-11 14:43:46 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 3 affiliations processed
2026-01-11 14:43:46 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 21 results from 1 LLM calls
2026-01-11 14:43:46 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 21 LLM results...
2026-01-11 14:43:46 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 21 LLM results
2026-01-11 14:43:46 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-11 14:43:46 - app.phase2.affiliation_validator - INFO -    Processing 13 unique location keys for re-geocoding...
2026-01-11 14:43:53 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 21 affiliations
2026-01-11 14:43:53 - app.phase2.affiliation_validator - INFO -    âœ… Updated 36 authorships
2026-01-11 14:43:53 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 1 locations
2026-01-11 14:43:53 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:43:53 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 13092a22728c
2026-01-11 14:43:53 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 21
2026-01-11 14:43:53 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 21
2026-01-11 14:43:53 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 36
2026-01-11 14:43:53 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 1
2026-01-11 14:43:53 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-11 14:43:53 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-11 14:43:53 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-11 14:43:53 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 21
2026-01-11 14:43:53 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 21
2026-01-11 14:43:53 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 36
2026-01-11 14:43:53 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 1
2026-01-11 14:43:53 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 3
2026-01-11 14:43:53 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 37
2026-01-11 14:43:53 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-11 14:43:53 - app.main - INFO - ================================================================================
2026-01-11 14:43:53 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 14:43:53 - app.main - INFO -    Total PMIDs: 500
2026-01-11 14:43:53 - app.main - INFO -    Papers parsed: 500
2026-01-11 14:43:53 - app.main - INFO -    Authorships created: 4432
2026-01-11 14:43:53 - app.main - INFO -    Unique affiliations: 2545
2026-01-11 14:43:53 - app.main - INFO -    Affiliations with country: 2512
2026-01-11 14:43:53 - app.main - INFO -    LLM calls made: 0
2026-01-11 14:43:53 - app.main - INFO - ================================================================================
2026-01-11 23:07:00 - app.main - INFO - ================================================================================
2026-01-11 23:07:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 23:07:00 - app.main - INFO -    Min confidence: low
2026-01-11 23:07:00 - app.main - INFO - ================================================================================
2026-01-11 23:07:00 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 23:07:00 - app.main - INFO - ================================================================================
2026-01-11 23:07:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 23:07:00 - app.main - INFO -    Min confidence: low
2026-01-11 23:07:00 - app.main - INFO - ================================================================================
2026-01-11 23:07:00 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-11 23:07:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 23:07:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 23:07:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Italy' -> (42.6384261, 12.674297)
2026-01-11 23:07:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Italy' -> (42.6384261, 12.674297)
2026-01-11 23:07:06 - app.phase2.pg_geocoding - INFO - Geocoded 'South Korea' -> (36.638392, 127.6961188)
2026-01-11 23:07:07 - app.phase2.pg_geocoding - INFO - Geocoded 'South Korea' -> (36.638392, 127.6961188)
2026-01-11 23:07:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Australia' -> (-24.7761086, 134.755)
2026-01-11 23:07:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Australia' -> (-24.7761086, 134.755)
2026-01-11 23:07:10 - app.phase2.pg_geocoding - INFO - Geocoded 'China (Mainland)' -> (60.1672949, 24.9365563)
2026-01-11 23:07:11 - app.phase2.pg_geocoding - INFO - Geocoded 'China (Mainland)' -> (60.1672949, 24.9365563)
2026-01-11 23:07:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Russian Federation' -> (64.6863136, 97.7453061)
2026-01-11 23:07:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Russian Federation' -> (64.6863136, 97.7453061)
2026-01-11 23:07:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Denmark' -> (55.670249, 10.3333283)
2026-01-11 23:07:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Spain' -> (39.3260685, -4.8379791)
2026-01-11 23:07:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Spain' -> (39.3260685, -4.8379791)
2026-01-11 23:07:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Canada' -> (61.0666922, -107.991707)
2026-01-11 23:07:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Canada' -> (61.0666922, -107.991707)
2026-01-11 23:07:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Colombia' -> (4.099917, -72.9088133)
2026-01-11 23:07:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Colombia' -> (4.099917, -72.9088133)
2026-01-11 23:07:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Israel' -> (30.8124247, 34.8594762)
2026-01-11 23:07:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Israel' -> (30.8124247, 34.8594762)
2026-01-11 23:07:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Sweden' -> (59.6749712, 14.5208584)
2026-01-11 23:07:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Sweden' -> (59.6749712, 14.5208584)
2026-01-11 23:07:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Austria' -> (47.59397, 14.12456)
2026-01-11 23:07:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Austria' -> (47.59397, 14.12456)
2026-01-11 23:07:29 - app.phase2.pg_geocoding - INFO - Geocoded 'India' -> (22.3511148, 78.6677428)
2026-01-11 23:07:29 - app.phase2.pg_geocoding - INFO - Geocoded 'India' -> (22.3511148, 78.6677428)
2026-01-11 23:07:30 - app.phase2.pg_geocoding - WARNING - Cache store failed for country:India: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.UniqueViolationError'>: duplicate key value violates unique constraint "geocoding_cache_pkey"
DETAIL:  Key (location_key)=(country:India) already exists.
[SQL: INSERT INTO geocoding_cache (location_key, latitude, longitude, affiliations) VALUES ($1::VARCHAR, $2::FLOAT, $3::FLOAT, $4::JSONB) RETURNING geocoding_cache.created_at]
[parameters: ('country:India', 22.3511148, 78.6677428, 'null')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2026-01-11 23:07:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong SAR, China' -> (22.3492155, 114.1857978)
2026-01-11 23:07:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong SAR, China' -> (22.3492155, 114.1857978)
2026-01-11 23:07:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Taiwan' -> (23.9739374, 120.9820179)
2026-01-11 23:07:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Taiwan' -> (23.9739374, 120.9820179)
2026-01-11 23:07:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Romania' -> (45.9852129, 24.6859225)
2026-01-11 23:07:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Romania' -> (45.9852129, 24.6859225)
2026-01-11 23:07:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Saudi Arabia' -> (25.6242618, 42.3528328)
2026-01-11 23:07:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Saudi Arabia' -> (25.6242618, 42.3528328)
2026-01-11 23:07:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Brazil' -> (-10.3333333, -53.2)
2026-01-11 23:07:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Brazil' -> (-10.3333333, -53.2)
2026-01-11 23:07:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Finland' -> (63.2467777, 25.9209164)
2026-01-11 23:07:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Finland' -> (63.2467777, 25.9209164)
2026-01-11 23:07:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong' -> (22.3492155, 114.1857978)
2026-01-11 23:07:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong' -> (22.3492155, 114.1857978)
2026-01-11 23:07:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Poland' -> (52.215933, 19.134422)
2026-01-11 23:07:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Poland' -> (52.215933, 19.134422)
2026-01-11 23:07:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Iran, Islamic Republic of' -> (36.2665119, 59.5999861)
2026-01-11 23:07:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Iran, Islamic Republic of' -> (36.2665119, 59.5999861)
2026-01-11 23:07:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Czechia' -> (49.7439047, 15.3381061)
2026-01-11 23:07:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Czechia' -> (49.7439047, 15.3381061)
2026-01-11 23:07:52 - app.phase2.pg_geocoding - INFO - Geocoded 'South Africa' -> (-28.8166236, 24.991639)
2026-01-11 23:07:53 - app.phase2.pg_geocoding - INFO - Geocoded 'South Africa' -> (-28.8166236, 24.991639)
2026-01-11 23:07:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Ireland' -> (52.865196, -7.9794599)
2026-01-11 23:07:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Ireland' -> (52.865196, -7.9794599)
2026-01-11 23:07:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Turkey' -> (39.294076, 35.2316631)
2026-01-11 23:07:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Turkey' -> (39.294076, 35.2316631)
2026-01-11 23:07:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Pakistan' -> (30.3308401, 71.247499)
2026-01-11 23:07:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Pakistan' -> (30.3308401, 71.247499)
2026-01-11 23:08:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Lebanon' -> (33.8750629, 35.843409)
2026-01-11 23:08:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Lebanon' -> (33.8750629, 35.843409)
2026-01-11 23:08:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Panama' -> (8.559559, -81.1308434)
2026-01-11 23:08:04 - app.phase2.pg_geocoding - INFO - Geocoded 'New Zealand' -> (-41.5000831, 172.8344077)
2026-01-11 23:08:05 - app.phase2.pg_geocoding - INFO - Geocoded 'New Zealand' -> (-41.5000831, 172.8344077)
2026-01-11 23:08:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Hungary' -> (47.1817585, 19.5060937)
2026-01-11 23:08:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Hungary' -> (47.1817585, 19.5060937)
2026-01-11 23:08:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Portugal' -> (39.6621648, -8.1353519)
2026-01-11 23:08:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Portugal' -> (39.6621648, -8.1353519)
2026-01-11 23:08:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Egypt' -> (26.2540493, 29.2675469)
2026-01-11 23:08:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Mexico' -> (23.6585116, -102.0077097)
2026-01-11 23:08:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Egypt' -> (26.2540493, 29.2675469)
2026-01-11 23:08:13 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 23:08:13 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 23:08:13 - app.main - INFO -    Countries returned: 51
2026-01-11 23:08:13 - app.main - INFO - ================================================================================
2026-01-11 23:08:13 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-11 23:08:13 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-11 23:08:13 - app.main - INFO -    Countries returned: 51
2026-01-11 23:08:13 - app.main - INFO - ================================================================================
2026-01-11 23:08:19 - app.main - INFO - ================================================================================
2026-01-11 23:08:19 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 23:08:19 - app.main - INFO -    Country: Morocco, Min confidence: low
2026-01-11 23:08:19 - app.main - INFO - ================================================================================
2026-01-11 23:08:19 - app.phase2.pg_aggregations - INFO -    Getting country map for Morocco (normalized: Morocco)...
2026-01-11 23:08:19 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 23:08:19 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Morocco
2026-01-11 23:08:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Morocco
2026-01-11 23:08:19 - app.main - INFO -    Cities returned: 1
2026-01-11 23:08:19 - app.main - INFO - ================================================================================
2026-01-11 23:08:28 - app.main - INFO - ================================================================================
2026-01-11 23:08:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 23:08:28 - app.main - INFO -    Country: China, Min confidence: low
2026-01-11 23:08:28 - app.main - INFO - ================================================================================
2026-01-11 23:08:28 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-11 23:08:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 23:08:29 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 13 cities in China
2026-01-11 23:08:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-11 23:08:29 - app.main - INFO -    Cities returned: 13
2026-01-11 23:08:29 - app.main - INFO - ================================================================================
2026-01-11 23:08:35 - app.main - INFO - ================================================================================
2026-01-11 23:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-11 23:08:35 - app.main - INFO -    Country: China, City: Shaanxi China, Min confidence: low
2026-01-11 23:08:35 - app.main - INFO - ================================================================================
2026-01-11 23:08:35 - app.phase2.pg_aggregations - INFO -    Getting city map for Shaanxi China, China...
2026-01-11 23:08:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-11 23:08:36 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Shaanxi China, China
2026-01-11 23:08:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Shaanxi China, China
2026-01-11 23:08:36 - app.main - INFO -    Institutions returned: 1
2026-01-11 23:08:36 - app.main - INFO - ================================================================================
2026-01-12 09:22:09 - root - INFO - ================================================================================
2026-01-12 09:22:09 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 09:22:09 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 09:22:09 - root - INFO - ================================================================================
2026-01-12 09:22:32 - root - INFO - ================================================================================
2026-01-12 09:22:32 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 09:22:32 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 09:22:32 - root - INFO - ================================================================================
2026-01-12 09:23:15 - root - INFO - ================================================================================
2026-01-12 09:23:15 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 09:23:15 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 09:23:15 - root - INFO - ================================================================================
2026-01-12 09:23:40 - root - INFO - ================================================================================
2026-01-12 09:23:40 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 09:23:40 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 09:23:40 - root - INFO - ================================================================================
2026-01-12 09:23:49 - root - INFO - ================================================================================
2026-01-12 09:23:49 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 09:23:49 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 09:23:49 - root - INFO - ================================================================================
2026-01-12 09:23:52 - root - INFO - ================================================================================
2026-01-12 09:23:52 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 09:23:52 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 09:23:52 - root - INFO - ================================================================================
2026-01-12 09:35:53 - root - INFO - ================================================================================
2026-01-12 09:35:53 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 09:35:53 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 09:35:53 - root - INFO - ================================================================================
2026-01-12 09:36:30 - app.main - INFO - ðŸ‘¥ ADMIN: Fetching online user count
2026-01-12 09:36:31 - app.main - INFO - âœ… ADMIN: Online users: 1
2026-01-12 09:36:34 - app.main - INFO - ================================================================================
2026-01-12 09:36:34 - app.main - INFO - ðŸ“Š ADMIN: Manual resource snapshot triggered
2026-01-12 09:36:34 - app.main - INFO - ================================================================================
2026-01-12 09:36:35 - app.main - INFO - âœ… ADMIN: Snapshot completed
2026-01-12 09:36:35 - app.main - INFO -    Snapshot ID: 1
2026-01-12 09:36:35 - app.main - INFO -    Users: 1
2026-01-12 09:36:35 - app.main - INFO -    Runs: 3
2026-01-12 09:36:35 - app.main - INFO -    Total Disk: 13.44 MB
2026-01-12 09:36:35 - app.main - INFO - ================================================================================
2026-01-12 09:37:29 - app.main - INFO - ================================================================================
2026-01-12 09:37:29 - app.main - INFO - ðŸ“Š ADMIN: Manual resource snapshot triggered
2026-01-12 09:37:29 - app.main - INFO - ================================================================================
2026-01-12 09:37:30 - app.main - INFO - âœ… ADMIN: Snapshot completed
2026-01-12 09:37:30 - app.main - INFO -    Snapshot ID: 1
2026-01-12 09:37:30 - app.main - INFO -    Users: 1
2026-01-12 09:37:30 - app.main - INFO -    Runs: 3
2026-01-12 09:37:30 - app.main - INFO -    Total Disk: 13.44 MB
2026-01-12 09:37:30 - app.main - INFO - ================================================================================
2026-01-12 09:39:37 - app.main - INFO - ================================================================================
2026-01-12 09:39:37 - app.main - INFO - ðŸ“Š ADMIN: Manual resource snapshot triggered
2026-01-12 09:39:37 - app.main - INFO - ================================================================================
2026-01-12 09:39:38 - app.main - INFO - âœ… ADMIN: Snapshot completed
2026-01-12 09:39:38 - app.main - INFO -    Snapshot ID: 1
2026-01-12 09:39:38 - app.main - INFO -    Users: 1
2026-01-12 09:39:38 - app.main - INFO -    Runs: 3
2026-01-12 09:39:38 - app.main - INFO -    Total Disk: 13.44 MB
2026-01-12 09:39:38 - app.main - INFO - ================================================================================
2026-01-12 09:41:08 - root - INFO - ================================================================================
2026-01-12 09:41:08 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 09:41:08 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 09:41:08 - root - INFO - ================================================================================
2026-01-12 09:42:50 - root - INFO - ================================================================================
2026-01-12 09:42:50 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 09:42:50 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 09:42:50 - root - INFO - ================================================================================
2026-01-12 09:43:17 - root - INFO - ================================================================================
2026-01-12 09:43:17 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 09:43:17 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 09:43:17 - root - INFO - ================================================================================
2026-01-12 09:43:28 - app.main - INFO - ================================================================================
2026-01-12 09:43:28 - app.main - INFO - ðŸ“Š ADMIN: Manual resource snapshot triggered
2026-01-12 09:43:28 - app.main - INFO - ================================================================================
2026-01-12 09:43:29 - app.main - INFO - âœ… ADMIN: Snapshot completed
2026-01-12 09:43:29 - app.main - INFO -    Snapshot ID: 1
2026-01-12 09:43:29 - app.main - INFO -    Users: 1
2026-01-12 09:43:29 - app.main - INFO -    Runs: 3
2026-01-12 09:43:29 - app.main - INFO -    Total Disk: 13.44 MB
2026-01-12 09:43:29 - app.main - INFO - ================================================================================
2026-01-12 10:06:41 - root - INFO - ================================================================================
2026-01-12 10:06:41 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 10:06:41 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 10:06:41 - root - INFO - ================================================================================
2026-01-12 10:13:16 - root - INFO - ================================================================================
2026-01-12 10:13:16 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 10:13:16 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 10:13:16 - root - INFO - ================================================================================
2026-01-12 10:13:20 - root - INFO - ================================================================================
2026-01-12 10:13:20 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 10:13:20 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 10:13:20 - root - INFO - ================================================================================
2026-01-12 10:13:31 - root - INFO - ================================================================================
2026-01-12 10:13:31 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 10:13:31 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 10:13:31 - root - INFO - ================================================================================
2026-01-12 10:13:35 - root - INFO - ================================================================================
2026-01-12 10:13:35 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 10:13:35 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 10:13:35 - root - INFO - ================================================================================
2026-01-12 10:13:44 - root - INFO - ================================================================================
2026-01-12 10:13:44 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 10:13:44 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 10:13:44 - root - INFO - ================================================================================
2026-01-12 10:14:00 - root - INFO - ================================================================================
2026-01-12 10:14:00 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 10:14:00 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 10:14:00 - root - INFO - ================================================================================
2026-01-12 10:14:11 - root - INFO - ================================================================================
2026-01-12 10:14:11 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 10:14:11 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 10:14:11 - root - INFO - ================================================================================
2026-01-12 10:23:19 - root - INFO - ================================================================================
2026-01-12 10:23:19 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 10:23:19 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 10:23:19 - root - INFO - ================================================================================
2026-01-12 10:51:44 - root - INFO - ================================================================================
2026-01-12 10:51:44 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 10:51:44 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 10:51:44 - root - INFO - ================================================================================
2026-01-12 10:54:37 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-12 10:57:17 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-12 11:05:59 - root - INFO - ================================================================================
2026-01-12 11:05:59 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 11:05:59 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 11:05:59 - root - INFO - ================================================================================
2026-01-12 11:07:59 - root - INFO - ================================================================================
2026-01-12 11:07:59 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 11:07:59 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 11:07:59 - root - INFO - ================================================================================
2026-01-12 11:14:34 - root - INFO - ================================================================================
2026-01-12 11:14:34 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 11:14:34 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 11:14:34 - root - INFO - ================================================================================
2026-01-12 11:15:26 - root - INFO - ================================================================================
2026-01-12 11:15:26 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 11:15:26 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 11:15:26 - root - INFO - ================================================================================
2026-01-12 11:18:16 - root - INFO - ================================================================================
2026-01-12 11:18:16 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 11:18:16 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 11:18:16 - root - INFO - ================================================================================
2026-01-12 11:18:27 - root - INFO - ================================================================================
2026-01-12 11:18:27 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 11:18:27 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 11:18:27 - root - INFO - ================================================================================
2026-01-12 11:20:04 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-12 11:33:50 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-12 11:35:35 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-12 11:36:06 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-12 11:36:36 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-12 11:36:52 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi "HTTP/1.1 200 OK"
2026-01-12 11:36:52 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-12 11:37:34 - app.main - INFO - ================================================================================
2026-01-12 11:37:34 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:37:34 - app.main - INFO -    Force refresh: False
2026-01-12 11:37:34 - app.main - INFO - ================================================================================
2026-01-12 11:37:34 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:37:34 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 87cd3ae67453
2026-01-12 11:37:34 - app.phase2.pg_ingest - INFO -    Project ID: 2098072fb7af
2026-01-12 11:37:34 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-12 11:37:34 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:37:34 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-12 11:37:36 - app.phase2.pg_ingest - INFO -    Loaded 93 unique PMIDs from run 87cd3ae67453
2026-01-12 11:37:36 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 93 PMIDs
2026-01-12 11:37:36 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:37:36 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 93 PMIDs from PubMed...
2026-01-12 11:37:36 - app.phase2.pubmed_fetcher - INFO - Fetching 93 PMIDs in 1 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-12 11:37:36 - app.phase2.pubmed_fetcher - INFO - Fetching 93 PMIDs from PubMed...
2026-01-12 11:37:36 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=32706190%2C24921388%2C20644245%2C39345497%2C39455254%2C23367471%2C23366244%2C40975869%2C21078582%2C28931054%2C40061257%2C41266624%2C27255798%2C25570539%2C21423797%2C16792303%2C40060267%2C24109680%2C33770760%2C40703668%2C24904251%2C23536714%2C20407639%2C35287119%2C40720979%2C18303800%2C28268628%2C36776220%2C25681017%2C40816265%2C23383315%2C35659259%2C40144587%2C37007675%2C18350128%2C40048825%2C25504690%2C33242850%2C25015699%2C30440344%2C26736620%2C23918061%2C26902372%2C24324155%2C23031175%2C21159949%2C22084052%2C25946198%2C39134021%2C31616237%2C28223914%2C25120417%2C35921802%2C29059844%2C41406614%2C24760860%2C31171607%2C33524962%2C25265627%2C34561503%2C28113323%2C31191218%2C25774541%2C33108775%2C30624221%2C25545500%2C23284276%2C25082508%2C25128256%2C31587955%2C26321943%2C29192609%2C39383883%2C24834047%2C24235276%2C37425292%2C36240727%2C32746347%2C30002452%2C40127544%2C40913530%2C30523833%2C40136836%2C38952818%2C38949928%2C40247859%2C36851970%2C41266142%2C30441189%2C34870202%2C24860416%2C38332136%2C33632810&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-12 11:37:37 - app.phase2.pubmed_fetcher - INFO - Batch 1/1 completed
2026-01-12 11:37:37 - app.phase2.pubmed_fetcher - INFO - Fetched 1/1 batches successfully
2026-01-12 11:37:37 - app.phase2.pubmed_fetcher - INFO - Extracted 93 PMIDs from 1 batches
2026-01-12 11:37:37 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 93 PubMed XML records
2026-01-12 11:37:37 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:37:37 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-12 11:37:37 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 93 papers
2026-01-12 11:37:37 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:37:37 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-12 11:37:37 - app.phase2.pg_ingest - INFO -    Extracting 301 unique affiliations via rule-based method
2026-01-12 11:37:37 - app.phase2.rule_based_extractor - INFO -    Processing 301 affiliations...
2026-01-12 11:37:37 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 301 affiliations...
2026-01-12 11:37:37 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 32 hits, 269 need extraction
2026-01-12 11:37:37 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 269 affiliations...
2026-01-12 11:37:37 - app.phase2.institution_matcher - INFO -    Loaded 1716 institutions to memory (1716 normalized names, 205 aliases)
2026-01-12 11:37:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 26/269 (9%), matches found: 17
2026-01-12 11:37:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 52/269 (19%), matches found: 37
2026-01-12 11:37:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 78/269 (28%), matches found: 58
2026-01-12 11:37:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 104/269 (38%), matches found: 73
2026-01-12 11:37:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 130/269 (48%), matches found: 93
2026-01-12 11:37:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 156/269 (57%), matches found: 112
2026-01-12 11:37:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 182/269 (67%), matches found: 132
2026-01-12 11:37:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 208/269 (77%), matches found: 154
2026-01-12 11:37:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 234/269 (86%), matches found: 172
2026-01-12 11:37:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 260/269 (96%), matches found: 190
2026-01-12 11:37:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 269/269 (100%), matches found: 197
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 197 matches found
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    Extracting 72 affiliations using rule-based parser...
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 7/72 (9%)
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 14/72 (19%)
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 21/72 (29%)
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 28/72 (38%)
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 35/72 (48%)
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 42/72 (58%)
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 49/72 (68%)
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 56/72 (77%)
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 63/72 (87%)
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 70/72 (97%)
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 72/72 (100%)
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 72 results
2026-01-12 11:37:38 - app.phase2.rule_based_extractor - INFO -       Pending validation: 60 institutions
2026-01-12 11:37:38 - app.phase2.pg_ingest - INFO -    Cached 269 new affiliation extraction results to affiliation_cache table
2026-01-12 11:37:38 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 301 affiliations processed, 296 with country
2026-01-12 11:37:38 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 301 affiliations
2026-01-12 11:37:38 - app.phase2.pg_ingest - INFO -    Unique affiliations: 301
2026-01-12 11:37:38 - app.phase2.pg_ingest - INFO -    With country: 296
2026-01-12 11:37:38 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-12 11:37:38 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:37:38 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-12 11:37:38 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 87cd3ae67453...
2026-01-12 11:37:38 - app.phase2.pg_ingest - INFO -    Inserting/updating 93 papers (bulk operation)...
2026-01-12 11:37:38 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 93
2026-01-12 11:37:38 - app.phase2.pg_ingest - INFO -    Inserting 642 authorships (bulk operation)...
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -    Authorships inserted: 642
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -    Linking run 87cd3ae67453 to 93 papers...
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 642 authorships
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -    Total PMIDs: 93
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -    Papers parsed: 93
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -    Authorships created: 642
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -    Unique affiliations: 301
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -    Affiliations with country: 296
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO - 
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 32
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 197
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 72
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 69
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO - 
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 301 = 301 (matches)
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 60
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO - 
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-12 11:37:40 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-12 11:37:40 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 60
2026-01-12 11:37:40 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:37:40 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 87cd3ae67453...
2026-01-12 11:37:41 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 696 authorships from 93 papers
2026-01-12 11:37:41 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:37:41 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-12 11:37:41 - app.phase2.affiliation_validator - INFO -    Found 83 unique location keys from 696 authorships
2026-01-12 11:37:41 - app.phase2.affiliation_validator - INFO -    Batch query complete: 60/83 found in cache
2026-01-12 11:37:41 - app.phase2.affiliation_validator - INFO -    Processing 23 unique location keys via Nominatim...
2026-01-12 11:37:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Alberta, Canada' -> (55.001251, -115.002136)
2026-01-12 11:37:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Genova, Italy' -> (44.40726, 8.9338624)
2026-01-12 11:37:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Kansas City, United States' -> (39.100105, -94.5781416)
2026-01-12 11:37:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Tuebingen, Germany' -> (48.5203263, 9.053596)
2026-01-12 11:37:53 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Information et ComplexitÃ©, France' (from affiliation: UnitÃ© de Neuroscience, Information et ComplexitÃ©, Centre National de la Recherche Scientifique Gif-sur-Yvette, France. (PMID: 25120417))
2026-01-12 11:37:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Istanbul, TÃ¼rkiye' -> (41.006381, 28.9758715)
2026-01-12 11:37:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Jinan, China' -> (36.6519754, 117.1138479)
2026-01-12 11:38:01 - app.phase2.pg_geocoding - INFO - Geocoded 'P. R. China, China' -> (35.000074, 104.999927)
2026-01-12 11:38:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Eniwa, Japan' -> (42.8827386, 141.5775731)
2026-01-12 11:38:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Orlando, Austria' -> (48.2720833, 16.4517356)
2026-01-12 11:38:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Science and Technology, China (Mainland)' -> (39.9902334, 116.3531753)
2026-01-12 11:38:09 - app.phase2.pg_geocoding - INFO - Geocoded 'The Netherlands, Andorra' -> (52.2245005, 5.1809361)
2026-01-12 11:38:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Science and Technology, Hong Kong SAR, China' -> (22.3358031, 114.2659088)
2026-01-12 11:38:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Hapugala, Sri Lanka' -> (6.0757917, 80.1975697)
2026-01-12 11:38:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Pasadena, United States' -> (34.1476507, -118.144155)
2026-01-12 11:38:17 - app.phase2.pg_geocoding - INFO - Geocoded 'East Lansing, United States' -> (42.7320307, -84.4721678)
2026-01-12 11:38:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Heeze, Netherlands' -> (51.3832098, 5.5715902)
2026-01-12 11:38:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Temple, United States' -> (31.0983747, -97.3429563)
2026-01-12 11:38:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Bulgarian Academy of Sciences, Bulgaria' -> (42.6945902, 23.3319937)
2026-01-12 11:38:26 - app.phase2.pg_geocoding - INFO - Geocoded 'F- Grenoble, France' -> (45.189777, 5.7712026)
2026-01-12 11:38:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Hsinchu, Taiwan' -> (24.8066333, 120.9686833)
2026-01-12 11:38:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Zhuhai, China' -> (22.273734, 113.5721327)
2026-01-12 11:38:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Winterthur, Switzerland' -> (47.4991723, 8.7291498)
2026-01-12 11:38:33 - app.phase2.affiliation_validator - INFO -    Batch updating 448 affiliations for 58 cached locations...
2026-01-12 11:38:36 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 58 locations (448 total affiliations)
2026-01-12 11:38:36 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:38:36 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 60 pending institutions to institution_geo...
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO -    âœ… Added 15 validated institutions to institution_geo table
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 696
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 456
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO -    Cache misses: 61
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 57
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 4
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 6
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 3
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 15/60
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 6 error affiliations with LLM...
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO -    Collecting 6 unique error affiliations for LLM fix
2026-01-12 11:38:38 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-12 11:38:38 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 6 affiliations...
2026-01-12 11:38:38 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 6 affiliations...
2026-01-12 11:38:38 - app.phase2.institution_matcher - INFO -    Loaded 1731 institutions to memory (1731 normalized names, 205 aliases)
2026-01-12 11:38:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1/6 (16%), matches found: 1
2026-01-12 11:38:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/6 (33%), matches found: 2
2026-01-12 11:38:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 3/6 (50%), matches found: 3
2026-01-12 11:38:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/6 (66%), matches found: 3
2026-01-12 11:38:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 5/6 (83%), matches found: 3
2026-01-12 11:38:38 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/6 (100%), matches found: 3
2026-01-12 11:38:38 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 3 matches found
2026-01-12 11:38:38 - app.phase2.affiliation_extractor - INFO -    Extracting 3 affiliations via LLM (affiliation_cache: 0, institution_geo: 3) in batches of 20
2026-01-12 11:38:38 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/1 (3 affiliations)
2026-01-12 11:38:41 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-12 11:38:43 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 3 affiliations processed
2026-01-12 11:38:43 - app.phase2.affiliation_extractor - INFO -       Auto-added to institution_geo table: 3 institutions
2026-01-12 11:38:43 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 6 results from 1 LLM calls
2026-01-12 11:38:43 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 6 LLM results...
2026-01-12 11:38:43 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 6 LLM results
2026-01-12 11:38:43 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-12 11:38:43 - app.phase2.affiliation_validator - INFO -    Processing 3 unique location keys for re-geocoding...
2026-01-12 11:38:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Tehran, Iran' -> (35.6892523, 51.3896004)
2026-01-12 11:38:47 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 6 affiliations
2026-01-12 11:38:47 - app.phase2.affiliation_validator - INFO -    âœ… Updated 12 authorships
2026-01-12 11:38:47 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 2 locations
2026-01-12 11:38:47 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:38:47 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 87cd3ae67453
2026-01-12 11:38:47 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 6
2026-01-12 11:38:47 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 6
2026-01-12 11:38:47 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 12
2026-01-12 11:38:47 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 2
2026-01-12 11:38:47 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:38:47 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-12 11:38:47 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-12 11:38:47 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 6
2026-01-12 11:38:47 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 6
2026-01-12 11:38:47 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 12
2026-01-12 11:38:47 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 2
2026-01-12 11:38:47 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 15
2026-01-12 11:38:47 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 4
2026-01-12 11:38:47 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-12 11:38:47 - app.main - INFO - ================================================================================
2026-01-12 11:38:47 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:38:47 - app.main - INFO -    Total PMIDs: 93
2026-01-12 11:38:47 - app.main - INFO -    Papers parsed: 93
2026-01-12 11:38:47 - app.main - INFO -    Authorships created: 642
2026-01-12 11:38:47 - app.main - INFO -    Unique affiliations: 301
2026-01-12 11:38:47 - app.main - INFO -    Affiliations with country: 296
2026-01-12 11:38:47 - app.main - INFO -    LLM calls made: 0
2026-01-12 11:38:47 - app.main - INFO - ================================================================================
2026-01-12 11:38:56 - app.main - INFO - ================================================================================
2026-01-12 11:38:56 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:38:56 - app.main - INFO -    Min confidence: low
2026-01-12 11:38:56 - app.main - INFO - ================================================================================
2026-01-12 11:38:56 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-12 11:38:56 - app.main - INFO - ================================================================================
2026-01-12 11:38:56 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:38:56 - app.main - INFO -    Min confidence: low
2026-01-12 11:38:56 - app.main - INFO - ================================================================================
2026-01-12 11:38:56 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-12 11:38:56 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:38:56 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:38:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Bulgaria' -> (42.6073975, 25.4856617)
2026-01-12 11:38:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Bulgaria' -> (42.6073975, 25.4856617)
2026-01-12 11:39:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Iran' -> (32.6475314, 54.5643516)
2026-01-12 11:39:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Iran' -> (32.6475314, 54.5643516)
2026-01-12 11:39:02 - app.phase2.pg_geocoding - INFO - Geocoded 'TÃ¼rkiye' -> (39.294076, 35.2316631)
2026-01-12 11:39:03 - app.phase2.pg_geocoding - INFO - Geocoded 'TÃ¼rkiye' -> (39.294076, 35.2316631)
2026-01-12 11:39:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Sri Lanka' -> (7.5554942, 80.7137847)
2026-01-12 11:39:04 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-12 11:39:05 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 11:39:05 - app.main - INFO -    Countries returned: 23
2026-01-12 11:39:05 - app.main - INFO - ================================================================================
2026-01-12 11:39:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Sri Lanka' -> (7.5554942, 80.7137847)
2026-01-12 11:39:05 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-12 11:39:05 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 11:39:05 - app.main - INFO -    Countries returned: 23
2026-01-12 11:39:05 - app.main - INFO - ================================================================================
2026-01-12 11:39:15 - app.main - INFO - ================================================================================
2026-01-12 11:39:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:39:15 - app.main - INFO -    Country: China, Min confidence: low
2026-01-12 11:39:15 - app.main - INFO - ================================================================================
2026-01-12 11:39:15 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-12 11:39:15 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:39:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in China
2026-01-12 11:39:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-12 11:39:16 - app.main - INFO -    Cities returned: 6
2026-01-12 11:39:16 - app.main - INFO - ================================================================================
2026-01-12 11:39:22 - app.main - INFO - ================================================================================
2026-01-12 11:39:22 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:39:22 - app.main - INFO -    Country: China, City: P. R. China, Min confidence: low
2026-01-12 11:39:22 - app.main - INFO - ================================================================================
2026-01-12 11:39:22 - app.phase2.pg_aggregations - INFO -    Getting city map for P. R. China, China...
2026-01-12 11:39:22 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:39:22 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in P. R. China, China
2026-01-12 11:39:22 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: P. R. China, China
2026-01-12 11:39:22 - app.main - INFO -    Institutions returned: 1
2026-01-12 11:39:22 - app.main - INFO - ================================================================================
2026-01-12 11:39:30 - app.main - INFO - ================================================================================
2026-01-12 11:39:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Institution Scholars - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:39:30 - app.main - INFO -    Institution: Ç College of Physics and Electronic, Country: China, City: P. R. China
2026-01-12 11:39:30 - app.main - INFO -    Min confidence: low
2026-01-12 11:39:30 - app.main - INFO - ================================================================================
2026-01-12 11:39:30 - app.phase2.pg_aggregations - INFO -    Getting scholars for Ç College of Physics and Electronic, P. R. China, China...
2026-01-12 11:39:31 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:39:31 - app.phase2.pg_aggregations - INFO -    âœ… Institution scholars aggregation complete: 1 scholars at Ç College of Physics and Electronic
2026-01-12 11:39:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Institution Scholars: Ç College of Physics and Electronic
2026-01-12 11:39:31 - app.main - INFO -    Scholars returned: 1
2026-01-12 11:39:31 - app.main - INFO - ================================================================================
2026-01-12 11:39:48 - app.main - INFO - ================================================================================
2026-01-12 11:39:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:39:48 - app.main - INFO -    Country: China, City: Shanghai, Min confidence: low
2026-01-12 11:39:48 - app.main - INFO - ================================================================================
2026-01-12 11:39:48 - app.phase2.pg_aggregations - INFO -    Getting city map for Shanghai, China...
2026-01-12 11:39:48 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:39:48 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Shanghai, China
2026-01-12 11:39:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Shanghai, China
2026-01-12 11:39:48 - app.main - INFO -    Institutions returned: 3
2026-01-12 11:39:48 - app.main - INFO - ================================================================================
2026-01-12 11:39:57 - app.main - INFO - ================================================================================
2026-01-12 11:39:57 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Institution Scholars - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:39:57 - app.main - INFO -    Institution: Ltd, Country: China, City: Shanghai
2026-01-12 11:39:57 - app.main - INFO -    Min confidence: low
2026-01-12 11:39:57 - app.main - INFO - ================================================================================
2026-01-12 11:39:57 - app.phase2.pg_aggregations - INFO -    Getting scholars for Ltd, Shanghai, China...
2026-01-12 11:39:57 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:39:58 - app.phase2.pg_aggregations - INFO -    âœ… Institution scholars aggregation complete: 6 scholars at Ltd
2026-01-12 11:39:58 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Institution Scholars: Ltd
2026-01-12 11:39:58 - app.main - INFO -    Scholars returned: 6
2026-01-12 11:39:58 - app.main - INFO - ================================================================================
2026-01-12 11:40:24 - app.main - INFO - ================================================================================
2026-01-12 11:40:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:40:24 - app.main - INFO -    Min confidence: low
2026-01-12 11:40:24 - app.main - INFO - ================================================================================
2026-01-12 11:40:24 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-12 11:40:24 - app.main - INFO - ================================================================================
2026-01-12 11:40:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:40:24 - app.main - INFO -    Min confidence: low
2026-01-12 11:40:24 - app.main - INFO - ================================================================================
2026-01-12 11:40:24 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-12 11:40:24 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:40:24 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:40:25 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-12 11:40:25 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 11:40:25 - app.main - INFO -    Countries returned: 23
2026-01-12 11:40:25 - app.main - INFO - ================================================================================
2026-01-12 11:40:25 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-12 11:40:25 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 11:40:25 - app.main - INFO -    Countries returned: 23
2026-01-12 11:40:25 - app.main - INFO - ================================================================================
2026-01-12 11:40:35 - app.main - INFO - ================================================================================
2026-01-12 11:40:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:40:35 - app.main - INFO -    Country: China, Min confidence: low
2026-01-12 11:40:35 - app.main - INFO - ================================================================================
2026-01-12 11:40:35 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-12 11:40:35 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:40:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in China
2026-01-12 11:40:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-12 11:40:35 - app.main - INFO -    Cities returned: 6
2026-01-12 11:40:35 - app.main - INFO - ================================================================================
2026-01-12 11:40:38 - app.main - INFO - ================================================================================
2026-01-12 11:40:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:40:38 - app.main - INFO -    Country: China, City: Shanghai, Min confidence: low
2026-01-12 11:40:38 - app.main - INFO - ================================================================================
2026-01-12 11:40:38 - app.phase2.pg_aggregations - INFO -    Getting city map for Shanghai, China...
2026-01-12 11:40:38 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:40:38 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Shanghai, China
2026-01-12 11:40:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Shanghai, China
2026-01-12 11:40:38 - app.main - INFO -    Institutions returned: 3
2026-01-12 11:40:38 - app.main - INFO - ================================================================================
2026-01-12 11:40:44 - app.main - INFO - ================================================================================
2026-01-12 11:40:44 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Institution Scholars - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:40:44 - app.main - INFO -    Institution: Ltd, Country: China, City: Shanghai
2026-01-12 11:40:44 - app.main - INFO -    Min confidence: low
2026-01-12 11:40:44 - app.main - INFO - ================================================================================
2026-01-12 11:40:44 - app.phase2.pg_aggregations - INFO -    Getting scholars for Ltd, Shanghai, China...
2026-01-12 11:40:44 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:40:45 - app.phase2.pg_aggregations - INFO -    âœ… Institution scholars aggregation complete: 6 scholars at Ltd
2026-01-12 11:40:45 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Institution Scholars: Ltd
2026-01-12 11:40:45 - app.main - INFO -    Scholars returned: 6
2026-01-12 11:40:45 - app.main - INFO - ================================================================================
2026-01-12 11:43:03 - app.main - INFO - ================================================================================
2026-01-12 11:43:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:43:03 - app.main - INFO -    Min confidence: low
2026-01-12 11:43:03 - app.main - INFO - ================================================================================
2026-01-12 11:43:03 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-12 11:43:03 - app.main - INFO - ================================================================================
2026-01-12 11:43:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:43:03 - app.main - INFO -    Min confidence: low
2026-01-12 11:43:03 - app.main - INFO - ================================================================================
2026-01-12 11:43:03 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-12 11:43:04 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:43:04 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:43:04 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-12 11:43:04 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-12 11:43:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 11:43:04 - app.main - INFO -    Countries returned: 23
2026-01-12 11:43:04 - app.main - INFO - ================================================================================
2026-01-12 11:43:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 11:43:04 - app.main - INFO -    Countries returned: 23
2026-01-12 11:43:04 - app.main - INFO - ================================================================================
2026-01-12 11:43:15 - app.main - INFO - ================================================================================
2026-01-12 11:43:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:43:15 - app.main - INFO -    Country: China, Min confidence: low
2026-01-12 11:43:15 - app.main - INFO - ================================================================================
2026-01-12 11:43:15 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-12 11:43:15 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:43:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in China
2026-01-12 11:43:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-12 11:43:16 - app.main - INFO -    Cities returned: 6
2026-01-12 11:43:16 - app.main - INFO - ================================================================================
2026-01-12 11:43:19 - app.main - INFO - ================================================================================
2026-01-12 11:43:19 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:43:19 - app.main - INFO -    Country: China, City: Shanghai, Min confidence: low
2026-01-12 11:43:19 - app.main - INFO - ================================================================================
2026-01-12 11:43:19 - app.phase2.pg_aggregations - INFO -    Getting city map for Shanghai, China...
2026-01-12 11:43:19 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:43:19 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Shanghai, China
2026-01-12 11:43:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Shanghai, China
2026-01-12 11:43:20 - app.main - INFO -    Institutions returned: 3
2026-01-12 11:43:20 - app.main - INFO - ================================================================================
2026-01-12 11:49:08 - root - INFO - ================================================================================
2026-01-12 11:49:08 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 11:49:08 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 11:49:08 - root - INFO - ================================================================================
2026-01-12 11:49:19 - root - INFO - ================================================================================
2026-01-12 11:49:19 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 11:49:19 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 11:49:19 - root - INFO - ================================================================================
2026-01-12 11:51:32 - root - INFO - ================================================================================
2026-01-12 11:51:32 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 11:51:32 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-12 11:51:32 - root - INFO - ================================================================================
2026-01-12 11:51:40 - app.main - INFO - ================================================================================
2026-01-12 11:51:40 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:51:40 - app.main - INFO -    Force refresh: False
2026-01-12 11:51:40 - app.main - INFO - ================================================================================
2026-01-12 11:51:40 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:40 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 87cd3ae67453
2026-01-12 11:51:40 - app.phase2.pg_ingest - INFO -    Project ID: 2098072fb7af
2026-01-12 11:51:40 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-12 11:51:40 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:40 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-12 11:51:41 - app.phase2.pg_ingest - INFO -    Loaded 93 unique PMIDs from run 87cd3ae67453
2026-01-12 11:51:41 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 93 PMIDs
2026-01-12 11:51:41 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:41 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 93 PMIDs from PubMed...
2026-01-12 11:51:41 - app.phase2.pubmed_fetcher - INFO - Fetching 93 PMIDs in 1 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-12 11:51:41 - app.phase2.pubmed_fetcher - INFO - Fetching 93 PMIDs from PubMed...
2026-01-12 11:51:41 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=25265627%2C26736620%2C40975869%2C34561503%2C40816265%2C31587955%2C21423797%2C39455254%2C36851970%2C24921388%2C37007675%2C33770760%2C23383315%2C25570539%2C38952818%2C25120417%2C25015699%2C38332136%2C23367471%2C30440344%2C25946198%2C29059844%2C28931054%2C23366244%2C23284276%2C21159949%2C40061257%2C24860416%2C40127544%2C41266142%2C28268628%2C33632810%2C21078582%2C34870202%2C38949928%2C30441189%2C24109680%2C32746347%2C41266624%2C40144587%2C20407639%2C30624221%2C28113323%2C36776220%2C40247859%2C40703668%2C39383883%2C24834047%2C18350128%2C23031175%2C23536714%2C39345497%2C26902372%2C25504690%2C40913530%2C40136836%2C23918061%2C33242850%2C25545500%2C36240727%2C35921802%2C24904251%2C39134021%2C25082508%2C28223914%2C18303800%2C33524962%2C32706190%2C25681017%2C27255798%2C24235276%2C25128256%2C29192609%2C40060267%2C31191218%2C20644245%2C35659259%2C16792303%2C25774541%2C37425292%2C33108775%2C41406614%2C26321943%2C31616237%2C24324155%2C22084052%2C30523833%2C40720979%2C31171607%2C40048825%2C30002452%2C35287119%2C24760860&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-12 11:51:42 - app.phase2.pubmed_fetcher - INFO - Batch 1/1 completed
2026-01-12 11:51:42 - app.phase2.pubmed_fetcher - INFO - Fetched 1/1 batches successfully
2026-01-12 11:51:42 - app.phase2.pubmed_fetcher - INFO - Extracted 93 PMIDs from 1 batches
2026-01-12 11:51:42 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 93 PubMed XML records
2026-01-12 11:51:42 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:42 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-12 11:51:42 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 93 papers
2026-01-12 11:51:42 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:42 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-12 11:51:42 - app.phase2.pg_ingest - INFO -    Extracting 301 unique affiliations via rule-based method
2026-01-12 11:51:42 - app.phase2.rule_based_extractor - INFO -    Processing 301 affiliations...
2026-01-12 11:51:42 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 301 affiliations...
2026-01-12 11:51:42 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 273 hits, 28 need extraction
2026-01-12 11:51:42 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 28 affiliations...
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    Loaded 1734 institutions to memory (1734 normalized names, 206 aliases)
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/28 (7%), matches found: 1
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/28 (14%), matches found: 2
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/28 (21%), matches found: 4
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/28 (28%), matches found: 6
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/28 (35%), matches found: 7
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/28 (42%), matches found: 8
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/28 (50%), matches found: 9
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/28 (57%), matches found: 11
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/28 (64%), matches found: 13
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/28 (71%), matches found: 15
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 22/28 (78%), matches found: 17
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 24/28 (85%), matches found: 18
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 26/28 (92%), matches found: 20
2026-01-12 11:51:43 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 28/28 (100%), matches found: 21
2026-01-12 11:51:43 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 21 matches found
2026-01-12 11:51:43 - app.phase2.rule_based_extractor - INFO -    Extracting 7 affiliations using rule-based parser...
2026-01-12 11:51:43 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1/7 (14%)
2026-01-12 11:51:43 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 2/7 (28%)
2026-01-12 11:51:43 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 3/7 (42%)
2026-01-12 11:51:43 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 4/7 (57%)
2026-01-12 11:51:43 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 5/7 (71%)
2026-01-12 11:51:43 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 6/7 (85%)
2026-01-12 11:51:43 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 7/7 (100%)
2026-01-12 11:51:43 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 7 results
2026-01-12 11:51:43 - app.phase2.rule_based_extractor - INFO -       Pending validation: 6 institutions
2026-01-12 11:51:43 - app.phase2.pg_ingest - INFO -    Cached 28 new affiliation extraction results to affiliation_cache table
2026-01-12 11:51:43 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 301 affiliations processed, 296 with country
2026-01-12 11:51:43 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 301 affiliations
2026-01-12 11:51:43 - app.phase2.pg_ingest - INFO -    Unique affiliations: 301
2026-01-12 11:51:43 - app.phase2.pg_ingest - INFO -    With country: 296
2026-01-12 11:51:43 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-12 11:51:43 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:43 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-12 11:51:43 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 87cd3ae67453...
2026-01-12 11:51:43 - app.phase2.pg_ingest - INFO -    Deleted authorships for 93 existing PMIDs
2026-01-12 11:51:43 - app.phase2.pg_ingest - INFO -    Inserting/updating 93 papers (bulk operation)...
2026-01-12 11:51:44 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 93
2026-01-12 11:51:44 - app.phase2.pg_ingest - INFO -    Inserting 642 authorships (bulk operation)...
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -    Authorships inserted: 642
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -    Linking run 87cd3ae67453 to 93 papers...
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 642 authorships
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -    Total PMIDs: 93
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -    Papers parsed: 93
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -    Authorships created: 642
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -    Unique affiliations: 301
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -    Affiliations with country: 296
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO - 
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 273
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 21
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 7
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 7
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO - 
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 301 = 301 (matches)
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 6
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO - 
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-12 11:51:45 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-12 11:51:45 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 6
2026-01-12 11:51:45 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:45 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 87cd3ae67453...
2026-01-12 11:51:46 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 642 authorships from 93 papers
2026-01-12 11:51:46 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:46 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-12 11:51:46 - app.phase2.affiliation_validator - INFO -    Found 82 unique location keys from 642 authorships
2026-01-12 11:51:46 - app.phase2.affiliation_validator - INFO -    Batch query complete: 82/82 found in cache
2026-01-12 11:51:46 - app.phase2.affiliation_validator - INFO -    Processing 0 unique location keys via Nominatim...
2026-01-12 11:51:46 - app.phase2.affiliation_validator - INFO -    Batch updating 459 affiliations for 81 cached locations...
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 81 locations (459 total affiliations)
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 6 pending institutions to institution_geo...
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    âš ï¸  No institutions passed geocoding validation
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 642
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 463
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Cache misses: 0
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 0
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 3
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 1
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 0/6
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 3 error affiliations with LLM...
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Collecting 3 unique error affiliations for LLM fix
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-12 11:51:50 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 3 affiliations...
2026-01-12 11:51:50 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 3 affiliations...
2026-01-12 11:51:50 - app.phase2.institution_matcher - INFO -    Loaded 1734 institutions to memory (1734 normalized names, 206 aliases)
2026-01-12 11:51:50 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1/3 (33%), matches found: 1
2026-01-12 11:51:50 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/3 (66%), matches found: 2
2026-01-12 11:51:50 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 3/3 (100%), matches found: 3
2026-01-12 11:51:50 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 3 matches found
2026-01-12 11:51:50 - app.phase2.affiliation_extractor - INFO -    âœ… All 3 affiliations found in cache/institution_geo
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 3 results from 0 LLM calls
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 3 LLM results...
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 3 LLM results
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-12 11:51:50 - app.phase2.affiliation_validator - INFO -    Processing 1 unique location keys for re-geocoding...
2026-01-12 11:51:51 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 3 affiliations
2026-01-12 11:51:51 - app.phase2.affiliation_validator - INFO -    âœ… Updated 4 authorships
2026-01-12 11:51:51 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 0 locations
2026-01-12 11:51:51 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:51 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 87cd3ae67453
2026-01-12 11:51:51 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 3
2026-01-12 11:51:51 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 3
2026-01-12 11:51:51 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 4
2026-01-12 11:51:51 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 0
2026-01-12 11:51:51 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 11:51:51 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-12 11:51:51 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-12 11:51:51 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 3
2026-01-12 11:51:51 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 3
2026-01-12 11:51:51 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 4
2026-01-12 11:51:51 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 0
2026-01-12 11:51:51 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 0
2026-01-12 11:51:51 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-12 11:51:51 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-12 11:51:51 - app.main - INFO - ================================================================================
2026-01-12 11:51:51 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:51:51 - app.main - INFO -    Total PMIDs: 93
2026-01-12 11:51:51 - app.main - INFO -    Papers parsed: 93
2026-01-12 11:51:51 - app.main - INFO -    Authorships created: 642
2026-01-12 11:51:51 - app.main - INFO -    Unique affiliations: 301
2026-01-12 11:51:51 - app.main - INFO -    Affiliations with country: 296
2026-01-12 11:51:51 - app.main - INFO -    LLM calls made: 0
2026-01-12 11:51:51 - app.main - INFO - ================================================================================
2026-01-12 11:52:15 - app.main - INFO - ================================================================================
2026-01-12 11:52:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:52:15 - app.main - INFO -    Min confidence: low
2026-01-12 11:52:15 - app.main - INFO - ================================================================================
2026-01-12 11:52:15 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-12 11:52:15 - app.main - INFO - ================================================================================
2026-01-12 11:52:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:52:15 - app.main - INFO -    Min confidence: low
2026-01-12 11:52:15 - app.main - INFO - ================================================================================
2026-01-12 11:52:15 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-12 11:52:16 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:52:16 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:52:17 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-12 11:52:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 11:52:17 - app.main - INFO -    Countries returned: 23
2026-01-12 11:52:17 - app.main - INFO - ================================================================================
2026-01-12 11:52:17 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-12 11:52:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 11:52:17 - app.main - INFO -    Countries returned: 23
2026-01-12 11:52:17 - app.main - INFO - ================================================================================
2026-01-12 11:52:21 - app.main - INFO - ================================================================================
2026-01-12 11:52:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:52:21 - app.main - INFO -    Country: China, Min confidence: low
2026-01-12 11:52:21 - app.main - INFO - ================================================================================
2026-01-12 11:52:21 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-12 11:52:21 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:52:22 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in China
2026-01-12 11:52:22 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-12 11:52:22 - app.main - INFO -    Cities returned: 6
2026-01-12 11:52:22 - app.main - INFO - ================================================================================
2026-01-12 11:52:24 - app.main - INFO - ================================================================================
2026-01-12 11:52:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 11:52:24 - app.main - INFO -    Country: China, City: Shanghai, Min confidence: low
2026-01-12 11:52:24 - app.main - INFO - ================================================================================
2026-01-12 11:52:24 - app.phase2.pg_aggregations - INFO -    Getting city map for Shanghai, China...
2026-01-12 11:52:25 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 11:52:25 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Shanghai, China
2026-01-12 11:52:25 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Shanghai, China
2026-01-12 11:52:25 - app.main - INFO -    Institutions returned: 3
2026-01-12 11:52:25 - app.main - INFO - ================================================================================
2026-01-12 12:07:38 - app.main - INFO - ================================================================================
2026-01-12 12:07:38 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 12:07:38 - app.main - INFO -    Force refresh: False
2026-01-12 12:07:38 - app.main - INFO - ================================================================================
2026-01-12 12:07:38 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:38 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 87cd3ae67453
2026-01-12 12:07:38 - app.phase2.pg_ingest - INFO -    Project ID: 2098072fb7af
2026-01-12 12:07:38 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-12 12:07:38 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:38 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-12 12:07:39 - app.phase2.pg_ingest - INFO -    Loaded 93 unique PMIDs from run 87cd3ae67453
2026-01-12 12:07:39 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 93 PMIDs
2026-01-12 12:07:39 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:39 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 93 PMIDs from PubMed...
2026-01-12 12:07:39 - app.phase2.pubmed_fetcher - INFO - Fetching 93 PMIDs in 1 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-12 12:07:39 - app.phase2.pubmed_fetcher - INFO - Fetching 93 PMIDs from PubMed...
2026-01-12 12:07:40 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=25265627%2C26736620%2C40975869%2C34561503%2C40816265%2C31587955%2C21423797%2C39455254%2C36851970%2C24921388%2C37007675%2C33770760%2C23383315%2C25570539%2C38952818%2C25120417%2C25015699%2C38332136%2C23367471%2C30440344%2C25946198%2C29059844%2C28931054%2C23366244%2C23284276%2C21159949%2C40061257%2C24860416%2C40127544%2C41266142%2C28268628%2C33632810%2C21078582%2C34870202%2C38949928%2C30441189%2C24109680%2C32746347%2C41266624%2C40144587%2C20407639%2C30624221%2C28113323%2C36776220%2C40247859%2C40703668%2C39383883%2C24834047%2C18350128%2C23031175%2C23536714%2C39345497%2C26902372%2C25504690%2C40913530%2C40136836%2C23918061%2C33242850%2C25545500%2C36240727%2C35921802%2C24904251%2C39134021%2C25082508%2C28223914%2C18303800%2C33524962%2C32706190%2C25681017%2C27255798%2C24235276%2C25128256%2C29192609%2C40060267%2C31191218%2C20644245%2C35659259%2C16792303%2C25774541%2C37425292%2C33108775%2C41406614%2C26321943%2C31616237%2C24324155%2C22084052%2C30523833%2C40720979%2C31171607%2C40048825%2C30002452%2C35287119%2C24760860&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-12 12:07:40 - app.phase2.pubmed_fetcher - INFO - Batch 1/1 completed
2026-01-12 12:07:40 - app.phase2.pubmed_fetcher - INFO - Fetched 1/1 batches successfully
2026-01-12 12:07:40 - app.phase2.pubmed_fetcher - INFO - Extracted 93 PMIDs from 1 batches
2026-01-12 12:07:40 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 93 PubMed XML records
2026-01-12 12:07:40 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:40 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-12 12:07:40 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 93 papers
2026-01-12 12:07:40 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:40 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-12 12:07:40 - app.phase2.pg_ingest - INFO -    Extracting 301 unique affiliations via rule-based method
2026-01-12 12:07:40 - app.phase2.rule_based_extractor - INFO -    Processing 301 affiliations...
2026-01-12 12:07:40 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 301 affiliations...
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 0 hits, 301 need extraction
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 301 affiliations...
2026-01-12 12:07:41 - app.phase2.institution_matcher - INFO -    Loaded 1734 institutions to memory (1734 normalized names, 206 aliases)
2026-01-12 12:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 30/301 (9%), matches found: 23
2026-01-12 12:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 60/301 (19%), matches found: 46
2026-01-12 12:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 90/301 (29%), matches found: 70
2026-01-12 12:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 120/301 (39%), matches found: 93
2026-01-12 12:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 150/301 (49%), matches found: 120
2026-01-12 12:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 180/301 (59%), matches found: 143
2026-01-12 12:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 210/301 (69%), matches found: 167
2026-01-12 12:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 240/301 (79%), matches found: 193
2026-01-12 12:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 270/301 (89%), matches found: 215
2026-01-12 12:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/301 (99%), matches found: 239
2026-01-12 12:07:41 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 301/301 (100%), matches found: 240
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 240 matches found
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Extracting 61 affiliations using rule-based parser...
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 6/61 (9%)
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 12/61 (19%)
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 18/61 (29%)
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 24/61 (39%)
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 30/61 (49%)
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 36/61 (59%)
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 42/61 (68%)
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 48/61 (78%)
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 54/61 (88%)
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 60/61 (98%)
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 61/61 (100%)
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 61 results
2026-01-12 12:07:41 - app.phase2.rule_based_extractor - INFO -       Pending validation: 47 institutions
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO -    Cached 301 new affiliation extraction results to affiliation_cache table
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 301 affiliations processed, 296 with country
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 301 affiliations
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO -    Unique affiliations: 301
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO -    With country: 296
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 87cd3ae67453...
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO -    Deleted authorships for 93 existing PMIDs
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO -    Inserting/updating 93 papers (bulk operation)...
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 93
2026-01-12 12:07:42 - app.phase2.pg_ingest - INFO -    Inserting 642 authorships (bulk operation)...
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -    Authorships inserted: 642
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -    Linking run 87cd3ae67453 to 93 papers...
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 642 authorships
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -    Total PMIDs: 93
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -    Papers parsed: 93
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -    Authorships created: 642
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -    Unique affiliations: 301
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -    Affiliations with country: 296
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO - 
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 0
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 240
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 61
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 58
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO - 
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 301 = 301 (matches)
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 47
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO - 
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-12 12:07:43 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-12 12:07:43 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 47
2026-01-12 12:07:43 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:43 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 87cd3ae67453...
2026-01-12 12:07:44 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 642 authorships from 93 papers
2026-01-12 12:07:44 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:44 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-12 12:07:44 - app.phase2.affiliation_validator - INFO -    Found 84 unique location keys from 642 authorships
2026-01-12 12:07:44 - app.phase2.affiliation_validator - INFO -    Batch query complete: 84/84 found in cache
2026-01-12 12:07:44 - app.phase2.affiliation_validator - INFO -    Processing 0 unique location keys via Nominatim...
2026-01-12 12:07:44 - app.phase2.affiliation_validator - INFO -    Batch updating 452 affiliations for 81 cached locations...
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 81 locations (452 total affiliations)
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 47 pending institutions to institution_geo...
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO -    âš ï¸  No institutions passed geocoding validation
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 642
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 463
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO -    Cache misses: 0
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 0
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 5
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 3
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 0/47
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 5 error affiliations with LLM...
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO -    Collecting 5 unique error affiliations for LLM fix
2026-01-12 12:07:48 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-12 12:07:48 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 5 affiliations...
2026-01-12 12:07:48 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 5 affiliations...
2026-01-12 12:07:49 - app.phase2.institution_matcher - INFO -    Loaded 1734 institutions to memory (1734 normalized names, 206 aliases)
2026-01-12 12:07:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1/5 (20%), matches found: 0
2026-01-12 12:07:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/5 (40%), matches found: 0
2026-01-12 12:07:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 3/5 (60%), matches found: 1
2026-01-12 12:07:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/5 (80%), matches found: 2
2026-01-12 12:07:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 5/5 (100%), matches found: 3
2026-01-12 12:07:49 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 3 matches found
2026-01-12 12:07:49 - app.phase2.affiliation_extractor - INFO -    Extracting 2 affiliations via LLM (affiliation_cache: 0, institution_geo: 3) in batches of 20
2026-01-12 12:07:49 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/1 (2 affiliations)
2026-01-12 12:07:51 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-12 12:07:51 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 2 affiliations processed
2026-01-12 12:07:51 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 5 results from 1 LLM calls
2026-01-12 12:07:51 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 5 LLM results...
2026-01-12 12:07:52 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 5 LLM results
2026-01-12 12:07:52 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-12 12:07:52 - app.phase2.affiliation_validator - INFO -    Processing 3 unique location keys for re-geocoding...
2026-01-12 12:07:55 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 5 affiliations
2026-01-12 12:07:55 - app.phase2.affiliation_validator - INFO -    âœ… Updated 11 authorships
2026-01-12 12:07:55 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 2 locations
2026-01-12 12:07:55 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:55 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 87cd3ae67453
2026-01-12 12:07:55 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 5
2026-01-12 12:07:55 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 5
2026-01-12 12:07:55 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 11
2026-01-12 12:07:55 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 2
2026-01-12 12:07:55 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-12 12:07:55 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-12 12:07:55 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-12 12:07:55 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 5
2026-01-12 12:07:55 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 5
2026-01-12 12:07:55 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 11
2026-01-12 12:07:55 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 2
2026-01-12 12:07:55 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 0
2026-01-12 12:07:55 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-12 12:07:55 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-12 12:07:55 - app.main - INFO - ================================================================================
2026-01-12 12:07:55 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 12:07:55 - app.main - INFO -    Total PMIDs: 93
2026-01-12 12:07:55 - app.main - INFO -    Papers parsed: 93
2026-01-12 12:07:55 - app.main - INFO -    Authorships created: 642
2026-01-12 12:07:55 - app.main - INFO -    Unique affiliations: 301
2026-01-12 12:07:55 - app.main - INFO -    Affiliations with country: 296
2026-01-12 12:07:55 - app.main - INFO -    LLM calls made: 0
2026-01-12 12:07:55 - app.main - INFO - ================================================================================
2026-01-12 12:08:37 - app.main - INFO - ================================================================================
2026-01-12 12:08:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 12:08:37 - app.main - INFO -    Min confidence: low
2026-01-12 12:08:37 - app.main - INFO - ================================================================================
2026-01-12 12:08:37 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-12 12:08:37 - app.main - INFO - ================================================================================
2026-01-12 12:08:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 12:08:37 - app.main - INFO -    Min confidence: low
2026-01-12 12:08:37 - app.main - INFO - ================================================================================
2026-01-12 12:08:37 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-12 12:08:37 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 12:08:37 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 12:08:38 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-12 12:08:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 12:08:38 - app.main - INFO -    Countries returned: 23
2026-01-12 12:08:38 - app.main - INFO - ================================================================================
2026-01-12 12:08:38 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-12 12:08:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 12:08:38 - app.main - INFO -    Countries returned: 23
2026-01-12 12:08:38 - app.main - INFO - ================================================================================
2026-01-12 12:08:42 - app.main - INFO - ================================================================================
2026-01-12 12:08:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 12:08:42 - app.main - INFO -    Country: China, Min confidence: low
2026-01-12 12:08:42 - app.main - INFO - ================================================================================
2026-01-12 12:08:42 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-12 12:08:43 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 12:08:43 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in China
2026-01-12 12:08:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-12 12:08:43 - app.main - INFO -    Cities returned: 6
2026-01-12 12:08:43 - app.main - INFO - ================================================================================
2026-01-12 12:08:48 - app.main - INFO - ================================================================================
2026-01-12 12:08:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-12 12:08:48 - app.main - INFO -    Country: China, City: Shanghai, Min confidence: low
2026-01-12 12:08:48 - app.main - INFO - ================================================================================
2026-01-12 12:08:48 - app.phase2.pg_aggregations - INFO -    Getting city map for Shanghai, China...
2026-01-12 12:08:48 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-12 12:08:48 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Shanghai, China
2026-01-12 12:08:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Shanghai, China
2026-01-12 12:08:48 - app.main - INFO -    Institutions returned: 3
2026-01-12 12:08:48 - app.main - INFO - ================================================================================
2026-01-12 11:08:34 - root - INFO - ================================================================================
2026-01-12 11:08:34 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 11:08:34 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 11:08:34 - root - INFO - ================================================================================
2026-01-12 11:10:27 - app.main - INFO - ================================================================================
2026-01-12 11:10:27 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-12 11:10:27 - app.main - INFO -    Min confidence: low
2026-01-12 11:10:27 - app.main - INFO - ================================================================================
2026-01-12 11:10:27 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-12 11:10:27 - app.main - INFO - ================================================================================
2026-01-12 11:10:27 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-12 11:10:27 - app.main - INFO -    Min confidence: low
2026-01-12 11:10:27 - app.main - INFO - ================================================================================
2026-01-12 11:10:27 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 13092a22728c...
2026-01-12 11:10:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-12 11:10:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-12 11:10:28 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-12 11:10:28 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 11:10:28 - app.main - INFO -    Countries returned: 51
2026-01-12 11:10:28 - app.main - INFO - ================================================================================
2026-01-12 11:10:31 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 51 countries
2026-01-12 11:10:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 11:10:31 - app.main - INFO -    Countries returned: 51
2026-01-12 11:10:31 - app.main - INFO - ================================================================================
2026-01-12 11:10:33 - app.main - INFO - ================================================================================
2026-01-12 11:10:33 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 13092a22728c
2026-01-12 11:10:33 - app.main - INFO -    Country: Morocco, Min confidence: low
2026-01-12 11:10:33 - app.main - INFO - ================================================================================
2026-01-12 11:10:33 - app.phase2.pg_aggregations - INFO -    Getting country map for Morocco (normalized: Morocco)...
2026-01-12 11:10:34 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-12 11:10:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Morocco
2026-01-12 11:10:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Morocco
2026-01-12 11:10:34 - app.main - INFO -    Cities returned: 1
2026-01-12 11:10:34 - app.main - INFO - ================================================================================
2026-01-12 13:06:40 - root - INFO - ================================================================================
2026-01-12 13:06:40 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 13:06:40 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 13:06:40 - root - INFO - ================================================================================
2026-01-12 13:06:43 - root - INFO - ================================================================================
2026-01-12 13:06:43 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 13:06:43 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 13:06:43 - root - INFO - ================================================================================
2026-01-12 13:07:35 - root - INFO - ================================================================================
2026-01-12 13:07:35 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 13:07:35 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 13:07:35 - root - INFO - ================================================================================
2026-01-12 13:13:26 - root - INFO - ================================================================================
2026-01-12 13:13:26 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 13:13:26 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 13:13:26 - root - INFO - ================================================================================
2026-01-12 13:29:28 - app.main - INFO - ================================================================================
2026-01-12 13:29:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-12 13:29:28 - app.main - INFO -    Min confidence: low
2026-01-12 13:29:28 - app.main - INFO - ================================================================================
2026-01-12 13:29:28 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-12 13:29:28 - app.main - INFO - ================================================================================
2026-01-12 13:29:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-12 13:29:28 - app.main - INFO -    Min confidence: low
2026-01-12 13:29:28 - app.main - INFO - ================================================================================
2026-01-12 13:29:28 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-12 13:29:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-12 13:29:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-12 13:29:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Russia' -> (64.6863136, 97.7453061)
2026-01-12 13:29:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Russia' -> (64.6863136, 97.7453061)
2026-01-12 13:29:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Czech Republic' -> (49.7439047, 15.3381061)
2026-01-12 13:29:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Czech Republic' -> (49.7439047, 15.3381061)
2026-01-12 13:29:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Serbia' -> (44.0243229, 21.0765743)
2026-01-12 13:29:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Serbia' -> (44.0243229, 21.0765743)
2026-01-12 13:29:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Zambia' -> (-14.5189121, 27.5589884)
2026-01-12 13:29:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Zambia' -> (-14.5189121, 27.5589884)
2026-01-12 13:29:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Chile' -> (-31.7613365, -71.3187697)
2026-01-12 13:29:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Chile' -> (-31.7613365, -71.3187697)
2026-01-12 13:29:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Uganda' -> (1.5333554, 32.2166578)
2026-01-12 13:29:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Uganda' -> (1.5333554, 32.2166578)
2026-01-12 13:29:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Slovakia' -> (48.7411522, 19.4528646)
2026-01-12 13:29:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Slovakia' -> (48.7411522, 19.4528646)
2026-01-12 13:29:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Brasil' -> (-10.3333333, -53.2)
2026-01-12 13:29:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Brasil' -> (-10.3333333, -53.2)
2026-01-12 13:29:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Greece' -> (38.9953683, 21.9877132)
2026-01-12 13:29:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Greece' -> (38.9953683, 21.9877132)
2026-01-12 13:29:52 - app.phase2.pg_geocoding - INFO - Geocoded 'the Netherlands' -> (52.2434979, 5.6343227)
2026-01-12 13:29:53 - app.phase2.pg_geocoding - INFO - Geocoded 'the Netherlands' -> (52.2434979, 5.6343227)
2026-01-12 13:29:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Peru' -> (-6.8699697, -75.0458515)
2026-01-12 13:29:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Peru' -> (-6.8699697, -75.0458515)
2026-01-12 13:29:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Kazakhstan' -> (48.1012954, 66.7780818)
2026-01-12 13:29:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Kazakhstan' -> (48.1012954, 66.7780818)
2026-01-12 13:29:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Malaysia' -> (4.5693754, 102.2656823)
2026-01-12 13:29:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Malaysia' -> (4.5693754, 102.2656823)
2026-01-12 13:30:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Venezuela' -> (8.0018709, -66.1109318)
2026-01-12 13:30:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Venezuela' -> (8.0018709, -66.1109318)
2026-01-12 13:30:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Special Administrative Region of China' -> (22.1886442, 113.5540704)
2026-01-12 13:30:04 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-12 13:30:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 13:30:04 - app.main - INFO -    Countries returned: 52
2026-01-12 13:30:04 - app.main - INFO - ================================================================================
2026-01-12 13:30:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Special Administrative Region of China' -> (22.1886442, 113.5540704)
2026-01-12 13:30:05 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-12 13:30:05 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-12 13:30:05 - app.main - INFO -    Countries returned: 52
2026-01-12 13:30:05 - app.main - INFO - ================================================================================
2026-01-12 16:11:29 - root - INFO - ================================================================================
2026-01-12 16:11:29 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 16:11:29 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 16:11:29 - root - INFO - ================================================================================
2026-01-12 16:17:01 - root - INFO - ================================================================================
2026-01-12 16:17:01 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 16:17:01 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 16:17:01 - root - INFO - ================================================================================
2026-01-12 16:23:31 - root - INFO - ================================================================================
2026-01-12 16:23:31 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 16:23:31 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 16:23:31 - root - INFO - ================================================================================
2026-01-12 16:33:10 - root - INFO - ================================================================================
2026-01-12 16:33:10 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 16:33:10 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 16:33:10 - root - INFO - ================================================================================
2026-01-12 16:54:09 - root - INFO - ================================================================================
2026-01-12 16:54:09 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 16:54:09 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 16:54:09 - root - INFO - ================================================================================
2026-01-12 17:17:00 - root - INFO - ================================================================================
2026-01-12 17:17:00 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 17:17:00 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 17:17:00 - root - INFO - ================================================================================
2026-01-12 17:20:06 - root - INFO - ================================================================================
2026-01-12 17:20:06 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 17:20:06 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 17:20:06 - root - INFO - ================================================================================
2026-01-12 17:22:39 - root - INFO - ================================================================================
2026-01-12 17:22:39 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 17:22:39 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 17:22:39 - root - INFO - ================================================================================
2026-01-12 17:24:56 - root - INFO - ================================================================================
2026-01-12 17:24:56 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 17:24:56 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 17:24:56 - root - INFO - ================================================================================
2026-01-12 17:29:27 - root - INFO - ================================================================================
2026-01-12 17:29:27 - root - INFO - Logging initialized - output to console and log.txt
2026-01-12 17:29:27 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-12 17:29:27 - root - INFO - ================================================================================
2026-01-13 08:55:42 - root - INFO - ================================================================================
2026-01-13 08:55:42 - root - INFO - Logging initialized - output to console and log.txt
2026-01-13 08:55:42 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-13 08:55:42 - root - INFO - ================================================================================
2026-01-13 08:58:28 - app.main - INFO - ================================================================================
2026-01-13 08:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 08:58:28 - app.main - INFO -    Min confidence: low
2026-01-13 08:58:28 - app.main - INFO - ================================================================================
2026-01-13 08:58:28 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-13 08:58:29 - app.main - INFO - ================================================================================
2026-01-13 08:58:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 08:58:29 - app.main - INFO -    Min confidence: low
2026-01-13 08:58:29 - app.main - INFO - ================================================================================
2026-01-13 08:58:29 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-13 08:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 08:58:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 08:58:31 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-13 08:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-13 08:58:31 - app.main - INFO -    Countries returned: 52
2026-01-13 08:58:31 - app.main - INFO - ================================================================================
2026-01-13 08:58:31 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-13 08:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-13 08:58:31 - app.main - INFO -    Countries returned: 52
2026-01-13 08:58:31 - app.main - INFO - ================================================================================
2026-01-13 08:58:38 - app.main - INFO - ================================================================================
2026-01-13 08:58:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 08:58:38 - app.main - INFO -    Country: Uganda, Min confidence: low
2026-01-13 08:58:38 - app.main - INFO - ================================================================================
2026-01-13 08:58:38 - app.phase2.pg_aggregations - INFO -    Getting country map for Uganda (normalized: Uganda)...
2026-01-13 08:58:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 08:58:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Ishaka, Uganda' -> (-0.5433369, 30.1372286)
2026-01-13 08:58:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Masaka, Uganda' -> (-0.483142, 31.8318895)
2026-01-13 08:58:44 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Uganda
2026-01-13 08:58:44 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Uganda
2026-01-13 08:58:44 - app.main - INFO -    Cities returned: 2
2026-01-13 08:58:44 - app.main - INFO - ================================================================================
2026-01-13 11:28:05 - app.main - INFO - ðŸ‘¥ ADMIN: Fetching online user count
2026-01-13 11:28:05 - app.main - INFO - âœ… ADMIN: Online users: 1
2026-01-13 11:35:56 - root - INFO - ================================================================================
2026-01-13 11:35:56 - root - INFO - Logging initialized - output to console and log.txt
2026-01-13 11:35:56 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-13 11:35:56 - root - INFO - ================================================================================
2026-01-13 11:36:18 - root - INFO - ================================================================================
2026-01-13 11:36:18 - root - INFO - Logging initialized - output to console and log.txt
2026-01-13 11:36:18 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-13 11:36:18 - root - INFO - ================================================================================
2026-01-13 11:41:22 - app.main - INFO - ================================================================================
2026-01-13 11:41:22 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:41:22 - app.main - INFO -    Min confidence: low
2026-01-13 11:41:22 - app.main - INFO - ================================================================================
2026-01-13 11:41:22 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-13 11:41:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:41:22 - app.main - INFO - ================================================================================
2026-01-13 11:41:22 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:41:22 - app.main - INFO -    Min confidence: low
2026-01-13 11:41:22 - app.main - INFO - ================================================================================
2026-01-13 11:41:22 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-13 11:41:23 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:41:23 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-13 11:41:23 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-13 11:41:23 - app.main - INFO -    Countries returned: 52
2026-01-13 11:41:23 - app.main - INFO - ================================================================================
2026-01-13 11:41:24 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-13 11:41:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-13 11:41:24 - app.main - INFO -    Countries returned: 52
2026-01-13 11:41:24 - app.main - INFO - ================================================================================
2026-01-13 11:41:30 - app.main - INFO - ================================================================================
2026-01-13 11:41:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:41:30 - app.main - INFO -    Country: China, Min confidence: low
2026-01-13 11:41:30 - app.main - INFO - ================================================================================
2026-01-13 11:41:30 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-13 11:41:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:41:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Xi'an, China' -> (34.261004, 108.9423363)
2026-01-13 11:41:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Nanjing, China' -> (32.0438284, 118.7788631)
2026-01-13 11:41:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Ningbo, China' -> (29.8622194, 121.6203873)
2026-01-13 11:41:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong, China' -> (22.2792968, 114.1628907)
2026-01-13 11:41:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Xinxiang, China' -> (35.3021133, 113.9202062)
2026-01-13 11:41:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Nanchang, China' -> (28.6472124, 116.0348483)
2026-01-13 11:41:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Jiaxing, China' -> (30.7474425, 120.7510971)
2026-01-13 11:41:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Shijiazhuang, China' -> (38.0429742, 114.5088385)
2026-01-13 11:41:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Taiyuan, China' -> (37.8699921, 112.5437075)
2026-01-13 11:41:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Dalian, China' -> (38.9130495, 121.6098013)
2026-01-13 11:41:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Changzhou, China' -> (31.8122623, 119.9691539)
2026-01-13 11:41:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Kunming, China' -> (25.0399353, 102.7169061)
2026-01-13 11:41:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Kowloon, China' -> (22.3049255, 114.1616003)
2026-01-13 11:41:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Suzhou, China' -> (31.311123, 120.6212881)
2026-01-13 11:41:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Taizhou, China' -> (28.6581723, 121.4163876)
2026-01-13 11:41:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Yixing, China' -> (31.3495972, 119.817253)
2026-01-13 11:41:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Lanzhou, China' -> (36.474436, 103.733224)
2026-01-13 11:41:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Hung Hom, China' -> (22.3068983, 114.1863163)
2026-01-13 11:41:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Baotou, China' -> (40.6174777, 109.944912)
2026-01-13 11:41:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Jinzhou, China' -> (41.494444, 121.615278)
2026-01-13 11:42:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Lishui, China' -> (28.4704064, 119.9184297)
2026-01-13 11:42:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Meishan, China' -> (29.9866838, 103.7790009)
2026-01-13 11:42:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Hefei 230000, China' -> (31.8665676, 117.281428)
2026-01-13 11:42:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Ganzhou, China' -> (25.703866, 115.348216)
2026-01-13 11:42:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Pokfulam, China' -> (22.2613585, 114.1368109)
2026-01-13 11:42:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Shatin, China' -> (22.3815527, 114.1904697)
2026-01-13 11:42:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Yangjiang, China' -> (22.0958223, 111.7831393)
2026-01-13 11:42:13 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-13 11:42:13 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-13 11:42:13 - app.main - INFO -    Cities returned: 47
2026-01-13 11:42:13 - app.main - INFO - ================================================================================
2026-01-13 11:42:28 - app.main - INFO - ================================================================================
2026-01-13 11:42:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:42:28 - app.main - INFO -    Country: China, City: Beijing, Min confidence: low
2026-01-13 11:42:28 - app.main - INFO - ================================================================================
2026-01-13 11:42:28 - app.phase2.pg_aggregations - INFO -    Getting city map for Beijing, China...
2026-01-13 11:42:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:42:29 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 31 institutions in Beijing, China
2026-01-13 11:42:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Beijing, China
2026-01-13 11:42:29 - app.main - INFO -    Institutions returned: 31
2026-01-13 11:42:29 - app.main - INFO - ================================================================================
2026-01-13 11:43:19 - app.main - INFO - ================================================================================
2026-01-13 11:43:19 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:43:19 - app.main - INFO -    Country: China, Min confidence: low
2026-01-13 11:43:19 - app.main - INFO - ================================================================================
2026-01-13 11:43:19 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-13 11:43:20 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:43:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-13 11:43:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-13 11:43:20 - app.main - INFO -    Cities returned: 47
2026-01-13 11:43:20 - app.main - INFO - ================================================================================
2026-01-13 11:43:27 - app.main - INFO - ================================================================================
2026-01-13 11:43:27 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:43:27 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-13 11:43:27 - app.main - INFO - ================================================================================
2026-01-13 11:43:27 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-13 11:43:27 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:43:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Austin, United States' -> (30.2711286, -97.7436995)
2026-01-13 11:43:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Glen Oaks, United States' -> (34.4430807, -112.5485052)
2026-01-13 11:43:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Tucson, United States' -> (32.2228765, -110.974847)
2026-01-13 11:43:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Stratford, United States' -> (36.3361403, -102.072119)
2026-01-13 11:43:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Bethlehem, United States' -> (40.6178915, -75.3786521)
2026-01-13 11:43:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Palo Alto, United States' -> (37.4443293, -122.1598465)
2026-01-13 11:43:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Tulsa, United States' -> (36.1563122, -95.9927516)
2026-01-13 11:43:41 - app.phase2.pg_geocoding - INFO - Geocoded 'St Louis, United States' -> (38.6254063, -90.190009)
2026-01-13 11:43:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Coral Gables, United States' -> (25.7331105, -80.2585107)
2026-01-13 11:43:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Denton, United States' -> (33.1838787, -97.1413417)
2026-01-13 11:43:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Kenilworth, United States' -> (42.0894728, -87.7149295)
2026-01-13 11:43:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Plano, United States' -> (33.0136764, -96.6925096)
2026-01-13 11:43:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Salt Lake City, United States' -> (40.7596198, -111.886797)
2026-01-13 11:43:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Spokane, United States' -> (47.6571934, -117.42351)
2026-01-13 11:43:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Norman, United States' -> (35.2225717, -97.4394816)
2026-01-13 11:43:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Grand Forks, United States' -> (47.9252104, -97.0306325)
2026-01-13 11:43:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Urbana, United States' -> (40.1117174, -88.207301)
2026-01-13 11:43:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Glassboro, United States' -> (39.7027677, -75.1119434)
2026-01-13 11:43:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Irvine, United States' -> (33.6856969, -117.825981)
2026-01-13 11:43:59 - app.phase2.pg_geocoding - INFO - Geocoded 'East Providence, United States' -> (41.8194081, -71.376257)
2026-01-13 11:44:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Belmont, United States' -> (40.0057737, -81.0097516)
2026-01-13 11:44:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Honolulu, United States' -> (21.304547, -157.855676)
2026-01-13 11:44:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Pomona, United States' -> (34.0553813, -117.7517496)
2026-01-13 11:44:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Richmond, United States' -> (37.5385087, -77.43428)
2026-01-13 11:44:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Riverside, United States' -> (33.9824949, -117.374238)
2026-01-13 11:44:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Del Mar, United States' -> (32.9594891, -117.2653146)
2026-01-13 11:44:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Bozeman, United States' -> (45.6794293, -111.044047)
2026-01-13 11:44:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Storrs, United States' -> (41.8056456, -72.2541329)
2026-01-13 11:44:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Iowa City, United States' -> (41.6612561, -91.5299106)
2026-01-13 11:44:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Hartford, United States' -> (41.764582, -72.6908547)
2026-01-13 11:44:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Augusta, United States' -> (33.4709714, -81.9748429)
2026-01-13 11:44:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Manhattan, United States' -> (40.7579554, -73.9855319)
2026-01-13 11:44:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Newark, United States' -> (40.735657, -74.1723667)
2026-01-13 11:44:21 - app.phase2.pg_geocoding - INFO - Geocoded 'North Bethesda, United States' -> (39.04065, -77.1233873)
2026-01-13 11:44:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Fairfax, United States' -> (38.8462236, -77.3063733)
2026-01-13 11:44:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Elkins Park, United States' -> (40.0770553, -75.1268413)
2026-01-13 11:44:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Plymouth, United States' -> (42.7369124, -96.2213607)
2026-01-13 11:44:29 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 74 cities in United States
2026-01-13 11:44:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-13 11:44:29 - app.main - INFO -    Cities returned: 74
2026-01-13 11:44:29 - app.main - INFO - ================================================================================
2026-01-13 11:45:13 - app.main - INFO - ================================================================================
2026-01-13 11:45:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:45:13 - app.main - INFO -    Country: United States, City: Boston, Min confidence: low
2026-01-13 11:45:13 - app.main - INFO - ================================================================================
2026-01-13 11:45:13 - app.phase2.pg_aggregations - INFO -    Getting city map for Boston, United States...
2026-01-13 11:45:13 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:45:13 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 22 institutions in Boston, United States
2026-01-13 11:45:13 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Boston, United States
2026-01-13 11:45:13 - app.main - INFO -    Institutions returned: 22
2026-01-13 11:45:13 - app.main - INFO - ================================================================================
2026-01-13 11:45:43 - app.main - INFO - ================================================================================
2026-01-13 11:45:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:45:43 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-13 11:45:43 - app.main - INFO - ================================================================================
2026-01-13 11:45:43 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-13 11:45:44 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:45:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Chieti, Italy' -> (42.1026929, 14.4159053)
2026-01-13 11:45:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Pozzilli, Italy' -> (41.511422, 14.062517)
2026-01-13 11:45:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Rovereto, Italy' -> (45.886548, 11.0452369)
2026-01-13 11:45:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Sassari, Italy' -> (40.7234746, 8.5612674)
2026-01-13 11:45:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Padua, Italy' -> (45.4077172, 11.8734455)
2026-01-13 11:45:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Roma, Italy' -> (41.8933203, 12.4829321)
2026-01-13 11:45:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Trento, Italy' -> (46.0664228, 11.1257601)
2026-01-13 11:45:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Verona, Italy' -> (45.4424977, 10.9857377)
2026-01-13 11:45:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Catania, Italy' -> (37.5023612, 15.0873718)
2026-01-13 11:45:59 - app.phase2.pg_geocoding - INFO - Geocoded 'CefalÃ¹, Italy' -> (38.034957, 14.0244562)
2026-01-13 11:46:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Cesena, Italy' -> (44.136352, 12.2422442)
2026-01-13 11:46:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Messina, Italy' -> (38.1937571, 15.5542082)
2026-01-13 11:46:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Pescara, Italy' -> (42.3102619, 13.9575901)
2026-01-13 11:46:04 - app.phase2.pg_geocoding - INFO - Geocoded 'L'Aquila, Italy' -> (42.1368853, 13.610341)
2026-01-13 11:46:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Treviso, Italy' -> (45.8066913, 12.2063158)
2026-01-13 11:46:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Trieste, Italy' -> (45.6496485, 13.7772781)
2026-01-13 11:46:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Cagliari, Italy' -> (39.2171994, 9.113311)
2026-01-13 11:46:10 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 30 cities in Italy
2026-01-13 11:46:10 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-13 11:46:10 - app.main - INFO -    Cities returned: 30
2026-01-13 11:46:10 - app.main - INFO - ================================================================================
2026-01-13 11:46:45 - app.main - INFO - ================================================================================
2026-01-13 11:46:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:46:45 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-13 11:46:45 - app.main - INFO - ================================================================================
2026-01-13 11:46:45 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-13 11:46:45 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:46:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Magdeburg, Germany' -> (52.1314783, 11.6400789)
2026-01-13 11:46:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Kiel, Germany' -> (54.3227085, 10.135555)
2026-01-13 11:46:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Aachen, Germany' -> (50.776351, 6.083862)
2026-01-13 11:46:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Neubiberg, Germany' -> (48.0769935, 11.6615136)
2026-01-13 11:46:53 - app.phase2.pg_geocoding - INFO - Geocoded 'LÃ¼beck, Germany' -> (53.866444, 10.684738)
2026-01-13 11:46:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Tubingen, Germany' -> (48.5203263, 9.053596)
2026-01-13 11:46:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Mainz, Germany' -> (49.9995205, 8.2736253)
2026-01-13 11:46:56 - app.phase2.pg_geocoding - INFO - Geocoded 'MÃ¼nster, Germany' -> (51.9625101, 7.6251879)
2026-01-13 11:46:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Dortmund, Germany' -> (51.5142273, 7.4652789)
2026-01-13 11:46:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Burgau, Germany' -> (48.4312893, 10.4065009)
2026-01-13 11:47:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Nuremberg, Germany' -> (49.453872, 11.077298)
2026-01-13 11:47:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Wurzburg, Germany' -> (49.7780356, 9.9434769)
2026-01-13 11:47:03 - app.phase2.pg_geocoding - INFO - Geocoded 'DÃ¼ren, Germany' -> (50.8031684, 6.4820806)
2026-01-13 11:47:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Rostock, Germany' -> (54.0886707, 12.1400211)
2026-01-13 11:47:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Halle (Saale), Germany' -> (51.4824354, 11.9712985)
2026-01-13 11:47:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Plau am See, Germany' -> (53.4600943, 12.2631689)
2026-01-13 11:47:09 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Frankfurt am Main; Cologne; JÃ¼lich, Germany' (from affiliation: Department of Neurology, University Hospital Frankfurt, Goethe University, Frankfurt am Main, Germany; Medical Faculty, University of Cologne, and Department of Neurology, University Hospital Cologne, Cologne, Germany; Cognitive Neuroscience, Institute of Neuroscience and Medicine (INM-3), Research Centre JÃ¼lich, JÃ¼lich, Germany. Electronic address: Grefkes-hermann@em.uni-frankfurt.de.)
2026-01-13 11:47:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Freiburg im Breisgau, Germany' -> (47.9960901, 7.8494005)
2026-01-13 11:47:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Mannheim, Germany' -> (49.4892913, 8.4673098)
2026-01-13 11:47:13 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 38 cities in Germany
2026-01-13 11:47:13 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-13 11:47:13 - app.main - INFO -    Cities returned: 38
2026-01-13 11:47:13 - app.main - INFO - ================================================================================
2026-01-13 11:47:37 - app.main - INFO - ================================================================================
2026-01-13 11:47:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:47:37 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-13 11:47:37 - app.main - INFO - ================================================================================
2026-01-13 11:47:37 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-13 11:47:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:47:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Newcastle Upon Tyne, United Kingdom' -> (54.9738474, -1.6131572)
2026-01-13 11:47:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Colchester, United Kingdom' -> (51.8896903, 0.8994651)
2026-01-13 11:47:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Stirling, United Kingdom' -> (56.1181242, -3.9360012)
2026-01-13 11:47:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Guildford, United Kingdom' -> (51.2356068, -0.5732063)
2026-01-13 11:47:44 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 13 cities in United Kingdom
2026-01-13 11:47:44 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United Kingdom
2026-01-13 11:47:44 - app.main - INFO -    Cities returned: 13
2026-01-13 11:47:44 - app.main - INFO - ================================================================================
2026-01-13 11:47:52 - app.main - INFO - ================================================================================
2026-01-13 11:47:52 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:47:52 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-13 11:47:52 - app.main - INFO - ================================================================================
2026-01-13 11:47:52 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-13 11:47:52 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:47:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Cadiz, Spain' -> (36.5297438, -6.2928976)
2026-01-13 11:47:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Torrent, Spain' -> (39.436668, -0.4656213)
2026-01-13 11:47:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Valladolid, Spain' -> (41.6521807, -4.728605)
2026-01-13 11:47:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Badalona, Spain' -> (41.4493539, 2.248254)
2026-01-13 11:48:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Pozuelo de AlarcÃ³n, Spain' -> (40.4346528, -3.814834)
2026-01-13 11:48:02 - app.phase2.pg_geocoding - INFO - Geocoded 'A CoruÃ±a, Spain' -> (43.3709703, -8.3959425)
2026-01-13 11:48:03 - app.phase2.pg_geocoding - INFO - Geocoded 'CÃ¡diz, Spain' -> (36.5297438, -6.2928976)
2026-01-13 11:48:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Toledo, Spain' -> (39.8558913, -4.024265)
2026-01-13 11:48:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Palma de Mallorca, Spain' -> (39.5695818, 2.6500745)
2026-01-13 11:48:07 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Spain
2026-01-13 11:48:07 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Spain
2026-01-13 11:48:07 - app.main - INFO -    Cities returned: 11
2026-01-13 11:48:07 - app.main - INFO - ================================================================================
2026-01-13 11:48:29 - app.main - INFO - ================================================================================
2026-01-13 11:48:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:48:29 - app.main - INFO -    Country: Switzerland, Min confidence: low
2026-01-13 11:48:29 - app.main - INFO - ================================================================================
2026-01-13 11:48:29 - app.phase2.pg_aggregations - INFO -    Getting country map for Switzerland (normalized: Switzerland)...
2026-01-13 11:48:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:48:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Sion, Switzerland' -> (46.2311749, 7.3588795)
2026-01-13 11:48:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Crans-Montana, Switzerland' -> (46.3304899, 7.5264358)
2026-01-13 11:48:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Berne, Switzerland' -> (46.9484742, 7.4521749)
2026-01-13 11:48:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Switzerland
2026-01-13 11:48:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Switzerland
2026-01-13 11:48:34 - app.main - INFO -    Cities returned: 8
2026-01-13 11:48:34 - app.main - INFO - ================================================================================
2026-01-13 11:48:45 - app.main - INFO - ================================================================================
2026-01-13 11:48:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:48:45 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-13 11:48:45 - app.main - INFO - ================================================================================
2026-01-13 11:48:45 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-13 11:48:45 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:48:45 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Spain
2026-01-13 11:48:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Spain
2026-01-13 11:48:46 - app.main - INFO -    Cities returned: 11
2026-01-13 11:48:46 - app.main - INFO - ================================================================================
2026-01-13 11:48:50 - app.main - INFO - ================================================================================
2026-01-13 11:48:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:48:50 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-13 11:48:50 - app.main - INFO - ================================================================================
2026-01-13 11:48:50 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-13 11:48:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:48:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Oeiras, Portugal' -> (38.6925777, -9.3123076)
2026-01-13 11:48:53 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Portugal
2026-01-13 11:48:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Portugal
2026-01-13 11:48:53 - app.main - INFO -    Cities returned: 5
2026-01-13 11:48:53 - app.main - INFO - ================================================================================
2026-01-13 11:48:58 - app.main - INFO - ================================================================================
2026-01-13 11:48:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:48:58 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-13 11:48:58 - app.main - INFO - ================================================================================
2026-01-13 11:48:58 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-13 11:48:59 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:49:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Sari, Iran' -> (36.5537458, 53.0602761)
2026-01-13 11:49:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Isfahan, Iran' -> (32.6707877, 51.6650002)
2026-01-13 11:49:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Tabriz, Iran' -> (38.0738612, 46.2978789)
2026-01-13 11:49:04 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Iran
2026-01-13 11:49:05 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Iran
2026-01-13 11:49:05 - app.main - INFO -    Cities returned: 5
2026-01-13 11:49:05 - app.main - INFO - ================================================================================
2026-01-13 11:49:13 - app.main - INFO - ================================================================================
2026-01-13 11:49:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:49:13 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-13 11:49:13 - app.main - INFO - ================================================================================
2026-01-13 11:49:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-13 11:49:13 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:49:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Tel Hashomer, Israel' -> (32.0468815, 34.8447686)
2026-01-13 11:49:16 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Beer-Yaacov, Israel' (from affiliation: QuantalX Neuroscience, Beer-Yaacov, Israel.)
2026-01-13 11:49:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Beer Sheba, Israel' -> (31.2457442, 34.7925181)
2026-01-13 11:49:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Kfar-Saba, Israel' -> (32.1802349, 34.9180542)
2026-01-13 11:49:20 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Zerifin, Israel' (from affiliation: Sagol Center for Hyperbaric Medicine and Research, Shamir Medical Center, Zerifin, Israel.)
2026-01-13 11:49:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Beer Sheva, Israel' -> (31.2457442, 34.7925181)
2026-01-13 11:49:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Hod-Hasharon, Israel' -> (32.1561974, 34.8930354)
2026-01-13 11:49:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Herzliya, Israel' -> (32.1676842, 34.8308279)
2026-01-13 11:49:25 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 15 cities in Israel
2026-01-13 11:49:25 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Israel
2026-01-13 11:49:25 - app.main - INFO -    Cities returned: 15
2026-01-13 11:49:25 - app.main - INFO - ================================================================================
2026-01-13 11:49:32 - app.main - INFO - ================================================================================
2026-01-13 11:49:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:49:32 - app.main - INFO -    Country: Finland, Min confidence: low
2026-01-13 11:49:32 - app.main - INFO - ================================================================================
2026-01-13 11:49:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Finland (normalized: Finland)...
2026-01-13 11:49:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:49:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Kuopio, Finland' -> (62.8924641, 27.6783597)
2026-01-13 11:49:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Finland
2026-01-13 11:49:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Finland
2026-01-13 11:49:35 - app.main - INFO -    Cities returned: 2
2026-01-13 11:49:35 - app.main - INFO - ================================================================================
2026-01-13 11:49:41 - app.main - INFO - ================================================================================
2026-01-13 11:49:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:49:41 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-13 11:49:41 - app.main - INFO - ================================================================================
2026-01-13 11:49:41 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-13 11:49:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:49:42 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Iran
2026-01-13 11:49:42 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Iran
2026-01-13 11:49:42 - app.main - INFO -    Cities returned: 5
2026-01-13 11:49:42 - app.main - INFO - ================================================================================
2026-01-13 11:49:47 - app.main - INFO - ================================================================================
2026-01-13 11:49:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:49:47 - app.main - INFO -    Country: India, Min confidence: low
2026-01-13 11:49:47 - app.main - INFO - ================================================================================
2026-01-13 11:49:47 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-13 11:49:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:49:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Ranchi, India' -> (23.3700501, 85.3250387)
2026-01-13 11:49:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Chandigarh, India' -> (30.7334421, 76.7797143)
2026-01-13 11:49:51 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in India
2026-01-13 11:49:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-13 11:49:51 - app.main - INFO -    Cities returned: 5
2026-01-13 11:49:51 - app.main - INFO - ================================================================================
2026-01-13 11:49:59 - app.main - INFO - ================================================================================
2026-01-13 11:49:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:49:59 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-13 11:49:59 - app.main - INFO - ================================================================================
2026-01-13 11:49:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-13 11:49:59 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:50:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Camberwell, Australia' -> (-37.8384623, 145.0740767)
2026-01-13 11:50:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Burwood, Australia' -> (-33.8858088, 151.1024805)
2026-01-13 11:50:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Callaghan, Australia' -> (-32.8927988, 151.7011832)
2026-01-13 11:50:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Clayton, Australia' -> (-37.9158025, 145.1313859)
2026-01-13 11:50:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Randwick, Australia' -> (-33.9455167, 151.2440302)
2026-01-13 11:50:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Parkville, Australia' -> (-37.7871148, 144.9515533)
2026-01-13 11:50:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Canberra, Australia' -> (-35.2975906, 149.1012676)
2026-01-13 11:50:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Sippy Downs, Australia' -> (-26.7257935, 153.0783709)
2026-01-13 11:50:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Sydney; Canberra, Australia' -> (-33.7685689, 150.7881201)
2026-01-13 11:50:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Camperdown, Australia' -> (-33.8896116, 151.1800986)
2026-01-13 11:50:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Malvern, Australia' -> (-37.8576088, 145.0350666)
2026-01-13 11:50:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Morayfield, Australia' -> (-27.1102549, 152.948924)
2026-01-13 11:50:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Newcastle, Australia' -> (-32.9272881, 151.7812534)
2026-01-13 11:50:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Acton, Australia' -> (-35.2852323, 149.1129681)
2026-01-13 11:50:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 18 cities in Australia
2026-01-13 11:50:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-13 11:50:21 - app.main - INFO -    Cities returned: 18
2026-01-13 11:50:21 - app.main - INFO - ================================================================================
2026-01-13 11:50:30 - app.main - INFO - ================================================================================
2026-01-13 11:50:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:50:30 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-13 11:50:30 - app.main - INFO - ================================================================================
2026-01-13 11:50:30 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-13 11:50:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:50:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Moscow, Russia' -> (55.625578, 37.6063916)
2026-01-13 11:50:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Novosibirsk, Russia' -> (55.0288307, 82.9226887)
2026-01-13 11:50:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Russia
2026-01-13 11:50:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Russia
2026-01-13 11:50:34 - app.main - INFO -    Cities returned: 2
2026-01-13 11:50:34 - app.main - INFO - ================================================================================
2026-01-13 11:50:40 - app.main - INFO - ================================================================================
2026-01-13 11:50:40 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:50:40 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-13 11:50:40 - app.main - INFO - ================================================================================
2026-01-13 11:50:40 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-13 11:50:40 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:50:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Surrey, Canada' -> (49.1913033, -122.849143)
2026-01-13 11:50:42 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Canada
2026-01-13 11:50:42 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Canada
2026-01-13 11:50:42 - app.main - INFO -    Cities returned: 11
2026-01-13 11:50:42 - app.main - INFO - ================================================================================
2026-01-13 11:50:48 - app.main - INFO - ================================================================================
2026-01-13 11:50:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:50:48 - app.main - INFO -    Country: Brasil, Min confidence: low
2026-01-13 11:50:48 - app.main - INFO - ================================================================================
2026-01-13 11:50:48 - app.phase2.pg_aggregations - INFO -    Getting country map for Brasil (normalized: Brasil)...
2026-01-13 11:50:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:50:51 - app.phase2.pg_geocoding - INFO - Geocoded 'SÃ£o Paulo, Brasil' -> (-23.5506507, -46.6333824)
2026-01-13 11:50:52 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Brasil
2026-01-13 11:50:52 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brasil
2026-01-13 11:50:52 - app.main - INFO -    Cities returned: 1
2026-01-13 11:50:52 - app.main - INFO - ================================================================================
2026-01-13 11:50:56 - app.main - INFO - ================================================================================
2026-01-13 11:50:56 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:50:56 - app.main - INFO -    Country: Zambia, Min confidence: low
2026-01-13 11:50:56 - app.main - INFO - ================================================================================
2026-01-13 11:50:56 - app.phase2.pg_aggregations - INFO -    Getting country map for Zambia (normalized: Zambia)...
2026-01-13 11:50:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:50:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Chipata, Zambia' -> (-13.6391314, 32.6458437)
2026-01-13 11:50:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Lusaka, Zambia' -> (-15.4163395, 28.2818414)
2026-01-13 11:51:00 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Zambia
2026-01-13 11:51:00 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Zambia
2026-01-13 11:51:00 - app.main - INFO -    Cities returned: 2
2026-01-13 11:51:00 - app.main - INFO - ================================================================================
2026-01-13 11:51:11 - app.main - INFO - ================================================================================
2026-01-13 11:51:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:51:11 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-13 11:51:11 - app.main - INFO - ================================================================================
2026-01-13 11:51:11 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-13 11:51:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:51:12 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Portugal
2026-01-13 11:51:12 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Portugal
2026-01-13 11:51:12 - app.main - INFO -    Cities returned: 5
2026-01-13 11:51:12 - app.main - INFO - ================================================================================
2026-01-13 11:51:32 - app.main - INFO - ================================================================================
2026-01-13 11:51:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:51:32 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-13 11:51:32 - app.main - INFO - ================================================================================
2026-01-13 11:51:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-13 11:51:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:51:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Innsbruck, Austria' -> (47.2654296, 11.3927685)
2026-01-13 11:51:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Linz, Austria' -> (48.3059078, 14.286198)
2026-01-13 11:51:36 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Austria
2026-01-13 11:51:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Austria
2026-01-13 11:51:36 - app.main - INFO -    Cities returned: 5
2026-01-13 11:51:36 - app.main - INFO - ================================================================================
2026-01-13 11:51:42 - app.main - INFO - ================================================================================
2026-01-13 11:51:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:51:42 - app.main - INFO -    Country: Switzerland, Min confidence: low
2026-01-13 11:51:42 - app.main - INFO - ================================================================================
2026-01-13 11:51:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Switzerland (normalized: Switzerland)...
2026-01-13 11:51:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:51:42 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Switzerland
2026-01-13 11:51:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Switzerland
2026-01-13 11:51:43 - app.main - INFO -    Cities returned: 8
2026-01-13 11:51:43 - app.main - INFO - ================================================================================
2026-01-13 11:51:51 - app.main - INFO - ================================================================================
2026-01-13 11:51:51 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:51:51 - app.main - INFO -    Country: Denmark, Min confidence: low
2026-01-13 11:51:51 - app.main - INFO - ================================================================================
2026-01-13 11:51:51 - app.phase2.pg_aggregations - INFO -    Getting country map for Denmark (normalized: Denmark)...
2026-01-13 11:51:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:51:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Hammel, Denmark' -> (56.2526132, 9.8610556)
2026-01-13 11:51:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Silkeborg, Denmark' -> (56.169453, 9.5495141)
2026-01-13 11:51:55 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Denmark
2026-01-13 11:51:55 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Denmark
2026-01-13 11:51:55 - app.main - INFO -    Cities returned: 6
2026-01-13 11:51:55 - app.main - INFO - ================================================================================
2026-01-13 11:52:17 - app.main - INFO - ================================================================================
2026-01-13 11:52:17 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:52:17 - app.main - INFO -    Country: Sweden, Min confidence: low
2026-01-13 11:52:17 - app.main - INFO - ================================================================================
2026-01-13 11:52:17 - app.phase2.pg_aggregations - INFO -    Getting country map for Sweden (normalized: Sweden)...
2026-01-13 11:52:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:52:19 - app.phase2.pg_geocoding - INFO - Geocoded 'MÃ¶lndal, Sweden' -> (57.6564918, 12.0153085)
2026-01-13 11:52:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Sweden
2026-01-13 11:52:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Sweden
2026-01-13 11:52:20 - app.main - INFO -    Cities returned: 3
2026-01-13 11:52:20 - app.main - INFO - ================================================================================
2026-01-13 11:52:26 - app.main - INFO - ================================================================================
2026-01-13 11:52:26 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:52:26 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-13 11:52:26 - app.main - INFO - ================================================================================
2026-01-13 11:52:26 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-13 11:52:27 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:52:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Yokosuka City, Japan' -> (35.2817446, 139.6714498)
2026-01-13 11:52:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Chiba, Japan' -> (35.549399, 140.2647303)
2026-01-13 11:52:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Fukushima, Japan' -> (37.760777, 140.4745807)
2026-01-13 11:52:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Kawasaki, Japan' -> (35.5306639, 139.7037668)
2026-01-13 11:52:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Japan
2026-01-13 11:52:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-13 11:52:34 - app.main - INFO -    Cities returned: 6
2026-01-13 11:52:34 - app.main - INFO - ================================================================================
2026-01-13 11:52:43 - app.main - INFO - ================================================================================
2026-01-13 11:52:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:52:43 - app.main - INFO -    Country: Mexico, Min confidence: low
2026-01-13 11:52:43 - app.main - INFO - ================================================================================
2026-01-13 11:52:43 - app.phase2.pg_aggregations - INFO -    Getting country map for Mexico (normalized: Mexico)...
2026-01-13 11:52:44 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:52:44 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Mexico
2026-01-13 11:52:44 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Mexico
2026-01-13 11:52:44 - app.main - INFO -    Cities returned: 1
2026-01-13 11:52:44 - app.main - INFO - ================================================================================
2026-01-13 11:53:06 - app.main - INFO - ================================================================================
2026-01-13 11:53:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:53:06 - app.main - INFO -    Country: Romania, Min confidence: low
2026-01-13 11:53:06 - app.main - INFO - ================================================================================
2026-01-13 11:53:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Romania (normalized: Romania)...
2026-01-13 11:53:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:53:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Suceava, Romania' -> (47.647001, 26.2522599)
2026-01-13 11:53:08 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Romania
2026-01-13 11:53:08 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Romania
2026-01-13 11:53:08 - app.main - INFO -    Cities returned: 2
2026-01-13 11:53:08 - app.main - INFO - ================================================================================
2026-01-13 11:53:22 - app.main - INFO - ================================================================================
2026-01-13 11:53:22 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:53:22 - app.main - INFO -    Country: Brasil, Min confidence: low
2026-01-13 11:53:22 - app.main - INFO - ================================================================================
2026-01-13 11:53:22 - app.phase2.pg_aggregations - INFO -    Getting country map for Brasil (normalized: Brasil)...
2026-01-13 11:53:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:53:22 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Brasil
2026-01-13 11:53:22 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brasil
2026-01-13 11:53:22 - app.main - INFO -    Cities returned: 1
2026-01-13 11:53:22 - app.main - INFO - ================================================================================
2026-01-13 11:53:30 - app.main - INFO - ================================================================================
2026-01-13 11:53:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-13 11:53:30 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-13 11:53:30 - app.main - INFO - ================================================================================
2026-01-13 11:53:30 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-13 11:53:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-13 11:53:30 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 74 cities in United States
2026-01-13 11:53:30 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-13 11:53:30 - app.main - INFO -    Cities returned: 74
2026-01-13 11:53:30 - app.main - INFO - ================================================================================
2026-01-13 12:11:02 - root - INFO - ================================================================================
2026-01-13 12:11:02 - root - INFO - Logging initialized - output to console and log.txt
2026-01-13 12:11:02 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-13 12:11:02 - root - INFO - ================================================================================
2026-01-13 12:17:27 - root - INFO - ================================================================================
2026-01-13 12:17:27 - root - INFO - Logging initialized - output to console and log.txt
2026-01-13 12:17:27 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-13 12:17:27 - root - INFO - ================================================================================
2026-01-13 09:01:59 - root - INFO - ================================================================================
2026-01-13 09:01:59 - root - INFO - Logging initialized - output to console and log.txt
2026-01-13 09:01:59 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-13 09:01:59 - root - INFO - ================================================================================
2026-01-13 12:25:09 - root - INFO - ================================================================================
2026-01-13 12:25:09 - root - INFO - Logging initialized - output to console and log.txt
2026-01-13 12:25:09 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-13 12:25:09 - root - INFO - ================================================================================
2026-01-13 12:48:36 - root - INFO - ================================================================================
2026-01-13 12:48:36 - root - INFO - Logging initialized - output to console and log.txt
2026-01-13 12:48:36 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-13 12:48:36 - root - INFO - ================================================================================
2026-01-13 12:58:01 - root - INFO - ================================================================================
2026-01-13 12:58:01 - root - INFO - Logging initialized - output to console and log.txt
2026-01-13 12:58:01 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-13 12:58:01 - root - INFO - ================================================================================
2026-01-13 15:50:59 - app.main - INFO - ðŸ‘¥ ADMIN: Fetching online user count
2026-01-13 15:50:59 - app.main - INFO - âœ… ADMIN: Online users: 1
2026-01-14 13:40:23 - root - INFO - ================================================================================
2026-01-14 13:40:23 - root - INFO - Logging initialized - output to console and log.txt
2026-01-14 13:40:23 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-14 13:40:23 - root - INFO - ================================================================================
2026-01-14 15:36:36 - app.main - INFO - ðŸ‘¥ ADMIN: Fetching online user count
2026-01-14 15:36:36 - app.main - INFO - âœ… ADMIN: Online users: 1
2026-01-14 15:37:43 - app.main - INFO - ================================================================================
2026-01-14 15:37:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-14 15:37:43 - app.main - INFO -    Min confidence: low
2026-01-14 15:37:43 - app.main - INFO - ================================================================================
2026-01-14 15:37:43 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-14 15:37:43 - app.main - INFO - ================================================================================
2026-01-14 15:37:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-14 15:37:43 - app.main - INFO -    Min confidence: low
2026-01-14 15:37:43 - app.main - INFO - ================================================================================
2026-01-14 15:37:43 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-14 15:37:43 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-14 15:37:43 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-14 15:37:43 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-14 15:37:43 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-14 15:37:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-14 15:37:43 - app.main - INFO -    Countries returned: 23
2026-01-14 15:37:43 - app.main - INFO - ================================================================================
2026-01-14 15:37:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-14 15:37:43 - app.main - INFO -    Countries returned: 23
2026-01-14 15:37:43 - app.main - INFO - ================================================================================
2026-01-14 15:37:46 - app.main - INFO - ================================================================================
2026-01-14 15:37:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-14 15:37:46 - app.main - INFO -    Country: China, Min confidence: low
2026-01-14 15:37:46 - app.main - INFO - ================================================================================
2026-01-14 15:37:46 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-14 15:37:46 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-14 15:37:47 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in China
2026-01-14 15:37:47 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-14 15:37:47 - app.main - INFO -    Cities returned: 6
2026-01-14 15:37:47 - app.main - INFO - ================================================================================
2026-01-14 15:37:50 - app.main - INFO - ================================================================================
2026-01-14 15:37:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-14 15:37:50 - app.main - INFO -    Country: China, City: Shanghai, Min confidence: low
2026-01-14 15:37:50 - app.main - INFO - ================================================================================
2026-01-14 15:37:50 - app.phase2.pg_aggregations - INFO -    Getting city map for Shanghai, China...
2026-01-14 15:37:50 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-14 15:37:50 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Shanghai, China
2026-01-14 15:37:50 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Shanghai, China
2026-01-14 15:37:50 - app.main - INFO -    Institutions returned: 3
2026-01-14 15:37:50 - app.main - INFO - ================================================================================
2026-01-15 11:15:08 - root - INFO - ================================================================================
2026-01-15 11:15:08 - root - INFO - Logging initialized - output to console and log.txt
2026-01-15 11:15:08 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-15 11:15:08 - root - INFO - ================================================================================
2026-01-15 11:19:04 - app.main - INFO - ================================================================================
2026-01-15 11:19:04 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-15 11:19:04 - app.main - INFO -    Min confidence: low
2026-01-15 11:19:04 - app.main - INFO - ================================================================================
2026-01-15 11:19:04 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-15 11:19:04 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-15 11:19:04 - app.main - INFO - ================================================================================
2026-01-15 11:19:04 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-15 11:19:04 - app.main - INFO -    Min confidence: low
2026-01-15 11:19:04 - app.main - INFO - ================================================================================
2026-01-15 11:19:04 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-15 11:19:04 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-15 11:19:05 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-15 11:19:05 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 11:19:05 - app.main - INFO -    Countries returned: 52
2026-01-15 11:19:05 - app.main - INFO - ================================================================================
2026-01-15 11:19:05 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-15 11:19:05 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 11:19:05 - app.main - INFO -    Countries returned: 52
2026-01-15 11:19:05 - app.main - INFO - ================================================================================
2026-01-15 11:19:09 - app.main - INFO - ================================================================================
2026-01-15 11:19:09 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-15 11:19:09 - app.main - INFO -    Country: China, Min confidence: low
2026-01-15 11:19:09 - app.main - INFO - ================================================================================
2026-01-15 11:19:09 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-15 11:19:09 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-15 11:19:09 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-15 11:19:09 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-15 11:19:09 - app.main - INFO -    Cities returned: 47
2026-01-15 11:19:09 - app.main - INFO - ================================================================================
2026-01-15 11:19:17 - app.main - INFO - ================================================================================
2026-01-15 11:19:17 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-15 11:19:17 - app.main - INFO -    Country: China, City: Chengdu, Min confidence: low
2026-01-15 11:19:17 - app.main - INFO - ================================================================================
2026-01-15 11:19:17 - app.phase2.pg_aggregations - INFO -    Getting city map for Chengdu, China...
2026-01-15 11:19:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-15 11:19:17 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 7 institutions in Chengdu, China
2026-01-15 11:19:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Chengdu, China
2026-01-15 11:19:17 - app.main - INFO -    Institutions returned: 7
2026-01-15 11:19:17 - app.main - INFO - ================================================================================
2026-01-15 11:27:35 - app.main - INFO - ðŸ‘¥ ADMIN: Fetching online user count
2026-01-15 11:27:35 - app.main - INFO - âœ… ADMIN: Online users: 1
2026-01-15 11:27:39 - app.main - INFO - ================================================================================
2026-01-15 11:27:39 - app.main - INFO - ðŸ“Š ADMIN: Manual resource snapshot triggered
2026-01-15 11:27:39 - app.main - INFO - ================================================================================
2026-01-15 11:27:41 - app.main - INFO - âœ… ADMIN: Snapshot completed
2026-01-15 11:27:41 - app.main - INFO -    Snapshot ID: 12
2026-01-15 11:27:41 - app.main - INFO -    Users: 3
2026-01-15 11:27:41 - app.main - INFO -    Runs: 5
2026-01-15 11:27:41 - app.main - INFO -    Total Disk: 18.66 MB
2026-01-15 11:27:41 - app.main - INFO - ================================================================================
2026-01-15 11:35:25 - app.main - INFO - ================================================================================
2026-01-15 11:35:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-15 11:35:25 - app.main - INFO -    Min confidence: low
2026-01-15 11:35:25 - app.main - INFO - ================================================================================
2026-01-15 11:35:25 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-15 11:35:25 - app.main - INFO - ================================================================================
2026-01-15 11:35:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-15 11:35:25 - app.main - INFO -    Min confidence: low
2026-01-15 11:35:25 - app.main - INFO - ================================================================================
2026-01-15 11:35:25 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-15 11:35:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-15 11:35:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-15 11:35:26 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-15 11:35:26 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 11:35:26 - app.main - INFO -    Countries returned: 52
2026-01-15 11:35:26 - app.main - INFO - ================================================================================
2026-01-15 11:35:26 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-15 11:35:26 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 11:35:26 - app.main - INFO -    Countries returned: 52
2026-01-15 11:35:26 - app.main - INFO - ================================================================================
2026-01-15 14:27:57 - root - INFO - ================================================================================
2026-01-15 14:27:57 - root - INFO - Logging initialized - output to console and log.txt
2026-01-15 14:27:57 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-15 14:27:57 - root - INFO - ================================================================================
2026-01-15 14:30:03 - app.main - INFO - ðŸ‘¥ ADMIN: Fetching online user count
2026-01-15 14:30:03 - app.main - INFO - âœ… ADMIN: Online users: 2
2026-01-15 14:30:35 - app.main - INFO - ================================================================================
2026-01-15 14:30:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 14:30:35 - app.main - INFO -    Min confidence: low
2026-01-15 14:30:35 - app.main - INFO - ================================================================================
2026-01-15 14:30:35 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 14:30:35 - app.main - INFO - ================================================================================
2026-01-15 14:30:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 14:30:35 - app.main - INFO -    Min confidence: low
2026-01-15 14:30:35 - app.main - INFO - ================================================================================
2026-01-15 14:30:35 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 14:30:36 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 14:30:36 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 14:30:36 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 14:30:36 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 14:30:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 14:30:36 - app.main - INFO -    Countries returned: 23
2026-01-15 14:30:36 - app.main - INFO - ================================================================================
2026-01-15 14:30:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 14:30:36 - app.main - INFO -    Countries returned: 23
2026-01-15 14:30:36 - app.main - INFO - ================================================================================
2026-01-15 14:49:17 - app.main - INFO - ================================================================================
2026-01-15 14:49:17 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-15 14:49:17 - app.main - INFO -    Min confidence: low
2026-01-15 14:49:17 - app.main - INFO - ================================================================================
2026-01-15 14:49:17 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-15 14:49:17 - app.main - INFO - ================================================================================
2026-01-15 14:49:17 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-15 14:49:17 - app.main - INFO -    Min confidence: low
2026-01-15 14:49:17 - app.main - INFO - ================================================================================
2026-01-15 14:49:17 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-15 14:49:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-15 14:49:18 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-15 14:49:18 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-15 14:49:18 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 14:49:18 - app.main - INFO -    Countries returned: 52
2026-01-15 14:49:18 - app.main - INFO - ================================================================================
2026-01-15 14:49:18 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-15 14:49:18 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 14:49:18 - app.main - INFO -    Countries returned: 52
2026-01-15 14:49:18 - app.main - INFO - ================================================================================
2026-01-15 15:09:33 - root - INFO - ================================================================================
2026-01-15 15:09:33 - root - INFO - Logging initialized - output to console and log.txt
2026-01-15 15:09:33 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-15 15:09:33 - root - INFO - ================================================================================
2026-01-15 15:10:42 - root - INFO - ================================================================================
2026-01-15 15:10:42 - root - INFO - Logging initialized - output to console and log.txt
2026-01-15 15:10:42 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-15 15:10:42 - root - INFO - ================================================================================
2026-01-15 15:10:54 - root - INFO - ================================================================================
2026-01-15 15:10:54 - root - INFO - Logging initialized - output to console and log.txt
2026-01-15 15:10:54 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-15 15:10:54 - root - INFO - ================================================================================
2026-01-15 15:15:05 - root - INFO - ================================================================================
2026-01-15 15:15:05 - root - INFO - Logging initialized - output to console and log.txt
2026-01-15 15:15:05 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-15 15:15:05 - root - INFO - ================================================================================
2026-01-15 15:15:43 - root - INFO - ================================================================================
2026-01-15 15:15:43 - root - INFO - Logging initialized - output to console and log.txt
2026-01-15 15:15:43 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-15 15:15:43 - root - INFO - ================================================================================
2026-01-15 15:17:20 - root - INFO - ================================================================================
2026-01-15 15:17:20 - root - INFO - Logging initialized - output to console and log.txt
2026-01-15 15:17:20 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-15 15:17:20 - root - INFO - ================================================================================
2026-01-15 15:18:18 - app.main - INFO - ================================================================================
2026-01-15 15:18:18 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 15:18:18 - app.main - INFO -    Min confidence: low
2026-01-15 15:18:18 - app.main - INFO - ================================================================================
2026-01-15 15:18:18 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 15:18:18 - app.main - INFO - ================================================================================
2026-01-15 15:18:18 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 15:18:18 - app.main - INFO -    Min confidence: low
2026-01-15 15:18:18 - app.main - INFO - ================================================================================
2026-01-15 15:18:18 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 15:18:18 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 15:18:18 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 15:18:19 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 15:18:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 15:18:19 - app.main - INFO -    Countries returned: 23
2026-01-15 15:18:19 - app.main - INFO - ================================================================================
2026-01-15 15:18:19 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 15:18:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 15:18:19 - app.main - INFO -    Countries returned: 23
2026-01-15 15:18:19 - app.main - INFO - ================================================================================
2026-01-15 15:20:26 - app.main - INFO - ================================================================================
2026-01-15 15:20:26 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 15:20:26 - app.main - INFO -    Min confidence: low
2026-01-15 15:20:26 - app.main - INFO - ================================================================================
2026-01-15 15:20:26 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 15:20:26 - app.main - INFO - ================================================================================
2026-01-15 15:20:26 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 15:20:26 - app.main - INFO -    Min confidence: low
2026-01-15 15:20:26 - app.main - INFO - ================================================================================
2026-01-15 15:20:26 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 15:20:26 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 15:20:27 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 15:20:27 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 15:20:27 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 15:20:27 - app.main - INFO -    Countries returned: 23
2026-01-15 15:20:27 - app.main - INFO - ================================================================================
2026-01-15 15:20:27 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 15:20:27 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 15:20:27 - app.main - INFO -    Countries returned: 23
2026-01-15 15:20:27 - app.main - INFO - ================================================================================
2026-01-15 15:20:55 - app.main - INFO - ================================================================================
2026-01-15 15:20:55 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 15:20:55 - app.main - INFO -    Min confidence: low
2026-01-15 15:20:55 - app.main - INFO - ================================================================================
2026-01-15 15:20:55 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 15:20:55 - app.main - INFO - ================================================================================
2026-01-15 15:20:55 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 15:20:55 - app.main - INFO -    Min confidence: low
2026-01-15 15:20:55 - app.main - INFO - ================================================================================
2026-01-15 15:20:55 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 15:20:55 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 15:20:55 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 15:20:55 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 15:20:55 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 15:20:55 - app.main - INFO -    Countries returned: 23
2026-01-15 15:20:55 - app.main - INFO - ================================================================================
2026-01-15 15:20:55 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 15:20:55 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 15:20:55 - app.main - INFO -    Countries returned: 23
2026-01-15 15:20:55 - app.main - INFO - ================================================================================
2026-01-15 15:27:03 - app.main - INFO - ================================================================================
2026-01-15 15:27:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 15:27:03 - app.main - INFO -    Min confidence: low
2026-01-15 15:27:03 - app.main - INFO - ================================================================================
2026-01-15 15:27:03 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 15:27:03 - app.main - INFO - ================================================================================
2026-01-15 15:27:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 15:27:03 - app.main - INFO -    Min confidence: low
2026-01-15 15:27:03 - app.main - INFO - ================================================================================
2026-01-15 15:27:03 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 15:27:03 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 15:27:03 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 15:27:03 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 15:27:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 15:27:03 - app.main - INFO -    Countries returned: 23
2026-01-15 15:27:03 - app.main - INFO - ================================================================================
2026-01-15 15:27:03 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 15:27:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 15:27:03 - app.main - INFO -    Countries returned: 23
2026-01-15 15:27:03 - app.main - INFO - ================================================================================
2026-01-15 15:38:22 - app.main - INFO - ================================================================================
2026-01-15 15:38:22 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 15:38:22 - app.main - INFO -    Min confidence: low
2026-01-15 15:38:22 - app.main - INFO - ================================================================================
2026-01-15 15:38:22 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 15:38:22 - app.main - INFO - ================================================================================
2026-01-15 15:38:22 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 15:38:22 - app.main - INFO -    Min confidence: low
2026-01-15 15:38:22 - app.main - INFO - ================================================================================
2026-01-15 15:38:22 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 15:38:22 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 15:38:22 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 15:38:22 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 15:38:22 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 15:38:22 - app.main - INFO -    Countries returned: 23
2026-01-15 15:38:22 - app.main - INFO - ================================================================================
2026-01-15 15:38:22 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 15:38:22 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 15:38:22 - app.main - INFO -    Countries returned: 23
2026-01-15 15:38:22 - app.main - INFO - ================================================================================
2026-01-15 15:54:37 - app.main - INFO - ================================================================================
2026-01-15 15:54:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 15:54:37 - app.main - INFO -    Min confidence: low
2026-01-15 15:54:37 - app.main - INFO - ================================================================================
2026-01-15 15:54:37 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 15:54:38 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 15:54:38 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 15:54:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 15:54:38 - app.main - INFO -    Countries returned: 23
2026-01-15 15:54:38 - app.main - INFO - ================================================================================
2026-01-15 15:55:20 - root - INFO - ================================================================================
2026-01-15 15:55:20 - root - INFO - Logging initialized - output to console and log.txt
2026-01-15 15:55:20 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-15 15:55:20 - root - INFO - ================================================================================
2026-01-15 15:55:37 - app.main - INFO - ================================================================================
2026-01-15 15:55:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 15:55:37 - app.main - INFO -    Min confidence: low
2026-01-15 15:55:37 - app.main - INFO - ================================================================================
2026-01-15 15:55:37 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 15:55:37 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 15:55:38 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 15:55:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 15:55:38 - app.main - INFO -    Countries returned: 23
2026-01-15 15:55:38 - app.main - INFO - ================================================================================
2026-01-15 16:06:35 - root - INFO - ================================================================================
2026-01-15 16:06:35 - root - INFO - Logging initialized - output to console and log.txt
2026-01-15 16:06:35 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-15 16:06:35 - root - INFO - ================================================================================
2026-01-15 16:06:47 - app.main - INFO - ================================================================================
2026-01-15 16:06:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 16:06:47 - app.main - INFO -    Min confidence: low
2026-01-15 16:06:47 - app.main - INFO - ================================================================================
2026-01-15 16:06:47 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 16:06:48 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 16:06:48 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 16:06:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 16:06:48 - app.main - INFO -    Countries returned: 23
2026-01-15 16:06:48 - app.main - INFO - ================================================================================
2026-01-15 16:13:35 - app.main - INFO - ================================================================================
2026-01-15 16:13:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 16:13:35 - app.main - INFO -    Min confidence: low
2026-01-15 16:13:35 - app.main - INFO - ================================================================================
2026-01-15 16:13:35 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 16:13:35 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 16:13:35 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 16:13:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 16:13:35 - app.main - INFO -    Countries returned: 23
2026-01-15 16:13:35 - app.main - INFO - ================================================================================
2026-01-15 17:00:54 - app.main - INFO - ================================================================================
2026-01-15 17:00:54 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 17:00:54 - app.main - INFO -    Min confidence: low
2026-01-15 17:00:54 - app.main - INFO - ================================================================================
2026-01-15 17:00:54 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 17:00:54 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 17:00:55 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 17:00:55 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 17:00:55 - app.main - INFO -    Countries returned: 23
2026-01-15 17:00:55 - app.main - INFO - ================================================================================
2026-01-15 17:03:36 - app.main - INFO - ================================================================================
2026-01-15 17:03:36 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 2098072fb7af, Run: 87cd3ae67453
2026-01-15 17:03:36 - app.main - INFO -    Min confidence: low
2026-01-15 17:03:36 - app.main - INFO - ================================================================================
2026-01-15 17:03:36 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 87cd3ae67453...
2026-01-15 17:03:36 - app.phase2.pg_aggregations - INFO -    Found 93 PMIDs
2026-01-15 17:03:37 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 23 countries
2026-01-15 17:03:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-15 17:03:37 - app.main - INFO -    Countries returned: 23
2026-01-15 17:03:37 - app.main - INFO - ================================================================================
2026-01-16 08:29:46 - root - INFO - ================================================================================
2026-01-16 08:29:46 - root - INFO - Logging initialized - output to console and log.txt
2026-01-16 08:29:46 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-16 08:29:46 - root - INFO - ================================================================================
2026-01-16 12:13:33 - root - INFO - ================================================================================
2026-01-16 12:13:33 - root - INFO - Logging initialized - output to console and log.txt
2026-01-16 12:13:33 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-16 12:13:33 - root - INFO - ================================================================================
2026-01-16 12:15:04 - app.main - INFO - ================================================================================
2026-01-16 12:15:04 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-16 12:15:04 - app.main - INFO -    Min confidence: low
2026-01-16 12:15:04 - app.main - INFO - ================================================================================
2026-01-16 12:15:04 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-16 12:15:04 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-16 12:15:05 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-16 12:15:06 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-16 12:15:06 - app.main - INFO -    Countries returned: 52
2026-01-16 12:15:06 - app.main - INFO - ================================================================================
2026-01-16 12:16:48 - app.main - INFO - ================================================================================
2026-01-16 12:16:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-16 12:16:48 - app.main - INFO -    Min confidence: low
2026-01-16 12:16:48 - app.main - INFO - ================================================================================
2026-01-16 12:16:48 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-16 12:16:49 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-16 12:16:49 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-16 12:16:49 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-16 12:16:49 - app.main - INFO -    Countries returned: 52
2026-01-16 12:16:49 - app.main - INFO - ================================================================================
2026-01-16 12:20:38 - app.main - INFO - ================================================================================
2026-01-16 12:20:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-16 12:20:38 - app.main - INFO -    Min confidence: low
2026-01-16 12:20:38 - app.main - INFO - ================================================================================
2026-01-16 12:20:38 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-16 12:20:38 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-16 12:20:39 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-16 12:20:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-16 12:20:39 - app.main - INFO -    Countries returned: 52
2026-01-16 12:20:39 - app.main - INFO - ================================================================================
2026-01-16 12:23:44 - app.main - INFO - ================================================================================
2026-01-16 12:23:44 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-16 12:23:44 - app.main - INFO -    Min confidence: low
2026-01-16 12:23:44 - app.main - INFO - ================================================================================
2026-01-16 12:23:44 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-16 12:23:44 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-16 12:23:45 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-16 12:23:45 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-16 12:23:45 - app.main - INFO -    Countries returned: 52
2026-01-16 12:23:45 - app.main - INFO - ================================================================================
2026-01-16 12:24:11 - app.main - INFO - ================================================================================
2026-01-16 12:24:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-16 12:24:11 - app.main - INFO -    Min confidence: low
2026-01-16 12:24:11 - app.main - INFO - ================================================================================
2026-01-16 12:24:11 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-16 12:24:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-16 12:24:12 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-16 12:24:12 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-16 12:24:12 - app.main - INFO -    Countries returned: 52
2026-01-16 12:24:12 - app.main - INFO - ================================================================================
2026-01-16 12:27:25 - app.main - INFO - ================================================================================
2026-01-16 12:27:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-16 12:27:25 - app.main - INFO -    Min confidence: low
2026-01-16 12:27:25 - app.main - INFO - ================================================================================
2026-01-16 12:27:25 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-16 12:27:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-16 12:27:26 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-16 12:27:26 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-16 12:27:26 - app.main - INFO -    Countries returned: 52
2026-01-16 12:27:26 - app.main - INFO - ================================================================================
2026-01-16 12:29:53 - app.main - INFO - ================================================================================
2026-01-16 12:29:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-16 12:29:53 - app.main - INFO -    Min confidence: low
2026-01-16 12:29:53 - app.main - INFO - ================================================================================
2026-01-16 12:29:53 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-16 12:29:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-16 12:29:53 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-16 12:29:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-16 12:29:53 - app.main - INFO -    Countries returned: 52
2026-01-16 12:29:53 - app.main - INFO - ================================================================================
2026-01-16 12:32:52 - app.main - INFO - ================================================================================
2026-01-16 12:32:52 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-16 12:32:52 - app.main - INFO -    Min confidence: low
2026-01-16 12:32:52 - app.main - INFO - ================================================================================
2026-01-16 12:32:52 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-16 12:32:52 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-16 12:32:52 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-16 12:32:52 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-16 12:32:52 - app.main - INFO -    Countries returned: 52
2026-01-16 12:32:52 - app.main - INFO - ================================================================================
2026-01-16 12:21:48 - root - INFO - ================================================================================
2026-01-16 12:21:48 - root - INFO - Logging initialized - output to console and log.txt
2026-01-16 12:21:48 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-16 12:21:48 - root - INFO - ================================================================================
2026-01-16 12:23:17 - root - INFO - ================================================================================
2026-01-16 12:23:17 - root - INFO - Logging initialized - output to console and log.txt
2026-01-16 12:23:17 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-16 12:23:17 - root - INFO - ================================================================================
2026-01-18 11:17:27 - root - INFO - ================================================================================
2026-01-18 11:17:27 - root - INFO - Logging initialized - output to console and log.txt
2026-01-18 11:17:27 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-18 11:17:27 - root - INFO - ================================================================================
2026-01-18 11:26:51 - app.main - INFO - ================================================================================
2026-01-18 11:26:51 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 11:26:51 - app.main - INFO -    Min confidence: low
2026-01-18 11:26:51 - app.main - INFO - ================================================================================
2026-01-18 11:26:51 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 11:26:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 11:26:52 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 11:26:52 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 11:26:52 - app.main - INFO -    Countries returned: 52
2026-01-18 11:26:52 - app.main - INFO - ================================================================================
2026-01-18 11:31:01 - root - INFO - ================================================================================
2026-01-18 11:31:01 - root - INFO - Logging initialized - output to console and log.txt
2026-01-18 11:31:01 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-18 11:31:01 - root - INFO - ================================================================================
2026-01-18 11:32:47 - app.main - INFO - ================================================================================
2026-01-18 11:32:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 11:32:47 - app.main - INFO -    Country: China, Min confidence: low
2026-01-18 11:32:47 - app.main - INFO - ================================================================================
2026-01-18 11:32:47 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-18 11:32:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 11:32:48 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-18 11:32:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-18 11:32:48 - app.main - INFO -    Cities returned: 47
2026-01-18 11:32:48 - app.main - INFO - ================================================================================
2026-01-18 11:36:31 - app.main - INFO - ================================================================================
2026-01-18 11:36:31 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 11:36:31 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-18 11:36:31 - app.main - INFO - ================================================================================
2026-01-18 11:36:31 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-18 11:36:31 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 11:36:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 74 cities in United States
2026-01-18 11:36:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-18 11:36:32 - app.main - INFO -    Cities returned: 74
2026-01-18 11:36:32 - app.main - INFO - ================================================================================
2026-01-18 12:17:40 - root - INFO - ================================================================================
2026-01-18 12:17:40 - root - INFO - Logging initialized - output to console and log.txt
2026-01-18 12:17:40 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-18 12:17:40 - root - INFO - ================================================================================
2026-01-18 12:19:43 - root - INFO - ================================================================================
2026-01-18 12:19:43 - root - INFO - Logging initialized - output to console and log.txt
2026-01-18 12:19:43 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-18 12:19:43 - root - INFO - ================================================================================
2026-01-18 12:22:09 - root - INFO - ================================================================================
2026-01-18 12:22:09 - root - INFO - Logging initialized - output to console and log.txt
2026-01-18 12:22:09 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-18 12:22:09 - root - INFO - ================================================================================
2026-01-18 12:28:27 - root - INFO - ================================================================================
2026-01-18 12:28:27 - root - INFO - Logging initialized - output to console and log.txt
2026-01-18 12:28:27 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-18 12:28:27 - root - INFO - ================================================================================
2026-01-18 12:30:46 - root - INFO - ================================================================================
2026-01-18 12:30:46 - root - INFO - Logging initialized - output to console and log.txt
2026-01-18 12:30:46 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-18 12:30:46 - root - INFO - ================================================================================
2026-01-18 12:31:23 - app.main - INFO - ================================================================================
2026-01-18 12:31:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:31:23 - app.main - INFO -    Min confidence: low
2026-01-18 12:31:23 - app.main - INFO - ================================================================================
2026-01-18 12:31:23 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 12:31:23 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:31:24 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 12:31:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 12:31:24 - app.main - INFO -    Countries returned: 52
2026-01-18 12:31:24 - app.main - INFO - ================================================================================
2026-01-18 12:31:39 - app.main - INFO - ================================================================================
2026-01-18 12:31:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:31:39 - app.main - INFO -    Min confidence: low
2026-01-18 12:31:39 - app.main - INFO - ================================================================================
2026-01-18 12:31:39 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 12:31:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:31:40 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 12:31:40 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 12:31:40 - app.main - INFO -    Countries returned: 52
2026-01-18 12:31:40 - app.main - INFO - ================================================================================
2026-01-18 12:31:47 - app.main - INFO - ================================================================================
2026-01-18 12:31:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:31:47 - app.main - INFO -    Min confidence: low
2026-01-18 12:31:47 - app.main - INFO - ================================================================================
2026-01-18 12:31:47 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 12:31:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:31:47 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 12:31:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 12:31:48 - app.main - INFO -    Countries returned: 52
2026-01-18 12:31:48 - app.main - INFO - ================================================================================
2026-01-18 12:33:02 - app.main - INFO - ================================================================================
2026-01-18 12:33:02 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:33:02 - app.main - INFO -    Min confidence: low
2026-01-18 12:33:02 - app.main - INFO - ================================================================================
2026-01-18 12:33:02 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 12:33:02 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:33:03 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 12:33:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 12:33:03 - app.main - INFO -    Countries returned: 52
2026-01-18 12:33:03 - app.main - INFO - ================================================================================
2026-01-18 12:33:34 - app.main - INFO - ================================================================================
2026-01-18 12:33:34 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:33:34 - app.main - INFO -    Min confidence: low
2026-01-18 12:33:34 - app.main - INFO - ================================================================================
2026-01-18 12:33:34 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 12:33:34 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:33:34 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 12:33:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 12:33:34 - app.main - INFO -    Countries returned: 52
2026-01-18 12:33:34 - app.main - INFO - ================================================================================
2026-01-18 12:43:10 - root - INFO - ================================================================================
2026-01-18 12:43:10 - root - INFO - Logging initialized - output to console and log.txt
2026-01-18 12:43:10 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-18 12:43:10 - root - INFO - ================================================================================
2026-01-18 12:43:26 - app.main - INFO - ================================================================================
2026-01-18 12:43:26 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:43:26 - app.main - INFO -    Min confidence: low
2026-01-18 12:43:26 - app.main - INFO - ================================================================================
2026-01-18 12:43:26 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 12:43:27 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:43:27 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 12:43:27 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 12:43:27 - app.main - INFO -    Countries returned: 52
2026-01-18 12:43:27 - app.main - INFO - ================================================================================
2026-01-18 12:44:25 - root - INFO - ================================================================================
2026-01-18 12:44:25 - root - INFO - Logging initialized - output to console and log.txt
2026-01-18 12:44:25 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-18 12:44:25 - root - INFO - ================================================================================
2026-01-18 12:45:11 - app.main - INFO - ================================================================================
2026-01-18 12:45:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:45:11 - app.main - INFO -    Min confidence: low
2026-01-18 12:45:11 - app.main - INFO - ================================================================================
2026-01-18 12:45:11 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 12:45:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:45:12 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 12:45:12 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 12:45:12 - app.main - INFO -    Countries returned: 52
2026-01-18 12:45:12 - app.main - INFO - ================================================================================
2026-01-18 12:45:29 - app.main - INFO - ================================================================================
2026-01-18 12:45:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:45:29 - app.main - INFO -    Country: China, Min confidence: low
2026-01-18 12:45:29 - app.main - INFO - ================================================================================
2026-01-18 12:45:29 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-18 12:45:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:45:30 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-18 12:45:30 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-18 12:45:30 - app.main - INFO -    Cities returned: 47
2026-01-18 12:45:30 - app.main - INFO - ================================================================================
2026-01-18 12:51:36 - app.main - INFO - ================================================================================
2026-01-18 12:51:36 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:51:36 - app.main - INFO -    Min confidence: low
2026-01-18 12:51:36 - app.main - INFO - ================================================================================
2026-01-18 12:51:36 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 12:51:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:51:36 - app.main - INFO - ================================================================================
2026-01-18 12:51:36 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:51:36 - app.main - INFO -    Min confidence: low
2026-01-18 12:51:36 - app.main - INFO - ================================================================================
2026-01-18 12:51:36 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 12:51:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:51:36 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 12:51:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 12:51:36 - app.main - INFO -    Countries returned: 52
2026-01-18 12:51:36 - app.main - INFO - ================================================================================
2026-01-18 12:51:37 - app.main - INFO - ================================================================================
2026-01-18 12:51:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:51:37 - app.main - INFO -    Min confidence: low
2026-01-18 12:51:37 - app.main - INFO - ================================================================================
2026-01-18 12:51:37 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 12:51:37 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 12:51:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 12:51:37 - app.main - INFO -    Countries returned: 52
2026-01-18 12:51:37 - app.main - INFO - ================================================================================
2026-01-18 12:51:37 - app.main - INFO - ================================================================================
2026-01-18 12:51:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:51:37 - app.main - INFO -    Min confidence: low
2026-01-18 12:51:37 - app.main - INFO - ================================================================================
2026-01-18 12:51:37 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 12:51:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:51:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:51:37 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 12:51:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 12:51:37 - app.main - INFO -    Countries returned: 52
2026-01-18 12:51:37 - app.main - INFO - ================================================================================
2026-01-18 12:51:38 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 12:51:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 12:51:38 - app.main - INFO -    Countries returned: 52
2026-01-18 12:51:38 - app.main - INFO - ================================================================================
2026-01-18 12:52:56 - app.main - INFO - ================================================================================
2026-01-18 12:52:56 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 12:52:56 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-18 12:52:56 - app.main - INFO - ================================================================================
2026-01-18 12:52:56 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-18 12:52:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 12:52:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 74 cities in United States
2026-01-18 12:52:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-18 12:52:57 - app.main - INFO -    Cities returned: 74
2026-01-18 12:52:57 - app.main - INFO - ================================================================================
2026-01-18 13:06:17 - app.main - INFO - ================================================================================
2026-01-18 13:06:17 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 13:06:17 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-18 13:06:17 - app.main - INFO - ================================================================================
2026-01-18 13:06:17 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-18 13:06:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 13:06:20 - app.phase2.pg_geocoding - INFO - Geocoded 'KrakÃ³w, Poland' -> (50.0469432, 19.9971534)
2026-01-18 13:06:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Krakow, Poland' -> (50.0619474, 19.9368564)
2026-01-18 13:06:22 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Poland
2026-01-18 13:06:22 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Poland
2026-01-18 13:06:22 - app.main - INFO -    Cities returned: 2
2026-01-18 13:06:22 - app.main - INFO - ================================================================================
2026-01-18 13:32:21 - app.main - INFO - ================================================================================
2026-01-18 13:32:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 13:32:21 - app.main - INFO -    Country: China, Min confidence: low
2026-01-18 13:32:21 - app.main - INFO - ================================================================================
2026-01-18 13:32:21 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-18 13:32:21 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 13:32:22 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-18 13:32:22 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-18 13:32:22 - app.main - INFO -    Cities returned: 47
2026-01-18 13:32:22 - app.main - INFO - ================================================================================
2026-01-18 23:18:50 - app.main - INFO - ================================================================================
2026-01-18 23:18:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 23:18:50 - app.main - INFO -    Min confidence: low
2026-01-18 23:18:50 - app.main - INFO - ================================================================================
2026-01-18 23:18:50 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 23:18:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 23:18:52 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 23:18:52 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 23:18:52 - app.main - INFO -    Countries returned: 52
2026-01-18 23:18:52 - app.main - INFO - ================================================================================
2026-01-18 23:18:53 - app.main - INFO - ================================================================================
2026-01-18 23:18:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 23:18:53 - app.main - INFO -    Country: China, Min confidence: low
2026-01-18 23:18:53 - app.main - INFO - ================================================================================
2026-01-18 23:18:53 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-18 23:18:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 23:18:54 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-18 23:18:54 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-18 23:18:54 - app.main - INFO -    Cities returned: 47
2026-01-18 23:18:54 - app.main - INFO - ================================================================================
2026-01-18 23:51:49 - app.main - INFO - ================================================================================
2026-01-18 23:51:49 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 23:51:49 - app.main - INFO -    Min confidence: low
2026-01-18 23:51:49 - app.main - INFO - ================================================================================
2026-01-18 23:51:49 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 23:51:49 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 23:51:49 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 23:51:49 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 23:51:49 - app.main - INFO -    Countries returned: 52
2026-01-18 23:51:49 - app.main - INFO - ================================================================================
2026-01-18 23:51:50 - app.main - INFO - ================================================================================
2026-01-18 23:51:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 23:51:50 - app.main - INFO -    Country: China, Min confidence: low
2026-01-18 23:51:50 - app.main - INFO - ================================================================================
2026-01-18 23:51:50 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-18 23:51:50 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 23:51:51 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-18 23:51:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-18 23:51:51 - app.main - INFO -    Cities returned: 47
2026-01-18 23:51:51 - app.main - INFO - ================================================================================
2026-01-18 23:56:15 - app.main - INFO - ================================================================================
2026-01-18 23:56:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 23:56:15 - app.main - INFO -    Min confidence: low
2026-01-18 23:56:15 - app.main - INFO - ================================================================================
2026-01-18 23:56:15 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-18 23:56:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 23:56:16 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-18 23:56:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-18 23:56:16 - app.main - INFO -    Countries returned: 52
2026-01-18 23:56:16 - app.main - INFO - ================================================================================
2026-01-18 23:56:17 - app.main - INFO - ================================================================================
2026-01-18 23:56:17 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-18 23:56:17 - app.main - INFO -    Country: China, Min confidence: low
2026-01-18 23:56:17 - app.main - INFO - ================================================================================
2026-01-18 23:56:17 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-18 23:56:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-18 23:56:17 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-18 23:56:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-18 23:56:17 - app.main - INFO -    Cities returned: 47
2026-01-18 23:56:17 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Egypt, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Egypt (normalized: Egypt)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Serbia, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Serbia (normalized: Serbia)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Chile, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Chile (normalized: Chile)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Turkey, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Turkey (normalized: Turkey)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Hungary, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Hungary (normalized: Hungary)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Romania, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Romania (normalized: Romania)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Switzerland, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Switzerland (normalized: Switzerland)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Colombia, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Colombia (normalized: Colombia)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Brasil, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Brasil (normalized: Brasil)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: India, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Uganda, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Uganda (normalized: Uganda)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Norway, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Norway (normalized: Norway)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: the Netherlands, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for the Netherlands (normalized: the Netherlands)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Slovakia, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Slovakia (normalized: Slovakia)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Zambia, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Zambia (normalized: Zambia)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Belgium, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Belgium (normalized: Belgium)...
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Peru, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Peru (normalized: Peru)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Czech Republic, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Czech Republic (normalized: Czech Republic)...
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:24 - app.main - INFO -    Country: Kazakhstan, Min confidence: low
2026-01-19 00:58:24 - app.main - INFO - ================================================================================
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Kazakhstan (normalized: Kazakhstan)...
2026-01-19 00:58:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Greece, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Greece (normalized: Greece)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Special Administrative Region of China, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Special Administrative Region of China (normalized: Special Administrative Region of China)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Czechia, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Czechia (normalized: Czechia)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Ireland, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Ireland (normalized: Ireland)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Hong Kong, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Hong Kong (normalized: Hong Kong)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Netherlands, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Netherlands (normalized: Netherlands)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Venezuela, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Venezuela (normalized: Venezuela)...
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: TÃ¼rkiye, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for TÃ¼rkiye (normalized: TÃ¼rkiye)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: New Zealand, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for New Zealand (normalized: New Zealand)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: France, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for France (normalized: France)...
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Denmark, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Denmark (normalized: Denmark)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Brazil, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Brazil (normalized: Brazil)...
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Malaysia, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Malaysia (normalized: Malaysia)...
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:25 - app.main - INFO -    Country: Taiwan, Min confidence: low
2026-01-19 00:58:25 - app.main - INFO - ================================================================================
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Taiwan (normalized: Taiwan)...
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:25 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 74 cities in United States
2026-01-19 00:58:26 - app.main - INFO - ================================================================================
2026-01-19 00:58:26 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:26 - app.main - INFO -    Country: Mexico, Min confidence: low
2026-01-19 00:58:26 - app.main - INFO - ================================================================================
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Getting country map for Mexico (normalized: Mexico)...
2026-01-19 00:58:26 - app.main - INFO - ================================================================================
2026-01-19 00:58:26 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:26 - app.main - INFO -    Country: Sweden, Min confidence: low
2026-01-19 00:58:26 - app.main - INFO - ================================================================================
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Getting country map for Sweden (normalized: Sweden)...
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:26 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-19 00:58:26 - app.main - INFO -    Cities returned: 74
2026-01-19 00:58:26 - app.main - INFO - ================================================================================
2026-01-19 00:58:26 - app.main - INFO - ================================================================================
2026-01-19 00:58:26 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:26 - app.main - INFO -    Country: Finland, Min confidence: low
2026-01-19 00:58:26 - app.main - INFO - ================================================================================
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Getting country map for Finland (normalized: Finland)...
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 0 cities in the Netherlands
2026-01-19 00:58:26 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: the Netherlands
2026-01-19 00:58:26 - app.main - INFO -    Cities returned: 0
2026-01-19 00:58:26 - app.main - INFO - ================================================================================
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:26 - app.main - INFO - ================================================================================
2026-01-19 00:58:26 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 00:58:26 - app.main - INFO -    Country: South Korea, Min confidence: low
2026-01-19 00:58:26 - app.main - INFO - ================================================================================
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Getting country map for South Korea (normalized: South Korea)...
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:27 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:27 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:27 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:27 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:54 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Uganda): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Russia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Hong Kong): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Netherlands): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Israel): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Venezuela): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (United Kingdom): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Portugal): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (TÃ¼rkiye): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (New Zealand): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Serbia): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 67, in session
    yield session
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 881, in rollback
    self.await_(self._rollback_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 862, in _rollback_and_discard
    await self._transaction.rollback()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 231, in __aexit__
    await self.gen.athrow(value)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 70, in session
    await session.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 990, in rollback
    await greenlet_spawn(self.sync_session.rollback)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1992, in rollback
    self._transaction.rollback(_to_root=True)
  File "<string>", line 2, in rollback
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1393, in rollback
    raise rollback_err[1].with_traceback(rollback_err[2])
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1358, in rollback
    t[1].rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2619, in rollback
    self._do_rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2738, in _do_rollback
    self._close_impl(try_deactivate=True)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2721, in _close_impl
    self._connection_rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2713, in _connection_rollback_impl
    self.connection._rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1130, in _rollback_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Denmark): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Brazil): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Malaysia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Canada): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 67, in session
    yield session
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 881, in rollback
    self.await_(self._rollback_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 862, in _rollback_and_discard
    await self._transaction.rollback()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 231, in __aexit__
    await self.gen.athrow(value)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 70, in session
    await session.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 990, in rollback
    await greenlet_spawn(self.sync_session.rollback)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1992, in rollback
    self._transaction.rollback(_to_root=True)
  File "<string>", line 2, in rollback
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1393, in rollback
    raise rollback_err[1].with_traceback(rollback_err[2])
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1358, in rollback
    t[1].rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2619, in rollback
    self._do_rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2738, in _do_rollback
    self._close_impl(try_deactivate=True)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2721, in _close_impl
    self._connection_rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2713, in _connection_rollback_impl
    self.connection._rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1130, in _rollback_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Australia): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 67, in session
    yield session
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 881, in rollback
    self.await_(self._rollback_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 862, in _rollback_and_discard
    await self._transaction.rollback()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 231, in __aexit__
    await self.gen.athrow(value)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 70, in session
    await session.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 990, in rollback
    await greenlet_spawn(self.sync_session.rollback)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1992, in rollback
    self._transaction.rollback(_to_root=True)
  File "<string>", line 2, in rollback
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1393, in rollback
    raise rollback_err[1].with_traceback(rollback_err[2])
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1358, in rollback
    t[1].rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2619, in rollback
    self._do_rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2738, in _do_rollback
    self._close_impl(try_deactivate=True)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2721, in _close_impl
    self._connection_rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2713, in _connection_rollback_impl
    self.connection._rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1130, in _rollback_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:56 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Sweden): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 00:58:56 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Spain): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 67, in session
    yield session
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 881, in rollback
    self.await_(self._rollback_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 862, in _rollback_and_discard
    await self._transaction.rollback()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 231, in __aexit__
    await self.gen.athrow(value)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 70, in session
    await session.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 990, in rollback
    await greenlet_spawn(self.sync_session.rollback)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1992, in rollback
    self._transaction.rollback(_to_root=True)
  File "<string>", line 2, in rollback
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1393, in rollback
    raise rollback_err[1].with_traceback(rollback_err[2])
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1358, in rollback
    t[1].rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2619, in rollback
    self._do_rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2738, in _do_rollback
    self._close_impl(try_deactivate=True)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2721, in _close_impl
    self._connection_rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2713, in _connection_rollback_impl
    self.connection._rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1130, in _rollback_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:56 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Ireland): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 67, in session
    yield session
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 881, in rollback
    self.await_(self._rollback_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 862, in _rollback_and_discard
    await self._transaction.rollback()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 231, in __aexit__
    await self.gen.athrow(value)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 70, in session
    await session.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 990, in rollback
    await greenlet_spawn(self.sync_session.rollback)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1992, in rollback
    self._transaction.rollback(_to_root=True)
  File "<string>", line 2, in rollback
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1393, in rollback
    raise rollback_err[1].with_traceback(rollback_err[2])
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1358, in rollback
    t[1].rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2619, in rollback
    self._do_rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2738, in _do_rollback
    self._close_impl(try_deactivate=True)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2721, in _close_impl
    self._connection_rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2713, in _connection_rollback_impl
    self.connection._rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1130, in _rollback_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:56 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Turkey): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 67, in session
    yield session
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 881, in rollback
    self.await_(self._rollback_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 862, in _rollback_and_discard
    await self._transaction.rollback()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 231, in __aexit__
    await self.gen.athrow(value)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 70, in session
    await session.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 990, in rollback
    await greenlet_spawn(self.sync_session.rollback)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1992, in rollback
    self._transaction.rollback(_to_root=True)
  File "<string>", line 2, in rollback
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1393, in rollback
    raise rollback_err[1].with_traceback(rollback_err[2])
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1358, in rollback
    t[1].rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2619, in rollback
    self._do_rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2738, in _do_rollback
    self._close_impl(try_deactivate=True)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2721, in _close_impl
    self._connection_rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2713, in _connection_rollback_impl
    self.connection._rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1130, in _rollback_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:56 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Egypt
2026-01-19 00:58:56 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Egypt): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:56 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Greece): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 67, in session
    yield session
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 881, in rollback
    self.await_(self._rollback_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 862, in _rollback_and_discard
    await self._transaction.rollback()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 231, in __aexit__
    await self.gen.athrow(value)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 70, in session
    await session.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 990, in rollback
    await greenlet_spawn(self.sync_session.rollback)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1992, in rollback
    self._transaction.rollback(_to_root=True)
  File "<string>", line 2, in rollback
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1393, in rollback
    raise rollback_err[1].with_traceback(rollback_err[2])
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1358, in rollback
    t[1].rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2619, in rollback
    self._do_rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2738, in _do_rollback
    self._close_impl(try_deactivate=True)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2721, in _close_impl
    self._connection_rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2713, in _connection_rollback_impl
    self.connection._rollback_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1130, in _rollback_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1128, in _rollback_impl
    self.engine.dialect.do_rollback(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 712, in do_rollback
    dbapi_connection.rollback()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 887, in rollback
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.rollback(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:56 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Iran
2026-01-19 00:58:56 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Iran): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Austria
2026-01-19 00:58:57 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Austria): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Norway
2026-01-19 00:58:57 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Norway): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 0 cities in South Korea
2026-01-19 00:58:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: South Korea
2026-01-19 00:58:57 - app.main - INFO -    Cities returned: 0
2026-01-19 00:58:57 - app.main - INFO - ================================================================================
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Hungary
2026-01-19 00:58:57 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Hungary): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in India
2026-01-19 00:58:57 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (India): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Switzerland
2026-01-19 00:58:57 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Switzerland): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Zambia
2026-01-19 00:58:57 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Zambia): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Poland
2026-01-19 00:58:57 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Poland): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Chile
2026-01-19 00:58:57 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Chile): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Japan
2026-01-19 00:58:57 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Japan): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Mexico
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Romania
2026-01-19 00:58:57 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Romania): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Czechia
2026-01-19 00:58:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Mexico
2026-01-19 00:58:57 - app.main - INFO -    Cities returned: 1
2026-01-19 00:58:57 - app.main - INFO - ================================================================================
2026-01-19 00:58:57 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Czechia): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:58 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Finland
2026-01-19 00:58:58 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Finland
2026-01-19 00:58:58 - app.main - INFO -    Cities returned: 2
2026-01-19 00:58:58 - app.main - INFO - ================================================================================
2026-01-19 00:58:58 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 30 cities in Italy
2026-01-19 00:58:58 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Italy): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:58 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Frankfurt am Main; Cologne; JÃ¼lich, Germany' (from affiliation: Department of Neurology, University Hospital Frankfurt, Goethe University, Frankfurt am Main, Germany; Medical Faculty, University of Cologne, and Department of Neurology, University Hospital Cologne, Cologne, Germany; Cognitive Neuroscience, Institute of Neuroscience and Medicine (INM-3), Research Centre JÃ¼lich, JÃ¼lich, Germany. Electronic address: Grefkes-hermann@em.uni-frankfurt.de.)
2026-01-19 00:58:58 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Brasil
2026-01-19 00:58:58 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Brasil): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:58 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 38 cities in Germany
2026-01-19 00:58:58 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Germany): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:58:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Trujillo, Peru' -> (-8.1116778, -79.0287742)
2026-01-19 00:59:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Bratislava, Slovakia' -> (48.1559178, 17.1313541)
2026-01-19 00:59:00 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Peru
2026-01-19 00:59:00 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Peru): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:59:01 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Slovakia
2026-01-19 00:59:01 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Slovakia): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:59:01 - app.phase2.pg_geocoding - INFO - Geocoded 'ChÃ­a, Colombia' -> (4.8660334, -74.0306281)
2026-01-19 00:59:01 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Colombia
2026-01-19 00:59:01 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Colombia): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:59:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Hong Kong, Special Administrative Region of China' -> (22.3175361, 114.1798275)
2026-01-19 00:59:02 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Special Administrative Region of China
2026-01-19 00:59:02 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Special Administrative Region of China): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:59:03 - app.phase2.pg_geocoding - INFO - Geocoded 'LiÃ¨ge, Belgium' -> (50.6450944, 5.5736112)
2026-01-19 00:59:04 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Belgium
2026-01-19 00:59:04 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Belgium): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:59:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Astana, Kazakhstan' -> (51.1282205, 71.4306682)
2026-01-19 00:59:05 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Kazakhstan
2026-01-19 00:59:05 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Kazakhstan): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 00:59:05 - app.phase2.pg_geocoding - INFO - Geocoded 'CrÃ©teil, France' -> (48.7771486, 2.4530731)
2026-01-19 00:59:06 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 7 cities in France
2026-01-19 00:59:06 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: France
2026-01-19 00:59:06 - app.main - INFO -    Cities returned: 7
2026-01-19 00:59:06 - app.main - INFO - ================================================================================
2026-01-19 00:59:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Brno, Czech Republic' -> (49.1922443, 16.6113382)
2026-01-19 00:59:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Taoyuan City, Taiwan' -> (24.9929995, 121.3010003)
2026-01-19 00:59:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Klecany, Czech Republic' -> (50.1756713, 14.4117052)
2026-01-19 00:59:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Hsin-Chu, Taiwan' -> (22.55051, 120.53853)
2026-01-19 00:59:10 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Taiwan
2026-01-19 00:59:10 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Taiwan
2026-01-19 00:59:10 - app.main - INFO -    Cities returned: 5
2026-01-19 00:59:10 - app.main - INFO - ================================================================================
2026-01-19 00:59:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Ostrava, Czech Republic' -> (49.8349139, 18.2820084)
2026-01-19 00:59:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Prague, Czech Republic' -> (50.0874654, 14.4212535)
2026-01-19 00:59:12 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 4 cities in Czech Republic
2026-01-19 00:59:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Czech Republic): (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 892, in commit
    self.await_(self._commit_and_discard())
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 871, in _commit_and_discard
    await self._transaction.commit()
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 19, in _check
    self._check_conn_validity(meth.__name__)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/asyncpg/connresource.py", line 41, in _check_conn_validity
    raise exceptions.InterfaceError(
asyncpg.exceptions._base.InterfaceError: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.InterfaceError: <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 183, in get_country_map
    async with db_manager.session() as session:
               ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/contextlib.py", line 217, in __aexit__
    await anext(self.gen)
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/connection.py", line 68, in session
    await session.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1000, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2030, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1318, in commit
    trans.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2640, in commit
    self._do_commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2745, in _do_commit
    self._connection_commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2716, in _connection_commit_impl
    self.connection._commit_impl()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1147, in _commit_impl
    self._handle_dbapi_exception(e, None, None, None, None)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2363, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1145, in _commit_impl
    self.engine.dialect.do_commit(self.connection)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 715, in do_commit
    dbapi_connection.commit()
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 898, in commit
    self._handle_exception(error)
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 797, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.InterfaceError: (sqlalchemy.dialects.postgresql.asyncpg.InterfaceError) <class 'asyncpg.exceptions._base.InterfaceError'>: cannot call Transaction.commit(): the underlying connection is closed
(Background on this error at: https://sqlalche.me/e/20/rvf5)
2026-01-19 01:07:19 - app.main - INFO - ================================================================================
2026-01-19 01:07:19 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:19 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-19 01:07:19 - app.main - INFO - ================================================================================
2026-01-19 01:07:19 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-19 01:07:19 - app.main - INFO - ================================================================================
2026-01-19 01:07:19 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:19 - app.main - INFO -    Country: Brazil, Min confidence: low
2026-01-19 01:07:19 - app.main - INFO - ================================================================================
2026-01-19 01:07:19 - app.phase2.pg_aggregations - INFO -    Getting country map for Brazil (normalized: Brazil)...
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:20 - app.main - INFO -    Country: Netherlands, Min confidence: low
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.phase2.pg_aggregations - INFO -    Getting country map for Netherlands (normalized: Netherlands)...
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:20 - app.main - INFO -    Country: Belgium, Min confidence: low
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.phase2.pg_aggregations - INFO -    Getting country map for Belgium (normalized: Belgium)...
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:20 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:20 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:20 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:20 - app.main - INFO -    Country: Switzerland, Min confidence: low
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.phase2.pg_aggregations - INFO -    Getting country map for Switzerland (normalized: Switzerland)...
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:20 - app.main - INFO -    Country: Brasil, Min confidence: low
2026-01-19 01:07:20 - app.main - INFO - ================================================================================
2026-01-19 01:07:20 - app.phase2.pg_aggregations - INFO -    Getting country map for Brasil (normalized: Brasil)...
2026-01-19 01:07:21 - app.main - INFO - ================================================================================
2026-01-19 01:07:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:21 - app.main - INFO -    Country: TÃ¼rkiye, Min confidence: low
2026-01-19 01:07:21 - app.main - INFO - ================================================================================
2026-01-19 01:07:21 - app.phase2.pg_aggregations - INFO -    Getting country map for TÃ¼rkiye (normalized: TÃ¼rkiye)...
2026-01-19 01:07:21 - app.main - INFO - ================================================================================
2026-01-19 01:07:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:21 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-19 01:07:21 - app.main - INFO - ================================================================================
2026-01-19 01:07:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-19 01:07:21 - app.main - INFO - ================================================================================
2026-01-19 01:07:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:21 - app.main - INFO -    Country: Slovakia, Min confidence: low
2026-01-19 01:07:21 - app.main - INFO - ================================================================================
2026-01-19 01:07:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Slovakia (normalized: Slovakia)...
2026-01-19 01:07:21 - app.main - INFO - ================================================================================
2026-01-19 01:07:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:21 - app.main - INFO -    Country: Czechia, Min confidence: low
2026-01-19 01:07:21 - app.main - INFO - ================================================================================
2026-01-19 01:07:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Czechia (normalized: Czechia)...
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:23 - app.main - INFO -    Country: Peru, Min confidence: low
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.phase2.pg_aggregations - INFO -    Getting country map for Peru (normalized: Peru)...
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:23 - app.main - INFO -    Country: Kazakhstan, Min confidence: low
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.phase2.pg_aggregations - INFO -    Getting country map for Kazakhstan (normalized: Kazakhstan)...
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:23 - app.main - INFO -    Country: India, Min confidence: low
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:23 - app.main - INFO -    Country: Greece, Min confidence: low
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.phase2.pg_aggregations - INFO -    Getting country map for Greece (normalized: Greece)...
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:23 - app.main - INFO -    Country: New Zealand, Min confidence: low
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.phase2.pg_aggregations - INFO -    Getting country map for New Zealand (normalized: New Zealand)...
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:23 - app.main - INFO -    Country: Norway, Min confidence: low
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.phase2.pg_aggregations - INFO -    Getting country map for Norway (normalized: Norway)...
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:23 - app.main - INFO -    Country: Colombia, Min confidence: low
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.phase2.pg_aggregations - INFO -    Getting country map for Colombia (normalized: Colombia)...
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:23 - app.main - INFO -    Country: Venezuela, Min confidence: low
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.phase2.pg_aggregations - INFO -    Getting country map for Venezuela (normalized: Venezuela)...
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:23 - app.main - INFO -    Country: Malaysia, Min confidence: low
2026-01-19 01:07:23 - app.main - INFO - ================================================================================
2026-01-19 01:07:23 - app.phase2.pg_aggregations - INFO -    Getting country map for Malaysia (normalized: Malaysia)...
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Zambia, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Zambia (normalized: Zambia)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Czech Republic, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Czech Republic (normalized: Czech Republic)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Hungary, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Hungary (normalized: Hungary)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Ireland, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Ireland (normalized: Ireland)...
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Special Administrative Region of China, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Special Administrative Region of China (normalized: Special Administrative Region of China)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Chile, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Chile (normalized: Chile)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Egypt, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Egypt (normalized: Egypt)...
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Turkey, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Turkey (normalized: Turkey)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Romania, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Romania (normalized: Romania)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Hong Kong, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Hong Kong (normalized: Hong Kong)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Sweden, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Sweden (normalized: Sweden)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Serbia, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Serbia (normalized: Serbia)...
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:24 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-19 01:07:24 - app.main - INFO - ================================================================================
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-19 01:07:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.main - INFO - ================================================================================
2026-01-19 01:07:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:25 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-19 01:07:25 - app.main - INFO - ================================================================================
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-19 01:07:25 - app.main - INFO - ================================================================================
2026-01-19 01:07:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:25 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-19 01:07:25 - app.main - INFO - ================================================================================
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.main - INFO - ================================================================================
2026-01-19 01:07:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:25 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-19 01:07:25 - app.main - INFO - ================================================================================
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.main - INFO - ================================================================================
2026-01-19 01:07:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:25 - app.main - INFO -    Country: Uganda, Min confidence: low
2026-01-19 01:07:25 - app.main - INFO - ================================================================================
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Uganda (normalized: Uganda)...
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.main - INFO - ================================================================================
2026-01-19 01:07:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:25 - app.main - INFO -    Country: Denmark, Min confidence: low
2026-01-19 01:07:25 - app.main - INFO - ================================================================================
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Getting country map for Denmark (normalized: Denmark)...
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:25 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:27 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:53 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Venezuela): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:54 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Egypt): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:54 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Turkey): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:54 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Romania): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:54 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Hong Kong): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:54 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Austria): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:54 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Sweden): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:54 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Serbia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:54 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Portugal): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Russia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Brazil): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Germany): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Poland): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:55 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:55 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Uganda): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:07:55 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Switzerland
2026-01-19 01:07:55 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Switzerland
2026-01-19 01:07:55 - app.main - INFO -    Cities returned: 8
2026-01-19 01:07:55 - app.main - INFO - ================================================================================
2026-01-19 01:07:55 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:55 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Brasil
2026-01-19 01:07:55 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brasil
2026-01-19 01:07:55 - app.main - INFO -    Cities returned: 1
2026-01-19 01:07:55 - app.main - INFO - ================================================================================
2026-01-19 01:07:56 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in TÃ¼rkiye
2026-01-19 01:07:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: TÃ¼rkiye
2026-01-19 01:07:56 - app.main - INFO -    Cities returned: 1
2026-01-19 01:07:56 - app.main - INFO - ================================================================================
2026-01-19 01:07:56 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Peru
2026-01-19 01:07:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Peru
2026-01-19 01:07:56 - app.main - INFO -    Cities returned: 2
2026-01-19 01:07:56 - app.main - INFO - ================================================================================
2026-01-19 01:07:56 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Colombia
2026-01-19 01:07:56 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Belgium
2026-01-19 01:07:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Colombia
2026-01-19 01:07:56 - app.main - INFO -    Cities returned: 1
2026-01-19 01:07:56 - app.main - INFO - ================================================================================
2026-01-19 01:07:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Belgium
2026-01-19 01:07:56 - app.main - INFO -    Cities returned: 6
2026-01-19 01:07:56 - app.main - INFO - ================================================================================
2026-01-19 01:07:56 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 18 cities in Australia
2026-01-19 01:07:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-19 01:07:56 - app.main - INFO -    Cities returned: 18
2026-01-19 01:07:56 - app.main - INFO - ================================================================================
2026-01-19 01:07:56 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Slovakia
2026-01-19 01:07:56 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Iran
2026-01-19 01:07:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Slovakia
2026-01-19 01:07:56 - app.main - INFO -    Cities returned: 1
2026-01-19 01:07:56 - app.main - INFO - ================================================================================
2026-01-19 01:07:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Iran
2026-01-19 01:07:56 - app.main - INFO -    Cities returned: 5
2026-01-19 01:07:56 - app.main - INFO - ================================================================================
2026-01-19 01:07:56 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Special Administrative Region of China
2026-01-19 01:07:56 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 4 cities in Czech Republic
2026-01-19 01:07:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Special Administrative Region of China
2026-01-19 01:07:56 - app.main - INFO -    Cities returned: 1
2026-01-19 01:07:56 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Czech Republic
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 4
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Kazakhstan
2026-01-19 01:07:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Norway
2026-01-19 01:07:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Ireland
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Kazakhstan
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 1
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Zambia
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Norway
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 1
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Ireland
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 1
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Hungary
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Zambia
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 2
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Japan
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hungary
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 2
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 6
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in India
2026-01-19 01:07:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Spain
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 5
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 13 cities in United Kingdom
2026-01-19 01:07:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Czechia
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Spain
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 11
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United Kingdom
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 13
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Chile
2026-01-19 01:07:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Canada
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Czechia
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 1
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Canada
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 11
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Chile
2026-01-19 01:07:57 - app.main - INFO -    Cities returned: 1
2026-01-19 01:07:57 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Heemstede, Netherlands' -> (52.3528406, 4.6217323)
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:58 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:58 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:58 - app.main - INFO -    Country: New Zealand, Min confidence: low
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.phase2.pg_aggregations - INFO -    Getting country map for New Zealand (normalized: New Zealand)...
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:58 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:58 - app.main - INFO -    Country: Czech Republic, Min confidence: low
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.phase2.pg_aggregations - INFO -    Getting country map for Czech Republic (normalized: Czech Republic)...
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:58 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:58 - app.main - INFO -    Country: Netherlands, Min confidence: low
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.phase2.pg_aggregations - INFO -    Getting country map for Netherlands (normalized: Netherlands)...
2026-01-19 01:07:58 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 30 cities in Italy
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:58 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:58 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-19 01:07:58 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-19 01:07:58 - app.main - INFO -    Cities returned: 30
2026-01-19 01:07:58 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Kuala Lumpur, Malaysia' -> (3.1526589, 101.7022205)
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Switzerland, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Switzerland (normalized: Switzerland)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Denmark
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: India, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Brazil, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Brazil (normalized: Brazil)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Denmark, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Denmark (normalized: Denmark)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Belgium, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Belgium (normalized: Belgium)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-19 01:07:59 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Denmark
2026-01-19 01:07:59 - app.main - INFO -    Cities returned: 6
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Chile, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Chile (normalized: Chile)...
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Turkey, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Turkey (normalized: Turkey)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Hungary, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Hungary (normalized: Hungary)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Venezuela, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Venezuela (normalized: Venezuela)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Zambia, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Zambia (normalized: Zambia)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Sweden, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Sweden (normalized: Sweden)...
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:07:59 - app.main - INFO -    Country: Slovakia, Min confidence: low
2026-01-19 01:07:59 - app.main - INFO - ================================================================================
2026-01-19 01:07:59 - app.phase2.pg_aggregations - INFO -    Getting country map for Slovakia (normalized: Slovakia)...
2026-01-19 01:08:00 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Beer-Yaacov, Israel' (from affiliation: QuantalX Neuroscience, Beer-Yaacov, Israel.)
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Egypt, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Egypt (normalized: Egypt)...
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Colombia, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Colombia (normalized: Colombia)...
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Greece, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Greece (normalized: Greece)...
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Romania, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Romania (normalized: Romania)...
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Norway, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Norway (normalized: Norway)...
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: TÃ¼rkiye, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for TÃ¼rkiye (normalized: TÃ¼rkiye)...
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Czechia, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Czechia (normalized: Czechia)...
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Peru, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Peru (normalized: Peru)...
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Serbia, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Serbia (normalized: Serbia)...
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Kazakhstan, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Kazakhstan (normalized: Kazakhstan)...
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Ireland, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Ireland (normalized: Ireland)...
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Hong Kong, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Hong Kong (normalized: Hong Kong)...
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Malaysia
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Japan
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Brasil, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Brasil (normalized: Brasil)...
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Malaysia, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Malaysia (normalized: Malaysia)...
2026-01-19 01:08:00 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Malaysia
2026-01-19 01:08:00 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Uganda, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Uganda (normalized: Uganda)...
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-19 01:08:00 - app.main - INFO -    Cities returned: 6
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:00 - app.main - INFO -    Country: Special Administrative Region of China, Min confidence: low
2026-01-19 01:08:00 - app.main - INFO - ================================================================================
2026-01-19 01:08:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Special Administrative Region of China (normalized: Special Administrative Region of China)...
2026-01-19 01:08:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Thessaloniki, Greece' -> (40.6403167, 22.9352716)
2026-01-19 01:08:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Amersfoort, Netherlands' -> (52.1562499, 5.3896944)
2026-01-19 01:08:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Dunedin, New Zealand' -> (-45.8740984, 170.5035755)
2026-01-19 01:08:03 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Zerifin, Israel' (from affiliation: Sagol Center for Hyperbaric Medicine and Research, Shamir Medical Center, Zerifin, Israel.)
2026-01-19 01:08:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Kozani, Greece' -> (40.3007259, 21.7883119)
2026-01-19 01:08:29 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Iran): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Egypt): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Colombia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Greece): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Romania): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Norway): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (TÃ¼rkiye): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Czechia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Peru): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Czech Republic): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Serbia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Kazakhstan): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Ireland): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Hong Kong): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Brasil): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Malaysia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Uganda): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Italy): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Portugal): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Netherlands): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (United Kingdom): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:30 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (India): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1176, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Switzerland
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Austria
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Russia
2026-01-19 01:08:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Switzerland
2026-01-19 01:08:31 - app.main - INFO -    Cities returned: 8
2026-01-19 01:08:31 - app.main - INFO - ================================================================================
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Denmark
2026-01-19 01:08:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Austria
2026-01-19 01:08:31 - app.main - INFO -    Cities returned: 5
2026-01-19 01:08:31 - app.main - INFO - ================================================================================
2026-01-19 01:08:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Russia
2026-01-19 01:08:31 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:31 - app.main - INFO - ================================================================================
2026-01-19 01:08:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Denmark
2026-01-19 01:08:31 - app.main - INFO -    Cities returned: 6
2026-01-19 01:08:31 - app.main - INFO - ================================================================================
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Poland
2026-01-19 01:08:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Poland
2026-01-19 01:08:31 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:31 - app.main - INFO - ================================================================================
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Belgium
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 18 cities in Australia
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Zambia
2026-01-19 01:08:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Belgium
2026-01-19 01:08:31 - app.main - INFO -    Cities returned: 6
2026-01-19 01:08:31 - app.main - INFO - ================================================================================
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Spain
2026-01-19 01:08:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-19 01:08:31 - app.main - INFO -    Cities returned: 18
2026-01-19 01:08:31 - app.main - INFO - ================================================================================
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Hungary
2026-01-19 01:08:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Zambia
2026-01-19 01:08:31 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:31 - app.main - INFO - ================================================================================
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Slovakia
2026-01-19 01:08:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Spain
2026-01-19 01:08:31 - app.main - INFO -    Cities returned: 11
2026-01-19 01:08:31 - app.main - INFO - ================================================================================
2026-01-19 01:08:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hungary
2026-01-19 01:08:31 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:31 - app.main - INFO - ================================================================================
2026-01-19 01:08:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Slovakia
2026-01-19 01:08:31 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:31 - app.main - INFO - ================================================================================
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Sweden
2026-01-19 01:08:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Chile
2026-01-19 01:08:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Sweden
2026-01-19 01:08:32 - app.main - INFO -    Cities returned: 3
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Chile
2026-01-19 01:08:32 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Canada
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 15 cities in Israel
2026-01-19 01:08:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Canada
2026-01-19 01:08:32 - app.main - INFO -    Cities returned: 11
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Israel
2026-01-19 01:08:32 - app.main - INFO -    Cities returned: 15
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in New Zealand
2026-01-19 01:08:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: New Zealand
2026-01-19 01:08:32 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Greece
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 9 cities in Netherlands
2026-01-19 01:08:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Greece
2026-01-19 01:08:32 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Netherlands
2026-01-19 01:08:32 - app.main - INFO -    Cities returned: 9
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-19 01:08:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Dunedin, New Zealand' -> (-45.8740984, 170.5035755)
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Netherlands, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Netherlands (normalized: Netherlands)...
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Special Administrative Region of China
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Turkey, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Turkey (normalized: Turkey)...
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Brazil, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Brazil (normalized: Brazil)...
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-19 01:08:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Special Administrative Region of China
2026-01-19 01:08:32 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: New Zealand, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for New Zealand (normalized: New Zealand)...
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Greece, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Greece (normalized: Greece)...
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Sweden, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Sweden (normalized: Sweden)...
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Uganda, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Uganda (normalized: Uganda)...
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Hong Kong, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Hong Kong (normalized: Hong Kong)...
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Serbia, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Serbia (normalized: Serbia)...
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Romania, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Romania (normalized: Romania)...
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Venezuela, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Venezuela (normalized: Venezuela)...
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:32 - app.main - INFO -    Country: Egypt, Min confidence: low
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Egypt (normalized: Egypt)...
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in New Zealand
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: New Zealand
2026-01-19 01:08:32 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:32 - app.main - INFO - ================================================================================
2026-01-19 01:08:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Russia
2026-01-19 01:08:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Russia
2026-01-19 01:08:33 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:33 - app.main - INFO - ================================================================================
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Portugal
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 9 cities in Netherlands
2026-01-19 01:08:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Portugal
2026-01-19 01:08:33 - app.main - INFO -    Cities returned: 5
2026-01-19 01:08:33 - app.main - INFO - ================================================================================
2026-01-19 01:08:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Netherlands
2026-01-19 01:08:33 - app.main - INFO -    Cities returned: 9
2026-01-19 01:08:33 - app.main - INFO - ================================================================================
2026-01-19 01:08:33 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Austria
2026-01-19 01:08:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Austria
2026-01-19 01:08:34 - app.main - INFO -    Cities returned: 5
2026-01-19 01:08:34 - app.main - INFO - ================================================================================
2026-01-19 01:08:34 - app.main - INFO - ================================================================================
2026-01-19 01:08:34 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:34 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-19 01:08:34 - app.main - INFO - ================================================================================
2026-01-19 01:08:34 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-19 01:08:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Greece
2026-01-19 01:08:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Sweden
2026-01-19 01:08:34 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Frankfurt am Main; Cologne; JÃ¼lich, Germany' (from affiliation: Department of Neurology, University Hospital Frankfurt, Goethe University, Frankfurt am Main, Germany; Medical Faculty, University of Cologne, and Department of Neurology, University Hospital Cologne, Cologne, Germany; Cognitive Neuroscience, Institute of Neuroscience and Medicine (INM-3), Research Centre JÃ¼lich, JÃ¼lich, Germany. Electronic address: Grefkes-hermann@em.uni-frankfurt.de.)
2026-01-19 01:08:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Greece
2026-01-19 01:08:34 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:34 - app.main - INFO - ================================================================================
2026-01-19 01:08:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Sweden
2026-01-19 01:08:34 - app.main - INFO -    Cities returned: 3
2026-01-19 01:08:34 - app.main - INFO - ================================================================================
2026-01-19 01:08:34 - app.main - INFO - ================================================================================
2026-01-19 01:08:34 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:34 - app.main - INFO -    Country: Netherlands, Min confidence: low
2026-01-19 01:08:34 - app.main - INFO - ================================================================================
2026-01-19 01:08:34 - app.phase2.pg_aggregations - INFO -    Getting country map for Netherlands (normalized: Netherlands)...
2026-01-19 01:08:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in New Zealand
2026-01-19 01:08:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: New Zealand
2026-01-19 01:08:34 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:34 - app.main - INFO - ================================================================================
2026-01-19 01:08:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Serbia
2026-01-19 01:08:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Serbia
2026-01-19 01:08:34 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:34 - app.main - INFO - ================================================================================
2026-01-19 01:08:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Poland
2026-01-19 01:08:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Uganda
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Romania
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-19 01:08:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Poland
2026-01-19 01:08:35 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Brazil, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Brazil (normalized: Brazil)...
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Egypt
2026-01-19 01:08:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Uganda
2026-01-19 01:08:35 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Romania
2026-01-19 01:08:35 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Turkey, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Turkey (normalized: Turkey)...
2026-01-19 01:08:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Egypt
2026-01-19 01:08:35 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Beer-Yaacov, Israel' (from affiliation: QuantalX Neuroscience, Beer-Yaacov, Israel.)
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Serbia, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Serbia (normalized: Serbia)...
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Uganda, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Uganda (normalized: Uganda)...
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: New Zealand, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for New Zealand (normalized: New Zealand)...
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Romania, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Romania (normalized: Romania)...
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Venezuela, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Venezuela (normalized: Venezuela)...
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Hong Kong, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Hong Kong (normalized: Hong Kong)...
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Sweden, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Sweden (normalized: Sweden)...
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Caracas, Venezuela' -> (10.5060934, -66.9146008)
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 38 cities in Germany
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Egypt, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Egypt (normalized: Egypt)...
2026-01-19 01:08:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-19 01:08:35 - app.main - INFO -    Cities returned: 38
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 01:08:35 - app.main - INFO -    Country: Greece, Min confidence: low
2026-01-19 01:08:35 - app.main - INFO - ================================================================================
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Greece (normalized: Greece)...
2026-01-19 01:08:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:36 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Serbia
2026-01-19 01:08:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Serbia
2026-01-19 01:08:36 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:36 - app.main - INFO - ================================================================================
2026-01-19 01:08:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:36 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Venezuela
2026-01-19 01:08:36 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Austria
2026-01-19 01:08:36 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 9 cities in Netherlands
2026-01-19 01:08:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Venezuela
2026-01-19 01:08:36 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:36 - app.main - INFO - ================================================================================
2026-01-19 01:08:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Istanbul, Turkey' -> (41.006381, 28.9758715)
2026-01-19 01:08:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Netherlands
2026-01-19 01:08:36 - app.main - INFO -    Cities returned: 9
2026-01-19 01:08:36 - app.main - INFO - ================================================================================
2026-01-19 01:08:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Austria
2026-01-19 01:08:36 - app.main - INFO -    Cities returned: 5
2026-01-19 01:08:36 - app.main - INFO - ================================================================================
2026-01-19 01:08:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 01:08:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Uganda
2026-01-19 01:08:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Poland
2026-01-19 01:08:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Uganda
2026-01-19 01:08:37 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:37 - app.main - INFO - ================================================================================
2026-01-19 01:08:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Romania
2026-01-19 01:08:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Poland
2026-01-19 01:08:37 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:37 - app.main - INFO - ================================================================================
2026-01-19 01:08:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Romania
2026-01-19 01:08:37 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:37 - app.main - INFO - ================================================================================
2026-01-19 01:08:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Portugal
2026-01-19 01:08:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Portugal
2026-01-19 01:08:37 - app.main - INFO -    Cities returned: 5
2026-01-19 01:08:37 - app.main - INFO - ================================================================================
2026-01-19 01:08:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in New Zealand
2026-01-19 01:08:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: New Zealand
2026-01-19 01:08:37 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:37 - app.main - INFO - ================================================================================
2026-01-19 01:08:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Venezuela
2026-01-19 01:08:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Russia
2026-01-19 01:08:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Venezuela
2026-01-19 01:08:37 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:37 - app.main - INFO - ================================================================================
2026-01-19 01:08:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Egypt
2026-01-19 01:08:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Sweden
2026-01-19 01:08:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Recife, Brazil' -> (-8.0584933, -34.8848193)
2026-01-19 01:08:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Russia
2026-01-19 01:08:37 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:37 - app.main - INFO - ================================================================================
2026-01-19 01:08:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Greece
2026-01-19 01:08:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Sweden
2026-01-19 01:08:37 - app.main - INFO -    Cities returned: 3
2026-01-19 01:08:37 - app.main - INFO - ================================================================================
2026-01-19 01:08:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Egypt
2026-01-19 01:08:37 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:37 - app.main - INFO - ================================================================================
2026-01-19 01:08:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Greece
2026-01-19 01:08:37 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:37 - app.main - INFO - ================================================================================
2026-01-19 01:08:38 - geopy - INFO - Received an HTTP error (429): <html>
<head>
<title>Bandwidth limit exceeded</title>
</head>
<body>
<h1>Bandwidth limit exceeded</h1>

<p>You have been temporarily blocked because you have been overusing OSM's geocoding service or because you have not provided sufficient identification of your application. This block will be automatically lifted after a while. Please take the time and adapt your scripts to reduce the number of requests and make sure that you send a valid UserAgent or Referer.</p>

<p>For more information, consult the <a href="https://operations.osmfoundation.org/policies/nominatim/">usage policy</a> for the OSM Nominatim server.</p>
</body>
</html>

2026-01-19 01:08:38 - app.phase2.pg_geocoding - ERROR - Geocoding failed for 'Brazil, SÃ£o JosÃ© dos Campos' (from affiliation: Institute of Science and Technology, Federal University of SÃ£o Paulo, SÃ£o JosÃ© dos Campos 12231-280, Brazil.): Non-successful status code 429
2026-01-19 01:08:38 - geopy - INFO - Received an HTTP error (429): <html>
<head>
<title>Bandwidth limit exceeded</title>
</head>
<body>
<h1>Bandwidth limit exceeded</h1>

<p>You have been temporarily blocked because you have been overusing OSM's geocoding service or because you have not provided sufficient identification of your application. This block will be automatically lifted after a while. Please take the time and adapt your scripts to reduce the number of requests and make sure that you send a valid UserAgent or Referer.</p>

<p>For more information, consult the <a href="https://operations.osmfoundation.org/policies/nominatim/">usage policy</a> for the OSM Nominatim server.</p>
</body>
</html>

2026-01-19 01:08:38 - app.phase2.pg_geocoding - ERROR - Geocoding failed for 'Hong Kong, Hung Hom' (from affiliation: Department of Rehabilitation Sciences, The Hong Kong Polytechnic University, Hung Hom, Kowloon, Hong Kong; Mental Health Research Centre, The Hong Kong Polytechnic University, Hung Hom, Kowloon, Hong Kong.): Non-successful status code 429
2026-01-19 01:08:38 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Frankfurt am Main; Cologne; JÃ¼lich, Germany' (from affiliation: Department of Neurology, University Hospital Frankfurt, Goethe University, Frankfurt am Main, Germany; Medical Faculty, University of Cologne, and Department of Neurology, University Hospital Cologne, Cologne, Germany; Cognitive Neuroscience, Institute of Neuroscience and Medicine (INM-3), Research Centre JÃ¼lich, JÃ¼lich, Germany. Electronic address: Grefkes-hermann@em.uni-frankfurt.de.)
2026-01-19 01:08:38 - geopy - INFO - Received an HTTP error (429): <html>
<head>
<title>Bandwidth limit exceeded</title>
</head>
<body>
<h1>Bandwidth limit exceeded</h1>

<p>You have been temporarily blocked because you have been overusing OSM's geocoding service or because you have not provided sufficient identification of your application. This block will be automatically lifted after a while. Please take the time and adapt your scripts to reduce the number of requests and make sure that you send a valid UserAgent or Referer.</p>

<p>For more information, consult the <a href="https://operations.osmfoundation.org/policies/nominatim/">usage policy</a> for the OSM Nominatim server.</p>
</body>
</html>

2026-01-19 01:08:38 - app.phase2.pg_geocoding - ERROR - Geocoding failed for 'Brazil, Recife' (from affiliation: Applied Neuroscience Laboratory, Universidade Federal de Pernambuco, Recife, Brazil.): Non-successful status code 429
2026-01-19 01:08:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Hong Kong
2026-01-19 01:08:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 38 cities in Germany
2026-01-19 01:08:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hong Kong
2026-01-19 01:08:38 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:38 - app.main - INFO - ================================================================================
2026-01-19 01:08:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-19 01:08:38 - app.main - INFO -    Cities returned: 38
2026-01-19 01:08:38 - app.main - INFO - ================================================================================
2026-01-19 01:08:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Istanbul, Turkey' -> (41.006381, 28.9758715)
2026-01-19 01:08:39 - geopy - INFO - Received an HTTP error (429): <html>
<head>
<title>Bandwidth limit exceeded</title>
</head>
<body>
<h1>Bandwidth limit exceeded</h1>

<p>You have been temporarily blocked because you have been overusing OSM's geocoding service or because you have not provided sufficient identification of your application. This block will be automatically lifted after a while. Please take the time and adapt your scripts to reduce the number of requests and make sure that you send a valid UserAgent or Referer.</p>

<p>For more information, consult the <a href="https://operations.osmfoundation.org/policies/nominatim/">usage policy</a> for the OSM Nominatim server.</p>
</body>
</html>

2026-01-19 01:08:39 - app.phase2.pg_geocoding - ERROR - Geocoding failed for 'Brazil, SÃ£o JosÃ© dos Campos' (from affiliation: Institute of Science and Technology, Federal University of SÃ£o Paulo, SÃ£o JosÃ© dos Campos 12231-280, Brazil.): Non-successful status code 429
2026-01-19 01:08:40 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Beer-Yaacov, Israel' (from affiliation: QuantalX Neuroscience, Beer-Yaacov, Israel.)
2026-01-19 01:08:40 - geopy - INFO - Received an HTTP error (429): <html>
<head>
<title>Bandwidth limit exceeded</title>
</head>
<body>
<h1>Bandwidth limit exceeded</h1>

<p>You have been temporarily blocked because you have been overusing OSM's geocoding service or because you have not provided sufficient identification of your application. This block will be automatically lifted after a while. Please take the time and adapt your scripts to reduce the number of requests and make sure that you send a valid UserAgent or Referer.</p>

<p>For more information, consult the <a href="https://operations.osmfoundation.org/policies/nominatim/">usage policy</a> for the OSM Nominatim server.</p>
</body>
</html>

2026-01-19 01:08:40 - app.phase2.pg_geocoding - ERROR - Geocoding failed for 'Brazil, Natal' (from affiliation: Department of Physical Education, Universidade Federal do Rio Grande do Norte, Natal, Brazil.): Non-successful status code 429
2026-01-19 01:08:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Hung Hom, Hong Kong' -> (22.3068983, 114.1863163)
2026-01-19 01:08:41 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Hong Kong
2026-01-19 01:08:42 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hong Kong
2026-01-19 01:08:42 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:42 - app.main - INFO - ================================================================================
2026-01-19 01:08:42 - geopy - INFO - Received an HTTP error (429): <html>
<head>
<title>Bandwidth limit exceeded</title>
</head>
<body>
<h1>Bandwidth limit exceeded</h1>

<p>You have been temporarily blocked because you have been overusing OSM's geocoding service or because you have not provided sufficient identification of your application. This block will be automatically lifted after a while. Please take the time and adapt your scripts to reduce the number of requests and make sure that you send a valid UserAgent or Referer.</p>

<p>For more information, consult the <a href="https://operations.osmfoundation.org/policies/nominatim/">usage policy</a> for the OSM Nominatim server.</p>
</body>
</html>

2026-01-19 01:08:42 - app.phase2.pg_geocoding - ERROR - Geocoding failed for 'Brazil, JoÃ£o Pessoa' (from affiliation: Aging and Neuroscience Laboratory, Universidade Federal da ParaÃ­ba, JoÃ£o Pessoa, Brazil.): Non-successful status code 429
2026-01-19 01:08:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Recife, Brazil' -> (-8.0584933, -34.8848193)
2026-01-19 01:08:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Caracas, Venezuela' -> (10.5060934, -66.9146008)
2026-01-19 01:08:43 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Venezuela
2026-01-19 01:08:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Venezuela
2026-01-19 01:08:43 - app.main - INFO -    Cities returned: 1
2026-01-19 01:08:43 - app.main - INFO - ================================================================================
2026-01-19 01:08:44 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Zerifin, Israel' (from affiliation: Sagol Center for Hyperbaric Medicine and Research, Shamir Medical Center, Zerifin, Israel.)
2026-01-19 01:08:44 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 15 cities in Israel
2026-01-19 01:08:44 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Israel
2026-01-19 01:08:44 - app.main - INFO -    Cities returned: 15
2026-01-19 01:08:44 - app.main - INFO - ================================================================================
2026-01-19 01:08:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Ä°zmir, Turkey' -> (38.4192537, 27.128469)
2026-01-19 01:08:45 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Turkey
2026-01-19 01:08:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Turkey
2026-01-19 01:08:46 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:46 - app.main - INFO - ================================================================================
2026-01-19 01:08:46 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Beer-Yaacov, Israel' (from affiliation: QuantalX Neuroscience, Beer-Yaacov, Israel.)
2026-01-19 01:08:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Istanbul, Turkey' -> (41.006381, 28.9758715)
2026-01-19 01:08:48 - urllib3.connectionpool - WARNING - Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ReadTimeoutError("HTTPSConnectionPool(host='nominatim.openstreetmap.org', port=443): Read timed out. (read timeout=10)")': /search?q=Frankfurt+am+Main%3B+Cologne%3B+J%C3%BClich%2C+Germany&format=json&limit=1
2026-01-19 01:08:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Natal, Brazil' -> (-5.805398, -35.2080905)
2026-01-19 01:08:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Ä°zmir, Turkey' -> (38.4192537, 27.128469)
2026-01-19 01:08:50 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Turkey
2026-01-19 01:08:50 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Turkey
2026-01-19 01:08:50 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:50 - app.main - INFO - ================================================================================
2026-01-19 01:08:51 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Zerifin, Israel' (from affiliation: Sagol Center for Hyperbaric Medicine and Research, Shamir Medical Center, Zerifin, Israel.)
2026-01-19 01:08:51 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 15 cities in Israel
2026-01-19 01:08:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Israel
2026-01-19 01:08:51 - app.main - INFO -    Cities returned: 15
2026-01-19 01:08:51 - app.main - INFO - ================================================================================
2026-01-19 01:08:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Salvador, Brazil' -> (-12.9822499, -38.4812772)
2026-01-19 01:08:53 - app.phase2.pg_geocoding - INFO - Geocoded 'SÃ£o JosÃ© dos Campos, Brazil' -> (-23.1867782, -45.8854538)
2026-01-19 01:08:54 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Zerifin, Israel' (from affiliation: Sagol Center for Hyperbaric Medicine and Research, Shamir Medical Center, Zerifin, Israel.)
2026-01-19 01:08:54 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 15 cities in Israel
2026-01-19 01:08:54 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Israel
2026-01-19 01:08:54 - app.main - INFO -    Cities returned: 15
2026-01-19 01:08:54 - app.main - INFO - ================================================================================
2026-01-19 01:08:55 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Frankfurt am Main; Cologne; JÃ¼lich, Germany' (from affiliation: Department of Neurology, University Hospital Frankfurt, Goethe University, Frankfurt am Main, Germany; Medical Faculty, University of Cologne, and Department of Neurology, University Hospital Cologne, Cologne, Germany; Cognitive Neuroscience, Institute of Neuroscience and Medicine (INM-3), Research Centre JÃ¼lich, JÃ¼lich, Germany. Electronic address: Grefkes-hermann@em.uni-frankfurt.de.)
2026-01-19 01:08:55 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 38 cities in Germany
2026-01-19 01:08:55 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-19 01:08:55 - app.main - INFO -    Cities returned: 38
2026-01-19 01:08:55 - app.main - INFO - ================================================================================
2026-01-19 01:08:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Ä°zmir, Turkey' -> (38.4192537, 27.128469)
2026-01-19 01:08:56 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Turkey
2026-01-19 01:08:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Turkey
2026-01-19 01:08:56 - app.main - INFO -    Cities returned: 2
2026-01-19 01:08:56 - app.main - INFO - ================================================================================
2026-01-19 01:08:57 - app.phase2.pg_geocoding - INFO - Geocoded 'JoÃ£o Pessoa, Brazil' -> (-7.1215981, -34.882028)
2026-01-19 01:08:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Aracaju, Brazil' -> (-10.9162061, -37.0774655)
2026-01-19 01:09:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Salvador, Brazil' -> (-12.9822499, -38.4812772)
2026-01-19 01:09:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Natal, Brazil' -> (-5.805398, -35.2080905)
2026-01-19 01:09:01 - app.phase2.pg_geocoding - INFO - Geocoded 'SÃ£o LuÃ­s, Brazil' -> (-2.5295265, -44.2963942)
2026-01-19 01:09:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Aracaju, Brazil' -> (-10.9162061, -37.0774655)
2026-01-19 01:09:03 - app.phase2.pg_geocoding - INFO - Geocoded 'JoÃ£o Pessoa, Brazil' -> (-7.1215981, -34.882028)
2026-01-19 01:09:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Imperatriz, Brazil' -> (-5.5269279, -47.478115)
2026-01-19 01:09:05 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Brazil
2026-01-19 01:09:05 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brazil
2026-01-19 01:09:05 - app.main - INFO -    Cities returned: 11
2026-01-19 01:09:05 - app.main - INFO - ================================================================================
2026-01-19 01:09:05 - app.phase2.pg_geocoding - INFO - Geocoded 'SÃ£o LuÃ­s, Brazil' -> (-2.5295265, -44.2963942)
2026-01-19 01:09:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Salvador, Brazil' -> (-12.9822499, -38.4812772)
2026-01-19 01:09:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Imperatriz, Brazil' -> (-5.5269279, -47.478115)
2026-01-19 01:09:07 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Brazil
2026-01-19 01:09:08 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brazil
2026-01-19 01:09:08 - app.main - INFO -    Cities returned: 11
2026-01-19 01:09:08 - app.main - INFO - ================================================================================
2026-01-19 01:09:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Aracaju, Brazil' -> (-10.9162061, -37.0774655)
2026-01-19 01:09:09 - app.phase2.pg_geocoding - INFO - Geocoded 'SÃ£o LuÃ­s, Brazil' -> (-2.5295265, -44.2963942)
2026-01-19 01:09:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Imperatriz, Brazil' -> (-5.5269279, -47.478115)
2026-01-19 01:09:11 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Brazil
2026-01-19 01:09:11 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brazil
2026-01-19 01:09:11 - app.main - INFO -    Cities returned: 11
2026-01-19 01:09:11 - app.main - INFO - ================================================================================
2026-01-19 01:09:54 - root - INFO - ================================================================================
2026-01-19 01:09:54 - root - INFO - Logging initialized - output to console and log.txt
2026-01-19 01:09:54 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-19 01:09:54 - root - INFO - ================================================================================
2026-01-19 07:42:05 - root - INFO - ================================================================================
2026-01-19 07:42:05 - root - INFO - Logging initialized - output to console and log.txt
2026-01-19 07:42:05 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-19 07:42:05 - root - INFO - ================================================================================
2026-01-19 09:35:13 - root - INFO - ================================================================================
2026-01-19 09:35:13 - root - INFO - Logging initialized - output to console and log.txt
2026-01-19 09:35:13 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-19 09:35:13 - root - INFO - ================================================================================
2026-01-19 09:39:08 - root - INFO - ================================================================================
2026-01-19 09:39:08 - root - INFO - Logging initialized - output to console and log.txt
2026-01-19 09:39:08 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-19 09:39:08 - root - INFO - ================================================================================
2026-01-19 09:40:06 - app.main - INFO - ðŸ‘¥ ADMIN: Fetching online user count
2026-01-19 09:40:06 - app.main - INFO - âœ… ADMIN: Online users: 1
2026-01-19 09:42:45 - app.main - INFO - ================================================================================
2026-01-19 09:42:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 09:42:45 - app.main - INFO -    Min confidence: low
2026-01-19 09:42:45 - app.main - INFO - ================================================================================
2026-01-19 09:42:45 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-19 09:42:45 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 09:42:45 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-19 09:42:45 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-19 09:42:45 - app.main - INFO -    Countries returned: 52
2026-01-19 09:42:45 - app.main - INFO - ================================================================================
2026-01-19 11:27:01 - app.main - INFO - ================================================================================
2026-01-19 11:27:01 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:01 - app.main - INFO -    Min confidence: low
2026-01-19 11:27:01 - app.main - INFO - ================================================================================
2026-01-19 11:27:01 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-19 11:27:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:02 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-19 11:27:02 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-19 11:27:02 - app.main - INFO -    Countries returned: 52
2026-01-19 11:27:02 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:05 - app.main - INFO -    Country: Serbia, Min confidence: low
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.phase2.pg_aggregations - INFO -    Getting country map for Serbia (normalized: Serbia)...
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:05 - app.main - INFO -    Country: South Korea, Min confidence: low
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.phase2.pg_aggregations - INFO -    Getting country map for South Korea (normalized: South Korea)...
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:05 - app.main - INFO -    Country: India, Min confidence: low
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:05 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:05 - app.main - INFO -    Country: Egypt, Min confidence: low
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.phase2.pg_aggregations - INFO -    Getting country map for Egypt (normalized: Egypt)...
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:05 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:05 - app.main - INFO -    Country: China, Min confidence: low
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:05 - app.main - INFO -    Country: Chile, Min confidence: low
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.phase2.pg_aggregations - INFO -    Getting country map for Chile (normalized: Chile)...
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:05 - app.main - INFO -    Country: Zambia, Min confidence: low
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.phase2.pg_aggregations - INFO -    Getting country map for Zambia (normalized: Zambia)...
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:05 - app.main - INFO -    Country: Peru, Min confidence: low
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.phase2.pg_aggregations - INFO -    Getting country map for Peru (normalized: Peru)...
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:05 - app.main - INFO -    Country: Uganda, Min confidence: low
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.phase2.pg_aggregations - INFO -    Getting country map for Uganda (normalized: Uganda)...
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:05 - app.main - INFO -    Country: Greece, Min confidence: low
2026-01-19 11:27:05 - app.main - INFO - ================================================================================
2026-01-19 11:27:05 - app.phase2.pg_aggregations - INFO -    Getting country map for Greece (normalized: Greece)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Kazakhstan, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Kazakhstan (normalized: Kazakhstan)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Colombia, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Colombia (normalized: Colombia)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Ireland, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Ireland (normalized: Ireland)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Denmark, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Denmark (normalized: Denmark)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Hungary, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Hungary (normalized: Hungary)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Romania, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Romania (normalized: Romania)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Turkey, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Turkey (normalized: Turkey)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Brasil, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Brasil (normalized: Brasil)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Finland, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Finland (normalized: Finland)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: the Netherlands, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for the Netherlands (normalized: the Netherlands)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Norway, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Norway (normalized: Norway)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Switzerland, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Switzerland (normalized: Switzerland)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Brazil, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Brazil (normalized: Brazil)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Slovakia, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Slovakia (normalized: Slovakia)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Netherlands, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Netherlands (normalized: Netherlands)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Taiwan, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Taiwan (normalized: Taiwan)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Belgium, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Belgium (normalized: Belgium)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: TÃ¼rkiye, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for TÃ¼rkiye (normalized: TÃ¼rkiye)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Hong Kong, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Hong Kong (normalized: Hong Kong)...
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Czech Republic, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Czech Republic (normalized: Czech Republic)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Sweden, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Sweden (normalized: Sweden)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Czechia, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Czechia (normalized: Czechia)...
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Malaysia, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Malaysia (normalized: Malaysia)...
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: New Zealand, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for New Zealand (normalized: New Zealand)...
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: France, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for France (normalized: France)...
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:06 - app.main - INFO -    Country: Special Administrative Region of China, Min confidence: low
2026-01-19 11:27:06 - app.main - INFO - ================================================================================
2026-01-19 11:27:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Special Administrative Region of China (normalized: Special Administrative Region of China)...
2026-01-19 11:27:07 - app.main - INFO - ================================================================================
2026-01-19 11:27:07 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:07 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-19 11:27:07 - app.main - INFO - ================================================================================
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.main - INFO - ================================================================================
2026-01-19 11:27:07 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:07 - app.main - INFO -    Country: Venezuela, Min confidence: low
2026-01-19 11:27:07 - app.main - INFO - ================================================================================
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Getting country map for Venezuela (normalized: Venezuela)...
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 0 cities in South Korea
2026-01-19 11:27:07 - app.main - INFO - ================================================================================
2026-01-19 11:27:07 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:27:07 - app.main - INFO -    Country: Mexico, Min confidence: low
2026-01-19 11:27:07 - app.main - INFO - ================================================================================
2026-01-19 11:27:07 - app.phase2.pg_aggregations - INFO -    Getting country map for Mexico (normalized: Mexico)...
2026-01-19 11:27:08 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:08 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:08 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: South Korea
2026-01-19 11:27:08 - app.main - INFO -    Cities returned: 0
2026-01-19 11:27:08 - app.main - INFO - ================================================================================
2026-01-19 11:27:08 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:08 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:08 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:08 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Colombia
2026-01-19 11:27:08 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 0 cities in the Netherlands
2026-01-19 11:27:09 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Colombia
2026-01-19 11:27:09 - app.main - INFO -    Cities returned: 1
2026-01-19 11:27:09 - app.main - INFO - ================================================================================
2026-01-19 11:27:09 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: the Netherlands
2026-01-19 11:27:09 - app.main - INFO -    Cities returned: 0
2026-01-19 11:27:09 - app.main - INFO - ================================================================================
2026-01-19 11:27:09 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:09 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:09 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Israel): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Iran): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Netherlands): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Spain): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Taiwan): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Belgium): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (TÃ¼rkiye): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Hong Kong): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Russia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Czech Republic): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Sweden): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Czechia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Malaysia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (New Zealand): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Greece): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:36 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Special Administrative Region of China): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:37 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Zambia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:37 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (India): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:37 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Egypt): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:37 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Chile): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-19 11:27:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Peru
2026-01-19 11:27:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Serbia
2026-01-19 11:27:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Serbia
2026-01-19 11:27:37 - app.main - INFO -    Cities returned: 1
2026-01-19 11:27:37 - app.main - INFO - ================================================================================
2026-01-19 11:27:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Peru
2026-01-19 11:27:37 - app.main - INFO -    Cities returned: 2
2026-01-19 11:27:37 - app.main - INFO - ================================================================================
2026-01-19 11:27:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Kazakhstan
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Kazakhstan
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 1
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Finland
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 74 cities in United States
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Finland
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 2
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 74
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Denmark
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Uganda
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Denmark
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 6
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Uganda
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 2
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Turkey
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 30 cities in Italy
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 30
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Brasil
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Turkey
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 2
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brasil
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 1
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Ireland
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Norway
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Ireland
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 1
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Norway
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 1
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Romania
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Portugal
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Hungary
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Switzerland
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Romania
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 2
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Canada
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hungary
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 2
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Portugal
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 5
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 47
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Japan
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Switzerland
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 8
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 13 cities in United Kingdom
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Canada
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 11
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Poland
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 6
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United Kingdom
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 13
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Slovakia
2026-01-19 11:27:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Poland
2026-01-19 11:27:38 - app.main - INFO -    Cities returned: 2
2026-01-19 11:27:38 - app.main - INFO - ================================================================================
2026-01-19 11:27:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 18 cities in Australia
2026-01-19 11:27:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Venezuela
2026-01-19 11:27:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Mexico
2026-01-19 11:27:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 7 cities in France
2026-01-19 11:27:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Slovakia
2026-01-19 11:27:39 - app.main - INFO -    Cities returned: 1
2026-01-19 11:27:39 - app.main - INFO - ================================================================================
2026-01-19 11:27:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Austria
2026-01-19 11:27:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Brazil
2026-01-19 11:27:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-19 11:27:39 - app.main - INFO -    Cities returned: 18
2026-01-19 11:27:39 - app.main - INFO - ================================================================================
2026-01-19 11:27:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Mexico
2026-01-19 11:27:39 - app.main - INFO -    Cities returned: 1
2026-01-19 11:27:39 - app.main - INFO - ================================================================================
2026-01-19 11:27:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Venezuela
2026-01-19 11:27:39 - app.main - INFO -    Cities returned: 1
2026-01-19 11:27:39 - app.main - INFO - ================================================================================
2026-01-19 11:27:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Austria
2026-01-19 11:27:39 - app.main - INFO -    Cities returned: 5
2026-01-19 11:27:39 - app.main - INFO - ================================================================================
2026-01-19 11:27:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: France
2026-01-19 11:27:39 - app.main - INFO -    Cities returned: 7
2026-01-19 11:27:39 - app.main - INFO - ================================================================================
2026-01-19 11:27:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brazil
2026-01-19 11:27:39 - app.main - INFO -    Cities returned: 11
2026-01-19 11:27:39 - app.main - INFO - ================================================================================
2026-01-19 11:27:40 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Frankfurt am Main; Cologne; JÃ¼lich, Germany' (from affiliation: Department of Neurology, University Hospital Frankfurt, Goethe University, Frankfurt am Main, Germany; Medical Faculty, University of Cologne, and Department of Neurology, University Hospital Cologne, Cologne, Germany; Cognitive Neuroscience, Institute of Neuroscience and Medicine (INM-3), Research Centre JÃ¼lich, JÃ¼lich, Germany. Electronic address: Grefkes-hermann@em.uni-frankfurt.de.)
2026-01-19 11:27:40 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 38 cities in Germany
2026-01-19 11:27:40 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-19 11:27:40 - app.main - INFO -    Cities returned: 38
2026-01-19 11:27:40 - app.main - INFO - ================================================================================
2026-01-19 11:30:18 - root - INFO - ================================================================================
2026-01-19 11:30:18 - root - INFO - Logging initialized - output to console and log.txt
2026-01-19 11:30:18 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-19 11:30:18 - root - INFO - ================================================================================
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:45 - app.main - INFO -    Country: Hong Kong, Min confidence: low
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.phase2.pg_aggregations - INFO -    Getting country map for Hong Kong (normalized: Hong Kong)...
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:45 - app.main - INFO -    Country: Czechia, Min confidence: low
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.phase2.pg_aggregations - INFO -    Getting country map for Czechia (normalized: Czechia)...
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:45 - app.main - INFO -    Country: Taiwan, Min confidence: low
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.phase2.pg_aggregations - INFO -    Getting country map for Taiwan (normalized: Taiwan)...
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:45 - app.main - INFO -    Country: Malaysia, Min confidence: low
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.phase2.pg_aggregations - INFO -    Getting country map for Malaysia (normalized: Malaysia)...
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:45 - app.main - INFO -    Country: India, Min confidence: low
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:45 - app.main - INFO -    Country: Egypt, Min confidence: low
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.phase2.pg_aggregations - INFO -    Getting country map for Egypt (normalized: Egypt)...
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:45 - app.main - INFO -    Country: New Zealand, Min confidence: low
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.phase2.pg_aggregations - INFO -    Getting country map for New Zealand (normalized: New Zealand)...
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:45 - app.main - INFO -    Country: TÃ¼rkiye, Min confidence: low
2026-01-19 11:30:45 - app.main - INFO - ================================================================================
2026-01-19 11:30:45 - app.phase2.pg_aggregations - INFO -    Getting country map for TÃ¼rkiye (normalized: TÃ¼rkiye)...
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:46 - app.main - INFO -    Country: Special Administrative Region of China, Min confidence: low
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Special Administrative Region of China (normalized: Special Administrative Region of China)...
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:46 - app.main - INFO -    Country: Zambia, Min confidence: low
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Zambia (normalized: Zambia)...
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:46 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:46 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:46 - app.main - INFO -    Country: Chile, Min confidence: low
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Chile (normalized: Chile)...
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:46 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:46 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:46 - app.main - INFO -    Country: Belgium, Min confidence: low
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Belgium (normalized: Belgium)...
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:46 - app.main - INFO -    Country: Sweden, Min confidence: low
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Sweden (normalized: Sweden)...
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:46 - app.main - INFO -    Country: Greece, Min confidence: low
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Greece (normalized: Greece)...
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:46 - app.main - INFO -    Country: Netherlands, Min confidence: low
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Netherlands (normalized: Netherlands)...
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-19 11:30:46 - app.main - INFO -    Country: Czech Republic, Min confidence: low
2026-01-19 11:30:46 - app.main - INFO - ================================================================================
2026-01-19 11:30:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Czech Republic (normalized: Czech Republic)...
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Czechia
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:47 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Czechia
2026-01-19 11:30:47 - app.main - INFO -    Cities returned: 1
2026-01-19 11:30:47 - app.main - INFO - ================================================================================
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Hong Kong
2026-01-19 11:30:47 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hong Kong
2026-01-19 11:30:47 - app.main - INFO -    Cities returned: 1
2026-01-19 11:30:47 - app.main - INFO - ================================================================================
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Malaysia
2026-01-19 11:30:47 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Malaysia
2026-01-19 11:30:47 - app.main - INFO -    Cities returned: 1
2026-01-19 11:30:47 - app.main - INFO - ================================================================================
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Taiwan
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in India
2026-01-19 11:30:47 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Taiwan
2026-01-19 11:30:47 - app.main - INFO -    Cities returned: 5
2026-01-19 11:30:47 - app.main - INFO - ================================================================================
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Greece
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Russia
2026-01-19 11:30:47 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Zambia
2026-01-19 11:30:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-19 11:30:48 - app.main - INFO -    Cities returned: 5
2026-01-19 11:30:48 - app.main - INFO - ================================================================================
2026-01-19 11:30:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Russia
2026-01-19 11:30:48 - app.main - INFO -    Cities returned: 2
2026-01-19 11:30:48 - app.main - INFO - ================================================================================
2026-01-19 11:30:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Greece
2026-01-19 11:30:48 - app.main - INFO -    Cities returned: 2
2026-01-19 11:30:48 - app.main - INFO - ================================================================================
2026-01-19 11:30:48 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Iran
2026-01-19 11:30:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Zambia
2026-01-19 11:30:48 - app.main - INFO -    Cities returned: 2
2026-01-19 11:30:48 - app.main - INFO - ================================================================================
2026-01-19 11:30:48 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Special Administrative Region of China
2026-01-19 11:30:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Iran
2026-01-19 11:30:48 - app.main - INFO -    Cities returned: 5
2026-01-19 11:30:48 - app.main - INFO - ================================================================================
2026-01-19 11:30:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:48 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Egypt
2026-01-19 11:30:48 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Spain
2026-01-19 11:30:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Spain
2026-01-19 11:30:48 - app.main - INFO -    Cities returned: 11
2026-01-19 11:30:48 - app.main - INFO - ================================================================================
2026-01-19 11:30:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Special Administrative Region of China
2026-01-19 11:30:48 - app.main - INFO -    Cities returned: 1
2026-01-19 11:30:48 - app.main - INFO - ================================================================================
2026-01-19 11:30:48 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Chile
2026-01-19 11:30:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Egypt
2026-01-19 11:30:48 - app.main - INFO -    Cities returned: 1
2026-01-19 11:30:48 - app.main - INFO - ================================================================================
2026-01-19 11:30:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Chile
2026-01-19 11:30:48 - app.main - INFO -    Cities returned: 1
2026-01-19 11:30:48 - app.main - INFO - ================================================================================
2026-01-19 11:30:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:48 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in New Zealand
2026-01-19 11:30:48 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in TÃ¼rkiye
2026-01-19 11:30:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: New Zealand
2026-01-19 11:30:48 - app.main - INFO -    Cities returned: 2
2026-01-19 11:30:48 - app.main - INFO - ================================================================================
2026-01-19 11:30:48 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Belgium
2026-01-19 11:30:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-19 11:30:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Belgium
2026-01-19 11:30:48 - app.main - INFO -    Cities returned: 6
2026-01-19 11:30:48 - app.main - INFO - ================================================================================
2026-01-19 11:30:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: TÃ¼rkiye
2026-01-19 11:30:48 - app.main - INFO -    Cities returned: 1
2026-01-19 11:30:48 - app.main - INFO - ================================================================================
2026-01-19 11:30:49 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Sweden
2026-01-19 11:30:49 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Sweden
2026-01-19 11:30:49 - app.main - INFO -    Cities returned: 3
2026-01-19 11:30:49 - app.main - INFO - ================================================================================
2026-01-19 11:30:49 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 9 cities in Netherlands
2026-01-19 11:30:49 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Netherlands
2026-01-19 11:30:49 - app.main - INFO -    Cities returned: 9
2026-01-19 11:30:49 - app.main - INFO - ================================================================================
2026-01-19 11:30:49 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 4 cities in Czech Republic
2026-01-19 11:30:49 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Czech Republic
2026-01-19 11:30:49 - app.main - INFO -    Cities returned: 4
2026-01-19 11:30:49 - app.main - INFO - ================================================================================
2026-01-19 11:30:50 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Beer-Yaacov, Israel' (from affiliation: QuantalX Neuroscience, Beer-Yaacov, Israel.)
2026-01-19 11:30:51 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Zerifin, Israel' (from affiliation: Sagol Center for Hyperbaric Medicine and Research, Shamir Medical Center, Zerifin, Israel.)
2026-01-19 11:30:52 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 15 cities in Israel
2026-01-19 11:30:52 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Israel
2026-01-19 11:30:52 - app.main - INFO -    Cities returned: 15
2026-01-19 11:30:52 - app.main - INFO - ================================================================================
2026-01-19 11:52:08 - root - INFO - ================================================================================
2026-01-19 11:52:08 - root - INFO - Logging initialized - output to console and log.txt
2026-01-19 11:52:08 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-19 11:52:08 - root - INFO - ================================================================================
2026-01-20 12:00:46 - root - INFO - ================================================================================
2026-01-20 12:00:46 - root - INFO - Logging initialized - output to console and log.txt
2026-01-20 12:00:46 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-20 12:00:46 - root - INFO - ================================================================================
2026-01-20 12:03:37 - app.main - INFO - ================================================================================
2026-01-20 12:03:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:37 - app.main - INFO -    Min confidence: low
2026-01-20 12:03:37 - app.main - INFO - ================================================================================
2026-01-20 12:03:37 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-20 12:03:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:38 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-20 12:03:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-20 12:03:38 - app.main - INFO -    Countries returned: 52
2026-01-20 12:03:38 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: South Korea, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for South Korea (normalized: South Korea)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: Taiwan, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for Taiwan (normalized: Taiwan)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: China, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: Zambia, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for Zambia (normalized: Zambia)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: Chile, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for Chile (normalized: Chile)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: Egypt, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for Egypt (normalized: Egypt)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: Slovakia, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for Slovakia (normalized: Slovakia)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: Serbia, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for Serbia (normalized: Serbia)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:41 - app.main - INFO -    Country: Norway, Min confidence: low
2026-01-20 12:03:41 - app.main - INFO - ================================================================================
2026-01-20 12:03:41 - app.phase2.pg_aggregations - INFO -    Getting country map for Norway (normalized: Norway)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Romania, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Romania (normalized: Romania)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Greece, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Greece (normalized: Greece)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Uganda, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Uganda (normalized: Uganda)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Malaysia, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Malaysia (normalized: Malaysia)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Turkey, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Turkey (normalized: Turkey)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Hungary, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Hungary (normalized: Hungary)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Brazil, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Brazil (normalized: Brazil)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Colombia, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Colombia (normalized: Colombia)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Czechia, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Czechia (normalized: Czechia)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Brasil, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Brasil (normalized: Brasil)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Switzerland, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Switzerland (normalized: Switzerland)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: the Netherlands, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for the Netherlands (normalized: the Netherlands)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: France, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for France (normalized: France)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Denmark, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Denmark (normalized: Denmark)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: New Zealand, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for New Zealand (normalized: New Zealand)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Netherlands, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Netherlands (normalized: Netherlands)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Ireland, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Ireland (normalized: Ireland)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: India, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Hong Kong, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Hong Kong (normalized: Hong Kong)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Mexico, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Mexico (normalized: Mexico)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Special Administrative Region of China, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Special Administrative Region of China (normalized: Special Administrative Region of China)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: TÃ¼rkiye, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for TÃ¼rkiye (normalized: TÃ¼rkiye)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Sweden, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Sweden (normalized: Sweden)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Kazakhstan, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Kazakhstan (normalized: Kazakhstan)...
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Peru, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Peru (normalized: Peru)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Finland, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Finland (normalized: Finland)...
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Belgium, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Belgium (normalized: Belgium)...
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Venezuela, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Venezuela (normalized: Venezuela)...
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 0 cities in South Korea
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:03:42 - app.main - INFO -    Country: Czech Republic, Min confidence: low
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Czech Republic (normalized: Czech Republic)...
2026-01-20 12:03:42 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: South Korea
2026-01-20 12:03:42 - app.main - INFO -    Cities returned: 0
2026-01-20 12:03:42 - app.main - INFO - ================================================================================
2026-01-20 12:03:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:44 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:44 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:03:45 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 0 cities in the Netherlands
2026-01-20 12:03:45 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: the Netherlands
2026-01-20 12:03:45 - app.main - INFO -    Cities returned: 0
2026-01-20 12:03:45 - app.main - INFO - ================================================================================
2026-01-20 12:03:45 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Israel): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Ireland): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (India): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Hong Kong): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Canada): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Russia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Mexico): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Special Administrative Region of China): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (TÃ¼rkiye): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Austria): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Sweden): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Kazakhstan): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Peru): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Finland): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Poland): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Italy): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Belgium): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Venezuela): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Portugal): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 184, in get_country_map
    pmids = await self._get_run_pmids(session, run_id)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 460, in _get_run_pmids
    result = await session.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Chile): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:12 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:04:13 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Australia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:13 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:04:13 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Zambia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:13 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Taiwan): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:13 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Serbia): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:13 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Iran
2026-01-20 12:04:13 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Iran
2026-01-20 12:04:13 - app.main - INFO -    Cities returned: 5
2026-01-20 12:04:13 - app.main - INFO - ================================================================================
2026-01-20 12:04:13 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Czechia
2026-01-20 12:04:13 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Egypt
2026-01-20 12:04:14 - app.main - ERROR - âŒ MAP OPERATION FAILED - Country Map (Turkey): QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
Traceback (most recent call last):
  File "/Users/xiaowu/local_code/scholarmap/backend/app/main.py", line 1175, in phase2_map_country
    data = await aggregator.get_country_map(run_id, country, min_confidence)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/phase2/pg_aggregations.py", line 244, in get_country_map
    cached_items = await cache_repo.get_batch_cached(city_keys)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/local_code/scholarmap/backend/app/db/repository.py", line 492, in get_batch_cached
    result = await self.session.execute(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 449, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2351, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2239, in _execute_internal
    conn = self._connection_for_bind(bind)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2108, in _connection_for_bind
    return trans._connection_for_bind(engine, execution_options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in _connection_for_bind
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 137, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1187, in _connection_for_bind
    conn = bind.connect()
           ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3285, in connect
    return self._connection_cls(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 143, in __init__
    self._dbapi_connection = engine.raw_connection()
                             ^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 3309, in raw_connection
    return self.pool.connect()
           ^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 447, in connect
    return _ConnectionFairy._checkout(self)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 1264, in _checkout
    fairy = _ConnectionRecord.checkout(pool)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/base.py", line 711, in checkout
    rec = pool._do_get()
          ^^^^^^^^^^^^^^
  File "/Users/xiaowu/opt/miniconda3/envs/maker/lib/python3.12/site-packages/sqlalchemy/pool/impl.py", line 166, in _do_get
    raise exc.TimeoutError(
sqlalchemy.exc.TimeoutError: QueuePool limit of size 10 overflow 20 reached, connection timed out, timeout 30.00 (Background on this error at: https://sqlalche.me/e/20/3o7r)
2026-01-20 12:04:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Czechia
2026-01-20 12:04:14 - app.main - INFO -    Cities returned: 1
2026-01-20 12:04:14 - app.main - INFO - ================================================================================
2026-01-20 12:04:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Egypt
2026-01-20 12:04:14 - app.main - INFO -    Cities returned: 1
2026-01-20 12:04:14 - app.main - INFO - ================================================================================
2026-01-20 12:04:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Malaysia
2026-01-20 12:04:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Malaysia
2026-01-20 12:04:14 - app.main - INFO -    Cities returned: 1
2026-01-20 12:04:14 - app.main - INFO - ================================================================================
2026-01-20 12:04:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in New Zealand
2026-01-20 12:04:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: New Zealand
2026-01-20 12:04:14 - app.main - INFO -    Cities returned: 2
2026-01-20 12:04:14 - app.main - INFO - ================================================================================
2026-01-20 12:04:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Norway
2026-01-20 12:04:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-20 12:04:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Spain
2026-01-20 12:04:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Norway
2026-01-20 12:04:14 - app.main - INFO -    Cities returned: 1
2026-01-20 12:04:14 - app.main - INFO - ================================================================================
2026-01-20 12:04:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-20 12:04:14 - app.main - INFO -    Cities returned: 47
2026-01-20 12:04:14 - app.main - INFO - ================================================================================
2026-01-20 12:04:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Switzerland
2026-01-20 12:04:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Slovakia
2026-01-20 12:04:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Greece
2026-01-20 12:04:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Spain
2026-01-20 12:04:14 - app.main - INFO -    Cities returned: 11
2026-01-20 12:04:14 - app.main - INFO - ================================================================================
2026-01-20 12:04:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Hungary
2026-01-20 12:04:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Switzerland
2026-01-20 12:04:14 - app.main - INFO -    Cities returned: 8
2026-01-20 12:04:14 - app.main - INFO - ================================================================================
2026-01-20 12:04:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Slovakia
2026-01-20 12:04:14 - app.main - INFO -    Cities returned: 1
2026-01-20 12:04:14 - app.main - INFO - ================================================================================
2026-01-20 12:04:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Greece
2026-01-20 12:04:14 - app.main - INFO -    Cities returned: 2
2026-01-20 12:04:14 - app.main - INFO - ================================================================================
2026-01-20 12:04:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hungary
2026-01-20 12:04:15 - app.main - INFO -    Cities returned: 2
2026-01-20 12:04:15 - app.main - INFO - ================================================================================
2026-01-20 12:04:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Brazil
2026-01-20 12:04:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brazil
2026-01-20 12:04:15 - app.main - INFO -    Cities returned: 11
2026-01-20 12:04:15 - app.main - INFO - ================================================================================
2026-01-20 12:04:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Colombia
2026-01-20 12:04:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Romania
2026-01-20 12:04:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 74 cities in United States
2026-01-20 12:04:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Colombia
2026-01-20 12:04:15 - app.main - INFO -    Cities returned: 1
2026-01-20 12:04:15 - app.main - INFO - ================================================================================
2026-01-20 12:04:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Romania
2026-01-20 12:04:15 - app.main - INFO -    Cities returned: 2
2026-01-20 12:04:15 - app.main - INFO - ================================================================================
2026-01-20 12:04:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 7 cities in France
2026-01-20 12:04:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Japan
2026-01-20 12:04:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Uganda
2026-01-20 12:04:15 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Frankfurt am Main; Cologne; JÃ¼lich, Germany' (from affiliation: Department of Neurology, University Hospital Frankfurt, Goethe University, Frankfurt am Main, Germany; Medical Faculty, University of Cologne, and Department of Neurology, University Hospital Cologne, Cologne, Germany; Cognitive Neuroscience, Institute of Neuroscience and Medicine (INM-3), Research Centre JÃ¼lich, JÃ¼lich, Germany. Electronic address: Grefkes-hermann@em.uni-frankfurt.de.)
2026-01-20 12:04:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Brasil
2026-01-20 12:04:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-20 12:04:15 - app.main - INFO -    Cities returned: 74
2026-01-20 12:04:15 - app.main - INFO - ================================================================================
2026-01-20 12:04:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 9 cities in Netherlands
2026-01-20 12:04:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Denmark
2026-01-20 12:04:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-20 12:04:15 - app.main - INFO -    Cities returned: 6
2026-01-20 12:04:15 - app.main - INFO - ================================================================================
2026-01-20 12:04:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 13 cities in United Kingdom
2026-01-20 12:04:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: France
2026-01-20 12:04:15 - app.main - INFO -    Cities returned: 7
2026-01-20 12:04:15 - app.main - INFO - ================================================================================
2026-01-20 12:04:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Uganda
2026-01-20 12:04:15 - app.main - INFO -    Cities returned: 2
2026-01-20 12:04:15 - app.main - INFO - ================================================================================
2026-01-20 12:04:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Netherlands
2026-01-20 12:04:15 - app.main - INFO -    Cities returned: 9
2026-01-20 12:04:15 - app.main - INFO - ================================================================================
2026-01-20 12:04:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Denmark
2026-01-20 12:04:16 - app.main - INFO -    Cities returned: 6
2026-01-20 12:04:16 - app.main - INFO - ================================================================================
2026-01-20 12:04:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 4 cities in Czech Republic
2026-01-20 12:04:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brasil
2026-01-20 12:04:16 - app.main - INFO -    Cities returned: 1
2026-01-20 12:04:16 - app.main - INFO - ================================================================================
2026-01-20 12:04:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United Kingdom
2026-01-20 12:04:16 - app.main - INFO -    Cities returned: 13
2026-01-20 12:04:16 - app.main - INFO - ================================================================================
2026-01-20 12:04:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Czech Republic
2026-01-20 12:04:16 - app.main - INFO -    Cities returned: 4
2026-01-20 12:04:16 - app.main - INFO - ================================================================================
2026-01-20 12:04:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 38 cities in Germany
2026-01-20 12:04:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-20 12:04:16 - app.main - INFO -    Cities returned: 38
2026-01-20 12:04:16 - app.main - INFO - ================================================================================
2026-01-20 12:05:02 - root - INFO - ================================================================================
2026-01-20 12:05:02 - root - INFO - Logging initialized - output to console and log.txt
2026-01-20 12:05:02 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-20 12:05:02 - root - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Turkey, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Turkey (normalized: Turkey)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: India, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Hong Kong, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Hong Kong (normalized: Hong Kong)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Chile, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Chile (normalized: Chile)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: TÃ¼rkiye, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for TÃ¼rkiye (normalized: TÃ¼rkiye)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Kazakhstan, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Kazakhstan (normalized: Kazakhstan)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Zambia, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Zambia (normalized: Zambia)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Ireland, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Ireland (normalized: Ireland)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Sweden, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Sweden (normalized: Sweden)...
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Peru, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Peru (normalized: Peru)...
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Venezuela, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Venezuela (normalized: Venezuela)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Taiwan, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Taiwan (normalized: Taiwan)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Finland, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Finland (normalized: Finland)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Special Administrative Region of China, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Special Administrative Region of China (normalized: Special Administrative Region of China)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Belgium, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Belgium (normalized: Belgium)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:21 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-20 12:05:21 - app.main - INFO - ================================================================================
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:21 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.main - INFO - ================================================================================
2026-01-20 12:05:22 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:22 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-20 12:05:22 - app.main - INFO - ================================================================================
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.main - INFO - ================================================================================
2026-01-20 12:05:22 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:22 - app.main - INFO -    Country: Mexico, Min confidence: low
2026-01-20 12:05:22 - app.main - INFO - ================================================================================
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Getting country map for Mexico (normalized: Mexico)...
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.main - INFO - ================================================================================
2026-01-20 12:05:22 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-20 12:05:22 - app.main - INFO -    Country: Serbia, Min confidence: low
2026-01-20 12:05:22 - app.main - INFO - ================================================================================
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Getting country map for Serbia (normalized: Serbia)...
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Turkey
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:23 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:23 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:23 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Turkey
2026-01-20 12:05:23 - app.main - INFO -    Cities returned: 2
2026-01-20 12:05:23 - app.main - INFO - ================================================================================
2026-01-20 12:05:23 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:23 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Poland
2026-01-20 12:05:23 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Poland
2026-01-20 12:05:23 - app.main - INFO -    Cities returned: 2
2026-01-20 12:05:23 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Kazakhstan
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Hong Kong
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Kazakhstan
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 1
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hong Kong
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 1
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in TÃ¼rkiye
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in India
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Russia
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: TÃ¼rkiye
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 1
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 5
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Chile
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Russia
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 2
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Chile
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 1
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Sweden
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Venezuela
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Peru
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Sweden
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 3
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Peru
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 2
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Venezuela
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 1
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Canada
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Finland
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Canada
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 11
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Special Administrative Region of China
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Belgium
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Finland
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 2
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Ireland
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Portugal
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Special Administrative Region of China
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 1
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Belgium
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 6
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Serbia
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Zambia
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Ireland
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 1
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Portugal
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 5
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Austria
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Taiwan
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 18 cities in Australia
2026-01-20 12:05:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Mexico
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Zambia
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 2
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 18
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Taiwan
2026-01-20 12:05:24 - app.main - INFO -    Cities returned: 5
2026-01-20 12:05:24 - app.main - INFO - ================================================================================
2026-01-20 12:05:25 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Austria
2026-01-20 12:05:25 - app.main - INFO -    Cities returned: 5
2026-01-20 12:05:25 - app.main - INFO - ================================================================================
2026-01-20 12:05:25 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Serbia
2026-01-20 12:05:25 - app.main - INFO -    Cities returned: 1
2026-01-20 12:05:25 - app.main - INFO - ================================================================================
2026-01-20 12:05:25 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Mexico
2026-01-20 12:05:25 - app.main - INFO -    Cities returned: 1
2026-01-20 12:05:25 - app.main - INFO - ================================================================================
2026-01-20 12:05:25 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 30 cities in Italy
2026-01-20 12:05:25 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-20 12:05:25 - app.main - INFO -    Cities returned: 30
2026-01-20 12:05:25 - app.main - INFO - ================================================================================
2026-01-20 12:05:25 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Beer-Yaacov, Israel' (from affiliation: QuantalX Neuroscience, Beer-Yaacov, Israel.)
2026-01-20 12:05:26 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Zerifin, Israel' (from affiliation: Sagol Center for Hyperbaric Medicine and Research, Shamir Medical Center, Zerifin, Israel.)
2026-01-20 12:05:27 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 15 cities in Israel
2026-01-20 12:05:27 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Israel
2026-01-20 12:05:27 - app.main - INFO -    Cities returned: 15
2026-01-20 12:05:27 - app.main - INFO - ================================================================================
2026-01-21 10:21:57 - root - INFO - ================================================================================
2026-01-21 10:21:57 - root - INFO - Logging initialized - output to console and log.txt
2026-01-21 10:21:57 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-21 10:21:57 - root - INFO - ================================================================================
2026-01-21 10:40:16 - app.main - INFO - ðŸ‘¥ ADMIN: Fetching online user count
2026-01-21 10:40:16 - app.main - INFO - âœ… ADMIN: Online users: 1
2026-01-21 10:41:18 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 10:43:24 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 10:44:11 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 10:45:48 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 10:46:19 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi "HTTP/1.1 200 OK"
2026-01-21 10:46:20 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-21 10:47:06 - app.main - INFO - ================================================================================
2026-01-21 10:47:06 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: a0d5fe7219d3
2026-01-21 10:47:06 - app.main - INFO -    Force refresh: False
2026-01-21 10:47:06 - app.main - INFO - ================================================================================
2026-01-21 10:47:06 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:06 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run a0d5fe7219d3
2026-01-21 10:47:06 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-21 10:47:06 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-21 10:47:06 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:06 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-21 10:47:07 - app.phase2.pg_ingest - INFO -    Loaded 168 unique PMIDs from run a0d5fe7219d3
2026-01-21 10:47:07 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 168 PMIDs
2026-01-21 10:47:07 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:07 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 168 PMIDs from PubMed...
2026-01-21 10:47:07 - app.phase2.pubmed_fetcher - INFO - Fetching 168 PMIDs in 2 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-21 10:47:07 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-21 10:47:07 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=19569886%2C32903354%2C32116533%2C20192030%2C32270713%2C27900947%2C12655847%2C37427002%2C27351722%2C19964229%2C41282818%2C19715762%2C35576911%2C37904131%2C33770760%2C40819020%2C32498049%2C19155551%2C21436535%2C28268621%2C37657190%2C35421857%2C26963246%2C30002452%2C26904967%2C35078156%2C26984895%2C27534393%2C41337011%2C30624221%2C21314273%2C25545500%2C35985293%2C34695809%2C31191218%2C29059845%2C19084556%2C22084052%2C39954182%2C34607318%2C19647981%2C37007675%2C28665058%2C16106660%2C40144585%2C34284361%2C41381618%2C35444245%2C33018638%2C25571168%2C25571016%2C35124225%2C40109135%2C36776220%2C18022247%2C26483627%2C38669768%2C25094020%2C30301759%2C21078582%2C17124332%2C17946051%2C25514320%2C31680806%2C28651628%2C39571645%2C35395645%2C37251598%2C31616237%2C31587955%2C20407639%2C26859341%2C31321955%2C31026831%2C31011432%2C40144587%2C33418549%2C23774120%2C27196417%2C16792289%2C40703668%2C25565947%2C32706190%2C19951784%2C33524962%2C38914073%2C34425566%2C32682223%2C18350128%2C40398440%2C22570195%2C23383315%2C26736620%2C23715295%2C22891058%2C21708506%2C17873429%2C34483823%2C23031175%2C23366830%2C24600359%2C23611833%2C25570190%2C23666562%2C26902372%2C32208379%2C24654268%2C23369953%2C19162733%2C32220308%2C20403782%2C31578420%2C25599079%2C20460690%2C39383883%2C37388414%2C32610288%2C30846925%2C32224511%2C22713666%2C19665554%2C25358531%2C40048825%2C25128256%2C41266624%2C35287119%2C24921388%2C40913768%2C23359537%2C34182408%2C30101753%2C40913530%2C33018041%2C40054446%2C23366234%2C25570284%2C40975869%2C29364932%2C28931054%2C35621994%2C19162827%2C31849632%2C23366626%2C23110153%2C24292005%2C35604492%2C40000170%2C39151656%2C23001369%2C28722685&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-21 10:47:08 - app.phase2.pubmed_fetcher - INFO - Batch 1/2 completed
2026-01-21 10:47:08 - app.phase2.pubmed_fetcher - INFO - Fetching 18 PMIDs from PubMed...
2026-01-21 10:47:08 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=25587704%2C40127544%2C34870202%2C26169880%2C25681017%2C22326993%2C22596161%2C40574626%2C40578388%2C23162436%2C37425292%2C24760914%2C19381156%2C35659259%2C41360010%2C24834047%2C27255798%2C19965103&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-21 10:47:08 - app.phase2.pubmed_fetcher - INFO - Batch 2/2 completed
2026-01-21 10:47:08 - app.phase2.pubmed_fetcher - INFO - Fetched 2/2 batches successfully
2026-01-21 10:47:08 - app.phase2.pubmed_fetcher - INFO - Extracted 168 PMIDs from 2 batches
2026-01-21 10:47:08 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 168 PubMed XML records
2026-01-21 10:47:08 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:08 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-21 10:47:08 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 168 papers
2026-01-21 10:47:08 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:08 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-21 10:47:08 - app.phase2.pg_ingest - INFO -    Extracting 952 unique affiliations via rule-based method
2026-01-21 10:47:08 - app.phase2.rule_based_extractor - INFO -    Processing 952 affiliations...
2026-01-21 10:47:08 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 952 affiliations...
2026-01-21 10:47:09 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 626 hits, 326 need extraction
2026-01-21 10:47:09 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 326 affiliations...
2026-01-21 10:47:10 - app.phase2.institution_matcher - INFO -    Loaded 2924 institutions to memory (2924 normalized names, 215 aliases)
2026-01-21 10:47:10 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 32/326 (9%), matches found: 21
2026-01-21 10:47:10 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 64/326 (19%), matches found: 47
2026-01-21 10:47:10 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 96/326 (29%), matches found: 69
2026-01-21 10:47:10 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 128/326 (39%), matches found: 92
2026-01-21 10:47:10 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 160/326 (49%), matches found: 111
2026-01-21 10:47:10 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 192/326 (58%), matches found: 138
2026-01-21 10:47:10 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 224/326 (68%), matches found: 161
2026-01-21 10:47:10 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 256/326 (78%), matches found: 177
2026-01-21 10:47:10 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 288/326 (88%), matches found: 197
2026-01-21 10:47:10 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 320/326 (98%), matches found: 222
2026-01-21 10:47:10 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 326/326 (100%), matches found: 227
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 227 matches found
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    Extracting 99 affiliations using rule-based parser...
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 9/99 (9%)
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 18/99 (18%)
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 27/99 (27%)
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 36/99 (36%)
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 45/99 (45%)
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 54/99 (54%)
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 63/99 (63%)
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 72/99 (72%)
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 81/99 (81%)
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 90/99 (90%)
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 99/99 (100%)
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 99 results
2026-01-21 10:47:10 - app.phase2.rule_based_extractor - INFO -       Pending validation: 83 institutions
2026-01-21 10:47:10 - app.phase2.pg_ingest - INFO -    Cached 326 new affiliation extraction results to affiliation_cache table
2026-01-21 10:47:10 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 952 affiliations processed, 933 with country
2026-01-21 10:47:10 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 952 affiliations
2026-01-21 10:47:10 - app.phase2.pg_ingest - INFO -    Unique affiliations: 952
2026-01-21 10:47:10 - app.phase2.pg_ingest - INFO -    With country: 933
2026-01-21 10:47:10 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-21 10:47:10 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:10 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-21 10:47:10 - app.phase2.pg_ingest - INFO -    Clearing existing data for run a0d5fe7219d3...
2026-01-21 10:47:10 - app.phase2.pg_ingest - INFO -    Inserting/updating 168 papers (bulk operation)...
2026-01-21 10:47:10 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 168
2026-01-21 10:47:10 - app.phase2.pg_ingest - INFO -    Inserting 1856 authorships (bulk operation)...
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -    Authorships inserted: 1856
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -    Linking run a0d5fe7219d3 to 168 papers...
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 1856 authorships
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: a0d5fe7219d3
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -    Total PMIDs: 168
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -    Papers parsed: 168
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -    Authorships created: 1856
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -    Unique affiliations: 952
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -    Affiliations with country: 933
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO - 
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 626
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 227
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 99
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 98
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO - 
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 952 = 952 (matches)
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 83
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO - 
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-21 10:47:14 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-21 10:47:14 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 83
2026-01-21 10:47:14 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:14 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run a0d5fe7219d3...
2026-01-21 10:47:14 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 2844 authorships from 168 papers
2026-01-21 10:47:14 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:14 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-21 10:47:14 - app.phase2.affiliation_validator - INFO -    Found 222 unique location keys from 2844 authorships
2026-01-21 10:47:15 - app.phase2.affiliation_validator - INFO -    Batch query complete: 209/222 found in cache
2026-01-21 10:47:15 - app.phase2.affiliation_validator - INFO -    Processing 13 unique location keys via Nominatim...
2026-01-21 10:47:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Twin Cities, United States' -> (38.2910251, -121.31106)
2026-01-21 10:47:19 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Eberhard Karls UniversitÃ¤t TÃ¼bingen TÃ¼bingen, Germany' (from affiliation: Department of Computer Engineering, Wilhelm-Schickard-Institute, Eberhard Karls UniversitÃ¤t TÃ¼bingen TÃ¼bingen, Germany. (PMID: 23162436))
2026-01-21 10:47:21 - app.phase2.pg_geocoding - INFO - Geocoded 'PRESTO, Japan' -> (35.5816819, 139.4986254)
2026-01-21 10:47:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Chofu, Japan' -> (35.6506036, 139.5407066)
2026-01-21 10:47:25 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Laurel, Moldova, Republic of' (from affiliation: John Hopkins University Applied Physics Laboratory, Laurel, MD 20723. (PMID: 31011432))
2026-01-21 10:47:26 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Arlington, Holy See (Vatican City State)' (from affiliation: Defense Advanced Research Projects Agency, Arlington, VA 22203. (PMID: 31011432))
2026-01-21 10:47:29 - app.phase2.pg_geocoding - INFO - Geocoded '312 Church St. SE, United States' -> (44.9365937, -123.0367795)
2026-01-21 10:47:33 - app.phase2.pg_geocoding - INFO - Geocoded '200 Union Street SE, United States' -> (44.9747718, -93.2326141)
2026-01-21 10:47:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Ithaca, United States' -> (42.4374175, -76.5483724)
2026-01-21 10:47:37 - app.phase2.pg_geocoding - INFO - Geocoded 'EPFL, Switzerland' -> (46.5186594, 6.5665615)
2026-01-21 10:47:39 - app.phase2.pg_geocoding - INFO - Geocoded 'South Brisbane, Australia' -> (-27.479264, 153.0200774)
2026-01-21 10:47:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Tonk, India' -> (26.1223198, 75.6632235)
2026-01-21 10:47:42 - app.phase2.pg_geocoding - INFO - Geocoded 'PilÄni, India' -> (28.3622661, 75.6042342)
2026-01-21 10:47:43 - app.phase2.affiliation_validator - INFO -    Batch updating 2262 affiliations for 202 cached locations...
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 202 locations (2262 total affiliations)
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 83 pending institutions to institution_geo...
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO -    âœ… Added 8 validated institutions to institution_geo table
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 2844
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 2298
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO -    Cache misses: 17
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 14
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 3
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 15
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 5
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 8/83
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 15 error affiliations with LLM...
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO -    Collecting 15 unique error affiliations for LLM fix
2026-01-21 10:47:50 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-21 10:47:50 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 15 affiliations...
2026-01-21 10:47:50 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 15 affiliations...
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    Loaded 2932 institutions to memory (2932 normalized names, 215 aliases)
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1/15 (6%), matches found: 1
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/15 (13%), matches found: 2
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 3/15 (20%), matches found: 3
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/15 (26%), matches found: 4
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 5/15 (33%), matches found: 5
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/15 (40%), matches found: 6
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 7/15 (46%), matches found: 7
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/15 (53%), matches found: 8
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 9/15 (60%), matches found: 9
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/15 (66%), matches found: 9
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 11/15 (73%), matches found: 10
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/15 (80%), matches found: 11
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 13/15 (86%), matches found: 11
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/15 (93%), matches found: 11
2026-01-21 10:47:51 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 15/15 (100%), matches found: 11
2026-01-21 10:47:51 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 11 matches found
2026-01-21 10:47:51 - app.phase2.affiliation_extractor - INFO -    Extracting 4 affiliations via LLM (affiliation_cache: 0, institution_geo: 11) in batches of 20
2026-01-21 10:47:51 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/1 (4 affiliations)
2026-01-21 10:47:53 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 10:47:55 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 4 affiliations processed
2026-01-21 10:47:55 - app.phase2.affiliation_extractor - INFO -       Auto-added to institution_geo table: 3 institutions
2026-01-21 10:47:55 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 15 results from 1 LLM calls
2026-01-21 10:47:55 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 15 LLM results...
2026-01-21 10:47:55 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 15 LLM results
2026-01-21 10:47:55 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-21 10:47:55 - app.phase2.affiliation_validator - INFO -    Processing 11 unique location keys for re-geocoding...
2026-01-21 10:47:59 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 15 affiliations
2026-01-21 10:47:59 - app.phase2.affiliation_validator - INFO -    âœ… Updated 39 authorships
2026-01-21 10:47:59 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 4 locations
2026-01-21 10:47:59 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:59 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: a0d5fe7219d3
2026-01-21 10:47:59 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 15
2026-01-21 10:47:59 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 15
2026-01-21 10:47:59 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 39
2026-01-21 10:47:59 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 4
2026-01-21 10:47:59 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 10:47:59 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-21 10:47:59 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-21 10:47:59 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 15
2026-01-21 10:47:59 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 15
2026-01-21 10:47:59 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 39
2026-01-21 10:47:59 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 4
2026-01-21 10:47:59 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 8
2026-01-21 10:47:59 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 3
2026-01-21 10:47:59 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-21 10:47:59 - app.main - INFO - ================================================================================
2026-01-21 10:47:59 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: a0d5fe7219d3
2026-01-21 10:47:59 - app.main - INFO -    Total PMIDs: 168
2026-01-21 10:47:59 - app.main - INFO -    Papers parsed: 168
2026-01-21 10:47:59 - app.main - INFO -    Authorships created: 1856
2026-01-21 10:47:59 - app.main - INFO -    Unique affiliations: 952
2026-01-21 10:47:59 - app.main - INFO -    Affiliations with country: 933
2026-01-21 10:47:59 - app.main - INFO -    LLM calls made: 0
2026-01-21 10:47:59 - app.main - INFO - ================================================================================
2026-01-21 10:48:23 - app.main - INFO - ================================================================================
2026-01-21 10:48:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: a0d5fe7219d3
2026-01-21 10:48:23 - app.main - INFO -    Min confidence: low
2026-01-21 10:48:23 - app.main - INFO - ================================================================================
2026-01-21 10:48:23 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run a0d5fe7219d3...
2026-01-21 10:48:23 - app.main - INFO - ================================================================================
2026-01-21 10:48:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: a0d5fe7219d3
2026-01-21 10:48:23 - app.main - INFO -    Min confidence: low
2026-01-21 10:48:23 - app.main - INFO - ================================================================================
2026-01-21 10:48:23 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run a0d5fe7219d3...
2026-01-21 10:48:23 - app.phase2.pg_aggregations - INFO -    Found 168 PMIDs
2026-01-21 10:48:23 - app.phase2.pg_aggregations - INFO -    Found 168 PMIDs
2026-01-21 10:48:23 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 41 countries
2026-01-21 10:48:23 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 10:48:23 - app.main - INFO -    Countries returned: 41
2026-01-21 10:48:23 - app.main - INFO - ================================================================================
2026-01-21 10:48:23 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 41 countries
2026-01-21 10:48:23 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 10:48:23 - app.main - INFO -    Countries returned: 41
2026-01-21 10:48:23 - app.main - INFO - ================================================================================
2026-01-21 11:23:36 - root - INFO - ================================================================================
2026-01-21 11:23:36 - root - INFO - Logging initialized - output to console and log.txt
2026-01-21 11:23:36 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-21 11:23:36 - root - INFO - ================================================================================
2026-01-21 11:24:40 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 11:26:27 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 11:27:09 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 11:27:50 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 11:33:17 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi "HTTP/1.1 200 OK"
2026-01-21 11:33:17 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-21 11:33:19 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-21 11:33:20 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-21 11:34:43 - app.main - INFO - ================================================================================
2026-01-21 11:34:43 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 4dbd2ac34e0f
2026-01-21 11:34:43 - app.main - INFO -    Force refresh: False
2026-01-21 11:34:43 - app.main - INFO - ================================================================================
2026-01-21 11:34:43 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:34:43 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 4dbd2ac34e0f
2026-01-21 11:34:43 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-21 11:34:43 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-21 11:34:43 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:34:43 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-21 11:34:44 - app.phase2.pg_ingest - INFO -    Loaded 499 unique PMIDs from run 4dbd2ac34e0f
2026-01-21 11:34:44 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 499 PMIDs
2026-01-21 11:34:44 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:34:44 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 499 PMIDs from PubMed...
2026-01-21 11:34:44 - app.phase2.pubmed_fetcher - INFO - Fetching 499 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-21 11:34:44 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-21 11:34:44 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=39556950%2C32208379%2C35727852%2C41336656%2C32220308%2C36776221%2C39433597%2C33019062%2C36029267%2C34260835%2C37645922%2C37027669%2C34182408%2C31946326%2C40381202%2C37615803%2C33653694%2C37870208%2C32128654%2C38986465%2C40975869%2C39455254%2C39434212%2C32297005%2C33055369%2C41034198%2C38648781%2C34907723%2C32682223%2C34888543%2C40306616%2C36379316%2C35775242%2C33495242%2C32938263%2C40164740%2C32006952%2C38332136%2C35864104%2C40239679%2C31898242%2C34246807%2C39326451%2C40819020%2C34038875%2C33018667%2C39134021%2C34138712%2C37249217%2C32164858%2C41039113%2C32224511%2C33510245%2C38914073%2C37080210%2C32343646%2C40885826%2C35351832%2C32610288%2C35792021%2C33547859%2C32765411%2C38846467%2C34607318%2C39545725%2C37251598%2C31792508%2C41051448%2C36349662%2C34892635%2C34892617%2C34777232%2C37724525%2C37643108%2C39954182%2C38726031%2C33543597%2C32746347%2C38729977%2C40109135%2C37976980%2C34855777%2C38949928%2C34874124%2C41360010%2C33477128%2C41397373%2C32042853%2C40560710%2C35603289%2C41191976%2C32759488%2C36376365%2C40408464%2C37943244%2C37398400%2C34695815%2C32397102%2C31820736%2C35589391%2C34892556%2C35862323%2C39151656%2C32131064%2C40039596%2C41079666%2C37388414%2C40913768%2C39854845%2C41318089%2C33888603%2C41459740%2C39383883%2C40578388%2C35617933%2C41266624%2C33018638%2C32164859%2C37105806%2C41406614%2C37515248%2C34695809%2C37425292%2C35019363%2C37725165%2C33115813%2C33878015%2C40703668%2C34474470%2C40031413%2C35395645%2C39571645%2C37995162%2C34795394%2C35444245%2C32911315%2C41381415%2C34577700%2C39485790%2C33018782%2C38669768%2C38450366%2C39391047%2C41265834%2C34329566%2C32070853%2C40068871%2C39597097%2C32393990%2C35767651&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-21 11:34:45 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-21 11:34:45 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-21 11:34:46 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=33308357%2C41005323%2C40490003%2C40040926%2C34490317%2C40620639%2C37870175%2C34560646%2C39713423%2C32114143%2C38769115%2C37904131%2C32895549%2C40768093%2C40222213%2C38835929%2C39948616%2C39451800%2C36379711%2C39260393%2C34447294%2C39990331%2C34891468%2C41191764%2C39703343%2C34375000%2C38004695%2C33438369%2C38753110%2C32116533%2C40060267%2C37790422%2C35725741%2C38812257%2C38906529%2C36356309%2C36968488%2C36526822%2C35421857%2C32987374%2C38895388%2C40247859%2C35213336%2C41337440%2C32746008%2C33725672%2C32107734%2C35985293%2C38294577%2C32798690%2C35670561%2C32610290%2C37185873%2C38915599%2C39525360%2C38075283%2C34352736%2C32040563%2C32527247%2C38617349%2C38712092%2C35933960%2C33290753%2C33530064%2C36763997%2C34592725%2C37427002%2C33018041%2C39147776%2C35250454%2C40244939%2C36711163%2C36241018%2C33897340%2C34705653%2C34425566%2C37391087%2C38083679%2C35227374%2C41283862%2C40672502%2C38671062%2C36902179%2C40574626%2C34483823%2C35884343%2C39484239%2C41061717%2C41355249%2C33546739%2C34708064%2C34622418%2C37205052%2C37844558%2C39935127%2C35364014%2C39105219%2C38885688%2C34582344%2C32582012%2C35085490%2C40032521%2C36851970%2C32101491%2C40816265%2C32750699%2C36672046%2C41335657%2C32027889%2C41355791%2C35890843%2C40677701%2C33633531%2C35078156%2C35931055%2C37819985%2C33524962%2C39713088%2C40798931%2C38782123%2C38016450%2C36282071%2C39026706%2C33961399%2C33784612%2C37609450%2C41266142%2C36711153%2C33706302%2C40340912%2C37007675%2C40573897%2C37222461%2C36744006%2C36817269%2C40039891%2C40488687%2C39276439%2C34277720%2C40644245%2C40913530%2C39165716%2C40830488%2C40144587%2C32848640%2C38562708%2C41337025%2C40031623%2C36152616%2C34946456&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-21 11:34:46 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-21 11:34:46 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-21 11:34:46 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=39450564%2C32116497%2C36086071%2C34841286%2C34284361%2C37292583%2C40000170%2C33482716%2C40048825%2C36195094%2C33328951%2C40200673%2C34644693%2C35759821%2C38648783%2C34583103%2C35594208%2C35287119%2C33142282%2C39603445%2C38841718%2C38460490%2C34892450%2C33836507%2C41336553%2C34891323%2C40579488%2C35099768%2C35169837%2C35049185%2C38265909%2C40079832%2C33091066%2C34135732%2C41256173%2C35124225%2C38724231%2C32140722%2C33395669%2C37822968%2C37982637%2C41313932%2C35345863%2C33931006%2C39229190%2C38590363%2C39642366%2C34940356%2C36987385%2C34010815%2C38511575%2C40398440%2C38769157%2C33764315%2C40281762%2C39111203%2C33018647%2C34977367%2C37849269%2C32678612%2C40030458%2C40136836%2C32139377%2C35621994%2C39419091%2C38952818%2C38595976%2C31824249%2C37841873%2C32156101%2C33242850%2C33060178%2C35594135%2C38848226%2C37074883%2C37829160%2C37420656%2C40975844%2C37772061%2C32193766%2C33232686%2C37137903%2C40309789%2C35312732%2C31849632%2C41153733%2C36645913%2C35659259%2C32600032%2C35248817%2C39277130%2C41040179%2C32706190%2C36296132%2C40602303%2C40127544%2C35171645%2C38786506%2C36731812%2C40247887%2C35947962%2C37162904%2C41336863%2C40499369%2C40929271%2C39345497%2C36070668%2C38102180%2C40769034%2C38788704%2C32270713%2C40720979%2C40578216%2C39741704%2C36085743%2C33633920%2C40040306%2C40061257%2C41337074%2C39625426%2C32324538%2C34108870%2C33014175%2C33018642%2C32442987%2C34130614%2C36086042%2C39654337%2C35658928%2C33034334%2C40144585%2C36776220%2C32903354%2C32388763%2C36494390%2C35604492%2C38114151%2C34561503%2C33333814%2C39870043%2C40644146%2C32390797%2C34205564%2C34870202%2C39838770%2C32882382%2C38762683%2C40541229%2C38648782%2C36889121&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-21 11:34:47 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-21 11:34:47 - app.phase2.pubmed_fetcher - INFO - Fetching 49 PMIDs from PubMed...
2026-01-21 11:34:48 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=34892499%2C34358704%2C32101735%2C40054446%2C32498049%2C33418549%2C33268657%2C37875404%2C35850040%2C33202396%2C37657190%2C40573703%2C34576934%2C34858125%2C35921802%2C33632810%2C41381618%2C37795548%2C38405828%2C35113857%2C41282818%2C36950147%2C37932250%2C31823804%2C37245559%2C33372958%2C38954651%2C33980469%2C35839739%2C34410924%2C33770760%2C34286856%2C37114777%2C37672532%2C35726918%2C35576911%2C37467739%2C36033477%2C39130131%2C33237879%2C33162885%2C37745380%2C37183188%2C35234665%2C33380333%2C33817046%2C34949982%2C37547006%2C36016382&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-21 11:34:49 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-21 11:34:49 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-21 11:34:49 - app.phase2.pubmed_fetcher - INFO - Extracted 499 PMIDs from 4 batches
2026-01-21 11:34:49 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 499 PubMed XML records
2026-01-21 11:34:49 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:34:49 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-21 11:34:49 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 499 papers
2026-01-21 11:34:49 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:34:49 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-21 11:34:49 - app.phase2.pg_ingest - INFO -    Extracting 2157 unique affiliations via rule-based method
2026-01-21 11:34:49 - app.phase2.rule_based_extractor - INFO -    Processing 2157 affiliations...
2026-01-21 11:34:49 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2157 affiliations...
2026-01-21 11:34:49 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 505 hits, 1652 need extraction
2026-01-21 11:34:49 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 1652 affiliations...
2026-01-21 11:34:49 - app.phase2.institution_matcher - INFO -    Loaded 2935 institutions to memory (2935 normalized names, 216 aliases)
2026-01-21 11:34:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/1652 (6%), matches found: 64
2026-01-21 11:34:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/1652 (12%), matches found: 125
2026-01-21 11:34:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/1652 (18%), matches found: 191
2026-01-21 11:34:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/1652 (24%), matches found: 262
2026-01-21 11:34:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/1652 (30%), matches found: 317
2026-01-21 11:34:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/1652 (36%), matches found: 377
2026-01-21 11:34:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/1652 (42%), matches found: 444
2026-01-21 11:34:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/1652 (48%), matches found: 509
2026-01-21 11:34:49 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/1652 (54%), matches found: 571
2026-01-21 11:34:50 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/1652 (60%), matches found: 624
2026-01-21 11:34:50 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/1652 (66%), matches found: 688
2026-01-21 11:34:50 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/1652 (72%), matches found: 746
2026-01-21 11:34:50 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/1652 (78%), matches found: 820
2026-01-21 11:34:50 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/1652 (84%), matches found: 873
2026-01-21 11:34:50 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/1652 (90%), matches found: 930
2026-01-21 11:34:50 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/1652 (96%), matches found: 990
2026-01-21 11:34:50 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1652/1652 (100%), matches found: 1022
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 1022 matches found
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    Extracting 630 affiliations using rule-based parser...
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 63/630 (10%)
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 126/630 (20%)
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 189/630 (30%)
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 252/630 (40%)
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 315/630 (50%)
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 378/630 (60%)
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 441/630 (70%)
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 504/630 (80%)
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 567/630 (90%)
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 630/630 (100%)
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 630 results
2026-01-21 11:34:50 - app.phase2.rule_based_extractor - INFO -       Pending validation: 549 institutions
2026-01-21 11:34:51 - app.phase2.pg_ingest - INFO -    Cached 1652 new affiliation extraction results to affiliation_cache table
2026-01-21 11:34:51 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2157 affiliations processed, 2126 with country
2026-01-21 11:34:51 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2157 affiliations
2026-01-21 11:34:51 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2157
2026-01-21 11:34:51 - app.phase2.pg_ingest - INFO -    With country: 2126
2026-01-21 11:34:51 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-21 11:34:51 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:34:51 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-21 11:34:51 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 4dbd2ac34e0f...
2026-01-21 11:34:51 - app.phase2.pg_ingest - INFO -    Inserting/updating 499 papers (bulk operation)...
2026-01-21 11:34:51 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 499
2026-01-21 11:34:51 - app.phase2.pg_ingest - INFO -    Inserting 4119 authorships (bulk operation)...
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4119
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -    Linking run 4dbd2ac34e0f to 499 papers...
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4119 authorships
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 4dbd2ac34e0f
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -    Total PMIDs: 499
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -    Papers parsed: 499
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -    Authorships created: 4119
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2157
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2126
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO - 
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 505
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 1022
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 630
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 628
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO - 
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2157 = 2157 (matches)
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 549
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO - 
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-21 11:34:56 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-21 11:34:56 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 549
2026-01-21 11:34:56 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:34:56 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 4dbd2ac34e0f...
2026-01-21 11:34:56 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 5424 authorships from 499 papers
2026-01-21 11:34:56 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:34:56 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-21 11:34:56 - app.phase2.affiliation_validator - INFO -    Found 406 unique location keys from 5424 authorships
2026-01-21 11:34:57 - app.phase2.affiliation_validator - INFO -    Batch query complete: 328/406 found in cache
2026-01-21 11:34:57 - app.phase2.affiliation_validator - INFO -    Processing 78 unique location keys via Nominatim...
2026-01-21 11:34:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Miyazaki, Japan' -> (32.097681, 131.294542)
2026-01-21 11:35:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Cedar Falls, United States' -> (42.5361805, -92.447758)
2026-01-21 11:35:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Bodelwyddan, United Kingdom' -> (53.2705527, -3.5129657)
2026-01-21 11:35:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Pilsen, Czechia' -> (49.7477415, 13.3775249)
2026-01-21 11:35:09 - app.phase2.pg_geocoding - INFO - Geocoded 'West Bengal, India' -> (22.9964948, 87.6855882)
2026-01-21 11:35:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Front Royal, United States' -> (38.9179069, -78.1918077)
2026-01-21 11:35:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Campbell, United States' -> (37.2158191, -79.1165953)
2026-01-21 11:35:16 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Isfahan, Iran (Islamic Republic of)' (from affiliation: Department of Electrical and Computer Engineering, Isfahan University of Technology, Isfahan, 84156-83111, Iran. (PMID: 33232686))
2026-01-21 11:35:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Bielefeld, Germany' -> (52.0191005, 8.531007)
2026-01-21 11:35:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Agrate Brianza, Italy' -> (45.5761735, 9.3509475)
2026-01-21 11:35:21 - app.phase2.pg_geocoding - INFO - Geocoded 'ETH, Switzerland' -> (47.4083275, 8.507564)
2026-01-21 11:35:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Dayton, United States' -> (39.7589478, -84.1916069)
2026-01-21 11:35:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Bassersdorf, Switzerland' -> (47.4435706, 8.6299131)
2026-01-21 11:35:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Dijon, France' -> (47.3215806, 5.0414701)
2026-01-21 11:35:29 - app.phase2.pg_geocoding - WARNING - Cache store failed for city:Dijon,France: the database system is not yet accepting connections
DETAIL:  Consistent recovery state has not been yet reached.
2026-01-21 11:35:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Clinique Saint-Pierre, Belgium' -> (50.6674797, 4.5602911)
2026-01-21 11:35:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Namur, Belgium' -> (50.4665284, 4.8661892)
2026-01-21 11:35:39 - app.phase2.pg_geocoding - WARNING - Could not geocode 'CHU-UCL Namur, Belgium' (from affiliation: Department of Laboratory Medicine, CHU-UCL Namur, UniversitÃ© Catholique de Louvain, 5530 Yvoir, Belgium. (PMID: 34205564))
2026-01-21 11:35:41 - app.phase2.pg_geocoding - WARNING - Could not geocode 'QUALIblood S.A, Belgium' (from affiliation: QUALIblood S.A., 5000 Namur, Belgium. (PMID: 34205564))
2026-01-21 11:35:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Solna, Sweden' -> (59.366667, 18.016667)
2026-01-21 11:35:45 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Minneapolis, Andorra' (from affiliation: 3Medtronic plc, Minneapolis, Minnesota; and. (PMID: 34560646))
2026-01-21 11:35:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Obihiro, Japan' -> (42.923809, 143.1966324)
2026-01-21 11:35:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Potsdam, Germany' -> (52.4009309, 13.0591397)
2026-01-21 11:35:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Menlo Park, United States' -> (37.4519671, -122.177992)
2026-01-21 11:35:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Kanazawa, Japan' -> (36.561627, 136.6568822)
2026-01-21 11:36:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Sudbury, Canada' -> (46.49272, -80.991211)
2026-01-21 11:36:07 - app.phase2.pg_geocoding - WARNING - Could not geocode 'AgeCare, Denmark' (from affiliation: Department of Oncology, AgeCare, Academy of Geriatric Cancer Research, Odense University Hospital, Denmark. (PMID: 34977367))
2026-01-21 11:36:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Norwich, United Kingdom' -> (52.6285576, 1.2923954)
2026-01-21 11:36:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Science And Technology, South Korea' -> (36.3698812, 127.3623793)
2026-01-21 11:36:13 - app.phase2.pg_geocoding - INFO - Geocoded 'La Tronche, France' -> (45.2090131, 5.745715)
2026-01-21 11:36:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Ely, United Kingdom' -> (52.3990199, 0.262039)
2026-01-21 11:36:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Erlangen, Germany' -> (49.5891571, 10.9812072)
2026-01-21 11:36:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Huntington Beach, United States' -> (33.6783336, -118.000016)
2026-01-21 11:36:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Germantown, United States' -> (39.181334, -77.266647)
2026-01-21 11:36:24 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Pardis -, Iran, Islamic Republic of' (from affiliation: Neuroscience and Neuroengineering Research Lab, Biomedical Engineering Department, School of Electrical Engineering, Iran University of Science and Technology (IUST), Narmak, Tehran 16846-13114, Iran; Institute for Cognitive Science Studies (ICSS), Tehran, Pardis 16583-44575, Iran. (PMID: 35759821))
2026-01-21 11:36:26 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Tehran -, Iran, Islamic Republic of' (from affiliation: Neuroscience and Neuroengineering Research Lab, Biomedical Engineering Department, School of Electrical Engineering, Iran University of Science and Technology (IUST), Narmak, Tehran 16846-13114, Iran. (PMID: 35759821))
2026-01-21 11:36:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Telangana, India' -> (17.8495919, 79.1151663)
2026-01-21 11:36:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Aghia Paraskevi, Greece' -> (38.0066759, 23.8226942)
2026-01-21 11:36:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Tripoli, Greece' -> (37.5102911, 22.3724241)
2026-01-21 11:36:38 - app.phase2.pg_geocoding - INFO - Geocoded 'South San Francisco, United States' -> (37.6535403, -122.4168664)
2026-01-21 11:36:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Concord, United States' -> (43.207178, -71.537476)
2026-01-21 11:36:44 - app.phase2.pg_geocoding - INFO - Geocoded 'INSERM, France' -> (45.7442613, 4.8765302)
2026-01-21 11:36:46 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Detroit, Andorra' (from affiliation: 4Department of Neurological Surgery, Henry Ford Medical Center, Detroit, Michigan; and. (PMID: 36029267))
2026-01-21 11:36:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Lecce, Italy' -> (40.1522173, 18.2260628)
2026-01-21 11:36:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Latina, Italy' -> (41.4595261, 13.0125912)
2026-01-21 11:36:51 - app.phase2.pg_geocoding - INFO - Geocoded 'San Giovanni Rotondo, Italy' -> (41.7069106, 15.7288455)
2026-01-21 11:36:53 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Medical student, Jordan' (from affiliation: Medical student, Faculty of Medicine, Hashemite University, Jordan. (PMID: 36817269))
2026-01-21 11:36:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Al-Karak, Jordan' -> (31.1847222, 35.7047218)
2026-01-21 11:36:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Pula, Croatia' -> (44.8702281, 13.8455311)
2026-01-21 11:36:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Konolfingen, Switzerland' -> (46.879415, 7.6209846)
2026-01-21 11:37:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Qinhuangdao, China' -> (39.9395724, 119.5894129)
2026-01-21 11:37:06 - app.phase2.pg_geocoding - INFO - Geocoded 'F- Rennes, France' -> (48.105314, -1.6673866)
2026-01-21 11:37:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Bochum, Germany' -> (51.4818111, 7.2196635)
2026-01-21 11:37:10 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Computer and Biomedical Engineering, United States' (from affiliation: Electrical, Computer and Biomedical Engineering, University of Rhode Island, Rhode Island, USA. (PMID: 37645922))
2026-01-21 11:37:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Xi'an, China (Mainland)' -> (23.1254895, 113.2488061)
2026-01-21 11:37:15 - app.phase2.pg_geocoding - INFO - Geocoded 'ExcellGene SA, Switzerland' -> (46.2550433, 6.9593335)
2026-01-21 11:37:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Kasugai, Japan' -> (35.2476278, 136.9721611)
2026-01-21 11:37:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Hirakata, Japan' -> (34.8144363, 135.6507278)
2026-01-21 11:37:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Xanthi, Greece' -> (41.13805, 24.8864089)
2026-01-21 11:37:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Komotini, Greece' -> (41.1182, 25.4035708)
2026-01-21 11:37:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Thessaly, Greece' -> (39.5060878, 22.3191881)
2026-01-21 11:37:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Gardanne, France' -> (43.455613, 5.4710661)
2026-01-21 11:37:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Lublin, Poland' -> (51.2181945, 22.5546776)
2026-01-21 11:37:32 - app.phase2.pg_geocoding - INFO - Geocoded '200 First St. Rochester, United States' -> (43.170884, -77.588008)
2026-01-21 11:37:33 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Tabriz, Iran (Islamic Republic of)' (from affiliation: Department of Cognitive Neuroscience, Faculty of Education and Psychology, University of Tabriz, Tabriz, Iran. (PMID: 39277130))
2026-01-21 11:37:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Duisburg, Germany' -> (51.434999, 6.759562)
2026-01-21 11:37:37 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Macau, Macao SAR, China' (from affiliation: Institute of Microelectronics, University of Macau, Avenida da Universidade, Taipa, Macau, China. (PMID: 39391047))
2026-01-21 11:37:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Hawaii at MaÃ±oa, United States' -> (21.2982795, -157.8186932)
2026-01-21 11:37:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Delft, Netherlands' -> (52.0114017, 4.35839)
2026-01-21 11:37:44 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Kyunggi-do, South Korea' (from affiliation: SK Hynix Inc., Icheon, Kyunggi-do, 17336, Republic of Korea. (PMID: 39838770))
2026-01-21 11:37:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Grenoble F-, France' -> (45.189777, 5.7712026)
2026-01-21 11:38:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Rennes F-, France' -> (48.105314, -1.6673866)
2026-01-21 11:38:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Caserta, Italy' -> (41.2035193, 14.1168624)
2026-01-21 11:38:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Santiago, Spain' -> (42.9189543, -8.550786)
2026-01-21 11:38:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Kharagpur, India' -> (22.34309, 87.3012875)
2026-01-21 11:38:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Thuwal, Saudi Arabia' -> (22.2833454, 39.1128145)
2026-01-21 11:38:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Sabt Al Alayah, Saudi Arabia' -> (19.563336, 41.9579697)
2026-01-21 11:38:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Jazan, Saudi Arabia' -> (17.333333, 42.666667)
2026-01-21 11:38:18 - app.phase2.pg_geocoding - INFO - Geocoded 'AI-Baha, Saudi Arabia' -> (18.3372839, 41.9118076)
2026-01-21 11:38:18 - app.phase2.affiliation_validator - INFO -    Batch updating 4614 affiliations for 325 cached locations...
2026-01-21 11:38:29 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 325 locations (4614 total affiliations)
2026-01-21 11:38:29 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:38:29 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 549 pending institutions to institution_geo...
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO -    âœ… Added 63 validated institutions to institution_geo table
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 5424
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 4643
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO -    Cache misses: 211
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 189
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 22
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 31
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 18
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 63/549
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 31 error affiliations with LLM...
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO -    Collecting 31 unique error affiliations for LLM fix
2026-01-21 11:38:33 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-21 11:38:33 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 31 affiliations...
2026-01-21 11:38:33 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 31 affiliations...
2026-01-21 11:38:33 - app.phase2.institution_matcher - INFO -    Loaded 2998 institutions to memory (2998 normalized names, 216 aliases)
2026-01-21 11:38:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 3/31 (9%), matches found: 0
2026-01-21 11:38:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/31 (19%), matches found: 0
2026-01-21 11:38:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 9/31 (29%), matches found: 0
2026-01-21 11:38:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/31 (38%), matches found: 1
2026-01-21 11:38:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 15/31 (48%), matches found: 4
2026-01-21 11:38:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/31 (58%), matches found: 7
2026-01-21 11:38:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 21/31 (67%), matches found: 7
2026-01-21 11:38:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 24/31 (77%), matches found: 7
2026-01-21 11:38:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 27/31 (87%), matches found: 7
2026-01-21 11:38:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 30/31 (96%), matches found: 10
2026-01-21 11:38:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 31/31 (100%), matches found: 10
2026-01-21 11:38:33 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 10 matches found
2026-01-21 11:38:33 - app.phase2.affiliation_extractor - INFO -    Extracting 21 affiliations via LLM (affiliation_cache: 0, institution_geo: 10) in batches of 20
2026-01-21 11:38:33 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/2 (20 affiliations)
2026-01-21 11:38:39 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 11:38:43 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 2/2 (1 affiliations)
2026-01-21 11:38:44 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 11:38:44 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 21 affiliations processed
2026-01-21 11:38:44 - app.phase2.affiliation_extractor - INFO -       Auto-added to institution_geo table: 9 institutions
2026-01-21 11:38:44 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 31 results from 2 LLM calls
2026-01-21 11:38:44 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 31 LLM results...
2026-01-21 11:38:44 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 31 LLM results
2026-01-21 11:38:44 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-21 11:38:44 - app.phase2.affiliation_validator - INFO -    Processing 15 unique location keys for re-geocoding...
2026-01-21 11:38:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Odense, Denmark' -> (55.3997225, 10.3852104)
2026-01-21 11:38:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Zarqa, Jordan' -> (32.0668425, 36.0885771)
2026-01-21 11:38:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Kingston, United States' -> (41.9287812, -74.0023825)
2026-01-21 11:38:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Icheon, South Korea' -> (37.2808823, 127.4429132)
2026-01-21 11:38:58 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 31 affiliations
2026-01-21 11:38:58 - app.phase2.affiliation_validator - INFO -    âœ… Updated 51 authorships
2026-01-21 11:38:58 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 9 locations
2026-01-21 11:38:58 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:38:58 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 4dbd2ac34e0f
2026-01-21 11:38:58 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 31
2026-01-21 11:38:58 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 31
2026-01-21 11:38:58 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 51
2026-01-21 11:38:58 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 9
2026-01-21 11:38:58 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:38:58 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-21 11:38:58 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-21 11:38:58 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 31
2026-01-21 11:38:58 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 31
2026-01-21 11:38:58 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 51
2026-01-21 11:38:58 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 9
2026-01-21 11:38:58 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 63
2026-01-21 11:38:58 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 22
2026-01-21 11:38:58 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-21 11:38:58 - app.main - INFO - ================================================================================
2026-01-21 11:38:58 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 4dbd2ac34e0f
2026-01-21 11:38:58 - app.main - INFO -    Total PMIDs: 499
2026-01-21 11:38:58 - app.main - INFO -    Papers parsed: 499
2026-01-21 11:38:58 - app.main - INFO -    Authorships created: 4119
2026-01-21 11:38:58 - app.main - INFO -    Unique affiliations: 2157
2026-01-21 11:38:58 - app.main - INFO -    Affiliations with country: 2126
2026-01-21 11:38:58 - app.main - INFO -    LLM calls made: 0
2026-01-21 11:38:58 - app.main - INFO - ================================================================================
2026-01-21 11:39:08 - app.main - INFO - ================================================================================
2026-01-21 11:39:08 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 4dbd2ac34e0f
2026-01-21 11:39:08 - app.main - INFO -    Min confidence: low
2026-01-21 11:39:08 - app.main - INFO - ================================================================================
2026-01-21 11:39:08 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 4dbd2ac34e0f...
2026-01-21 11:39:08 - app.main - INFO - ================================================================================
2026-01-21 11:39:08 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 4dbd2ac34e0f
2026-01-21 11:39:08 - app.main - INFO -    Min confidence: low
2026-01-21 11:39:08 - app.main - INFO - ================================================================================
2026-01-21 11:39:08 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 4dbd2ac34e0f...
2026-01-21 11:39:08 - app.phase2.pg_aggregations - INFO -    Found 499 PMIDs
2026-01-21 11:39:08 - app.phase2.pg_aggregations - INFO -    Found 499 PMIDs
2026-01-21 11:39:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Macao SAR, China' -> (22.2862191, 113.8900587)
2026-01-21 11:39:11 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 57 countries
2026-01-21 11:39:11 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 11:39:11 - app.main - INFO -    Countries returned: 57
2026-01-21 11:39:11 - app.main - INFO - ================================================================================
2026-01-21 11:39:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Macao SAR, China' -> (22.2862191, 113.8900587)
2026-01-21 11:39:12 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 57 countries
2026-01-21 11:39:12 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 11:39:12 - app.main - INFO -    Countries returned: 57
2026-01-21 11:39:12 - app.main - INFO - ================================================================================
2026-01-21 11:46:42 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 11:50:20 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 11:50:44 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 11:51:08 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 11:51:14 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi "HTTP/1.1 200 OK"
2026-01-21 11:51:14 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-21 11:51:16 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-21 11:51:17 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-21 11:52:46 - app.main - INFO - ================================================================================
2026-01-21 11:52:46 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: 9aa24ef17317
2026-01-21 11:52:46 - app.main - INFO -    Force refresh: False
2026-01-21 11:52:46 - app.main - INFO - ================================================================================
2026-01-21 11:52:46 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:52:46 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 9aa24ef17317
2026-01-21 11:52:46 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-21 11:52:46 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-21 11:52:46 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:52:46 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-21 11:52:49 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 9aa24ef17317
2026-01-21 11:52:49 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-21 11:52:49 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:52:49 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-21 11:52:49 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-21 11:52:49 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-21 11:52:49 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=39556950%2C29485407%2C40520859%2C36517550%2C34562273%2C34260835%2C28268626%2C41336643%2C36121939%2C28261338%2C34182408%2C37739786%2C38317462%2C37022416%2C33032944%2C40972658%2C32577713%2C31033729%2C41034198%2C37163609%2C30440349%2C30524070%2C27915117%2C33495242%2C32938263%2C38754326%2C36482685%2C32006952%2C38025819%2C29205933%2C40502202%2C36548996%2C40239679%2C37139454%2C32944541%2C39061108%2C32140677%2C37092618%2C40819020%2C40570701%2C33920250%2C31765302%2C38738213%2C29363598%2C37781630%2C32291370%2C37249217%2C34619239%2C33108775%2C33176752%2C27559309%2C40539244%2C39229047%2C37567210%2C32224511%2C28286237%2C38914073%2C37080210%2C27858575%2C29359711%2C31946840%2C37292755%2C40885826%2C37986728%2C35573306%2C28931054%2C35819528%2C27669264%2C31363096%2C33547859%2C27282247%2C41108882%2C34269670%2C34533415%2C36349662%2C34892635%2C31946534%2C40302941%2C39954182%2C38873653%2C33543597%2C31587955%2C32746347%2C40533436%2C38729977%2C28722685%2C38678058%2C37465143%2C38949928%2C33477128%2C41397373%2C39421626%2C41401061%2C31247299%2C38486966%2C37963397%2C29455421%2C37483858%2C40838806%2C36562997%2C37637766%2C41491932%2C29616982%2C37943244%2C38496552%2C28268963%2C36198278%2C32397102%2C35589391%2C27651034%2C34620572%2C30246690%2C35862323%2C39151656%2C32131064%2C40039596%2C28993231%2C29306539%2C32379389%2C41044458%2C37217494%2C39854845%2C32164870%2C30421046%2C41318089%2C30814923%2C41459740%2C40578388%2C28652093%2C30459559%2C41266624%2C40498623%2C40040155%2C34289456%2C29706871%2C27148018%2C35551234%2C37105806%2C31525179%2C34695809%2C32375031%2C37425292%2C33115813%2C28784984%2C34550888%2C35395645%2C30441410%2C31840111%2C40862891%2C27830790&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-21 11:52:49 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-21 11:52:49 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-21 11:52:50 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41194086%2C39485790%2C33018782%2C27313787%2C39439222%2C35735299%2C38349834%2C40767951%2C40490003%2C35688315%2C34102262%2C39892431%2C39975237%2C35036888%2C29018336%2C32895549%2C34579106%2C28127977%2C36702495%2C40226480%2C31619680%2C30211695%2C36467293%2C28269552%2C39451800%2C30617653%2C36639237%2C33606044%2C40506548%2C35045735%2C33373294%2C40030380%2C41191764%2C27513737%2C27337709%2C39703343%2C36421829%2C38706295%2C35155507%2C34248362%2C40002850%2C38686330%2C34640699%2C38753110%2C37082152%2C40060267%2C40461573%2C39345641%2C38812257%2C28875947%2C33645380%2C27161679%2C36356309%2C33401571%2C35213336%2C31585451%2C32107734%2C35985293%2C38926991%2C32439539%2C36896904%2C32610290%2C28361947%2C38915599%2C37216253%2C29199642%2C41031500%2C28651628%2C38559163%2C31767020%2C30172003%2C35933960%2C40825359%2C40212472%2C36635340%2C36086236%2C33613212%2C32944540%2C40832231%2C34017235%2C28268628%2C38700963%2C38258358%2C37427002%2C33018041%2C30386200%2C29059845%2C39887746%2C31899430%2C31096206%2C38285576%2C28665058%2C39985774%2C30420874%2C37371638%2C38671062%2C34483823%2C29104374%2C40771876%2C33418552%2C30131666%2C27432551%2C34708064%2C31640802%2C39005269%2C36240727%2C31680806%2C41484392%2C29989927%2C37205052%2C38237174%2C28320670%2C34582344%2C38885688%2C40620712%2C29872323%2C31361011%2C32101491%2C30711286%2C38343801%2C30250141%2C33844633%2C33186832%2C39554006%2C28269704%2C35078156%2C37819985%2C31926762%2C33524962%2C40695313%2C37487487%2C28891524%2C40798931%2C35705618%2C37459853%2C39211094%2C38909761%2C38798494%2C31821411%2C36711153%2C29060269%2C29993452%2C37007675%2C31836957%2C40372852%2C38398202%2C35210108%2C36493981%2C36383245%2C31581098&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-21 11:52:50 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-21 11:52:50 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-21 11:52:51 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=39274138%2C40913530%2C40780076%2C32548859%2C29130452%2C40144587%2C41337025%2C40343020%2C33910024%2C37567222%2C41177674%2C29378977%2C40000170%2C35975731%2C30624221%2C30990187%2C40048825%2C34338632%2C39899980%2C27255798%2C37949923%2C32410969%2C38718901%2C29343650%2C31572120%2C31902769%2C35594208%2C30389490%2C36053905%2C39375394%2C40280983%2C35287119%2C31616237%2C33142282%2C29363625%2C30238924%2C34788156%2C40608885%2C34891323%2C41125947%2C31379476%2C41084230%2C35099768%2C28268621%2C35169837%2C32747834%2C27900953%2C34491920%2C28690513%2C30444217%2C39423832%2C33018756%2C27926827%2C40588007%2C40527337%2C41256173%2C41398663%2C41361599%2C32140722%2C31578420%2C37822968%2C32903340%2C41022986%2C33476409%2C37244370%2C39229190%2C30523839%2C38999444%2C37284744%2C40398440%2C38769157%2C33398428%2C37610305%2C40031495%2C39433844%2C30429772%2C39111203%2C28504971%2C38444830%2C40136836%2C34169339%2C30256217%2C39651250%2C39589548%2C37508828%2C35621994%2C31824249%2C31321955%2C40614757%2C30853300%2C29060039%2C32306924%2C37457015%2C33236720%2C28098561%2C40262392%2C35659259%2C34226662%2C32289756%2C36715190%2C41040179%2C39194182%2C32706190%2C39476952%2C27187274%2C40127544%2C40179638%2C30101753%2C29209023%2C35962958%2C31007069%2C30985902%2C29176638%2C30397281%2C37948117%2C38895473%2C29989931%2C35545701%2C37863819%2C41055454%2C40929271%2C30459542%2C37519868%2C36395140%2C31656937%2C33981047%2C34499856%2C30235013%2C28442997%2C32270713%2C40720979%2C37090803%2C37572195%2C32992539%2C41337074%2C39371161%2C39692757%2C39819752%2C34130614%2C30931146%2C27199638%2C40144585%2C36776220%2C30441039%2C32903354%2C30002452%2C36494390%2C31042684%2C30534447%2C38712189&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-21 11:52:51 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-21 11:52:51 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-21 11:52:52 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40032802%2C36778458%2C31222030%2C27534393%2C34870202%2C30462658%2C37395935%2C38762683%2C33270578%2C36731514%2C28685918%2C40800983%2C36048345%2C40054446%2C41337011%2C31092081%2C37227524%2C35368269%2C31296796%2C33418549%2C28321182%2C30069659%2C33029056%2C30106673%2C40152312%2C33202396%2C28060708%2C29182152%2C34292498%2C31440127%2C35417680%2C40961966%2C35113857%2C36950147%2C33177971%2C28002803%2C33372958%2C32313100%2C40304297%2C38954651%2C33980469%2C28783638%2C33770760%2C30216140%2C34290988%2C37467739%2C33162885%2C37745380%2C37183188%2C35234665&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-21 11:52:52 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-21 11:52:52 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-21 11:52:52 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-21 11:52:52 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-21 11:52:52 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:52:52 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-21 11:52:52 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-21 11:52:52 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:52:52 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-21 11:52:52 - app.phase2.pg_ingest - INFO -    Extracting 2586 unique affiliations via rule-based method
2026-01-21 11:52:52 - app.phase2.rule_based_extractor - INFO -    Processing 2586 affiliations...
2026-01-21 11:52:52 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2586 affiliations...
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 1165 hits, 1421 need extraction
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 1421 affiliations...
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    Loaded 3007 institutions to memory (3007 normalized names, 216 aliases)
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/1421 (7%), matches found: 65
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/1421 (14%), matches found: 130
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/1421 (21%), matches found: 190
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/1421 (28%), matches found: 258
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/1421 (35%), matches found: 329
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/1421 (42%), matches found: 389
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/1421 (49%), matches found: 451
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/1421 (56%), matches found: 520
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/1421 (63%), matches found: 586
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/1421 (70%), matches found: 647
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/1421 (77%), matches found: 706
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/1421 (84%), matches found: 766
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/1421 (91%), matches found: 826
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/1421 (98%), matches found: 893
2026-01-21 11:52:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1421/1421 (100%), matches found: 905
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 905 matches found
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Extracting 516 affiliations using rule-based parser...
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 51/516 (9%)
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 102/516 (19%)
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 153/516 (29%)
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 204/516 (39%)
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 255/516 (49%)
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 306/516 (59%)
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 357/516 (69%)
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 408/516 (79%)
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 459/516 (88%)
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 510/516 (98%)
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 516/516 (100%)
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 516 results
2026-01-21 11:52:53 - app.phase2.rule_based_extractor - INFO -       Pending validation: 448 institutions
2026-01-21 11:52:54 - app.phase2.pg_ingest - INFO -    Cached 1421 new affiliation extraction results to affiliation_cache table
2026-01-21 11:52:54 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2586 affiliations processed, 2552 with country
2026-01-21 11:52:54 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2586 affiliations
2026-01-21 11:52:54 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2586
2026-01-21 11:52:54 - app.phase2.pg_ingest - INFO -    With country: 2552
2026-01-21 11:52:54 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-21 11:52:54 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:52:54 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-21 11:52:54 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 9aa24ef17317...
2026-01-21 11:52:54 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-21 11:52:54 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-21 11:52:54 - app.phase2.pg_ingest - INFO -    Inserting 4689 authorships (bulk operation)...
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4689
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -    Linking run 9aa24ef17317 to 500 papers...
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4689 authorships
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: 9aa24ef17317
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -    Authorships created: 4689
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2586
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2552
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO - 
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 1165
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 905
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 516
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 510
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO - 
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2586 = 2586 (matches)
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 448
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO - 
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-21 11:52:58 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-21 11:52:58 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 448
2026-01-21 11:52:58 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:52:58 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 9aa24ef17317...
2026-01-21 11:52:59 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 8088 authorships from 500 papers
2026-01-21 11:52:59 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:52:59 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-21 11:52:59 - app.phase2.affiliation_validator - INFO -    Found 464 unique location keys from 8088 authorships
2026-01-21 11:52:59 - app.phase2.affiliation_validator - INFO -    Batch query complete: 397/464 found in cache
2026-01-21 11:52:59 - app.phase2.affiliation_validator - INFO -    Processing 67 unique location keys via Nominatim...
2026-01-21 11:53:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Niigata, Japan' -> (37.6452283, 138.7669125)
2026-01-21 11:53:03 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Chungbuk Republic of Korea, United Kingdom' (from affiliation: 2. Department of Urology, Chungbuk National University College of Medicine, Cheongju, Korea. (PMID: 27313787))
2026-01-21 11:53:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Japan, Germany' -> (52.4542825, 13.3063026)
2026-01-21 11:53:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Geneve, Switzerland' -> (46.2017559, 6.1466014)
2026-01-21 11:53:09 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Neurological Surgery, Andorra' (from affiliation: Neurological Surgery, University of Washington; and. (PMID: 27858575))
2026-01-21 11:53:11 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Villeurbanne cedex, France' (from affiliation: University Claude Bernard Lyon 1, Inter-University Laboratory of Human Movement Biology, 27-29 Boulevard du 11 Novembre 1918, F-69622, Villeurbanne cedex, France. (PMID: 27915117))
2026-01-21 11:53:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Hyogo, Japan' -> (34.914934, 134.860666)
2026-01-21 11:53:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Atsugi, Japan' -> (35.4429646, 139.3625125)
2026-01-21 11:53:17 - app.phase2.pg_geocoding - WARNING - Could not geocode '- Tehran, Iran, Islamic Republic of' (from affiliation: Neuroscience and Neuroengineering Research Lab., Biomedical Engineering Department, School of Electrical Engineering, Iran University of Science & Technology (IUST), Narmak, 16846-13114 Tehran, Iran. E-mail:Â daliri@iust.ac.ir. (PMID: 28891524))
2026-01-21 11:53:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Ecully, France' -> (45.7754498, 4.7785644)
2026-01-21 11:53:26 - app.phase2.pg_geocoding - INFO - Geocoded 'White Plains, United States' -> (41.0339862, -73.7629097)
2026-01-21 11:53:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Venice, United States' -> (33.995044, -118.4668875)
2026-01-21 11:53:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Ã–rkelljunga, Sweden' -> (56.2827878, 13.2828212)
2026-01-21 11:53:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Ã–rebro, Sweden' -> (59.2747287, 15.2151181)
2026-01-21 11:53:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Smoke Rise, United States' -> (33.8778435, -86.8192664)
2026-01-21 11:53:35 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Automatic Control and Informatics, Poland' (from affiliation: Faculty of Electrical Engineering, Automatic Control and Informatics, Opole University of Technology, 45-758 Opole, Poland. (PMID: 33401571))
2026-01-21 11:53:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Vic, Australia' -> (-36.5986096, 144.6780052)
2026-01-21 11:53:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Le Kremlin Bicetre, France' -> (48.8125893, 2.3570028)
2026-01-21 11:53:43 - app.phase2.pg_geocoding - INFO - Geocoded 'San Carlos, United States' -> (37.504936, -122.261823)
2026-01-21 11:53:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Taranto, Italy' -> (40.5488156, 17.0805801)
2026-01-21 11:53:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Potenza, Italy' -> (40.517312, 15.8216088)
2026-01-21 11:53:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Lappeenranta, Finland' -> (61.0583417, 28.1862293)
2026-01-21 11:53:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Lahti, Finland' -> (60.982628, 25.6613418)
2026-01-21 11:53:54 - app.phase2.pg_geocoding - INFO - Geocoded 'JyvÃ¤skylÃ¤, Finland' -> (62.241672, 25.7495806)
2026-01-21 11:53:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Pori, Finland' -> (61.4866126, 21.7972071)
2026-01-21 11:53:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Kotka, Finland' -> (60.4672673, 26.9459462)
2026-01-21 11:53:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Vaasa, Finland' -> (63.0957722, 21.6159187)
2026-01-21 11:54:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Kajaani, Finland' -> (64.2246862, 27.7339281)
2026-01-21 11:54:07 - app.phase2.pg_geocoding - INFO - Geocoded 'HÃ¤meenlinna, Finland' -> (60.9966192, 24.465141)
2026-01-21 11:54:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Lohja, Finland' -> (60.2512041, 24.0676953)
2026-01-21 11:54:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Rootstown, United States' -> (41.0990792, -81.2424901)
2026-01-21 11:54:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Macon, United States' -> (32.8406946, -83.6324022)
2026-01-21 11:54:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Faro, Portugal' -> (37.0162944, -7.935182)
2026-01-21 11:54:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Malvern, United States' -> (41.0024095, -95.5851939)
2026-01-21 11:54:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Savar, Bangladesh' -> (23.8477, 90.2587)
2026-01-21 11:54:25 - app.phase2.pg_geocoding - INFO - Geocoded 'KÃ¶ln, Germany' -> (50.938361, 6.959974)
2026-01-21 11:54:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Celle, Germany' -> (52.624056, 10.081052)
2026-01-21 11:54:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Bad Liebenwerda, Germany' -> (51.5158115, 13.39272)
2026-01-21 11:54:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Florida International, United States' -> (25.7553898, -80.3762833)
2026-01-21 11:54:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Uberlandia, Brazil' -> (-18.9188041, -48.2767837)
2026-01-21 11:54:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Barretos, Brazil' -> (-20.5531437, -48.5697509)
2026-01-21 11:54:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Scotland, United Kingdom' -> (56.7861112, -4.1140518)
2026-01-21 11:54:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Otago, New Zealand' -> (-45.3975053, 170.1778918)
2026-01-21 11:54:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Siracusa, Italy' -> (37.0646139, 15.2907196)
2026-01-21 11:54:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Modugno, Italy' -> (41.0825639, 16.7805515)
2026-01-21 11:54:52 - app.phase2.pg_geocoding - WARNING - Could not geocode 'â€ŒEcole Polytechnique FÃ©dÃ©rale de Lausanne (EPFL, Switzerland' (from affiliation: Laboratory for Soft Bioelectronic Interfaces, Neuro-X Institute, â€ŒEcole Polytechnique FÃ©dÃ©rale de Lausanne (EPFL), 1202 Geneva, Switzerland. (PMID: 37163609))
2026-01-21 11:54:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Providence, Morocco' -> (34.6794328, -1.9187154)
2026-01-21 11:54:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Mangalore, India' -> (12.8698101, 74.8430082)
2026-01-21 11:54:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Bangalore, India' -> (12.9767936, 77.590082)
2026-01-21 11:55:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Villeurbanne, France' -> (45.7733573, 4.8868454)
2026-01-21 11:55:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Kuwait, Kuwait' -> (29.2733964, 47.4979476)
2026-01-21 11:55:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Bolzano, Italy' -> (46.6559455, 11.2302129)
2026-01-21 11:55:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Lodi, Italy' -> (45.2613104, 9.4916781)
2026-01-21 11:55:12 - app.phase2.pg_geocoding - INFO - Geocoded 'MI-, United States' -> (43.6211955, -84.6824346)
2026-01-21 11:55:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Ferrol, Spain' -> (43.4845713, -8.2329968)
2026-01-21 11:55:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Halle, Germany' -> (51.4824354, 11.9712985)
2026-01-21 11:55:18 - app.phase2.pg_geocoding - INFO - Geocoded 'RÃ¼dersdorf bei Berlin, Germany' -> (52.4837112, 13.8288504)
2026-01-21 11:55:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Bamberg, Germany' -> (49.8916044, 10.8868478)
2026-01-21 11:55:21 - app.phase2.pg_geocoding - INFO - Geocoded 'Chiang Mai, Thailand' -> (18.7882778, 98.9858802)
2026-01-21 11:55:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Tamil Nadu, India' -> (11.3323723, 78.6098639)
2026-01-21 11:55:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Poznan, Poland' -> (52.4006632, 16.9197326)
2026-01-21 11:55:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Lido di Camaiore, Italy' -> (43.8933095, 10.2286954)
2026-01-21 11:55:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Gdansk, Poland' -> (54.3482907, 18.6540233)
2026-01-21 11:55:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Raffaele, Italy' -> (45.1533097, 7.853202)
2026-01-21 11:55:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Oklahoma, United States' -> (34.9550817, -97.2684063)
2026-01-21 11:55:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Shandong Province, China' -> (36.398987, 118.5055691)
2026-01-21 11:55:40 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Ningxiax, China' (from affiliation: Radiation Catheterization Room of Ningxia Medical University General Hospital, Yinchuan, Ningxiax, China. (PMID: 41491932))
2026-01-21 11:55:40 - app.phase2.affiliation_validator - INFO -    Batch updating 6883 affiliations for 389 cached locations...
2026-01-21 11:55:51 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 389 locations (6883 total affiliations)
2026-01-21 11:55:51 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:55:51 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 448 pending institutions to institution_geo...
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO -    âœ… Added 48 validated institutions to institution_geo table
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 8088
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 6931
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO -    Cache misses: 122
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 106
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 16
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 20
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 11
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 48/448
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 20 error affiliations with LLM...
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO -    Collecting 20 unique error affiliations for LLM fix
2026-01-21 11:55:55 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-21 11:55:55 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 20 affiliations...
2026-01-21 11:55:55 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 20 affiliations...
2026-01-21 11:55:55 - app.phase2.institution_matcher - INFO -    Loaded 3055 institutions to memory (3055 normalized names, 216 aliases)
2026-01-21 11:55:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/20 (10%), matches found: 2
2026-01-21 11:55:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/20 (20%), matches found: 4
2026-01-21 11:55:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/20 (30%), matches found: 6
2026-01-21 11:55:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/20 (40%), matches found: 8
2026-01-21 11:55:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/20 (50%), matches found: 8
2026-01-21 11:55:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/20 (60%), matches found: 10
2026-01-21 11:55:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/20 (70%), matches found: 12
2026-01-21 11:55:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/20 (80%), matches found: 12
2026-01-21 11:55:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/20 (90%), matches found: 12
2026-01-21 11:55:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/20 (100%), matches found: 12
2026-01-21 11:55:55 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 12 matches found
2026-01-21 11:55:55 - app.phase2.affiliation_extractor - INFO -    Extracting 8 affiliations via LLM (affiliation_cache: 0, institution_geo: 12) in batches of 20
2026-01-21 11:55:55 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/1 (8 affiliations)
2026-01-21 11:55:59 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 11:56:01 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 8 affiliations processed
2026-01-21 11:56:01 - app.phase2.affiliation_extractor - INFO -       Auto-added to institution_geo table: 5 institutions
2026-01-21 11:56:01 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 20 results from 1 LLM calls
2026-01-21 11:56:01 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 20 LLM results...
2026-01-21 11:56:01 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 20 LLM results
2026-01-21 11:56:01 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-21 11:56:01 - app.phase2.affiliation_validator - INFO -    Processing 15 unique location keys for re-geocoding...
2026-01-21 11:56:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Opole, Poland' -> (50.6668184, 17.9236408)
2026-01-21 11:56:09 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 20 affiliations
2026-01-21 11:56:09 - app.phase2.affiliation_validator - INFO -    âœ… Updated 64 authorships
2026-01-21 11:56:09 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 6 locations
2026-01-21 11:56:09 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:56:09 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 9aa24ef17317
2026-01-21 11:56:09 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 20
2026-01-21 11:56:09 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 20
2026-01-21 11:56:09 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 64
2026-01-21 11:56:09 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 6
2026-01-21 11:56:09 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 11:56:09 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-21 11:56:09 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-21 11:56:09 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 20
2026-01-21 11:56:09 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 20
2026-01-21 11:56:09 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 64
2026-01-21 11:56:09 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 6
2026-01-21 11:56:09 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 48
2026-01-21 11:56:09 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 16
2026-01-21 11:56:09 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-21 11:56:09 - app.main - INFO - ================================================================================
2026-01-21 11:56:09 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: 9aa24ef17317
2026-01-21 11:56:09 - app.main - INFO -    Total PMIDs: 500
2026-01-21 11:56:09 - app.main - INFO -    Papers parsed: 500
2026-01-21 11:56:09 - app.main - INFO -    Authorships created: 4689
2026-01-21 11:56:09 - app.main - INFO -    Unique affiliations: 2586
2026-01-21 11:56:09 - app.main - INFO -    Affiliations with country: 2552
2026-01-21 11:56:09 - app.main - INFO -    LLM calls made: 0
2026-01-21 11:56:09 - app.main - INFO - ================================================================================
2026-01-21 11:58:14 - app.main - INFO - ================================================================================
2026-01-21 11:58:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 9aa24ef17317
2026-01-21 11:58:14 - app.main - INFO -    Min confidence: low
2026-01-21 11:58:14 - app.main - INFO - ================================================================================
2026-01-21 11:58:14 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 9aa24ef17317...
2026-01-21 11:58:14 - app.main - INFO - ================================================================================
2026-01-21 11:58:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 9aa24ef17317
2026-01-21 11:58:14 - app.main - INFO -    Min confidence: low
2026-01-21 11:58:14 - app.main - INFO - ================================================================================
2026-01-21 11:58:14 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 9aa24ef17317...
2026-01-21 11:58:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-21 11:58:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-21 11:58:15 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 59 countries
2026-01-21 11:58:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 11:58:15 - app.main - INFO -    Countries returned: 59
2026-01-21 11:58:15 - app.main - INFO - ================================================================================
2026-01-21 11:58:15 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 59 countries
2026-01-21 11:58:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 11:58:15 - app.main - INFO -    Countries returned: 59
2026-01-21 11:58:15 - app.main - INFO - ================================================================================
2026-01-21 11:59:53 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 12:01:17 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 12:11:09 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 12:13:48 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 12:17:46 - root - INFO - ================================================================================
2026-01-21 12:17:46 - root - INFO - Logging initialized - output to console and log.txt
2026-01-21 12:17:46 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-21 12:17:46 - root - INFO - ================================================================================
2026-01-21 12:17:56 - root - INFO - ================================================================================
2026-01-21 12:17:56 - root - INFO - Logging initialized - output to console and log.txt
2026-01-21 12:17:56 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-21 12:17:56 - root - INFO - ================================================================================
2026-01-21 12:19:34 - root - INFO - ================================================================================
2026-01-21 12:19:34 - root - INFO - Logging initialized - output to console and log.txt
2026-01-21 12:19:34 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-21 12:19:34 - root - INFO - ================================================================================
2026-01-21 12:20:33 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 12:22:16 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 12:27:26 - root - INFO - ================================================================================
2026-01-21 12:27:26 - root - INFO - Logging initialized - output to console and log.txt
2026-01-21 12:27:26 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-21 12:27:26 - root - INFO - ================================================================================
2026-01-21 12:27:38 - root - INFO - ================================================================================
2026-01-21 12:27:38 - root - INFO - Logging initialized - output to console and log.txt
2026-01-21 12:27:38 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-21 12:27:38 - root - INFO - ================================================================================
2026-01-21 12:28:47 - root - INFO - ================================================================================
2026-01-21 12:28:47 - root - INFO - Logging initialized - output to console and log.txt
2026-01-21 12:28:47 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-21 12:28:47 - root - INFO - ================================================================================
2026-01-21 12:29:39 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 12:30:51 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 12:42:31 - root - INFO - ================================================================================
2026-01-21 12:42:31 - root - INFO - Logging initialized - output to console and log.txt
2026-01-21 12:42:31 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-21 12:42:31 - root - INFO - ================================================================================
2026-01-21 13:09:37 - app.main - INFO - ðŸ‘¥ ADMIN: Fetching online user count
2026-01-21 13:09:37 - app.main - INFO - âœ… ADMIN: Online users: 1
2026-01-21 13:09:41 - app.main - INFO - ================================================================================
2026-01-21 13:09:41 - app.main - INFO - ðŸ“Š ADMIN: Manual resource snapshot triggered
2026-01-21 13:09:41 - app.main - INFO - ================================================================================
2026-01-21 13:09:42 - app.main - INFO - âœ… ADMIN: Snapshot completed
2026-01-21 13:09:42 - app.main - INFO -    Snapshot ID: 15
2026-01-21 13:09:42 - app.main - INFO -    Users: 7
2026-01-21 13:09:42 - app.main - INFO -    Runs: 13
2026-01-21 13:09:42 - app.main - INFO -    Total Disk: 41.80 MB
2026-01-21 13:09:42 - app.main - INFO - ================================================================================
2026-01-21 14:42:35 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 16:30:22 - root - INFO - ================================================================================
2026-01-21 16:30:22 - root - INFO - Logging initialized - output to console and log.txt
2026-01-21 16:30:22 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-21 16:30:22 - root - INFO - ================================================================================
2026-01-21 16:57:42 - root - INFO - ================================================================================
2026-01-21 16:57:42 - root - INFO - Logging initialized - output to console and log.txt
2026-01-21 16:57:42 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-21 16:57:42 - root - INFO - ================================================================================
2026-01-21 16:58:05 - root - INFO - ================================================================================
2026-01-21 16:58:05 - root - INFO - Logging initialized - output to console and log.txt
2026-01-21 16:58:05 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-21 16:58:05 - root - INFO - ================================================================================
2026-01-21 16:59:32 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 17:03:04 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-21 17:17:30 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi "HTTP/1.1 200 OK"
2026-01-21 17:17:31 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-21 17:19:45 - app.main - INFO - ================================================================================
2026-01-21 17:19:45 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 6af7ac1b6254, Run: a0ed3ea2b2ed
2026-01-21 17:19:45 - app.main - INFO -    Force refresh: False
2026-01-21 17:19:45 - app.main - INFO - ================================================================================
2026-01-21 17:19:45 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:19:45 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run a0ed3ea2b2ed
2026-01-21 17:19:45 - app.phase2.pg_ingest - INFO -    Project ID: 6af7ac1b6254
2026-01-21 17:19:45 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-21 17:19:45 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:19:45 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-21 17:19:46 - app.phase2.pg_ingest - INFO -    Loaded 131 unique PMIDs from run a0ed3ea2b2ed
2026-01-21 17:19:46 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 131 PMIDs
2026-01-21 17:19:46 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:19:46 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 131 PMIDs from PubMed...
2026-01-21 17:19:46 - app.phase2.pubmed_fetcher - INFO - Fetching 131 PMIDs in 1 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-21 17:19:46 - app.phase2.pubmed_fetcher - INFO - Fetching 131 PMIDs from PubMed...
2026-01-21 17:19:46 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=38914073%2C17124332%2C30429772%2C31587955%2C33524962%2C35921802%2C40127544%2C36851970%2C32027889%2C28819547%2C34870202%2C28288824%2C35078156%2C17582507%2C33418549%2C19965103%2C19381156%2C18022247%2C30440344%2C32140722%2C34182408%2C24922501%2C25571016%2C26902372%2C23383315%2C24880133%2C39134021%2C27255798%2C36763997%2C33290753%2C21078582%2C40000170%2C34695809%2C37427002%2C30441189%2C26483627%2C32107734%2C31191218%2C31171607%2C27074513%2C23110153%2C28269553%2C30408025%2C23367471%2C40239679%2C22084052%2C25681017%2C25570632%2C25128256%2C23555799%2C41266624%2C25972167%2C30370720%2C32270713%2C37007675%2C34582344%2C24386223%2C40929271%2C32224511%2C39383883%2C38954651%2C36349662%2C38949928%2C31321955%2C26963246%2C23536714%2C33242850%2C36776220%2C35985293%2C23991046%2C37870208%2C24109680%2C39151656%2C28931054%2C39954182%2C33018642%2C29182152%2C21314273%2C31616237%2C22570195%2C19964229%2C25570190%2C25570284%2C30101753%2C26305124%2C37425292%2C35845243%2C40819020%2C40247859%2C29017898%2C21096620%2C40144587%2C26859341%2C28268628%2C28268621%2C20407639%2C40144585%2C19162827%2C17522167%2C37632142%2C15262061%2C33018041%2C35621994%2C33395669%2C31747655%2C16792288%2C40975869%2C37251598%2C29059844%2C32746347%2C23162436%2C32765411%2C19162733%2C27116730%2C23369953%2C23918061%2C22326993%2C30523833%2C32706190%2C28268500%2C27534393%2C25494495%2C17946051%2C19003505%2C28665058%2C28361947%2C19084556%2C22072511%2C23366234%2C28651628%2C25380169&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-21 17:19:47 - app.phase2.pubmed_fetcher - INFO - Batch 1/1 completed
2026-01-21 17:19:47 - app.phase2.pubmed_fetcher - INFO - Fetched 1/1 batches successfully
2026-01-21 17:19:47 - app.phase2.pubmed_fetcher - INFO - Extracted 131 PMIDs from 1 batches
2026-01-21 17:19:47 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 131 PubMed XML records
2026-01-21 17:19:47 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:19:47 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-21 17:19:47 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 131 papers
2026-01-21 17:19:47 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:19:47 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-21 17:19:47 - app.phase2.pg_ingest - INFO -    Extracting 776 unique affiliations via rule-based method
2026-01-21 17:19:47 - app.phase2.rule_based_extractor - INFO -    Processing 776 affiliations...
2026-01-21 17:19:47 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 776 affiliations...
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 681 hits, 95 need extraction
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 95 affiliations...
2026-01-21 17:19:48 - app.phase2.institution_matcher - INFO -    Loaded 3060 institutions to memory (3060 normalized names, 216 aliases)
2026-01-21 17:19:48 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 9/95 (9%), matches found: 4
2026-01-21 17:19:48 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/95 (18%), matches found: 9
2026-01-21 17:19:48 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 27/95 (28%), matches found: 15
2026-01-21 17:19:48 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 36/95 (37%), matches found: 20
2026-01-21 17:19:48 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 45/95 (47%), matches found: 27
2026-01-21 17:19:48 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 54/95 (56%), matches found: 36
2026-01-21 17:19:48 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 63/95 (66%), matches found: 43
2026-01-21 17:19:48 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 72/95 (75%), matches found: 50
2026-01-21 17:19:48 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 81/95 (85%), matches found: 56
2026-01-21 17:19:48 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 90/95 (94%), matches found: 60
2026-01-21 17:19:48 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 95/95 (100%), matches found: 64
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 64 matches found
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Extracting 31 affiliations using rule-based parser...
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 3/31 (9%)
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 6/31 (19%)
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 9/31 (29%)
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 12/31 (38%)
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 15/31 (48%)
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 18/31 (58%)
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 21/31 (67%)
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 24/31 (77%)
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 27/31 (87%)
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 30/31 (96%)
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 31/31 (100%)
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 31 results
2026-01-21 17:19:48 - app.phase2.rule_based_extractor - INFO -       Pending validation: 24 institutions
2026-01-21 17:19:48 - app.phase2.pg_ingest - INFO -    Cached 95 new affiliation extraction results to affiliation_cache table
2026-01-21 17:19:48 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 776 affiliations processed, 771 with country
2026-01-21 17:19:48 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 776 affiliations
2026-01-21 17:19:48 - app.phase2.pg_ingest - INFO -    Unique affiliations: 776
2026-01-21 17:19:48 - app.phase2.pg_ingest - INFO -    With country: 771
2026-01-21 17:19:48 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-21 17:19:48 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:19:48 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-21 17:19:48 - app.phase2.pg_ingest - INFO -    Clearing existing data for run a0ed3ea2b2ed...
2026-01-21 17:19:48 - app.phase2.pg_ingest - INFO -    Inserting/updating 131 papers (bulk operation)...
2026-01-21 17:19:48 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 131
2026-01-21 17:19:48 - app.phase2.pg_ingest - INFO -    Inserting 1424 authorships (bulk operation)...
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -    Authorships inserted: 1424
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -    Linking run a0ed3ea2b2ed to 131 papers...
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 1424 authorships
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 6af7ac1b6254, Run: a0ed3ea2b2ed
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -    Total PMIDs: 131
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -    Papers parsed: 131
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -    Authorships created: 1424
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -    Unique affiliations: 776
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -    Affiliations with country: 771
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO - 
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 681
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 64
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 31
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 31
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO - 
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 776 = 776 (matches)
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 24
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO - 
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-21 17:19:51 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-21 17:19:51 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 24
2026-01-21 17:19:51 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:19:51 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run a0ed3ea2b2ed...
2026-01-21 17:19:51 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4708 authorships from 131 papers
2026-01-21 17:19:51 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:19:51 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-21 17:19:51 - app.phase2.affiliation_validator - INFO -    Found 202 unique location keys from 4708 authorships
2026-01-21 17:19:52 - app.phase2.affiliation_validator - INFO -    Batch query complete: 200/202 found in cache
2026-01-21 17:19:52 - app.phase2.affiliation_validator - INFO -    Processing 2 unique location keys via Nominatim...
2026-01-21 17:19:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Hayama, Japan' -> (35.2719497, 139.5860744)
2026-01-21 17:19:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Holon, Israel' -> (32.0193121, 34.7804076)
2026-01-21 17:19:56 - app.phase2.affiliation_validator - INFO -    Batch updating 4104 affiliations for 193 cached locations...
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 193 locations (4104 total affiliations)
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 24 pending institutions to institution_geo...
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO -    âœ… Added 2 validated institutions to institution_geo table
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4708
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 4163
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO -    Cache misses: 3
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 3
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 11
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 2
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 2/24
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 11 error affiliations with LLM...
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO -    Collecting 11 unique error affiliations for LLM fix
2026-01-21 17:20:02 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-21 17:20:02 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 11 affiliations...
2026-01-21 17:20:02 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 11 affiliations...
2026-01-21 17:20:03 - app.phase2.institution_matcher - INFO -    Loaded 3062 institutions to memory (3062 normalized names, 216 aliases)
2026-01-21 17:20:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1/11 (9%), matches found: 1
2026-01-21 17:20:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/11 (18%), matches found: 2
2026-01-21 17:20:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 3/11 (27%), matches found: 3
2026-01-21 17:20:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/11 (36%), matches found: 4
2026-01-21 17:20:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 5/11 (45%), matches found: 5
2026-01-21 17:20:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/11 (54%), matches found: 6
2026-01-21 17:20:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 7/11 (63%), matches found: 7
2026-01-21 17:20:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/11 (72%), matches found: 8
2026-01-21 17:20:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 9/11 (81%), matches found: 9
2026-01-21 17:20:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/11 (90%), matches found: 10
2026-01-21 17:20:03 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 11/11 (100%), matches found: 11
2026-01-21 17:20:03 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 11 matches found
2026-01-21 17:20:03 - app.phase2.affiliation_extractor - INFO -    âœ… All 11 affiliations found in cache/institution_geo
2026-01-21 17:20:03 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 11 results from 0 LLM calls
2026-01-21 17:20:03 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 11 LLM results...
2026-01-21 17:20:03 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 11 LLM results
2026-01-21 17:20:03 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-21 17:20:03 - app.phase2.affiliation_validator - INFO -    Processing 7 unique location keys for re-geocoding...
2026-01-21 17:20:07 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 11 affiliations
2026-01-21 17:20:07 - app.phase2.affiliation_validator - INFO -    âœ… Updated 59 authorships
2026-01-21 17:20:07 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 0 locations
2026-01-21 17:20:07 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:20:07 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: a0ed3ea2b2ed
2026-01-21 17:20:07 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 11
2026-01-21 17:20:07 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 11
2026-01-21 17:20:07 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 59
2026-01-21 17:20:07 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 0
2026-01-21 17:20:07 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-21 17:20:07 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-21 17:20:07 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-21 17:20:07 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 11
2026-01-21 17:20:07 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 11
2026-01-21 17:20:07 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 59
2026-01-21 17:20:07 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 0
2026-01-21 17:20:07 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 2
2026-01-21 17:20:07 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-21 17:20:07 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-21 17:20:07 - app.main - INFO - ================================================================================
2026-01-21 17:20:07 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 6af7ac1b6254, Run: a0ed3ea2b2ed
2026-01-21 17:20:07 - app.main - INFO -    Total PMIDs: 131
2026-01-21 17:20:07 - app.main - INFO -    Papers parsed: 131
2026-01-21 17:20:07 - app.main - INFO -    Authorships created: 1424
2026-01-21 17:20:07 - app.main - INFO -    Unique affiliations: 776
2026-01-21 17:20:07 - app.main - INFO -    Affiliations with country: 771
2026-01-21 17:20:07 - app.main - INFO -    LLM calls made: 0
2026-01-21 17:20:07 - app.main - INFO - ================================================================================
2026-01-21 17:22:53 - app.main - INFO - ================================================================================
2026-01-21 17:22:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: a0ed3ea2b2ed
2026-01-21 17:22:53 - app.main - INFO -    Min confidence: low
2026-01-21 17:22:53 - app.main - INFO - ================================================================================
2026-01-21 17:22:53 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run a0ed3ea2b2ed...
2026-01-21 17:22:53 - app.main - INFO - ================================================================================
2026-01-21 17:22:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: a0ed3ea2b2ed
2026-01-21 17:22:53 - app.main - INFO -    Min confidence: low
2026-01-21 17:22:53 - app.main - INFO - ================================================================================
2026-01-21 17:22:53 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run a0ed3ea2b2ed...
2026-01-21 17:22:53 - app.phase2.pg_aggregations - INFO -    Found 131 PMIDs
2026-01-21 17:22:53 - app.phase2.pg_aggregations - INFO -    Found 131 PMIDs
2026-01-21 17:22:54 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 40 countries
2026-01-21 17:22:54 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 40 countries
2026-01-21 17:22:54 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 17:22:54 - app.main - INFO -    Countries returned: 40
2026-01-21 17:22:54 - app.main - INFO - ================================================================================
2026-01-21 17:22:54 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 17:22:54 - app.main - INFO -    Countries returned: 40
2026-01-21 17:22:54 - app.main - INFO - ================================================================================
2026-01-21 17:27:41 - app.main - INFO - ================================================================================
2026-01-21 17:27:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: a0ed3ea2b2ed
2026-01-21 17:27:41 - app.main - INFO -    Min confidence: low
2026-01-21 17:27:41 - app.main - INFO - ================================================================================
2026-01-21 17:27:41 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run a0ed3ea2b2ed...
2026-01-21 17:27:41 - app.main - INFO - ================================================================================
2026-01-21 17:27:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: a0ed3ea2b2ed
2026-01-21 17:27:41 - app.main - INFO -    Min confidence: low
2026-01-21 17:27:41 - app.main - INFO - ================================================================================
2026-01-21 17:27:41 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run a0ed3ea2b2ed...
2026-01-21 17:27:41 - app.phase2.pg_aggregations - INFO -    Found 131 PMIDs
2026-01-21 17:27:41 - app.phase2.pg_aggregations - INFO -    Found 131 PMIDs
2026-01-21 17:27:41 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 40 countries
2026-01-21 17:27:41 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 17:27:41 - app.main - INFO -    Countries returned: 40
2026-01-21 17:27:41 - app.main - INFO - ================================================================================
2026-01-21 17:27:41 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 40 countries
2026-01-21 17:27:41 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 17:27:41 - app.main - INFO -    Countries returned: 40
2026-01-21 17:27:41 - app.main - INFO - ================================================================================
2026-01-21 17:33:53 - app.main - INFO - ================================================================================
2026-01-21 17:33:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: a0ed3ea2b2ed
2026-01-21 17:33:53 - app.main - INFO -    Min confidence: low
2026-01-21 17:33:53 - app.main - INFO - ================================================================================
2026-01-21 17:33:53 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run a0ed3ea2b2ed...
2026-01-21 17:33:53 - app.main - INFO - ================================================================================
2026-01-21 17:33:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: a0ed3ea2b2ed
2026-01-21 17:33:53 - app.main - INFO -    Min confidence: low
2026-01-21 17:33:53 - app.main - INFO - ================================================================================
2026-01-21 17:33:53 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run a0ed3ea2b2ed...
2026-01-21 17:33:53 - app.phase2.pg_aggregations - INFO -    Found 131 PMIDs
2026-01-21 17:33:53 - app.phase2.pg_aggregations - INFO -    Found 131 PMIDs
2026-01-21 17:33:53 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 40 countries
2026-01-21 17:33:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 17:33:53 - app.main - INFO -    Countries returned: 40
2026-01-21 17:33:53 - app.main - INFO - ================================================================================
2026-01-21 17:33:53 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 40 countries
2026-01-21 17:33:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 17:33:53 - app.main - INFO -    Countries returned: 40
2026-01-21 17:33:53 - app.main - INFO - ================================================================================
2026-01-21 17:34:06 - app.main - INFO - ================================================================================
2026-01-21 17:34:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: a0ed3ea2b2ed
2026-01-21 17:34:06 - app.main - INFO -    Min confidence: low
2026-01-21 17:34:06 - app.main - INFO - ================================================================================
2026-01-21 17:34:06 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run a0ed3ea2b2ed...
2026-01-21 17:34:06 - app.main - INFO - ================================================================================
2026-01-21 17:34:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: a0ed3ea2b2ed
2026-01-21 17:34:06 - app.main - INFO -    Min confidence: low
2026-01-21 17:34:06 - app.main - INFO - ================================================================================
2026-01-21 17:34:06 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run a0ed3ea2b2ed...
2026-01-21 17:34:07 - app.phase2.pg_aggregations - INFO -    Found 131 PMIDs
2026-01-21 17:34:07 - app.phase2.pg_aggregations - INFO -    Found 131 PMIDs
2026-01-21 17:34:07 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 40 countries
2026-01-21 17:34:07 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 17:34:07 - app.main - INFO -    Countries returned: 40
2026-01-21 17:34:07 - app.main - INFO - ================================================================================
2026-01-21 17:34:07 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 40 countries
2026-01-21 17:34:07 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-21 17:34:07 - app.main - INFO -    Countries returned: 40
2026-01-21 17:34:07 - app.main - INFO - ================================================================================
2026-01-21 17:34:12 - app.main - INFO - ================================================================================
2026-01-21 17:34:12 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: a0ed3ea2b2ed
2026-01-21 17:34:12 - app.main - INFO -    Country: China, Min confidence: low
2026-01-21 17:34:12 - app.main - INFO - ================================================================================
2026-01-21 17:34:12 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-21 17:34:12 - app.phase2.pg_aggregations - INFO -    Found 131 PMIDs
2026-01-21 17:34:12 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in China
2026-01-21 17:34:12 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-21 17:34:12 - app.main - INFO -    Cities returned: 6
2026-01-21 17:34:12 - app.main - INFO - ================================================================================
2026-01-22 12:23:47 - root - INFO - ================================================================================
2026-01-22 12:23:47 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 12:23:47 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-22 12:23:47 - root - INFO - ================================================================================
2026-01-22 12:57:03 - app.main - INFO - ================================================================================
2026-01-22 12:57:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:03 - app.main - INFO -    Min confidence: low
2026-01-22 12:57:03 - app.main - INFO - ================================================================================
2026-01-22 12:57:03 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-22 12:57:03 - app.main - INFO - ================================================================================
2026-01-22 12:57:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:03 - app.main - INFO -    Min confidence: low
2026-01-22 12:57:03 - app.main - INFO - ================================================================================
2026-01-22 12:57:03 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-22 12:57:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:04 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-22 12:57:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-22 12:57:04 - app.main - INFO -    Countries returned: 52
2026-01-22 12:57:04 - app.main - INFO - ================================================================================
2026-01-22 12:57:04 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-22 12:57:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-22 12:57:04 - app.main - INFO -    Countries returned: 52
2026-01-22 12:57:04 - app.main - INFO - ================================================================================
2026-01-22 12:57:05 - app.main - INFO - ================================================================================
2026-01-22 12:57:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:05 - app.main - INFO -    Country: China, Min confidence: low
2026-01-22 12:57:05 - app.main - INFO - ================================================================================
2026-01-22 12:57:05 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-22 12:57:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:07 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-22 12:57:07 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-22 12:57:07 - app.main - INFO -    Cities returned: 47
2026-01-22 12:57:07 - app.main - INFO - ================================================================================
2026-01-22 12:57:08 - app.main - INFO - ================================================================================
2026-01-22 12:57:08 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:08 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-22 12:57:08 - app.main - INFO - ================================================================================
2026-01-22 12:57:08 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-22 12:57:08 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:10 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 74 cities in United States
2026-01-22 12:57:10 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-22 12:57:10 - app.main - INFO -    Cities returned: 74
2026-01-22 12:57:10 - app.main - INFO - ================================================================================
2026-01-22 12:57:11 - app.main - INFO - ================================================================================
2026-01-22 12:57:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:11 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-22 12:57:11 - app.main - INFO - ================================================================================
2026-01-22 12:57:11 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-22 12:57:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:11 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 30 cities in Italy
2026-01-22 12:57:11 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-22 12:57:11 - app.main - INFO -    Cities returned: 30
2026-01-22 12:57:11 - app.main - INFO - ================================================================================
2026-01-22 12:57:12 - app.main - INFO - ================================================================================
2026-01-22 12:57:12 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:12 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-22 12:57:12 - app.main - INFO - ================================================================================
2026-01-22 12:57:12 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-22 12:57:13 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:17 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Frankfurt am Main; Cologne; JÃ¼lich, Germany' (from affiliation: Department of Neurology, University Hospital Frankfurt, Goethe University, Frankfurt am Main, Germany; Medical Faculty, University of Cologne, and Department of Neurology, University Hospital Cologne, Cologne, Germany; Cognitive Neuroscience, Institute of Neuroscience and Medicine (INM-3), Research Centre JÃ¼lich, JÃ¼lich, Germany. Electronic address: Grefkes-hermann@em.uni-frankfurt.de.)
2026-01-22 12:57:18 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 38 cities in Germany
2026-01-22 12:57:18 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-22 12:57:18 - app.main - INFO -    Cities returned: 38
2026-01-22 12:57:18 - app.main - INFO - ================================================================================
2026-01-22 12:57:18 - app.main - INFO - ================================================================================
2026-01-22 12:57:18 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:18 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-22 12:57:18 - app.main - INFO - ================================================================================
2026-01-22 12:57:18 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-22 12:57:19 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Canada
2026-01-22 12:57:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Canada
2026-01-22 12:57:20 - app.main - INFO -    Cities returned: 11
2026-01-22 12:57:20 - app.main - INFO - ================================================================================
2026-01-22 12:57:21 - app.main - INFO - ================================================================================
2026-01-22 12:57:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:21 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-22 12:57:21 - app.main - INFO - ================================================================================
2026-01-22 12:57:21 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-22 12:57:21 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:22 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 18 cities in Australia
2026-01-22 12:57:22 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-22 12:57:22 - app.main - INFO -    Cities returned: 18
2026-01-22 12:57:22 - app.main - INFO - ================================================================================
2026-01-22 12:57:23 - app.main - INFO - ================================================================================
2026-01-22 12:57:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:23 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-22 12:57:23 - app.main - INFO - ================================================================================
2026-01-22 12:57:23 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-22 12:57:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 13 cities in United Kingdom
2026-01-22 12:57:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United Kingdom
2026-01-22 12:57:24 - app.main - INFO -    Cities returned: 13
2026-01-22 12:57:24 - app.main - INFO - ================================================================================
2026-01-22 12:57:26 - app.main - INFO - ================================================================================
2026-01-22 12:57:26 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:26 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-22 12:57:26 - app.main - INFO - ================================================================================
2026-01-22 12:57:26 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-22 12:57:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:27 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Spain
2026-01-22 12:57:27 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Spain
2026-01-22 12:57:27 - app.main - INFO -    Cities returned: 11
2026-01-22 12:57:27 - app.main - INFO - ================================================================================
2026-01-22 12:57:28 - app.main - INFO - ================================================================================
2026-01-22 12:57:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:28 - app.main - INFO -    Country: Switzerland, Min confidence: low
2026-01-22 12:57:28 - app.main - INFO - ================================================================================
2026-01-22 12:57:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Switzerland (normalized: Switzerland)...
2026-01-22 12:57:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:29 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Switzerland
2026-01-22 12:57:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Switzerland
2026-01-22 12:57:29 - app.main - INFO -    Cities returned: 8
2026-01-22 12:57:29 - app.main - INFO - ================================================================================
2026-01-22 12:57:30 - app.main - INFO - ================================================================================
2026-01-22 12:57:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:30 - app.main - INFO -    Country: Netherlands, Min confidence: low
2026-01-22 12:57:30 - app.main - INFO - ================================================================================
2026-01-22 12:57:30 - app.phase2.pg_aggregations - INFO -    Getting country map for Netherlands (normalized: Netherlands)...
2026-01-22 12:57:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 9 cities in Netherlands
2026-01-22 12:57:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Netherlands
2026-01-22 12:57:31 - app.main - INFO -    Cities returned: 9
2026-01-22 12:57:31 - app.main - INFO - ================================================================================
2026-01-22 12:57:32 - app.main - INFO - ================================================================================
2026-01-22 12:57:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:32 - app.main - INFO -    Country: Brazil, Min confidence: low
2026-01-22 12:57:32 - app.main - INFO - ================================================================================
2026-01-22 12:57:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Brazil (normalized: Brazil)...
2026-01-22 12:57:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:33 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Brazil
2026-01-22 12:57:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brazil
2026-01-22 12:57:34 - app.main - INFO -    Cities returned: 11
2026-01-22 12:57:34 - app.main - INFO - ================================================================================
2026-01-22 12:57:34 - app.main - INFO - ================================================================================
2026-01-22 12:57:34 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:34 - app.main - INFO -    Country: India, Min confidence: low
2026-01-22 12:57:34 - app.main - INFO - ================================================================================
2026-01-22 12:57:34 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-22 12:57:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in India
2026-01-22 12:57:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-22 12:57:35 - app.main - INFO -    Cities returned: 5
2026-01-22 12:57:35 - app.main - INFO - ================================================================================
2026-01-22 12:57:37 - app.main - INFO - ================================================================================
2026-01-22 12:57:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:37 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-22 12:57:37 - app.main - INFO - ================================================================================
2026-01-22 12:57:37 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-22 12:57:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:40 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Japan
2026-01-22 12:57:40 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-22 12:57:40 - app.main - INFO -    Cities returned: 6
2026-01-22 12:57:40 - app.main - INFO - ================================================================================
2026-01-22 12:57:42 - app.main - INFO - ================================================================================
2026-01-22 12:57:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:42 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-22 12:57:42 - app.main - INFO - ================================================================================
2026-01-22 12:57:42 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-22 12:57:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:42 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Iran
2026-01-22 12:57:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Iran
2026-01-22 12:57:43 - app.main - INFO -    Cities returned: 5
2026-01-22 12:57:43 - app.main - INFO - ================================================================================
2026-01-22 12:57:43 - app.main - INFO - ================================================================================
2026-01-22 12:57:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:43 - app.main - INFO -    Country: Belgium, Min confidence: low
2026-01-22 12:57:43 - app.main - INFO - ================================================================================
2026-01-22 12:57:43 - app.phase2.pg_aggregations - INFO -    Getting country map for Belgium (normalized: Belgium)...
2026-01-22 12:57:44 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:44 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Belgium
2026-01-22 12:57:44 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Belgium
2026-01-22 12:57:44 - app.main - INFO -    Cities returned: 6
2026-01-22 12:57:44 - app.main - INFO - ================================================================================
2026-01-22 12:57:46 - app.main - INFO - ================================================================================
2026-01-22 12:57:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:46 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-22 12:57:46 - app.main - INFO - ================================================================================
2026-01-22 12:57:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-22 12:57:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:48 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Beer-Yaacov, Israel' (from affiliation: QuantalX Neuroscience, Beer-Yaacov, Israel.)
2026-01-22 12:57:49 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Zerifin, Israel' (from affiliation: Sagol Center for Hyperbaric Medicine and Research, Shamir Medical Center, Zerifin, Israel.)
2026-01-22 12:57:50 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 15 cities in Israel
2026-01-22 12:57:50 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Israel
2026-01-22 12:57:50 - app.main - INFO -    Cities returned: 15
2026-01-22 12:57:50 - app.main - INFO - ================================================================================
2026-01-22 12:57:51 - app.main - INFO - ================================================================================
2026-01-22 12:57:51 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:51 - app.main - INFO -    Country: Mexico, Min confidence: low
2026-01-22 12:57:51 - app.main - INFO - ================================================================================
2026-01-22 12:57:51 - app.phase2.pg_aggregations - INFO -    Getting country map for Mexico (normalized: Mexico)...
2026-01-22 12:57:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:53 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Mexico
2026-01-22 12:57:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Mexico
2026-01-22 12:57:53 - app.main - INFO -    Cities returned: 1
2026-01-22 12:57:53 - app.main - INFO - ================================================================================
2026-01-22 12:57:53 - app.main - INFO - ================================================================================
2026-01-22 12:57:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:53 - app.main - INFO -    Country: Finland, Min confidence: low
2026-01-22 12:57:53 - app.main - INFO - ================================================================================
2026-01-22 12:57:53 - app.phase2.pg_aggregations - INFO -    Getting country map for Finland (normalized: Finland)...
2026-01-22 12:57:54 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:55 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Finland
2026-01-22 12:57:55 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Finland
2026-01-22 12:57:55 - app.main - INFO -    Cities returned: 2
2026-01-22 12:57:55 - app.main - INFO - ================================================================================
2026-01-22 12:57:56 - app.main - INFO - ================================================================================
2026-01-22 12:57:56 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:56 - app.main - INFO -    Country: France, Min confidence: low
2026-01-22 12:57:56 - app.main - INFO - ================================================================================
2026-01-22 12:57:56 - app.phase2.pg_aggregations - INFO -    Getting country map for France (normalized: France)...
2026-01-22 12:57:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 7 cities in France
2026-01-22 12:57:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: France
2026-01-22 12:57:57 - app.main - INFO -    Cities returned: 7
2026-01-22 12:57:57 - app.main - INFO - ================================================================================
2026-01-22 12:57:58 - app.main - INFO - ================================================================================
2026-01-22 12:57:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:57:58 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-22 12:57:58 - app.main - INFO - ================================================================================
2026-01-22 12:57:58 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-22 12:57:59 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:57:59 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Russia
2026-01-22 12:58:00 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Russia
2026-01-22 12:58:00 - app.main - INFO -    Cities returned: 2
2026-01-22 12:58:00 - app.main - INFO - ================================================================================
2026-01-22 12:58:00 - app.main - INFO - ================================================================================
2026-01-22 12:58:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:00 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-22 12:58:00 - app.main - INFO - ================================================================================
2026-01-22 12:58:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-22 12:58:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:01 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Austria
2026-01-22 12:58:02 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Austria
2026-01-22 12:58:02 - app.main - INFO -    Cities returned: 5
2026-01-22 12:58:02 - app.main - INFO - ================================================================================
2026-01-22 12:58:03 - app.main - INFO - ================================================================================
2026-01-22 12:58:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:03 - app.main - INFO -    Country: Czech Republic, Min confidence: low
2026-01-22 12:58:03 - app.main - INFO - ================================================================================
2026-01-22 12:58:03 - app.phase2.pg_aggregations - INFO -    Getting country map for Czech Republic (normalized: Czech Republic)...
2026-01-22 12:58:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:03 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 4 cities in Czech Republic
2026-01-22 12:58:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Czech Republic
2026-01-22 12:58:03 - app.main - INFO -    Cities returned: 4
2026-01-22 12:58:03 - app.main - INFO - ================================================================================
2026-01-22 12:58:04 - app.main - INFO - ================================================================================
2026-01-22 12:58:04 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:04 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-22 12:58:04 - app.main - INFO - ================================================================================
2026-01-22 12:58:04 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-22 12:58:04 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:06 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Portugal
2026-01-22 12:58:06 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Portugal
2026-01-22 12:58:06 - app.main - INFO -    Cities returned: 5
2026-01-22 12:58:06 - app.main - INFO - ================================================================================
2026-01-22 12:58:07 - app.main - INFO - ================================================================================
2026-01-22 12:58:07 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:07 - app.main - INFO -    Country: Turkey, Min confidence: low
2026-01-22 12:58:07 - app.main - INFO - ================================================================================
2026-01-22 12:58:07 - app.phase2.pg_aggregations - INFO -    Getting country map for Turkey (normalized: Turkey)...
2026-01-22 12:58:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:08 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Turkey
2026-01-22 12:58:09 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Turkey
2026-01-22 12:58:09 - app.main - INFO -    Cities returned: 2
2026-01-22 12:58:09 - app.main - INFO - ================================================================================
2026-01-22 12:58:10 - app.main - INFO - ================================================================================
2026-01-22 12:58:10 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:10 - app.main - INFO -    Country: Denmark, Min confidence: low
2026-01-22 12:58:10 - app.main - INFO - ================================================================================
2026-01-22 12:58:10 - app.phase2.pg_aggregations - INFO -    Getting country map for Denmark (normalized: Denmark)...
2026-01-22 12:58:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:11 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Denmark
2026-01-22 12:58:11 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Denmark
2026-01-22 12:58:11 - app.main - INFO -    Cities returned: 6
2026-01-22 12:58:11 - app.main - INFO - ================================================================================
2026-01-22 12:58:12 - app.main - INFO - ================================================================================
2026-01-22 12:58:12 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:12 - app.main - INFO -    Country: South Korea, Min confidence: low
2026-01-22 12:58:12 - app.main - INFO - ================================================================================
2026-01-22 12:58:12 - app.phase2.pg_aggregations - INFO -    Getting country map for South Korea (normalized: South Korea)...
2026-01-22 12:58:12 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:12 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 0 cities in South Korea
2026-01-22 12:58:12 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: South Korea
2026-01-22 12:58:12 - app.main - INFO -    Cities returned: 0
2026-01-22 12:58:12 - app.main - INFO - ================================================================================
2026-01-22 12:58:13 - app.main - INFO - ================================================================================
2026-01-22 12:58:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:13 - app.main - INFO -    Country: New Zealand, Min confidence: low
2026-01-22 12:58:13 - app.main - INFO - ================================================================================
2026-01-22 12:58:13 - app.phase2.pg_aggregations - INFO -    Getting country map for New Zealand (normalized: New Zealand)...
2026-01-22 12:58:13 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in New Zealand
2026-01-22 12:58:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: New Zealand
2026-01-22 12:58:14 - app.main - INFO -    Cities returned: 2
2026-01-22 12:58:14 - app.main - INFO - ================================================================================
2026-01-22 12:58:15 - app.main - INFO - ================================================================================
2026-01-22 12:58:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:15 - app.main - INFO -    Country: Taiwan, Min confidence: low
2026-01-22 12:58:15 - app.main - INFO - ================================================================================
2026-01-22 12:58:15 - app.phase2.pg_aggregations - INFO -    Getting country map for Taiwan (normalized: Taiwan)...
2026-01-22 12:58:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Taiwan
2026-01-22 12:58:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Taiwan
2026-01-22 12:58:16 - app.main - INFO -    Cities returned: 5
2026-01-22 12:58:16 - app.main - INFO - ================================================================================
2026-01-22 12:58:16 - app.main - INFO - ================================================================================
2026-01-22 12:58:16 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:16 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-22 12:58:16 - app.main - INFO - ================================================================================
2026-01-22 12:58:16 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-22 12:58:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:17 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Poland
2026-01-22 12:58:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Poland
2026-01-22 12:58:17 - app.main - INFO -    Cities returned: 2
2026-01-22 12:58:17 - app.main - INFO - ================================================================================
2026-01-22 12:58:18 - app.main - INFO - ================================================================================
2026-01-22 12:58:18 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:18 - app.main - INFO -    Country: Hungary, Min confidence: low
2026-01-22 12:58:18 - app.main - INFO - ================================================================================
2026-01-22 12:58:18 - app.phase2.pg_aggregations - INFO -    Getting country map for Hungary (normalized: Hungary)...
2026-01-22 12:58:18 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:19 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Hungary
2026-01-22 12:58:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hungary
2026-01-22 12:58:19 - app.main - INFO -    Cities returned: 2
2026-01-22 12:58:19 - app.main - INFO - ================================================================================
2026-01-22 12:58:25 - app.main - INFO - ================================================================================
2026-01-22 12:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:25 - app.main - INFO -    Country: China, City: Ningbo, Min confidence: low
2026-01-22 12:58:25 - app.main - INFO - ================================================================================
2026-01-22 12:58:25 - app.phase2.pg_aggregations - INFO -    Getting city map for Ningbo, China...
2026-01-22 12:58:25 - app.main - INFO - ================================================================================
2026-01-22 12:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:25 - app.main - INFO -    Country: United States, City: Cambridge, Min confidence: low
2026-01-22 12:58:25 - app.main - INFO - ================================================================================
2026-01-22 12:58:25 - app.phase2.pg_aggregations - INFO -    Getting city map for Cambridge, United States...
2026-01-22 12:58:25 - app.main - INFO - ================================================================================
2026-01-22 12:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:25 - app.main - INFO -    Country: United States, City: Rochester, Min confidence: low
2026-01-22 12:58:25 - app.main - INFO - ================================================================================
2026-01-22 12:58:25 - app.phase2.pg_aggregations - INFO -    Getting city map for Rochester, United States...
2026-01-22 12:58:25 - app.main - INFO - ================================================================================
2026-01-22 12:58:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:25 - app.main - INFO -    Country: Italy, City: Brescia, Min confidence: low
2026-01-22 12:58:25 - app.main - INFO - ================================================================================
2026-01-22 12:58:25 - app.phase2.pg_aggregations - INFO -    Getting city map for Brescia, Italy...
2026-01-22 12:58:26 - app.main - INFO - ================================================================================
2026-01-22 12:58:26 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:26 - app.main - INFO -    Country: India, City: Bengaluru, Min confidence: low
2026-01-22 12:58:26 - app.main - INFO - ================================================================================
2026-01-22 12:58:26 - app.phase2.pg_aggregations - INFO -    Getting city map for Bengaluru, India...
2026-01-22 12:58:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:27 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:27 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:27 - app.main - INFO - ================================================================================
2026-01-22 12:58:27 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:27 - app.main - INFO -    Country: Iran, City: Tehran, Min confidence: low
2026-01-22 12:58:27 - app.main - INFO - ================================================================================
2026-01-22 12:58:27 - app.phase2.pg_aggregations - INFO -    Getting city map for Tehran, Iran...
2026-01-22 12:58:27 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:27 - app.main - INFO - ================================================================================
2026-01-22 12:58:27 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:27 - app.main - INFO -    Country: Peru, Min confidence: low
2026-01-22 12:58:27 - app.main - INFO - ================================================================================
2026-01-22 12:58:27 - app.phase2.pg_aggregations - INFO -    Getting country map for Peru (normalized: Peru)...
2026-01-22 12:58:27 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Rochester, United States
2026-01-22 12:58:27 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 8 institutions in Cambridge, United States
2026-01-22 12:58:28 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Cambridge, United States
2026-01-22 12:58:28 - app.main - INFO -    Institutions returned: 8
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 7 institutions in Ningbo, China
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Australia, City: Sydney, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting city map for Sydney, Australia...
2026-01-22 12:58:28 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Ningbo, China
2026-01-22 12:58:28 - app.main - INFO -    Institutions returned: 7
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Hong Kong, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Hong Kong (normalized: Hong Kong)...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Malaysia, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Malaysia (normalized: Malaysia)...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Special Administrative Region of China, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Special Administrative Region of China (normalized: Special Administrative Region of China)...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Germany, City: Frankfurt am Main, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting city map for Frankfurt am Main, Germany...
2026-01-22 12:58:28 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Rochester, United States
2026-01-22 12:58:28 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Kazakhstan, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Kazakhstan (normalized: Kazakhstan)...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Brazil, City: Recife, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting city map for Recife, Brazil...
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 5 institutions in Brescia, Italy
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:28 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Brescia, Italy
2026-01-22 12:58:28 - app.main - INFO -    Institutions returned: 5
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Belgium, City: Leuven, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting city map for Leuven, Belgium...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Venezuela, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Venezuela (normalized: Venezuela)...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Belgium, City: Brussels, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting city map for Brussels, Belgium...
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Bengaluru, India
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: India, City: Manipal, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting city map for Manipal, India...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Czechia, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Czechia (normalized: Czechia)...
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:28 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Bengaluru, India
2026-01-22 12:58:28 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Romania, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Romania (normalized: Romania)...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Norway, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Norway (normalized: Norway)...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Uganda, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Uganda (normalized: Uganda)...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Greece, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Greece (normalized: Greece)...
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Ireland, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Ireland (normalized: Ireland)...
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Frankfurt am Main, Germany
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Brasil, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Brasil (normalized: Brasil)...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Switzerland, City: Bern, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting city map for Bern, Switzerland...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: India, City: Ranchi, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting city map for Ranchi, India...
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:28 - app.main - INFO -    Country: Egypt, Min confidence: low
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Egypt (normalized: Egypt)...
2026-01-22 12:58:28 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Frankfurt am Main, Germany
2026-01-22 12:58:28 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:28 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Recife, Brazil
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:29 - app.main - INFO -    Country: Slovakia, Min confidence: low
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Getting country map for Slovakia (normalized: Slovakia)...
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:29 - app.main - INFO -    Country: Colombia, Min confidence: low
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Getting country map for Colombia (normalized: Colombia)...
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Recife, Brazil
2026-01-22 12:58:29 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:29 - app.main - INFO -    Country: Sweden, Min confidence: low
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Getting country map for Sweden (normalized: Sweden)...
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:29 - app.main - INFO -    Country: Chile, Min confidence: low
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Getting country map for Chile (normalized: Chile)...
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Peru
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:29 - app.main - INFO -    Country: Canada, City: Ottawa, Min confidence: low
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Getting city map for Ottawa, Canada...
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Peru
2026-01-22 12:58:29 - app.main - INFO -    Cities returned: 2
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:29 - app.main - INFO -    Country: the Netherlands, Min confidence: low
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Getting country map for the Netherlands (normalized: the Netherlands)...
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Special Administrative Region of China
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Manipal, India
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Leuven, Belgium
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 8 institutions in Sydney, Australia
2026-01-22 12:58:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Special Administrative Region of China
2026-01-22 12:58:29 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Leuven, Belgium
2026-01-22 12:58:29 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:29 - app.main - INFO -    Country: Australia, City: Randwick, Min confidence: low
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Getting city map for Randwick, Australia...
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Sydney, Australia
2026-01-22 12:58:29 - app.main - INFO -    Institutions returned: 8
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Manipal, India
2026-01-22 12:58:29 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:29 - app.main - INFO - ================================================================================
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:29 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 12 institutions in Tehran, Iran
2026-01-22 12:58:30 - app.main - INFO - ================================================================================
2026-01-22 12:58:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:30 - app.main - INFO -    Country: TÃ¼rkiye, Min confidence: low
2026-01-22 12:58:30 - app.main - INFO - ================================================================================
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    Getting country map for TÃ¼rkiye (normalized: TÃ¼rkiye)...
2026-01-22 12:58:30 - app.main - INFO - ================================================================================
2026-01-22 12:58:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:30 - app.main - INFO -    Country: Zambia, Min confidence: low
2026-01-22 12:58:30 - app.main - INFO - ================================================================================
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    Getting country map for Zambia (normalized: Zambia)...
2026-01-22 12:58:30 - app.main - INFO - ================================================================================
2026-01-22 12:58:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:30 - app.main - INFO -    Country: Serbia, Min confidence: low
2026-01-22 12:58:30 - app.main - INFO - ================================================================================
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    Getting country map for Serbia (normalized: Serbia)...
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:30 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Tehran, Iran
2026-01-22 12:58:30 - app.main - INFO -    Institutions returned: 12
2026-01-22 12:58:30 - app.main - INFO - ================================================================================
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Hong Kong
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Ranchi, India
2026-01-22 12:58:30 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hong Kong
2026-01-22 12:58:30 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:30 - app.main - INFO - ================================================================================
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Brussels, Belgium
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Bern, Switzerland
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:30 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Brussels, Belgium
2026-01-22 12:58:30 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:30 - app.main - INFO - ================================================================================
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Greece
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Malaysia
2026-01-22 12:58:30 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Ranchi, India
2026-01-22 12:58:30 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:30 - app.main - INFO - ================================================================================
2026-01-22 12:58:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Malaysia
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Bern, Switzerland
2026-01-22 12:58:31 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Egypt
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Greece
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 2
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Venezuela
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Ottawa, Canada
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Colombia
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Colombia
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 0 cities in the Netherlands
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Egypt
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: the Netherlands
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 0
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Randwick, Australia
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Chile
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Romania
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Ottawa, Canada
2026-01-22 12:58:31 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Czechia
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Norway
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Venezuela
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Chile
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Romania
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 2
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Norway
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Randwick, Australia
2026-01-22 12:58:31 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Czechia
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Sweden
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Zambia
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Sweden
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 3
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Kazakhstan
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in TÃ¼rkiye
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Ireland
2026-01-22 12:58:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Uganda
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Zambia
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 2
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: TÃ¼rkiye
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Kazakhstan
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Uganda
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 2
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Ireland
2026-01-22 12:58:31 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:31 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Serbia
2026-01-22 12:58:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Serbia
2026-01-22 12:58:32 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: Finland, City: Espoo, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for Espoo, Finland...
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Slovakia
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: United States, City: Bethlehem, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for Bethlehem, United States...
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: United States, City: Baltimore, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for Baltimore, United States...
2026-01-22 12:58:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Slovakia
2026-01-22 12:58:32 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Brasil
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: United States, City: La Jolla, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for La Jolla, United States...
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: New Zealand, City: Dunedin, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for Dunedin, New Zealand...
2026-01-22 12:58:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brasil
2026-01-22 12:58:32 - app.main - INFO -    Cities returned: 1
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: United States, City: Mountain View, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for Mountain View, United States...
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: United States, City: Charleston, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for Charleston, United States...
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: United States, City: Philadelphia, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for Philadelphia, United States...
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: Taiwan, City: Tainan, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for Tainan, Taiwan...
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: Spain, City: Cadiz, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for Cadiz, Spain...
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: China, City: Kowloon, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for Kowloon, China...
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Bethlehem, United States
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: Italy, City: Rovereto, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for Rovereto, Italy...
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Bethlehem, United States
2026-01-22 12:58:32 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Espoo, Finland
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:32 - app.main - INFO -    Country: Taiwan, City: Taoyuan City, Min confidence: low
2026-01-22 12:58:32 - app.main - INFO - ================================================================================
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Getting city map for Taoyuan City, Taiwan...
2026-01-22 12:58:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in Mountain View, United States
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Kowloon, China
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:33 - app.main - INFO -    Country: United States, City: New York, Min confidence: low
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    Getting city map for New York, United States...
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Dunedin, New Zealand
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:33 - app.main - INFO -    Country: Italy, City: Sassari, Min confidence: low
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    Getting city map for Sassari, Italy...
2026-01-22 12:58:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Kowloon, China
2026-01-22 12:58:33 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Mountain View, United States
2026-01-22 12:58:33 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Espoo, Finland
2026-01-22 12:58:33 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Cadiz, Spain
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 5 institutions in La Jolla, United States
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 5 institutions in Philadelphia, United States
2026-01-22 12:58:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Cadiz, Spain
2026-01-22 12:58:33 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Dunedin, New Zealand
2026-01-22 12:58:33 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in Baltimore, United States
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Philadelphia, United States
2026-01-22 12:58:33 - app.main - INFO -    Institutions returned: 5
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: La Jolla, United States
2026-01-22 12:58:33 - app.main - INFO -    Institutions returned: 5
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Baltimore, United States
2026-01-22 12:58:33 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 9 institutions in New York, United States
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:33 - app.main - INFO -    Country: China, City: Bengbu, Min confidence: low
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    Getting city map for Bengbu, China...
2026-01-22 12:58:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: New York, United States
2026-01-22 12:58:33 - app.main - INFO -    Institutions returned: 9
2026-01-22 12:58:33 - app.main - INFO - ================================================================================
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Sassari, Italy
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Tainan, Taiwan
2026-01-22 12:58:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:34 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Charleston, United States
2026-01-22 12:58:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Sassari, Italy
2026-01-22 12:58:34 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:34 - app.main - INFO - ================================================================================
2026-01-22 12:58:34 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Rovereto, Italy
2026-01-22 12:58:34 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Bengbu, China
2026-01-22 12:58:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Charleston, United States
2026-01-22 12:58:34 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:34 - app.main - INFO - ================================================================================
2026-01-22 12:58:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Rovereto, Italy
2026-01-22 12:58:34 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:34 - app.main - INFO - ================================================================================
2026-01-22 12:58:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Tainan, Taiwan
2026-01-22 12:58:34 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:34 - app.main - INFO - ================================================================================
2026-01-22 12:58:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Bengbu, China
2026-01-22 12:58:34 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:34 - app.main - INFO - ================================================================================
2026-01-22 12:58:34 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Taoyuan City, Taiwan
2026-01-22 12:58:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Taoyuan City, Taiwan
2026-01-22 12:58:34 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:34 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:35 - app.main - INFO -    Country: United Kingdom, City: Oxford, Min confidence: low
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Getting city map for Oxford, United Kingdom...
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:35 - app.main - INFO -    Country: Russia, City: Moscow, Min confidence: low
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Getting city map for Moscow, Russia...
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:35 - app.main - INFO -    Country: France, City: Paris, Min confidence: low
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Getting city map for Paris, France...
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:35 - app.main - INFO -    Country: Turkey, City: Istanbul, Min confidence: low
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Getting city map for Istanbul, Turkey...
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:35 - app.main - INFO -    Country: Australia, City: Adelaide, Min confidence: low
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Getting city map for Adelaide, Australia...
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:35 - app.main - INFO -    Country: Italy, City: Venice, Min confidence: low
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Getting city map for Venice, Italy...
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:35 - app.main - INFO -    Country: Germany, City: Magdeburg, Min confidence: low
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Getting city map for Magdeburg, Germany...
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:35 - app.main - INFO -    Country: United States, City: Cincinnati, Min confidence: low
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Getting city map for Cincinnati, United States...
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:35 - app.main - INFO -    Country: Germany, City: Berlin, Min confidence: low
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Getting city map for Berlin, Germany...
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:35 - app.main - INFO -    Country: Germany, City: Augsburg, Min confidence: low
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Getting city map for Augsburg, Germany...
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Oxford, United Kingdom
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 5 institutions in Moscow, Russia
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in Adelaide, Australia
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:35 - app.main - INFO -    Country: Germany, City: Mainz, Min confidence: low
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:35 - app.phase2.pg_aggregations - INFO -    Getting city map for Mainz, Germany...
2026-01-22 12:58:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Moscow, Russia
2026-01-22 12:58:35 - app.main - INFO -    Institutions returned: 5
2026-01-22 12:58:35 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Adelaide, Australia
2026-01-22 12:58:36 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Oxford, United Kingdom
2026-01-22 12:58:36 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in Magdeburg, Germany
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 6 institutions in Istanbul, Turkey
2026-01-22 12:58:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Magdeburg, Germany
2026-01-22 12:58:36 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Istanbul, Turkey
2026-01-22 12:58:36 - app.main - INFO -    Institutions returned: 6
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Venice, Italy
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Berlin, Germany
2026-01-22 12:58:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Berlin, Germany
2026-01-22 12:58:36 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Paris, France
2026-01-22 12:58:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Venice, Italy
2026-01-22 12:58:36 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Paris, France
2026-01-22 12:58:36 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Cincinnati, United States
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Mainz, Germany
2026-01-22 12:58:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Mainz, Germany
2026-01-22 12:58:36 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Cincinnati, United States
2026-01-22 12:58:36 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Augsburg, Germany
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:36 - app.main - INFO -    Country: Canada, City: Surrey, Min confidence: low
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    Getting city map for Surrey, Canada...
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:36 - app.main - INFO -    Country: Spain, City: Madrid, Min confidence: low
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:36 - app.phase2.pg_aggregations - INFO -    Getting city map for Madrid, Spain...
2026-01-22 12:58:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Augsburg, Germany
2026-01-22 12:58:36 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:36 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:37 - app.main - INFO -    Country: Germany, City: MÃ¼nster, Min confidence: low
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Getting city map for MÃ¼nster, Germany...
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:37 - app.main - INFO -    Country: Canada, City: Calgary, Min confidence: low
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Getting city map for Calgary, Canada...
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Madrid, Spain
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:37 - app.main - INFO -    Country: United Kingdom, City: Glasgow, Min confidence: low
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Getting city map for Glasgow, United Kingdom...
2026-01-22 12:58:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Madrid, Spain
2026-01-22 12:58:37 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:37 - app.main - INFO -    Country: Germany, City: Cologne, Min confidence: low
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Getting city map for Cologne, Germany...
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:37 - app.main - INFO -    Country: China, City: Xinxiang, Min confidence: low
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Getting city map for Xinxiang, China...
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:37 - app.main - INFO -    Country: China, City: Beijing, Min confidence: low
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Getting city map for Beijing, China...
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in MÃ¼nster, Germany
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:37 - app.main - INFO -    Country: Italy, City: Milan, Min confidence: low
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Getting city map for Milan, Italy...
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:37 - app.main - INFO -    Country: Australia, City: Melbourne, Min confidence: low
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Getting city map for Melbourne, Australia...
2026-01-22 12:58:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: MÃ¼nster, Germany
2026-01-22 12:58:37 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Glasgow, United Kingdom
2026-01-22 12:58:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Glasgow, United Kingdom
2026-01-22 12:58:37 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Calgary, Canada
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Surrey, Canada
2026-01-22 12:58:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Surrey, Canada
2026-01-22 12:58:37 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:37 - app.main - INFO - ================================================================================
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Calgary, Canada
2026-01-22 12:58:38 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:38 - app.main - INFO -    Country: United States, City: Boston, Min confidence: low
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    Getting city map for Boston, United States...
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 7 institutions in Milan, Italy
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 31 institutions in Beijing, China
2026-01-22 12:58:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Beijing, China
2026-01-22 12:58:38 - app.main - INFO -    Institutions returned: 31
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Milan, Italy
2026-01-22 12:58:38 - app.main - INFO -    Institutions returned: 7
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 6 institutions in Melbourne, Australia
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Xinxiang, China
2026-01-22 12:58:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Melbourne, Australia
2026-01-22 12:58:38 - app.main - INFO -    Institutions returned: 6
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:38 - app.main - INFO -    Country: China, City: Hong Kong, Min confidence: low
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    Getting city map for Hong Kong, China...
2026-01-22 12:58:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Xinxiang, China
2026-01-22 12:58:38 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:38 - app.main - INFO -    Country: China, City: Nanchang, Min confidence: low
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    Getting city map for Nanchang, China...
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:38 - app.main - INFO -    Country: Germany, City: Hamburg, Min confidence: low
2026-01-22 12:58:38 - app.main - INFO - ================================================================================
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    Getting city map for Hamburg, Germany...
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in Cologne, Germany
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:38 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Nanchang, China
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Hamburg, Germany
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:39 - app.main - INFO -    Country: Israel, City: Beer-Yaacov, Min confidence: low
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Getting city map for Beer-Yaacov, Israel...
2026-01-22 12:58:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Cologne, Germany
2026-01-22 12:58:39 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:39 - app.main - INFO -    Country: France, City: Grenoble, Min confidence: low
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Getting city map for Grenoble, France...
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in Hong Kong, China
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 22 institutions in Boston, United States
2026-01-22 12:58:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Nanchang, China
2026-01-22 12:58:39 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:39 - app.main - INFO -    Country: Spain, City: Badalona, Min confidence: low
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Getting city map for Badalona, Spain...
2026-01-22 12:58:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Hamburg, Germany
2026-01-22 12:58:39 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Hong Kong, China
2026-01-22 12:58:39 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:39 - app.main - INFO -    Country: France, City: Lyon, Min confidence: low
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Getting city map for Lyon, France...
2026-01-22 12:58:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Boston, United States
2026-01-22 12:58:39 - app.main - INFO -    Institutions returned: 22
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:39 - app.main - INFO -    Country: Netherlands, City: Heemstede, Min confidence: low
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Getting city map for Heemstede, Netherlands...
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:39 - app.main - INFO -    Country: Switzerland, City: ZÃ¼rich, Min confidence: low
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Getting city map for ZÃ¼rich, Switzerland...
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:39 - app.main - INFO -    Country: Iran, City: Sari, Min confidence: low
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Getting city map for Sari, Iran...
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Beer-Yaacov, Israel
2026-01-22 12:58:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Beer-Yaacov, Israel
2026-01-22 12:58:39 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:39 - app.main - INFO -    Country: Spain, City: Pozuelo de AlarcÃ³n, Min confidence: low
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Getting city map for Pozuelo de AlarcÃ³n, Spain...
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Grenoble, France
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Grenoble, France
2026-01-22 12:58:39 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Badalona, Spain
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:39 - app.main - INFO -    Country: Belgium, City: Ghent, Min confidence: low
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Getting city map for Ghent, Belgium...
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in Lyon, France
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Heemstede, Netherlands
2026-01-22 12:58:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Badalona, Spain
2026-01-22 12:58:39 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Heemstede, Netherlands
2026-01-22 12:58:39 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Lyon, France
2026-01-22 12:58:39 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in ZÃ¼rich, Switzerland
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: ZÃ¼rich, Switzerland
2026-01-22 12:58:39 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Sari, Iran
2026-01-22 12:58:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Sari, Iran
2026-01-22 12:58:39 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:39 - app.main - INFO - ================================================================================
2026-01-22 12:58:39 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Pozuelo de AlarcÃ³n, Spain
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:40 - app.main - INFO -    Country: China, City: Shanghai, Min confidence: low
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    Getting city map for Shanghai, China...
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:40 - app.main - INFO -    Country: Canada, City: London, Min confidence: low
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    Getting city map for London, Canada...
2026-01-22 12:58:40 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Pozuelo de AlarcÃ³n, Spain
2026-01-22 12:58:40 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:40 - app.main - INFO -    Country: Canada, City: Toronto, Min confidence: low
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    Getting city map for Toronto, Canada...
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:40 - app.main - INFO -    Country: Italy, City: Rome, Min confidence: low
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    Getting city map for Rome, Italy...
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 14 institutions in Shanghai, China
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:40 - app.main - INFO -    Country: Switzerland, City: Geneva, Min confidence: low
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    Getting city map for Geneva, Switzerland...
2026-01-22 12:58:40 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Shanghai, China
2026-01-22 12:58:40 - app.main - INFO -    Institutions returned: 14
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:40 - app.main - INFO -    Country: China, City: Guangzhou, Min confidence: low
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    Getting city map for Guangzhou, China...
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 6 institutions in London, Canada
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:40 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: London, Canada
2026-01-22 12:58:40 - app.main - INFO -    Institutions returned: 6
2026-01-22 12:58:40 - app.main - INFO - ================================================================================
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 10 institutions in Toronto, Canada
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 20 institutions in Rome, Italy
2026-01-22 12:58:40 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:41 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Toronto, Canada
2026-01-22 12:58:41 - app.main - INFO -    Institutions returned: 10
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Rome, Italy
2026-01-22 12:58:41 - app.main - INFO -    Institutions returned: 20
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:41 - app.main - INFO -    Country: United States, City: Gainesville, Min confidence: low
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Getting city map for Gainesville, United States...
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 23 institutions in Guangzhou, China
2026-01-22 12:58:41 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Guangzhou, China
2026-01-22 12:58:41 - app.main - INFO -    Institutions returned: 23
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:41 - app.main - INFO -    Country: United States, City: St Louis, Min confidence: low
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Getting city map for St Louis, United States...
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:41 - app.main - INFO -    Country: United States, City: Palo Alto, Min confidence: low
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Getting city map for Palo Alto, United States...
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Ghent, Belgium
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:41 - app.main - INFO -    Country: United States, City: San Diego, Min confidence: low
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Getting city map for San Diego, United States...
2026-01-22 12:58:41 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Ghent, Belgium
2026-01-22 12:58:41 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:41 - app.main - INFO -    Country: China, City: Xi'an, Min confidence: low
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Getting city map for Xi'an, China...
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:41 - app.main - INFO -    Country: Italy, City: Padua, Min confidence: low
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Getting city map for Padua, Italy...
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:41 - app.main - INFO -    Country: China, City: Huzhou, Min confidence: low
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Getting city map for Huzhou, China...
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Gainesville, United States
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:41 - app.main - INFO -    Country: United States, City: Tulsa, Min confidence: low
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Getting city map for Tulsa, United States...
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:41 - app.main - INFO -    Country: China, City: Suzhou, Min confidence: low
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Getting city map for Suzhou, China...
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Palo Alto, United States
2026-01-22 12:58:41 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Gainesville, United States
2026-01-22 12:58:41 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:41 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Palo Alto, United States
2026-01-22 12:58:41 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in San Diego, United States
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:41 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:41 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: San Diego, United States
2026-01-22 12:58:41 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:41 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Padua, Italy
2026-01-22 12:58:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:42 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Padua, Italy
2026-01-22 12:58:42 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:42 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in St Louis, United States
2026-01-22 12:58:42 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: St Louis, United States
2026-01-22 12:58:42 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:42 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:42 - app.main - INFO -    Country: India, City: New Delhi, Min confidence: low
2026-01-22 12:58:42 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.phase2.pg_aggregations - INFO -    Getting city map for New Delhi, India...
2026-01-22 12:58:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:42 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Tulsa, United States
2026-01-22 12:58:42 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 9 institutions in Geneva, Switzerland
2026-01-22 12:58:42 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Tulsa, United States
2026-01-22 12:58:42 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:42 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Geneva, Switzerland
2026-01-22 12:58:42 - app.main - INFO -    Institutions returned: 9
2026-01-22 12:58:42 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:42 - app.main - INFO -    Country: China, City: Jiaxing, Min confidence: low
2026-01-22 12:58:42 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.phase2.pg_aggregations - INFO -    Getting city map for Jiaxing, China...
2026-01-22 12:58:42 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:42 - app.main - INFO -    Country: United States, City: Dallas, Min confidence: low
2026-01-22 12:58:42 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.phase2.pg_aggregations - INFO -    Getting city map for Dallas, United States...
2026-01-22 12:58:42 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:42 - app.main - INFO -    Country: China, City: Shijiazhuang, Min confidence: low
2026-01-22 12:58:42 - app.main - INFO - ================================================================================
2026-01-22 12:58:42 - app.phase2.pg_aggregations - INFO -    Getting city map for Shijiazhuang, China...
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 9 institutions in Xi'an, China
2026-01-22 12:58:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Xi'an, China
2026-01-22 12:58:43 - app.main - INFO -    Institutions returned: 9
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:43 - app.main - INFO -    Country: Canada, City: Hamilton, Min confidence: low
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    Getting city map for Hamilton, Canada...
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Huzhou, China
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in Dallas, United States
2026-01-22 12:58:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Huzhou, China
2026-01-22 12:58:43 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Dallas, United States
2026-01-22 12:58:43 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in New Delhi, India
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:43 - app.main - INFO -    Country: Germany, City: Regensburg, Min confidence: low
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    Getting city map for Regensburg, Germany...
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Jiaxing, China
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: New Delhi, India
2026-01-22 12:58:43 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Jiaxing, China
2026-01-22 12:58:43 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:43 - app.main - INFO -    Country: United States, City: Bethesda, Min confidence: low
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    Getting city map for Bethesda, United States...
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Suzhou, China
2026-01-22 12:58:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Suzhou, China
2026-01-22 12:58:43 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Shijiazhuang, China
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Hamilton, Canada
2026-01-22 12:58:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Shijiazhuang, China
2026-01-22 12:58:43 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Hamilton, Canada
2026-01-22 12:58:43 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:43 - app.main - INFO -    Country: New Zealand, City: Auckland, Min confidence: low
2026-01-22 12:58:43 - app.main - INFO - ================================================================================
2026-01-22 12:58:43 - app.phase2.pg_aggregations - INFO -    Getting city map for Auckland, New Zealand...
2026-01-22 12:58:44 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Regensburg, Germany
2026-01-22 12:58:44 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Regensburg, Germany
2026-01-22 12:58:44 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:44 - app.main - INFO -    Country: Spain, City: A CoruÃ±a, Min confidence: low
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.phase2.pg_aggregations - INFO -    Getting city map for A CoruÃ±a, Spain...
2026-01-22 12:58:44 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:44 - app.main - INFO -    Country: Australia, City: Parkville, Min confidence: low
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.phase2.pg_aggregations - INFO -    Getting city map for Parkville, Australia...
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:44 - app.main - INFO -    Country: Brazil, City: SÃ£o JosÃ© dos Campos, Min confidence: low
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.phase2.pg_aggregations - INFO -    Getting city map for SÃ£o JosÃ© dos Campos, Brazil...
2026-01-22 12:58:44 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:44 - app.main - INFO -    Country: Italy, City: Florence, Min confidence: low
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.phase2.pg_aggregations - INFO -    Getting city map for Florence, Italy...
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:44 - app.main - INFO -    Country: United Kingdom, City: Newcastle Upon Tyne, Min confidence: low
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.phase2.pg_aggregations - INFO -    Getting city map for Newcastle Upon Tyne, United Kingdom...
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:44 - app.main - INFO -    Country: Netherlands, City: Nijmegen, Min confidence: low
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.phase2.pg_aggregations - INFO -    Getting city map for Nijmegen, Netherlands...
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:44 - app.main - INFO -    Country: Italy, City: Roma, Min confidence: low
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.phase2.pg_aggregations - INFO -    Getting city map for Roma, Italy...
2026-01-22 12:58:44 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Bethesda, United States
2026-01-22 12:58:44 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Bethesda, United States
2026-01-22 12:58:44 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:44 - app.main - INFO - ================================================================================
2026-01-22 12:58:44 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Auckland, New Zealand
2026-01-22 12:58:45 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Auckland, New Zealand
2026-01-22 12:58:45 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:45 - app.main - INFO - ================================================================================
2026-01-22 12:58:45 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:45 - app.main - INFO - ================================================================================
2026-01-22 12:58:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:45 - app.main - INFO -    Country: China, City: Tianjin, Min confidence: low
2026-01-22 12:58:45 - app.main - INFO - ================================================================================
2026-01-22 12:58:45 - app.phase2.pg_aggregations - INFO -    Getting city map for Tianjin, China...
2026-01-22 12:58:45 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in SÃ£o JosÃ© dos Campos, Brazil
2026-01-22 12:58:45 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: SÃ£o JosÃ© dos Campos, Brazil
2026-01-22 12:58:45 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:45 - app.main - INFO - ================================================================================
2026-01-22 12:58:45 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:45 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:45 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Nijmegen, Netherlands
2026-01-22 12:58:45 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Nijmegen, Netherlands
2026-01-22 12:58:45 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:45 - app.main - INFO - ================================================================================
2026-01-22 12:58:45 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:45 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:45 - app.main - INFO - ================================================================================
2026-01-22 12:58:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:45 - app.main - INFO -    Country: Germany, City: Dortmund, Min confidence: low
2026-01-22 12:58:45 - app.main - INFO - ================================================================================
2026-01-22 12:58:45 - app.phase2.pg_aggregations - INFO -    Getting city map for Dortmund, Germany...
2026-01-22 12:58:45 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:45 - app.main - INFO - ================================================================================
2026-01-22 12:58:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:45 - app.main - INFO -    Country: United States, City: Austin, Min confidence: low
2026-01-22 12:58:45 - app.main - INFO - ================================================================================
2026-01-22 12:58:45 - app.phase2.pg_aggregations - INFO -    Getting city map for Austin, United States...
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Roma, Italy
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Parkville, Australia
2026-01-22 12:58:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Roma, Italy
2026-01-22 12:58:46 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Parkville, Australia
2026-01-22 12:58:46 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Austin, United States
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:46 - app.main - INFO -    Country: Czech Republic, City: Brno, Min confidence: low
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    Getting city map for Brno, Czech Republic...
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Dortmund, Germany
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 10 institutions in Tianjin, China
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Florence, Italy
2026-01-22 12:58:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Austin, United States
2026-01-22 12:58:46 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Dortmund, Germany
2026-01-22 12:58:46 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Tianjin, China
2026-01-22 12:58:46 - app.main - INFO -    Institutions returned: 10
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in A CoruÃ±a, Spain
2026-01-22 12:58:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Florence, Italy
2026-01-22 12:58:46 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:46 - app.main - INFO -    Country: Switzerland, City: Sion, Min confidence: low
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    Getting city map for Sion, Switzerland...
2026-01-22 12:58:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: A CoruÃ±a, Spain
2026-01-22 12:58:46 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:46 - app.main - INFO -    Country: Finland, City: Kuopio, Min confidence: low
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    Getting city map for Kuopio, Finland...
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Brno, Czech Republic
2026-01-22 12:58:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Brno, Czech Republic
2026-01-22 12:58:46 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:46 - app.main - INFO -    Country: China, City: Taiyuan, Min confidence: low
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    Getting city map for Taiyuan, China...
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:46 - app.main - INFO -    Country: Italy, City: Naples, Min confidence: low
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    Getting city map for Naples, Italy...
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 5 institutions in Sion, Switzerland
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Kuopio, Finland
2026-01-22 12:58:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Kuopio, Finland
2026-01-22 12:58:46 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:46 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Sion, Switzerland
2026-01-22 12:58:47 - app.main - INFO -    Institutions returned: 5
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:47 - app.main - INFO -    Country: United States, City: Stanford, Min confidence: low
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Getting city map for Stanford, United States...
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:47 - app.main - INFO -    Country: Italy, City: Chieti, Min confidence: low
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Getting city map for Chieti, Italy...
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:47 - app.main - INFO -    Country: Germany, City: TÃ¼bingen, Min confidence: low
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Getting city map for TÃ¼bingen, Germany...
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:47 - app.main - INFO -    Country: Russia, City: Novosibirsk, Min confidence: low
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Getting city map for Novosibirsk, Russia...
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in Naples, Italy
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Taiyuan, China
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:47 - app.main - INFO -    Country: China, City: Hefei, Min confidence: low
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Getting city map for Hefei, China...
2026-01-22 12:58:47 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Naples, Italy
2026-01-22 12:58:47 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:47 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Taiyuan, China
2026-01-22 12:58:47 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Chieti, Italy
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:47 - app.main - INFO -    Country: Brazil, City: SÃ£o Paulo, Min confidence: low
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Getting city map for SÃ£o Paulo, Brazil...
2026-01-22 12:58:47 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Chieti, Italy
2026-01-22 12:58:47 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Stanford, United States
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in TÃ¼bingen, Germany
2026-01-22 12:58:47 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Stanford, United States
2026-01-22 12:58:47 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:47 - app.main - INFO -    Country: China, City: Chengdu, Min confidence: low
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Getting city map for Chengdu, China...
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:47 - app.main - INFO -    Country: Japan, City: Tokyo, Min confidence: low
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Getting city map for Tokyo, Japan...
2026-01-22 12:58:47 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: TÃ¼bingen, Germany
2026-01-22 12:58:47 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:47 - app.main - INFO -    Country: China, City: Hangzhou, Min confidence: low
2026-01-22 12:58:47 - app.main - INFO - ================================================================================
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Getting city map for Hangzhou, China...
2026-01-22 12:58:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Newcastle Upon Tyne, United Kingdom
2026-01-22 12:58:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Newcastle Upon Tyne, United Kingdom
2026-01-22 12:58:48 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Novosibirsk, Russia
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:48 - app.main - INFO -    Country: Spain, City: Barcelona, Min confidence: low
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    Getting city map for Barcelona, Spain...
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 7 institutions in SÃ£o Paulo, Brazil
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in Hefei, China
2026-01-22 12:58:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: SÃ£o Paulo, Brazil
2026-01-22 12:58:48 - app.main - INFO -    Institutions returned: 7
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Novosibirsk, Russia
2026-01-22 12:58:48 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Hefei, China
2026-01-22 12:58:48 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 9 institutions in Hangzhou, China
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 8 institutions in Tokyo, Japan
2026-01-22 12:58:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Hangzhou, China
2026-01-22 12:58:48 - app.main - INFO -    Institutions returned: 9
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 11 institutions in Barcelona, Spain
2026-01-22 12:58:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Tokyo, Japan
2026-01-22 12:58:48 - app.main - INFO -    Institutions returned: 8
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 7 institutions in Chengdu, China
2026-01-22 12:58:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Barcelona, Spain
2026-01-22 12:58:48 - app.main - INFO -    Institutions returned: 11
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Chengdu, China
2026-01-22 12:58:48 - app.main - INFO -    Institutions returned: 7
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:48 - app.main - INFO -    Country: Israel, City: Rehovot, Min confidence: low
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    Getting city map for Rehovot, Israel...
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:48 - app.main - INFO -    Country: China, City: Taizhou, Min confidence: low
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    Getting city map for Taizhou, China...
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:48 - app.main - INFO -    Country: Taiwan, City: Taipei, Min confidence: low
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    Getting city map for Taipei, Taiwan...
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:48 - app.main - INFO -    Country: Japan, City: Yokosuka City, Min confidence: low
2026-01-22 12:58:48 - app.main - INFO - ================================================================================
2026-01-22 12:58:48 - app.phase2.pg_aggregations - INFO -    Getting city map for Yokosuka City, Japan...
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:49 - app.main - INFO -    Country: United States, City: Chicago, Min confidence: low
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Getting city map for Chicago, United States...
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:49 - app.main - INFO -    Country: Germany, City: Aachen, Min confidence: low
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Getting city map for Aachen, Germany...
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Rehovot, Israel
2026-01-22 12:58:49 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Rehovot, Israel
2026-01-22 12:58:49 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:49 - app.main - INFO -    Country: Israel, City: Beer Sheba, Min confidence: low
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Getting city map for Beer Sheba, Israel...
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Aachen, Germany
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Taizhou, China
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:49 - app.main - INFO -    Country: Belgium, City: Antwerp, Min confidence: low
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Getting city map for Antwerp, Belgium...
2026-01-22 12:58:49 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Aachen, Germany
2026-01-22 12:58:49 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Taizhou, China
2026-01-22 12:58:49 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:49 - app.main - INFO -    Country: Italy, City: Pozzilli, Min confidence: low
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Getting city map for Pozzilli, Italy...
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Yokosuka City, Japan
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:49 - app.main - INFO -    Country: Germany, City: Kiel, Min confidence: low
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Getting city map for Kiel, Germany...
2026-01-22 12:58:49 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Yokosuka City, Japan
2026-01-22 12:58:49 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:49 - app.main - INFO -    Country: Poland, City: KrakÃ³w, Min confidence: low
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Getting city map for KrakÃ³w, Poland...
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:49 - app.main - INFO -    Country: Denmark, City: Copenhagen, Min confidence: low
2026-01-22 12:58:49 - app.main - INFO - ================================================================================
2026-01-22 12:58:49 - app.phase2.pg_aggregations - INFO -    Getting city map for Copenhagen, Denmark...
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:50 - app.main - INFO -    Country: United States, City: Providence, Min confidence: low
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Getting city map for Providence, United States...
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Taipei, Taiwan
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:50 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Taipei, Taiwan
2026-01-22 12:58:50 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 6 institutions in Chicago, United States
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:50 - app.main - INFO -    Country: Mexico, City: Mexico City, Min confidence: low
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Getting city map for Mexico City, Mexico...
2026-01-22 12:58:50 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Chicago, United States
2026-01-22 12:58:50 - app.main - INFO -    Institutions returned: 6
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Copenhagen, Denmark
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Kiel, Germany
2026-01-22 12:58:50 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Copenhagen, Denmark
2026-01-22 12:58:50 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:50 - app.main - INFO -    Country: United States, City: Minneapolis, Min confidence: low
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Getting city map for Minneapolis, United States...
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:50 - app.main - INFO -    Country: Germany, City: Essen, Min confidence: low
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Getting city map for Essen, Germany...
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:50 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Kiel, Germany
2026-01-22 12:58:50 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:50 - app.main - INFO -    Country: China, City: Shenzhen, Min confidence: low
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Getting city map for Shenzhen, China...
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 7 institutions in Providence, United States
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:50 - app.main - INFO -    Country: Israel, City: Kfar-Saba, Min confidence: low
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Getting city map for Kfar-Saba, Israel...
2026-01-22 12:58:50 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Providence, United States
2026-01-22 12:58:50 - app.main - INFO -    Institutions returned: 7
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:50 - app.main - INFO -    Country: China, City: Nanjing, Min confidence: low
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Getting city map for Nanjing, China...
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:50 - app.main - INFO -    Country: Denmark, City: Aalborg, Min confidence: low
2026-01-22 12:58:50 - app.main - INFO - ================================================================================
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Getting city map for Aalborg, Denmark...
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:50 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:51 - app.main - INFO -    Country: United States, City: Los Angeles, Min confidence: low
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    Getting city map for Los Angeles, United States...
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Essen, Germany
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:51 - app.main - INFO -    Country: Germany, City: Munich, Min confidence: low
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    Getting city map for Munich, Germany...
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Pozzilli, Italy
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 10 institutions in Shenzhen, China
2026-01-22 12:58:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Essen, Germany
2026-01-22 12:58:51 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Antwerp, Belgium
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Beer Sheba, Israel
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Shenzhen, China
2026-01-22 12:58:51 - app.main - INFO -    Institutions returned: 10
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Pozzilli, Italy
2026-01-22 12:58:51 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 10 institutions in Mexico City, Mexico
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Minneapolis, United States
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Mexico City, Mexico
2026-01-22 12:58:51 - app.main - INFO -    Institutions returned: 10
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in KrakÃ³w, Poland
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Aalborg, Denmark
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 7 institutions in Nanjing, China
2026-01-22 12:58:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Minneapolis, United States
2026-01-22 12:58:51 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: KrakÃ³w, Poland
2026-01-22 12:58:51 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Aalborg, Denmark
2026-01-22 12:58:51 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Antwerp, Belgium
2026-01-22 12:58:51 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 8 institutions in Munich, Germany
2026-01-22 12:58:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Beer Sheba, Israel
2026-01-22 12:58:51 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Nanjing, China
2026-01-22 12:58:51 - app.main - INFO -    Institutions returned: 7
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Munich, Germany
2026-01-22 12:58:51 - app.main - INFO -    Institutions returned: 8
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Kfar-Saba, Israel
2026-01-22 12:58:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Kfar-Saba, Israel
2026-01-22 12:58:51 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:51 - app.main - INFO - ================================================================================
2026-01-22 12:58:51 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 5 institutions in Los Angeles, United States
2026-01-22 12:58:52 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Los Angeles, United States
2026-01-22 12:58:52 - app.main - INFO -    Institutions returned: 5
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:52 - app.main - INFO -    Country: China, City: Jinan, Min confidence: low
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.phase2.pg_aggregations - INFO -    Getting city map for Jinan, China...
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:52 - app.main - INFO -    Country: Australia, City: Camberwell, Min confidence: low
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.phase2.pg_aggregations - INFO -    Getting city map for Camberwell, Australia...
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:52 - app.main - INFO -    Country: United States, City: Aurora, Min confidence: low
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.phase2.pg_aggregations - INFO -    Getting city map for Aurora, United States...
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:52 - app.main - INFO -    Country: United States, City: Pittsburgh, Min confidence: low
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.phase2.pg_aggregations - INFO -    Getting city map for Pittsburgh, United States...
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:52 - app.main - INFO -    Country: Spain, City: Torrent, Min confidence: low
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.phase2.pg_aggregations - INFO -    Getting city map for Torrent, Spain...
2026-01-22 12:58:52 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:52 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Jinan, China
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:52 - app.main - INFO -    Country: Czech Republic, City: Klecany, Min confidence: low
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.phase2.pg_aggregations - INFO -    Getting city map for Klecany, Czech Republic...
2026-01-22 12:58:52 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Jinan, China
2026-01-22 12:58:52 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:52 - app.main - INFO -    Country: Canada, City: Montreal, Min confidence: low
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.phase2.pg_aggregations - INFO -    Getting city map for Montreal, Canada...
2026-01-22 12:58:52 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:52 - app.main - INFO -    Country: Hungary, City: Debrecen, Min confidence: low
2026-01-22 12:58:52 - app.main - INFO - ================================================================================
2026-01-22 12:58:52 - app.phase2.pg_aggregations - INFO -    Getting city map for Debrecen, Hungary...
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in Pittsburgh, United States
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:53 - app.main - INFO -    Country: United States, City: Coral Gables, Min confidence: low
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Getting city map for Coral Gables, United States...
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Pittsburgh, United States
2026-01-22 12:58:53 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:53 - app.main - INFO -    Country: United States, City: Kenilworth, Min confidence: low
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Getting city map for Kenilworth, United States...
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:53 - app.main - INFO -    Country: United States, City: Buffalo, Min confidence: low
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Getting city map for Buffalo, United States...
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:53 - app.main - INFO -    Country: United States, City: Worcester, Min confidence: low
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Getting city map for Worcester, United States...
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:53 - app.main - INFO -    Country: United States, City: Miami, Min confidence: low
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Getting city map for Miami, United States...
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Torrent, Spain
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Camberwell, Australia
2026-01-22 12:58:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Torrent, Spain
2026-01-22 12:58:53 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Camberwell, Australia
2026-01-22 12:58:53 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Aurora, United States
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:53 - app.main - INFO -    Country: United States, City: Denton, Min confidence: low
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Getting city map for Denton, United States...
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Aurora, United States
2026-01-22 12:58:53 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Klecany, Czech Republic
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Klecany, Czech Republic
2026-01-22 12:58:53 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Kenilworth, United States
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Coral Gables, United States
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Worcester, United States
2026-01-22 12:58:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Kenilworth, United States
2026-01-22 12:58:53 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:53 - app.main - INFO -    Country: United States, City: Madison, Min confidence: low
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Getting city map for Madison, United States...
2026-01-22 12:58:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Coral Gables, United States
2026-01-22 12:58:53 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Worcester, United States
2026-01-22 12:58:53 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Debrecen, Hungary
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Denton, United States
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:53 - app.main - INFO -    Country: United States, City: Plano, Min confidence: low
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:53 - app.phase2.pg_aggregations - INFO -    Getting city map for Plano, United States...
2026-01-22 12:58:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Debrecen, Hungary
2026-01-22 12:58:53 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:53 - app.main - INFO - ================================================================================
2026-01-22 12:58:54 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:54 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Miami, United States
2026-01-22 12:58:54 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Madison, United States
2026-01-22 12:58:54 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Denton, United States
2026-01-22 12:58:54 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:54 - app.main - INFO - ================================================================================
2026-01-22 12:58:54 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Madison, United States
2026-01-22 12:58:54 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:54 - app.main - INFO - ================================================================================
2026-01-22 12:58:54 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 3 institutions in Montreal, Canada
2026-01-22 12:58:54 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Montreal, Canada
2026-01-22 12:58:54 - app.main - INFO -    Institutions returned: 3
2026-01-22 12:58:54 - app.main - INFO - ================================================================================
2026-01-22 12:58:54 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:54 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Plano, United States
2026-01-22 12:58:54 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Plano, United States
2026-01-22 12:58:54 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:54 - app.main - INFO - ================================================================================
2026-01-22 12:58:54 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Miami, United States
2026-01-22 12:58:54 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:54 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:55 - app.main - INFO -    Country: Iran, City: Mashhad, Min confidence: low
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.phase2.pg_aggregations - INFO -    Getting city map for Mashhad, Iran...
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:55 - app.main - INFO -    Country: Belgium, City: LiÃ¨ge, Min confidence: low
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.phase2.pg_aggregations - INFO -    Getting city map for LiÃ¨ge, Belgium...
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:55 - app.main - INFO -    Country: Austria, City: Innsbruck, Min confidence: low
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.phase2.pg_aggregations - INFO -    Getting city map for Innsbruck, Austria...
2026-01-22 12:58:55 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:55 - app.main - INFO -    Country: Netherlands, City: Amsterdam, Min confidence: low
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.phase2.pg_aggregations - INFO -    Getting city map for Amsterdam, Netherlands...
2026-01-22 12:58:55 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Mashhad, Iran
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:55 - app.main - INFO -    Country: Australia, City: Burwood, Min confidence: low
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.phase2.pg_aggregations - INFO -    Getting city map for Burwood, Australia...
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:55 - app.main - INFO -    Country: Germany, City: DÃ¼sseldorf, Min confidence: low
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.phase2.pg_aggregations - INFO -    Getting city map for DÃ¼sseldorf, Germany...
2026-01-22 12:58:55 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Mashhad, Iran
2026-01-22 12:58:55 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:55 - app.main - INFO -    Country: Portugal, City: Coimbra, Min confidence: low
2026-01-22 12:58:55 - app.main - INFO - ================================================================================
2026-01-22 12:58:55 - app.phase2.pg_aggregations - INFO -    Getting city map for Coimbra, Portugal...
2026-01-22 12:58:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:56 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in LiÃ¨ge, Belgium
2026-01-22 12:58:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: LiÃ¨ge, Belgium
2026-01-22 12:58:56 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:56 - app.main - INFO - ================================================================================
2026-01-22 12:58:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:56 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Coimbra, Portugal
2026-01-22 12:58:56 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Amsterdam, Netherlands
2026-01-22 12:58:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Coimbra, Portugal
2026-01-22 12:58:56 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:56 - app.main - INFO - ================================================================================
2026-01-22 12:58:56 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Buffalo, United States
2026-01-22 12:58:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Amsterdam, Netherlands
2026-01-22 12:58:56 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:56 - app.main - INFO - ================================================================================
2026-01-22 12:58:56 - app.main - INFO - ================================================================================
2026-01-22 12:58:56 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:56 - app.main - INFO -    Country: Israel, City: Tel Hashomer, Min confidence: low
2026-01-22 12:58:56 - app.main - INFO - ================================================================================
2026-01-22 12:58:56 - app.phase2.pg_aggregations - INFO -    Getting city map for Tel Hashomer, Israel...
2026-01-22 12:58:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Buffalo, United States
2026-01-22 12:58:56 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:56 - app.main - INFO - ================================================================================
2026-01-22 12:58:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:56 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in DÃ¼sseldorf, Germany
2026-01-22 12:58:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: DÃ¼sseldorf, Germany
2026-01-22 12:58:56 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:56 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Innsbruck, Austria
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Burwood, Australia
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:57 - app.main - INFO -    Country: Germany, City: JÃ¼lich, Min confidence: low
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    Getting city map for JÃ¼lich, Germany...
2026-01-22 12:58:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Burwood, Australia
2026-01-22 12:58:57 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:57 - app.main - INFO -    Country: Germany, City: Nuremberg, Min confidence: low
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    Getting city map for Nuremberg, Germany...
2026-01-22 12:58:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Innsbruck, Austria
2026-01-22 12:58:57 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:57 - app.main - INFO -    Country: Germany, City: Dresden, Min confidence: low
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    Getting city map for Dresden, Germany...
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:57 - app.main - INFO -    Country: Germany, City: Burgau, Min confidence: low
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    Getting city map for Burgau, Germany...
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:57 - app.main - INFO -    Country: United States, City: Salt Lake City, Min confidence: low
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    Getting city map for Salt Lake City, United States...
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:57 - app.main - INFO -    Country: United Kingdom, City: Nottingham, Min confidence: low
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    Getting city map for Nottingham, United Kingdom...
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Tel Hashomer, Israel
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Tel Hashomer, Israel
2026-01-22 12:58:57 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in JÃ¼lich, Germany
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: JÃ¼lich, Germany
2026-01-22 12:58:57 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Burgau, Germany
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:57 - app.main - INFO -    Country: Italy, City: Trento, Min confidence: low
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    Getting city map for Trento, Italy...
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Nuremberg, Germany
2026-01-22 12:58:57 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Dresden, Germany
2026-01-22 12:58:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Burgau, Germany
2026-01-22 12:58:57 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:57 - app.main - INFO - ================================================================================
2026-01-22 12:58:58 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Dresden, Germany
2026-01-22 12:58:58 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:58 - app.main - INFO - ================================================================================
2026-01-22 12:58:58 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Nuremberg, Germany
2026-01-22 12:58:58 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:58 - app.main - INFO - ================================================================================
2026-01-22 12:58:58 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:58 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Salt Lake City, United States
2026-01-22 12:58:58 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:58 - app.main - INFO - ================================================================================
2026-01-22 12:58:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:58 - app.main - INFO -    Country: Italy, City: Padova, Min confidence: low
2026-01-22 12:58:58 - app.main - INFO - ================================================================================
2026-01-22 12:58:58 - app.phase2.pg_aggregations - INFO -    Getting city map for Padova, Italy...
2026-01-22 12:58:58 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Salt Lake City, United States
2026-01-22 12:58:58 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:58 - app.main - INFO - ================================================================================
2026-01-22 12:58:58 - app.main - INFO - ================================================================================
2026-01-22 12:58:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:58 - app.main - INFO -    Country: China, City: Dalian, Min confidence: low
2026-01-22 12:58:58 - app.main - INFO - ================================================================================
2026-01-22 12:58:58 - app.phase2.pg_aggregations - INFO -    Getting city map for Dalian, China...
2026-01-22 12:58:58 - app.main - INFO - ================================================================================
2026-01-22 12:58:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:58 - app.main - INFO -    Country: United States, City: Glen Oaks, Min confidence: low
2026-01-22 12:58:58 - app.main - INFO - ================================================================================
2026-01-22 12:58:58 - app.phase2.pg_aggregations - INFO -    Getting city map for Glen Oaks, United States...
2026-01-22 12:58:58 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Trento, Italy
2026-01-22 12:58:58 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:59 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Trento, Italy
2026-01-22 12:58:59 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:59 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:59 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Glen Oaks, United States
2026-01-22 12:58:59 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Padova, Italy
2026-01-22 12:58:59 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Nottingham, United Kingdom
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:59 - app.main - INFO -    Country: China, City: Kunming, Min confidence: low
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.phase2.pg_aggregations - INFO -    Getting city map for Kunming, China...
2026-01-22 12:58:59 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Padova, Italy
2026-01-22 12:58:59 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Glen Oaks, United States
2026-01-22 12:58:59 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Nottingham, United Kingdom
2026-01-22 12:58:59 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:58:59 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Dalian, China
2026-01-22 12:58:59 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Dalian, China
2026-01-22 12:58:59 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:59 - app.main - INFO -    Country: Germany, City: Neubiberg, Min confidence: low
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.phase2.pg_aggregations - INFO -    Getting city map for Neubiberg, Germany...
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:59 - app.main - INFO -    Country: United States, City: Tucson, Min confidence: low
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.phase2.pg_aggregations - INFO -    Getting city map for Tucson, United States...
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:58:59 - app.main - INFO -    Country: Australia, City: Callaghan, Min confidence: low
2026-01-22 12:58:59 - app.main - INFO - ================================================================================
2026-01-22 12:58:59 - app.phase2.pg_aggregations - INFO -    Getting city map for Callaghan, Australia...
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:00 - app.main - INFO -    Country: Germany, City: Leipzig, Min confidence: low
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Getting city map for Leipzig, Germany...
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:00 - app.main - INFO -    Country: Austria, City: Graz, Min confidence: low
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Getting city map for Graz, Austria...
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Tucson, United States
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:00 - app.main - INFO -    Country: Switzerland, City: Lausanne, Min confidence: low
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Getting city map for Lausanne, Switzerland...
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Kunming, China
2026-01-22 12:59:00 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Kunming, China
2026-01-22 12:59:00 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Callaghan, Australia
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:00 - app.main - INFO -    Country: Israel, City: Ramat-Gan, Min confidence: low
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Getting city map for Ramat-Gan, Israel...
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:00 - app.main - INFO -    Country: Netherlands, City: Maastricht, Min confidence: low
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Getting city map for Maastricht, Netherlands...
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:00 - app.main - INFO -    Country: Brazil, City: JoÃ£o Pessoa, Min confidence: low
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Getting city map for JoÃ£o Pessoa, Brazil...
2026-01-22 12:59:00 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Tucson, United States
2026-01-22 12:59:00 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Neubiberg, Germany
2026-01-22 12:59:00 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Neubiberg, Germany
2026-01-22 12:59:00 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:00 - app.main - INFO -    Country: China, City: Changzhou, Min confidence: low
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Getting city map for Changzhou, China...
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Ramat-Gan, Israel
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:00 - app.main - INFO -    Country: United Kingdom, City: Liverpool, Min confidence: low
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    Getting city map for Liverpool, United Kingdom...
2026-01-22 12:59:00 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Ramat-Gan, Israel
2026-01-22 12:59:00 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:00 - app.main - INFO - ================================================================================
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Leipzig, Germany
2026-01-22 12:59:00 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Maastricht, Netherlands
2026-01-22 12:59:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:01 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Leipzig, Germany
2026-01-22 12:59:01 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:59:01 - app.main - INFO - ================================================================================
2026-01-22 12:59:01 - app.main - INFO - ================================================================================
2026-01-22 12:59:01 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:01 - app.main - INFO -    Country: Switzerland, City: Crans-Montana, Min confidence: low
2026-01-22 12:59:01 - app.main - INFO - ================================================================================
2026-01-22 12:59:01 - app.phase2.pg_aggregations - INFO -    Getting city map for Crans-Montana, Switzerland...
2026-01-22 12:59:01 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in JoÃ£o Pessoa, Brazil
2026-01-22 12:59:01 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Callaghan, Australia
2026-01-22 12:59:01 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:01 - app.main - INFO - ================================================================================
2026-01-22 12:59:01 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Graz, Austria
2026-01-22 12:59:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:01 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: JoÃ£o Pessoa, Brazil
2026-01-22 12:59:01 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:01 - app.main - INFO - ================================================================================
2026-01-22 12:59:01 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Graz, Austria
2026-01-22 12:59:01 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:01 - app.main - INFO - ================================================================================
2026-01-22 12:59:01 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Lausanne, Switzerland
2026-01-22 12:59:01 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Maastricht, Netherlands
2026-01-22 12:59:01 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:01 - app.main - INFO - ================================================================================
2026-01-22 12:59:01 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Lausanne, Switzerland
2026-01-22 12:59:01 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:01 - app.main - INFO - ================================================================================
2026-01-22 12:59:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:01 - app.main - INFO - ================================================================================
2026-01-22 12:59:01 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:01 - app.main - INFO -    Country: Brazil, City: Natal, Min confidence: low
2026-01-22 12:59:01 - app.main - INFO - ================================================================================
2026-01-22 12:59:01 - app.phase2.pg_aggregations - INFO -    Getting city map for Natal, Brazil...
2026-01-22 12:59:01 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Liverpool, United Kingdom
2026-01-22 12:59:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:01 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Liverpool, United Kingdom
2026-01-22 12:59:01 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:59:01 - app.main - INFO - ================================================================================
2026-01-22 12:59:01 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Natal, Brazil
2026-01-22 12:59:02 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Natal, Brazil
2026-01-22 12:59:02 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:02 - app.main - INFO - ================================================================================
2026-01-22 12:59:02 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Changzhou, China
2026-01-22 12:59:02 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:02 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Changzhou, China
2026-01-22 12:59:02 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:02 - app.main - INFO - ================================================================================
2026-01-22 12:59:02 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Crans-Montana, Switzerland
2026-01-22 12:59:02 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Crans-Montana, Switzerland
2026-01-22 12:59:02 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:59:02 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:03 - app.main - INFO -    Country: Austria, City: Salzburg, Min confidence: low
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Getting city map for Salzburg, Austria...
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:03 - app.main - INFO -    Country: Australia, City: Clayton, Min confidence: low
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Getting city map for Clayton, Australia...
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:03 - app.main - INFO -    Country: China, City: Yixing, Min confidence: low
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Getting city map for Yixing, China...
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:03 - app.main - INFO -    Country: China, City: Lanzhou, Min confidence: low
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Getting city map for Lanzhou, China...
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:03 - app.main - INFO -    Country: China, City: Qingdao, Min confidence: low
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Getting city map for Qingdao, China...
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:03 - app.main - INFO -    Country: Spain, City: Valladolid, Min confidence: low
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Getting city map for Valladolid, Spain...
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:03 - app.main - INFO -    Country: Portugal, City: Lisbon, Min confidence: low
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Getting city map for Lisbon, Portugal...
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:03 - app.main - INFO -    Country: United States, City: Stratford, Min confidence: low
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Getting city map for Stratford, United States...
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Salzburg, Austria
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:03 - app.main - INFO -    Country: Germany, City: LÃ¼beck, Min confidence: low
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Getting city map for LÃ¼beck, Germany...
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Salzburg, Austria
2026-01-22 12:59:03 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Clayton, Australia
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Clayton, Australia
2026-01-22 12:59:03 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Valladolid, Spain
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Yixing, China
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:03 - app.main - INFO -    Country: Portugal, City: Oeiras, Min confidence: low
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Getting city map for Oeiras, Portugal...
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Valladolid, Spain
2026-01-22 12:59:03 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:03 - app.main - INFO -    Country: Austria, City: Vienna, Min confidence: low
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Getting city map for Vienna, Austria...
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Stratford, United States
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Lanzhou, China
2026-01-22 12:59:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Stratford, United States
2026-01-22 12:59:03 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Lanzhou, China
2026-01-22 12:59:03 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Yixing, China
2026-01-22 12:59:03 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:03 - app.main - INFO - ================================================================================
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Qingdao, China
2026-01-22 12:59:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:04 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:04 - app.main - INFO - ================================================================================
2026-01-22 12:59:04 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:59:04 - app.main - INFO -    Country: Hungary, City: Budapest, Min confidence: low
2026-01-22 12:59:04 - app.main - INFO - ================================================================================
2026-01-22 12:59:04 - app.phase2.pg_aggregations - INFO -    Getting city map for Budapest, Hungary...
2026-01-22 12:59:04 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in LÃ¼beck, Germany
2026-01-22 12:59:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Qingdao, China
2026-01-22 12:59:04 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:59:04 - app.main - INFO - ================================================================================
2026-01-22 12:59:04 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Oeiras, Portugal
2026-01-22 12:59:04 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: LÃ¼beck, Germany
2026-01-22 12:59:04 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:59:04 - app.main - INFO - ================================================================================
2026-01-22 12:59:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Oeiras, Portugal
2026-01-22 12:59:04 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:04 - app.main - INFO - ================================================================================
2026-01-22 12:59:04 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 4 institutions in Lisbon, Portugal
2026-01-22 12:59:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Lisbon, Portugal
2026-01-22 12:59:04 - app.main - INFO -    Institutions returned: 4
2026-01-22 12:59:04 - app.main - INFO - ================================================================================
2026-01-22 12:59:04 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Vienna, Austria
2026-01-22 12:59:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Vienna, Austria
2026-01-22 12:59:04 - app.main - INFO -    Institutions returned: 1
2026-01-22 12:59:04 - app.main - INFO - ================================================================================
2026-01-22 12:59:05 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:59:05 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Budapest, Hungary
2026-01-22 12:59:05 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Budapest, Hungary
2026-01-22 12:59:05 - app.main - INFO -    Institutions returned: 2
2026-01-22 12:59:05 - app.main - INFO - ================================================================================
2026-01-22 12:22:08 - root - INFO - ================================================================================
2026-01-22 12:22:08 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 12:22:08 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 12:22:08 - root - INFO - ================================================================================
2026-01-22 12:24:28 - app.main - INFO - ================================================================================
2026-01-22 12:24:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:28 - app.main - INFO -    Min confidence: low
2026-01-22 12:24:28 - app.main - INFO - ================================================================================
2026-01-22 12:24:28 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-22 12:24:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:29 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 52 countries
2026-01-22 12:24:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-22 12:24:29 - app.main - INFO -    Countries returned: 52
2026-01-22 12:24:29 - app.main - INFO - ================================================================================
2026-01-22 12:24:29 - app.main - INFO - ================================================================================
2026-01-22 12:24:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:29 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-22 12:24:29 - app.main - INFO - ================================================================================
2026-01-22 12:24:29 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-22 12:24:29 - app.main - INFO - ================================================================================
2026-01-22 12:24:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:29 - app.main - INFO -    Country: China, Min confidence: low
2026-01-22 12:24:29 - app.main - INFO - ================================================================================
2026-01-22 12:24:29 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-22 12:24:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:29 - app.main - INFO - ================================================================================
2026-01-22 12:24:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:29 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-22 12:24:29 - app.main - INFO - ================================================================================
2026-01-22 12:24:29 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-22 12:24:29 - app.main - INFO - ================================================================================
2026-01-22 12:24:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:29 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-22 12:24:29 - app.main - INFO - ================================================================================
2026-01-22 12:24:29 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-22 12:24:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:30 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 74 cities in United States
2026-01-22 12:24:30 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-22 12:24:30 - app.main - INFO -    Cities returned: 74
2026-01-22 12:24:30 - app.main - INFO - ================================================================================
2026-01-22 12:24:30 - app.main - INFO - ================================================================================
2026-01-22 12:24:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:30 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-22 12:24:30 - app.main - INFO - ================================================================================
2026-01-22 12:24:30 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-22 12:24:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:30 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 30 cities in Italy
2026-01-22 12:24:30 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-22 12:24:30 - app.main - INFO -    Cities returned: 30
2026-01-22 12:24:30 - app.main - INFO - ================================================================================
2026-01-22 12:24:30 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 47 cities in China
2026-01-22 12:24:30 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Canada
2026-01-22 12:24:30 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-22 12:24:30 - app.main - INFO -    Cities returned: 47
2026-01-22 12:24:30 - app.main - INFO - ================================================================================
2026-01-22 12:24:30 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Canada
2026-01-22 12:24:30 - app.main - INFO -    Cities returned: 11
2026-01-22 12:24:30 - app.main - INFO - ================================================================================
2026-01-22 12:24:32 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Frankfurt am Main; Cologne; JÃ¼lich, Germany' (from affiliation: Department of Neurology, University Hospital Frankfurt, Goethe University, Frankfurt am Main, Germany; Medical Faculty, University of Cologne, and Department of Neurology, University Hospital Cologne, Cologne, Germany; Cognitive Neuroscience, Institute of Neuroscience and Medicine (INM-3), Research Centre JÃ¼lich, JÃ¼lich, Germany. Electronic address: Grefkes-hermann@em.uni-frankfurt.de.)
2026-01-22 12:24:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 38 cities in Germany
2026-01-22 12:24:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-22 12:24:32 - app.main - INFO -    Cities returned: 38
2026-01-22 12:24:32 - app.main - INFO - ================================================================================
2026-01-22 12:24:32 - app.main - INFO - ================================================================================
2026-01-22 12:24:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:32 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-22 12:24:32 - app.main - INFO - ================================================================================
2026-01-22 12:24:32 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-22 12:24:32 - app.main - INFO - ================================================================================
2026-01-22 12:24:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:32 - app.main - INFO -    Country: Switzerland, Min confidence: low
2026-01-22 12:24:32 - app.main - INFO - ================================================================================
2026-01-22 12:24:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Switzerland (normalized: Switzerland)...
2026-01-22 12:24:32 - app.main - INFO - ================================================================================
2026-01-22 12:24:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:32 - app.main - INFO -    Country: Netherlands, Min confidence: low
2026-01-22 12:24:32 - app.main - INFO - ================================================================================
2026-01-22 12:24:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Netherlands (normalized: Netherlands)...
2026-01-22 12:24:32 - app.main - INFO - ================================================================================
2026-01-22 12:24:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:32 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-22 12:24:32 - app.main - INFO - ================================================================================
2026-01-22 12:24:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-22 12:24:32 - app.main - INFO - ================================================================================
2026-01-22 12:24:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:32 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-22 12:24:32 - app.main - INFO - ================================================================================
2026-01-22 12:24:32 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-22 12:24:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:33 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 18 cities in Australia
2026-01-22 12:24:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-22 12:24:33 - app.main - INFO -    Cities returned: 18
2026-01-22 12:24:33 - app.main - INFO - ================================================================================
2026-01-22 12:24:33 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 13 cities in United Kingdom
2026-01-22 12:24:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United Kingdom
2026-01-22 12:24:33 - app.main - INFO -    Cities returned: 13
2026-01-22 12:24:33 - app.main - INFO - ================================================================================
2026-01-22 12:24:33 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Spain
2026-01-22 12:24:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Spain
2026-01-22 12:24:33 - app.main - INFO -    Cities returned: 11
2026-01-22 12:24:33 - app.main - INFO - ================================================================================
2026-01-22 12:24:33 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Switzerland
2026-01-22 12:24:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Switzerland
2026-01-22 12:24:33 - app.main - INFO -    Cities returned: 8
2026-01-22 12:24:33 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 9 cities in Netherlands
2026-01-22 12:24:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Netherlands
2026-01-22 12:24:34 - app.main - INFO -    Cities returned: 9
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:34 - app.main - INFO -    Country: Brazil, Min confidence: low
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    Getting country map for Brazil (normalized: Brazil)...
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:34 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:34 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:34 - app.main - INFO -    Country: India, Min confidence: low
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:34 - app.main - INFO -    Country: Belgium, Min confidence: low
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    Getting country map for Belgium (normalized: Belgium)...
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Brazil
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Japan
2026-01-22 12:24:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brazil
2026-01-22 12:24:34 - app.main - INFO -    Cities returned: 11
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-22 12:24:34 - app.main - INFO -    Cities returned: 6
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Iran
2026-01-22 12:24:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Iran
2026-01-22 12:24:34 - app.main - INFO -    Cities returned: 5
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in India
2026-01-22 12:24:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Belgium
2026-01-22 12:24:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-22 12:24:34 - app.main - INFO -    Cities returned: 5
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Belgium
2026-01-22 12:24:34 - app.main - INFO -    Cities returned: 6
2026-01-22 12:24:34 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:35 - app.main - INFO -    Country: Finland, Min confidence: low
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Finland (normalized: Finland)...
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:35 - app.main - INFO -    Country: France, Min confidence: low
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    Getting country map for France (normalized: France)...
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:35 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:35 - app.main - INFO -    Country: Mexico, Min confidence: low
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Mexico (normalized: Mexico)...
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:35 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Finland
2026-01-22 12:24:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Finland
2026-01-22 12:24:35 - app.main - INFO -    Cities returned: 2
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Russia
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 7 cities in France
2026-01-22 12:24:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Russia
2026-01-22 12:24:35 - app.main - INFO -    Cities returned: 2
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: France
2026-01-22 12:24:35 - app.main - INFO -    Cities returned: 7
2026-01-22 12:24:35 - app.main - INFO - ================================================================================
2026-01-22 12:24:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Mexico
2026-01-22 12:24:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Mexico
2026-01-22 12:24:36 - app.main - INFO -    Cities returned: 1
2026-01-22 12:24:36 - app.main - INFO - ================================================================================
2026-01-22 12:24:37 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Beer-Yaacov, Israel' (from affiliation: QuantalX Neuroscience, Beer-Yaacov, Israel.)
2026-01-22 12:24:38 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Zerifin, Israel' (from affiliation: Sagol Center for Hyperbaric Medicine and Research, Shamir Medical Center, Zerifin, Israel.)
2026-01-22 12:24:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 15 cities in Israel
2026-01-22 12:24:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Israel
2026-01-22 12:24:38 - app.main - INFO -    Cities returned: 15
2026-01-22 12:24:38 - app.main - INFO - ================================================================================
2026-01-22 12:24:38 - app.main - INFO - ================================================================================
2026-01-22 12:24:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:38 - app.main - INFO -    Country: Turkey, Min confidence: low
2026-01-22 12:24:38 - app.main - INFO - ================================================================================
2026-01-22 12:24:38 - app.phase2.pg_aggregations - INFO -    Getting country map for Turkey (normalized: Turkey)...
2026-01-22 12:24:38 - app.main - INFO - ================================================================================
2026-01-22 12:24:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:38 - app.main - INFO -    Country: Denmark, Min confidence: low
2026-01-22 12:24:38 - app.main - INFO - ================================================================================
2026-01-22 12:24:38 - app.phase2.pg_aggregations - INFO -    Getting country map for Denmark (normalized: Denmark)...
2026-01-22 12:24:38 - app.main - INFO - ================================================================================
2026-01-22 12:24:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:38 - app.main - INFO -    Country: Czech Republic, Min confidence: low
2026-01-22 12:24:38 - app.main - INFO - ================================================================================
2026-01-22 12:24:38 - app.phase2.pg_aggregations - INFO -    Getting country map for Czech Republic (normalized: Czech Republic)...
2026-01-22 12:24:38 - app.main - INFO - ================================================================================
2026-01-22 12:24:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:38 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-22 12:24:38 - app.main - INFO - ================================================================================
2026-01-22 12:24:38 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-22 12:24:38 - app.main - INFO - ================================================================================
2026-01-22 12:24:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:38 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-22 12:24:38 - app.main - INFO - ================================================================================
2026-01-22 12:24:38 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Turkey
2026-01-22 12:24:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Turkey
2026-01-22 12:24:39 - app.main - INFO -    Cities returned: 2
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Denmark
2026-01-22 12:24:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Denmark
2026-01-22 12:24:39 - app.main - INFO -    Cities returned: 6
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Austria
2026-01-22 12:24:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Austria
2026-01-22 12:24:39 - app.main - INFO -    Cities returned: 5
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Portugal
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 4 cities in Czech Republic
2026-01-22 12:24:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Portugal
2026-01-22 12:24:39 - app.main - INFO -    Cities returned: 5
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Czech Republic
2026-01-22 12:24:39 - app.main - INFO -    Cities returned: 4
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:39 - app.main - INFO -    Country: South Korea, Min confidence: low
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Getting country map for South Korea (normalized: South Korea)...
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:39 - app.main - INFO -    Country: New Zealand, Min confidence: low
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Getting country map for New Zealand (normalized: New Zealand)...
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:39 - app.main - INFO -    Country: Hungary, Min confidence: low
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Getting country map for Hungary (normalized: Hungary)...
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:39 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-22 12:24:39 - app.main - INFO -    Country: Taiwan, Min confidence: low
2026-01-22 12:24:39 - app.main - INFO - ================================================================================
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Getting country map for Taiwan (normalized: Taiwan)...
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 0 cities in South Korea
2026-01-22 12:24:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-22 12:24:40 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: South Korea
2026-01-22 12:24:40 - app.main - INFO -    Cities returned: 0
2026-01-22 12:24:40 - app.main - INFO - ================================================================================
2026-01-22 12:24:40 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in New Zealand
2026-01-22 12:24:40 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: New Zealand
2026-01-22 12:24:40 - app.main - INFO -    Cities returned: 2
2026-01-22 12:24:40 - app.main - INFO - ================================================================================
2026-01-22 12:24:40 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Hungary
2026-01-22 12:24:40 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hungary
2026-01-22 12:24:40 - app.main - INFO -    Cities returned: 2
2026-01-22 12:24:40 - app.main - INFO - ================================================================================
2026-01-22 12:24:40 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Poland
2026-01-22 12:24:40 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Taiwan
2026-01-22 12:24:40 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Poland
2026-01-22 12:24:40 - app.main - INFO -    Cities returned: 2
2026-01-22 12:24:40 - app.main - INFO - ================================================================================
2026-01-22 12:24:40 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Taiwan
2026-01-22 12:24:40 - app.main - INFO -    Cities returned: 5
2026-01-22 12:24:40 - app.main - INFO - ================================================================================
2026-01-22 15:42:22 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-22 15:44:52 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-22 16:29:52 - root - INFO - ================================================================================
2026-01-22 16:29:52 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:29:52 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:29:52 - root - INFO - ================================================================================
2026-01-22 16:30:29 - root - INFO - ================================================================================
2026-01-22 16:30:29 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:30:29 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:30:29 - root - INFO - ================================================================================
2026-01-22 16:31:56 - root - INFO - ================================================================================
2026-01-22 16:31:56 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:31:56 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:31:56 - root - INFO - ================================================================================
2026-01-22 16:32:19 - root - INFO - ================================================================================
2026-01-22 16:32:19 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:32:19 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:32:19 - root - INFO - ================================================================================
2026-01-22 16:33:22 - root - INFO - ================================================================================
2026-01-22 16:33:22 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:33:22 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:33:22 - root - INFO - ================================================================================
2026-01-22 16:33:39 - root - INFO - ================================================================================
2026-01-22 16:33:39 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:33:39 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:33:39 - root - INFO - ================================================================================
2026-01-22 16:34:15 - root - INFO - ================================================================================
2026-01-22 16:34:15 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:34:15 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:34:15 - root - INFO - ================================================================================
2026-01-22 16:44:47 - root - INFO - ================================================================================
2026-01-22 16:44:47 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:44:47 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:44:47 - root - INFO - ================================================================================
2026-01-22 16:48:08 - root - INFO - ================================================================================
2026-01-22 16:48:08 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:48:08 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:48:08 - root - INFO - ================================================================================
2026-01-22 16:48:14 - root - INFO - ================================================================================
2026-01-22 16:48:14 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:48:14 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:48:14 - root - INFO - ================================================================================
2026-01-22 16:48:23 - root - INFO - ================================================================================
2026-01-22 16:48:23 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:48:23 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:48:23 - root - INFO - ================================================================================
2026-01-22 16:48:30 - root - INFO - ================================================================================
2026-01-22 16:48:30 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:48:30 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:48:30 - root - INFO - ================================================================================
2026-01-22 16:48:40 - root - INFO - ================================================================================
2026-01-22 16:48:40 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:48:40 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:48:40 - root - INFO - ================================================================================
2026-01-22 16:48:46 - root - INFO - ================================================================================
2026-01-22 16:48:46 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:48:46 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:48:46 - root - INFO - ================================================================================
2026-01-22 16:48:55 - root - INFO - ================================================================================
2026-01-22 16:48:55 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:48:55 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:48:55 - root - INFO - ================================================================================
2026-01-22 16:49:05 - root - INFO - ================================================================================
2026-01-22 16:49:05 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:49:05 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:49:05 - root - INFO - ================================================================================
2026-01-22 16:49:12 - root - INFO - ================================================================================
2026-01-22 16:49:12 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:49:12 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:49:12 - root - INFO - ================================================================================
2026-01-22 16:49:18 - root - INFO - ================================================================================
2026-01-22 16:49:18 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:49:18 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:49:18 - root - INFO - ================================================================================
2026-01-22 16:54:41 - root - INFO - ================================================================================
2026-01-22 16:54:41 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 16:54:41 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 16:54:41 - root - INFO - ================================================================================
2026-01-22 17:06:07 - root - INFO - ================================================================================
2026-01-22 17:06:07 - root - INFO - Logging initialized - output to console and log.txt
2026-01-22 17:06:07 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-22 17:06:07 - root - INFO - ================================================================================
2026-01-22 17:06:52 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-22 17:07:57 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-22 17:22:51 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-22 17:24:20 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 11:09:41 - root - INFO - ================================================================================
2026-01-23 11:09:41 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 11:09:41 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-23 11:09:41 - root - INFO - ================================================================================
2026-01-23 11:11:16 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 11:16:23 - root - INFO - ================================================================================
2026-01-23 11:16:23 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 11:16:23 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-23 11:16:23 - root - INFO - ================================================================================
2026-01-23 11:18:58 - root - INFO - ================================================================================
2026-01-23 11:18:58 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 11:18:58 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-23 11:18:58 - root - INFO - ================================================================================
2026-01-23 11:22:04 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 11:22:26 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi "HTTP/1.1 200 OK"
2026-01-23 11:22:26 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-23 11:22:27 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-23 11:22:28 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-23 11:23:01 - app.main - INFO - ================================================================================
2026-01-23 11:23:01 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-23 11:23:01 - app.main - INFO -    Force refresh: False
2026-01-23 11:23:01 - app.main - INFO - ================================================================================
2026-01-23 11:23:01 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:23:01 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run b6b977aeeed1
2026-01-23 11:23:01 - app.phase2.pg_ingest - INFO -    Project ID: 3b9280a68d3d
2026-01-23 11:23:01 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-23 11:23:01 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:23:01 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-23 11:23:04 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run b6b977aeeed1
2026-01-23 11:23:04 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-23 11:23:04 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:23:04 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-23 11:23:04 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-23 11:23:04 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-23 11:23:04 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41152174%2C41335749%2C40928672%2C41194086%2C41418936%2C40101362%2C41204680%2C40199863%2C41335119%2C40903968%2C41356065%2C41059099%2C40100695%2C40830488%2C40040137%2C41320740%2C41173359%2C41134943%2C41231905%2C40498623%2C40831229%2C40527331%2C40722299%2C41028971%2C40683191%2C41171945%2C41177674%2C41357676%2C41360010%2C40848318%2C40683189%2C40064104%2C40239679%2C41336341%2C40887179%2C41191764%2C40218647%2C41350592%2C40938318%2C41336408%2C41336530%2C40857922%2C41112520%2C41550729%2C40136836%2C40481044%2C40867208%2C41064747%2C41336297%2C40351570%2C40198632%2C40287725%2C40078487%2C41293812%2C41072285%2C40480249%2C41094901%2C41428932%2C41336201%2C40644990%2C40620352%2C40874066%2C40040170%2C40196232%2C40398443%2C40904893%2C40664221%2C41370855%2C40745321%2C40499342%2C41273580%2C41565527%2C40203855%2C40930287%2C40829351%2C40524963%2C40648241%2C40469096%2C40639398%2C40294568%2C40104767%2C41401061%2C40363359%2C41551232%2C41289134%2C41199757%2C41044458%2C40533772%2C41337318%2C40469097%2C40144587%2C40563723%2C40549518%2C40566767%2C40395688%2C40209163%2C40966137%2C40174604%2C41336460%2C40683976%2C40681115%2C40398440%2C41337275%2C41207468%2C41337165%2C41335679%2C40356632%2C40872049%2C41072287%2C40257874%2C40353311%2C40942721%2C41284444%2C40566766%2C40110612%2C40144585%2C40191683%2C40161643%2C40843107%2C40115888%2C41129446%2C40742862%2C41553892%2C41294401%2C41060851%2C41062739%2C40581220%2C40718596%2C40956723%2C40694466%2C41350471%2C40234486%2C41336280%2C40368962%2C40280983%2C40590380%2C41193512%2C40354812%2C41360009%2C40456241%2C40836202%2C40740060%2C40834866%2C41031916%2C40705590%2C40813218%2C41256173%2C41459561%2C41268354%2C40946865&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 11:23:05 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-23 11:23:05 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-23 11:23:05 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40880337%2C41217924%2C40212472%2C40667422%2C41318089%2C40871906%2C40690341%2C41079401%2C40819020%2C40535306%2C40514107%2C41109958%2C40270987%2C41081225%2C40221457%2C41499809%2C40040231%2C40040166%2C40490007%2C40602314%2C41265571%2C41293116%2C40605914%2C41157441%2C40706724%2C40315092%2C41335716%2C40614457%2C41149344%2C40273947%2C40999875%2C40247859%2C40313536%2C40179638%2C40226480%2C40127535%2C40816265%2C40110537%2C41397305%2C40212471%2C40538970%2C40562060%2C41179991%2C40288968%2C41336140%2C40924526%2C41262557%2C40101262%2C40522806%2C41145802%2C40608885%2C40431780%2C40141951%2C41005749%2C40085468%2C41467724%2C41398663%2C40720979%2C40672704%2C41351188%2C40644193%2C41335965%2C41305274%2C41259181%2C40371570%2C40245060%2C40871892%2C41183389%2C40096214%2C41152182%2C40115889%2C40672502%2C41094934%2C40594365%2C40072857%2C41129430%2C40588007%2C40462746%2C40428114%2C40887182%2C40071135%2C41450855%2C40881516%2C41472918%2C40281692%2C40722278%2C41471422%2C40807891%2C40533436%2C40403087%2C40887181%2C41250658%2C41209398%2C40494367%2C41305083%2C41404976%2C40795479%2C40679899%2C40722306%2C40083123%2C40995144%2C41412372%2C40880336%2C40564430%2C40602422%2C41335297%2C41551041%2C41456194%2C41266624%2C41336567%2C40578388%2C41564094%2C40989443%2C40627787%2C40478707%2C40395924%2C41025122%2C40949716%2C41302782%2C41167038%2C40173067%2C40807821%2C41108882%2C41345285%2C41289136%2C41337376%2C41408286%2C40297442%2C40911452%2C40859358%2C40628276%2C40594760%2C40983076%2C40867214%2C41296962%2C40907818%2C40664224%2C40563754%2C40748806%2C41337108%2C40911443%2C41310746%2C41525762%2C41095026%2C40644135%2C40590025%2C40606836%2C41528907%2C40122923%2C41337189&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 11:23:06 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-23 11:23:06 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-23 11:23:06 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40181122%2C40471491%2C41394940%2C40563743%2C41104354%2C40628277%2C40800536%2C40040208%2C40499369%2C40350042%2C41336480%2C41064793%2C40526539%2C40292964%2C40057290%2C40442206%2C40536865%2C40628758%2C40620712%2C40867216%2C40867148%2C40800774%2C40602419%2C41006379%2C40741296%2C40584269%2C40730254%2C40187178%2C40993190%2C40914440%2C41439390%2C41187598%2C40471721%2C41336805%2C40081503%2C40681665%2C40309849%2C40843108%2C40536747%2C40629288%2C40193612%2C40218817%2C40180157%2C41448755%2C41335841%2C40493465%2C41525614%2C41516662%2C41039113%2C41296974%2C40566768%2C40602315%2C40241786%2C41336584%2C41160913%2C41212707%2C40482972%2C41336840%2C40773015%2C40527877%2C40367953%2C40103837%2C41255549%2C40570701%2C41177306%2C41222817%2C41335863%2C40203859%2C40566765%2C41235174%2C40681114%2C40596215%2C41232376%2C41385417%2C41336566%2C41336716%2C40064095%2C40717726%2C41089660%2C41374720%2C40741298%2C40470749%2C40306303%2C41177816%2C40644240%2C41368697%2C41129590%2C41336630%2C40096020%2C41337106%2C41207160%2C40334321%2C41428911%2C40695313%2C41350343%2C40715225%2C40668685%2C40483616%2C41257892%2C41199758%2C40398442%2C40117159%2C40040206%2C41382998%2C41266142%2C41336191%2C40644274%2C40043320%2C41336226%2C40118966%2C40587936%2C40748802%2C40520859%2C40049458%2C40972658%2C40760397%2C40232894%2C41398930%2C41032544%2C41439901%2C40875414%2C40456243%2C40561478%2C40803174%2C41005322%2C40835360%2C40426690%2C41141194%2C40048822%2C41146476%2C40218770%2C41543945%2C40089573%2C40554057%2C40127544%2C40048825%2C40352906%2C40538971%2C40603471%2C40402697%2C40305243%2C40658672%2C40925395%2C40245876%2C40807788%2C41187327%2C40968836%2C40857498%2C40227907%2C40073451&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 11:23:07 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-23 11:23:07 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-23 11:23:07 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41336444%2C40621214%2C41070190%2C40816538%2C41457672%2C40458259%2C40712216%2C40768522%2C41205562%2C40240152%2C40136841%2C41374637%2C41336626%2C40408213%2C40862879%2C40835615%2C40688356%2C40913530%2C40867138%2C41389568%2C40825359%2C40627473%2C41336656%2C41044308%2C40490003%2C40101581%2C40720262%2C40512634%2C40668691%2C41336877%2C41548584%2C40367961%2C40102969%2C40626564%2C40722467%2C41559106%2C40059266%2C41330041%2C41381487%2C40754053%2C41499961%2C40974874%2C41008372%2C41335877%2C40564460%2C40588517%2C40934551%2C40342556%2C40043367%2C41120372&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 11:23:07 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-23 11:23:07 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-23 11:23:08 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-23 11:23:08 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-23 11:23:08 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:23:08 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-23 11:23:09 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-23 11:23:09 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:23:09 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-23 11:23:09 - app.phase2.pg_ingest - INFO -    Extracting 1505 unique affiliations via rule-based method
2026-01-23 11:23:09 - app.phase2.rule_based_extractor - INFO -    Processing 1505 affiliations...
2026-01-23 11:23:09 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 1505 affiliations...
2026-01-23 11:23:10 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 248 hits, 1257 need extraction
2026-01-23 11:23:10 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 1257 affiliations...
2026-01-23 11:23:10 - app.phase2.institution_matcher - INFO -    Loaded 3062 institutions to memory (3062 normalized names, 216 aliases)
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/1257 (7%), matches found: 44
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/1257 (15%), matches found: 93
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/1257 (23%), matches found: 142
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/1257 (31%), matches found: 196
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/1257 (39%), matches found: 239
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/1257 (47%), matches found: 281
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/1257 (55%), matches found: 330
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/1257 (63%), matches found: 380
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/1257 (71%), matches found: 434
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/1257 (79%), matches found: 476
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/1257 (87%), matches found: 519
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/1257 (95%), matches found: 569
2026-01-23 11:23:11 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1257/1257 (100%), matches found: 598
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 598 matches found
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    Extracting 659 affiliations using rule-based parser...
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 65/659 (9%)
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 130/659 (19%)
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 195/659 (29%)
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 260/659 (39%)
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 325/659 (49%)
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 390/659 (59%)
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 455/659 (69%)
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 520/659 (78%)
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 585/659 (88%)
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 650/659 (98%)
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 659/659 (100%)
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 659 results
2026-01-23 11:23:11 - app.phase2.rule_based_extractor - INFO -       Pending validation: 622 institutions
2026-01-23 11:23:13 - app.phase2.pg_ingest - INFO -    Cached 1257 new affiliation extraction results to affiliation_cache table
2026-01-23 11:23:13 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 1505 affiliations processed, 1498 with country
2026-01-23 11:23:13 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 1505 affiliations
2026-01-23 11:23:13 - app.phase2.pg_ingest - INFO -    Unique affiliations: 1505
2026-01-23 11:23:13 - app.phase2.pg_ingest - INFO -    With country: 1498
2026-01-23 11:23:13 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-23 11:23:13 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:23:13 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-23 11:23:13 - app.phase2.pg_ingest - INFO -    Clearing existing data for run b6b977aeeed1...
2026-01-23 11:23:13 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-23 11:23:14 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-23 11:23:14 - app.phase2.pg_ingest - INFO -    Inserting 2826 authorships (bulk operation)...
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -    Authorships inserted: 2826
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -    Linking run b6b977aeeed1 to 500 papers...
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 2826 authorships
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -    Authorships created: 2826
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -    Unique affiliations: 1505
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -    Affiliations with country: 1498
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO - 
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 248
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 598
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 659
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 659
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO - 
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 1505 = 1505 (matches)
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 622
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO - 
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-23 11:23:28 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-23 11:23:28 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 622
2026-01-23 11:23:28 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:23:28 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run b6b977aeeed1...
2026-01-23 11:23:29 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 3835 authorships from 500 papers
2026-01-23 11:23:29 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:23:29 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-23 11:23:29 - app.phase2.affiliation_validator - INFO -    Found 388 unique location keys from 3835 authorships
2026-01-23 11:23:30 - app.phase2.affiliation_validator - INFO -    Batch query complete: 307/388 found in cache
2026-01-23 11:23:30 - app.phase2.affiliation_validator - INFO -    Processing 81 unique location keys via Nominatim...
2026-01-23 11:23:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Malta, Malta' -> (35.9311442, 14.3951627)
2026-01-23 11:23:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Geosciences, China (Mainland)' -> (39.9886573, 116.3406423)
2026-01-23 11:23:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Geelong, Australia' -> (-38.1493248, 144.3598241)
2026-01-23 11:23:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Aeronautics and Astronautics, China (Mainland)' -> (39.9809427, 116.3409787)
2026-01-23 11:23:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Jilin, China (Mainland)' -> (43.5122862, 124.8021133)
2026-01-23 11:23:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Southern Queensland, Australia' -> (-28.2162236, 152.0418849)
2026-01-23 11:23:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Osaka Metropolitan, Japan' -> (34.6466164, 135.5088394)
2026-01-23 11:23:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Aston, United Kingdom' -> (52.5066355, -1.8812695)
2026-01-23 11:23:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Melbourne, United States' -> (28.0785034, -80.6077908)
2026-01-23 11:23:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Goa, India' -> (15.3004543, 74.0855134)
2026-01-23 11:23:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Jharkhand, India' -> (23.4559809, 85.2557301)
2026-01-23 11:23:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Mahesana, India' -> (23.6015557, 72.3867981)
2026-01-23 11:23:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Djelfa, Algeria' -> (34.342841, 3.2172531)
2026-01-23 11:24:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Isa Town, Bahrain' -> (26.1741995, 50.5473432)
2026-01-23 11:24:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Madhya Pradesh, India' -> (23.8143419, 77.5340719)
2026-01-23 11:24:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Rajasthan, India' -> (26.8105777, 73.7684549)
2026-01-23 11:24:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Xian, China' -> (38.1904931, 116.1191021)
2026-01-23 11:24:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Patras, Greece' -> (38.246242, 21.7350847)
2026-01-23 11:24:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Bisha, Saudi Arabia' -> (20.0, 42.6)
2026-01-23 11:24:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Najran, Saudi Arabia' -> (18.0, 45.666667)
2026-01-23 11:24:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Jabalpur, India' -> (23.1701522, 79.9324505)
2026-01-23 11:24:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Incheon, South Korea' -> (37.456, 126.7052)
2026-01-23 11:24:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Assam, India' -> (26.4073841, 93.2551303)
2026-01-23 11:24:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Greater Noida, India' -> (28.4670734, 77.5137649)
2026-01-23 11:24:22 - app.phase2.pg_geocoding - WARNING - Cache store failed for city:Greater Noida,India: the database system is in recovery mode
2026-01-23 11:24:22 - app.phase2.pg_geocoding - WARNING - Cache lookup failed for city:Patna,India: the database system is in recovery mode, falling back to API
2026-01-23 11:24:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Patna, India' -> (25.6093239, 85.1235252)
2026-01-23 11:24:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Salisbury, United Kingdom' -> (51.0690613, -1.7954134)
2026-01-23 11:24:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Mount Pleasant, United States' -> (33.1570582, -94.9694007)
2026-01-23 11:24:32 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Loc. Feo di Vito, Italy' (from affiliation: DIIES, University Mediterranea of Reggio Calabria, Via Zehender, Loc. Feo di Vito, Reggio Calabria 89122, Italy. (PMID: 41109958))
2026-01-23 11:24:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Putian, China' -> (25.3538682, 119.0570588)
2026-01-23 11:24:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Tunja, Colombia' -> (5.5324313, -73.3616014)
2026-01-23 11:24:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Varanasi, India' -> (25.3356491, 83.0076292)
2026-01-23 11:24:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Guilin, China' -> (25.2779894, 110.2910622)
2026-01-23 11:24:43 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Jilin People's Republic of China, China' (from affiliation: School of Computer Science and Engineering, Changchun University of Technology, Changchun, 130102 Jilin People's Republic of China. (PMID: 40538970))
2026-01-23 11:24:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Uttarakhand, India' -> (30.0417376, 79.089691)
2026-01-23 11:24:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Elche, Spain' -> (38.2653307, -0.6988391)
2026-01-23 11:24:49 - app.phase2.pg_geocoding - INFO - Geocoded 'SaarbrÃ¼cken, Germany' -> (49.234362, 6.996379)
2026-01-23 11:24:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Manizales, Colombia' -> (5.0743694, -75.5081167)
2026-01-23 11:24:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Pereira, Colombia' -> (4.7854606, -75.788322)
2026-01-23 11:24:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Klagenfurt, Austria' -> (46.623943, 14.3075976)
2026-01-23 11:24:57 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Ã‰cole Nationale d'IngÃ©nieurs de Sfax, Tunisia' (from affiliation: Control and Energy Management (CEM) Laboratory, Ã‰cole Nationale d'IngÃ©nieurs de Sfax, University of Sfax, Sfax 3038, Tunisia. (PMID: 41471422))
2026-01-23 11:24:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Ivry sur Seine, France' -> (48.8122302, 2.3872525)
2026-01-23 11:25:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Tikrit, Iraq' -> (34.615807, 43.678606)
2026-01-23 11:25:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Melbourne Campus, Australia' -> (-37.9119659, 145.1323587)
2026-01-23 11:25:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Mishref, Kuwait' -> (29.2790336, 48.0661118)
2026-01-23 11:25:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Polish Academy of Science, Poland' -> (52.2258111, 20.9499124)
2026-01-23 11:25:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Sharjah, United Arab Emirates' -> (24.9760668, 56.2536044)
2026-01-23 11:25:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Sfax, Tunisia' -> (34.7394361, 10.7604024)
2026-01-23 11:25:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Ji Lin, China' -> (25.2203585, 110.0441122)
2026-01-23 11:25:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Uttarakhand India, India' -> (30.2816105, 77.974907)
2026-01-23 11:25:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Kanpur, India' -> (26.4609135, 80.3217588)
2026-01-23 11:25:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Bhilai, India' -> (21.2120677, 81.3732849)
2026-01-23 11:25:22 - app.phase2.pg_geocoding - WARNING - Could not geocode 'g.tec Medical Engineering, Austria' (from affiliation: g.tec Medical Engineering, 4521 Schiedlberg, Austria. (PMID: 41095026))
2026-01-23 11:25:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Science and Technology Beijing, China (Mainland)' -> (39.9902334, 116.3531753)
2026-01-23 11:25:27 - app.phase2.pg_geocoding - INFO - Geocoded 'Stuttgart, Germany' -> (48.7784485, 9.1800132)
2026-01-23 11:25:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Changshu, China' -> (31.6572954, 120.7480757)
2026-01-23 11:25:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Coimbatore, India' -> (11.0018115, 76.9628425)
2026-01-23 11:25:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Guerrero, Mexico' -> (17.666667, -100.0)
2026-01-23 11:25:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Guanajuato, Mexico' -> (20.9876996, -101.0)
2026-01-23 11:25:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Boys Town, United States' -> (41.2545638, -96.1294312)
2026-01-23 11:25:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Maribor, Slovenia' -> (46.5576439, 15.6455854)
2026-01-23 11:25:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Mohammedia, Morocco' -> (33.6958383, -7.3893292)
2026-01-23 11:25:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Fez, Morocco' -> (34.0346534, -5.0161926)
2026-01-23 11:25:46 - app.phase2.pg_geocoding - INFO - Geocoded 'El Jadida, Morocco' -> (33.2433309, -8.49884)
2026-01-23 11:25:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Anna, India' -> (13.0093396, 80.2351455)
2026-01-23 11:25:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Diu, India' -> (20.7137783, 70.9853635)
2026-01-23 11:25:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Yantai, China' -> (37.461928, 121.4425255)
2026-01-23 11:25:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Gumi, South Korea' -> (36.1195513, 128.3444692)
2026-01-23 11:25:57 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Data and AI, Poland' (from affiliation: IBM, Data and AI, 30-150 Krakow, Poland. (PMID: 40218817))
2026-01-23 11:25:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Technology Tiruchirappalli, India' -> (10.7633854, 78.8150292)
2026-01-23 11:26:01 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Atlanta, Iceland' (from affiliation: Nox Research, Nox Medical, KatrÃ­nartÃºn 2, 105 ReykjavÃ­k, Atlanta, Iceland. (PMID: 40773015))
2026-01-23 11:26:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Al Kharj, Saudi Arabia' -> (23.8304401, 47.6840134)
2026-01-23 11:26:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Santa Fe, Argentina' -> (-30.3154739, -61.1645076)
2026-01-23 11:26:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Bahawalpur, Pakistan' -> (29.40295, 71.6523454)
2026-01-23 11:26:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Sussex, United States' -> (36.9096897, -77.2741121)
2026-01-23 11:26:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Perundurai, India' -> (11.2539029, 77.6288316)
2026-01-23 11:26:13 - app.phase2.pg_geocoding - INFO - Geocoded 'La Libertad, Ecuador' -> (-2.2208117, -80.9077647)
2026-01-23 11:26:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Petroleum and Energy Studies, India' -> (30.41761, 77.9682677)
2026-01-23 11:26:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Roorkee, India' -> (29.8693496, 77.8902124)
2026-01-23 11:26:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Haikou, China' -> (20.0462328, 110.1956502)
2026-01-23 11:26:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Hull, United Kingdom' -> (53.7623863, -0.3301214)
2026-01-23 11:26:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Jadavpur, India' -> (22.495499, 88.3709006)
2026-01-23 11:26:24 - app.phase2.affiliation_validator - INFO -    Batch updating 2946 affiliations for 294 cached locations...
2026-01-23 11:26:38 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 294 locations (2946 total affiliations)
2026-01-23 11:26:38 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:26:38 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 622 pending institutions to institution_geo...
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO -    âœ… Added 59 validated institutions to institution_geo table
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 3835
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3002
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO -    Cache misses: 205
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 191
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 14
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 36
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 22
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 59/622
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 36 error affiliations with LLM...
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO -    Collecting 36 unique error affiliations for LLM fix
2026-01-23 11:26:46 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-23 11:26:46 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 36 affiliations...
2026-01-23 11:26:46 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 36 affiliations...
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    Loaded 3121 institutions to memory (3121 normalized names, 216 aliases)
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 3/36 (8%), matches found: 2
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/36 (16%), matches found: 5
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 9/36 (25%), matches found: 8
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/36 (33%), matches found: 10
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 15/36 (41%), matches found: 10
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/36 (50%), matches found: 11
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 21/36 (58%), matches found: 12
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 24/36 (66%), matches found: 12
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 27/36 (75%), matches found: 14
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 30/36 (83%), matches found: 14
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 33/36 (91%), matches found: 15
2026-01-23 11:26:47 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 36/36 (100%), matches found: 15
2026-01-23 11:26:47 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 15 matches found
2026-01-23 11:26:47 - app.phase2.affiliation_extractor - INFO -    Extracting 21 affiliations via LLM (affiliation_cache: 0, institution_geo: 15) in batches of 20
2026-01-23 11:26:47 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/2 (20 affiliations)
2026-01-23 11:26:54 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 11:27:01 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 2/2 (1 affiliations)
2026-01-23 11:27:03 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 11:27:04 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 21 affiliations processed
2026-01-23 11:27:04 - app.phase2.affiliation_extractor - INFO -       Auto-added to institution_geo table: 12 institutions
2026-01-23 11:27:04 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 36 results from 2 LLM calls
2026-01-23 11:27:04 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 36 LLM results...
2026-01-23 11:27:04 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 36 LLM results
2026-01-23 11:27:04 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-23 11:27:04 - app.phase2.affiliation_validator - INFO -    Processing 18 unique location keys for re-geocoding...
2026-01-23 11:27:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Reggio Calabria, Italy' -> (38.1035389, 15.6397556)
2026-01-23 11:27:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Schiedlberg, Austria' -> (48.0920742, 14.2645752)
2026-01-23 11:27:19 - app.phase2.pg_geocoding - INFO - Geocoded 'ReykjavÃ­k, Iceland' -> (64.145981, -21.9422367)
2026-01-23 11:27:20 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 36 affiliations
2026-01-23 11:27:20 - app.phase2.affiliation_validator - INFO -    âœ… Updated 70 authorships
2026-01-23 11:27:20 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 11 locations
2026-01-23 11:27:20 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:27:20 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: b6b977aeeed1
2026-01-23 11:27:20 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 36
2026-01-23 11:27:20 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 36
2026-01-23 11:27:20 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 70
2026-01-23 11:27:20 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 11
2026-01-23 11:27:20 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 11:27:20 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-23 11:27:20 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-23 11:27:20 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 36
2026-01-23 11:27:20 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 36
2026-01-23 11:27:20 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 70
2026-01-23 11:27:20 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 11
2026-01-23 11:27:20 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 59
2026-01-23 11:27:20 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 14
2026-01-23 11:27:20 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-23 11:27:20 - app.main - INFO - ================================================================================
2026-01-23 11:27:20 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-23 11:27:20 - app.main - INFO -    Total PMIDs: 500
2026-01-23 11:27:20 - app.main - INFO -    Papers parsed: 500
2026-01-23 11:27:20 - app.main - INFO -    Authorships created: 2826
2026-01-23 11:27:20 - app.main - INFO -    Unique affiliations: 1505
2026-01-23 11:27:20 - app.main - INFO -    Affiliations with country: 1498
2026-01-23 11:27:20 - app.main - INFO -    LLM calls made: 0
2026-01-23 11:27:20 - app.main - INFO - ================================================================================
2026-01-23 11:27:29 - app.main - INFO - ================================================================================
2026-01-23 11:27:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-23 11:27:29 - app.main - INFO -    Min confidence: low
2026-01-23 11:27:29 - app.main - INFO - ================================================================================
2026-01-23 11:27:29 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-23 11:27:29 - app.main - INFO - ================================================================================
2026-01-23 11:27:29 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-23 11:27:29 - app.main - INFO -    Min confidence: low
2026-01-23 11:27:29 - app.main - INFO - ================================================================================
2026-01-23 11:27:29 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-23 11:27:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-23 11:27:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-23 11:27:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Malta' -> (35.9311442, 14.3951627)
2026-01-23 11:27:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Malta' -> (35.9311442, 14.3951627)
2026-01-23 11:27:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Bahrain' -> (26.1551249, 50.5344606)
2026-01-23 11:27:34 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 67 countries
2026-01-23 11:27:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-23 11:27:34 - app.main - INFO -    Countries returned: 67
2026-01-23 11:27:34 - app.main - INFO - ================================================================================
2026-01-23 11:27:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Bahrain' -> (26.1551249, 50.5344606)
2026-01-23 11:27:35 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 67 countries
2026-01-23 11:27:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-23 11:27:35 - app.main - INFO -    Countries returned: 67
2026-01-23 11:27:35 - app.main - INFO - ================================================================================
2026-01-23 11:39:34 - app.main - INFO - ================================================================================
2026-01-23 11:39:34 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-23 11:39:34 - app.main - INFO -    Country: China (Mainland), Min confidence: low
2026-01-23 11:39:34 - app.main - INFO - ================================================================================
2026-01-23 11:39:34 - app.phase2.pg_aggregations - INFO -    Getting country map for China (Mainland) (normalized: China (Mainland))...
2026-01-23 11:39:34 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-23 11:39:36 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Nankai, China (Mainland)' (from affiliation: School of Artificial Intelligence, Nankai University, Tianjin, China.)
2026-01-23 11:39:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 16 cities in China (Mainland)
2026-01-23 11:39:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China (Mainland)
2026-01-23 11:39:37 - app.main - INFO -    Cities returned: 16
2026-01-23 11:39:37 - app.main - INFO - ================================================================================
2026-01-23 11:43:23 - app.main - INFO - ================================================================================
2026-01-23 11:43:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-23 11:43:23 - app.main - INFO -    Min confidence: low
2026-01-23 11:43:23 - app.main - INFO - ================================================================================
2026-01-23 11:43:23 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-23 11:43:23 - app.main - INFO - ================================================================================
2026-01-23 11:43:23 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-23 11:43:23 - app.main - INFO -    Min confidence: low
2026-01-23 11:43:23 - app.main - INFO - ================================================================================
2026-01-23 11:43:23 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-23 11:43:23 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-23 11:43:23 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-23 11:43:24 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 67 countries
2026-01-23 11:43:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-23 11:43:24 - app.main - INFO -    Countries returned: 67
2026-01-23 11:43:24 - app.main - INFO - ================================================================================
2026-01-23 11:43:24 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 67 countries
2026-01-23 11:43:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-23 11:43:24 - app.main - INFO -    Countries returned: 67
2026-01-23 11:43:24 - app.main - INFO - ================================================================================
2026-01-23 12:17:36 - root - INFO - ================================================================================
2026-01-23 12:17:36 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 12:17:36 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-23 12:17:36 - root - INFO - ================================================================================
2026-01-23 12:18:24 - app.main - INFO - ================================================================================
2026-01-23 12:18:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-23 12:18:24 - app.main - INFO -    Min confidence: low
2026-01-23 12:18:24 - app.main - INFO - ================================================================================
2026-01-23 12:18:24 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-23 12:18:24 - app.main - INFO - ================================================================================
2026-01-23 12:18:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-23 12:18:24 - app.main - INFO -    Min confidence: low
2026-01-23 12:18:24 - app.main - INFO - ================================================================================
2026-01-23 12:18:24 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-23 12:18:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-23 12:18:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-23 12:18:25 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 66 countries
2026-01-23 12:18:25 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-23 12:18:25 - app.main - INFO -    Countries returned: 66
2026-01-23 12:18:25 - app.main - INFO - ================================================================================
2026-01-23 12:18:25 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 66 countries
2026-01-23 12:18:25 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-23 12:18:25 - app.main - INFO -    Countries returned: 66
2026-01-23 12:18:25 - app.main - INFO - ================================================================================
2026-01-23 12:22:56 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 12:25:25 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 12:26:00 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 12:26:46 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 12:27:02 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi "HTTP/1.1 200 OK"
2026-01-23 12:27:02 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-23 12:27:04 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-23 12:27:06 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-23 12:29:10 - app.main - INFO - ================================================================================
2026-01-23 12:29:10 - app.main - INFO - ðŸš€ INGESTION STARTED - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-23 12:29:10 - app.main - INFO -    Force refresh: False
2026-01-23 12:29:10 - app.main - INFO - ================================================================================
2026-01-23 12:29:10 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:29:10 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 19d981d1d732
2026-01-23 12:29:10 - app.phase2.pg_ingest - INFO -    Project ID: 3b9280a68d3d
2026-01-23 12:29:10 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-23 12:29:10 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:29:10 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-23 12:29:14 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 19d981d1d732
2026-01-23 12:29:14 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-23 12:29:14 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:29:14 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-23 12:29:14 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-23 12:29:14 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-23 12:29:15 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40777856%2C41004112%2C40847522%2C40520533%2C41149800%2C40254536%2C41110183%2C41048147%2C40001284%2C41101579%2C40544477%2C40702287%2C41022536%2C41384746%2C40170189%2C41313999%2C40948426%2C40760231%2C40026596%2C40790851%2C40674874%2C40164948%2C40178114%2C40122358%2C41226713%2C41408102%2C40303447%2C40360929%2C41209402%2C41500385%2C40288558%2C40904820%2C41282884%2C40889562%2C41175966%2C40848961%2C41398077%2C40555455%2C41447629%2C41350451%2C41072764%2C40658766%2C40257798%2C40524350%2C41163056%2C41383122%2C41459829%2C40299324%2C41163224%2C40064894%2C41452829%2C41300995%2C41437758%2C40316664%2C40237781%2C40129500%2C40674832%2C41251995%2C41376187%2C41170333%2C40012529%2C41479844%2C40066106%2C40767750%2C39983809%2C40653187%2C40151908%2C41467003%2C41115869%2C40996868%2C41199404%2C41139995%2C41048357%2C40331426%2C41076757%2C40120814%2C40141329%2C41209501%2C40130687%2C40642411%2C40326412%2C41303831%2C40304622%2C40494265%2C40955796%2C40971139%2C40070907%2C40903455%2C40661748%2C40855676%2C40135028%2C40808812%2C40019120%2C40693637%2C40959794%2C41357920%2C40337353%2C40433495%2C40717779%2C41422963%2C41224772%2C40099054%2C40890999%2C40065917%2C40121525%2C40382612%2C40662561%2C41380293%2C40137408%2C41453664%2C41037808%2C40905808%2C40666902%2C40473076%2C40398955%2C40626702%2C40563719%2C41367943%2C40452783%2C41477617%2C40024459%2C41364811%2C41562002%2C40978683%2C40359294%2C40838395%2C41321362%2C40462873%2C40171119%2C40725591%2C40370279%2C41486716%2C40185902%2C40902871%2C41039090%2C40974731%2C40563711%2C41248858%2C40347355%2C40543322%2C41055929%2C40865406%2C40563733%2C40980746%2C40165314%2C40040511%2C40621206%2C41268179%2C40800690%2C40039580&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 12:29:15 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-23 12:29:15 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-23 12:29:16 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40303882%2C40643956%2C40293622%2C40945230%2C41120157%2C40926816%2C40309603%2C40863235%2C40103354%2C40292332%2C40876639%2C40065317%2C40405935%2C41010913%2C41355332%2C40208373%2C40897950%2C40142891%2C41503119%2C40630945%2C41272829%2C40549788%2C41551315%2C40551882%2C40582493%2C41008340%2C41090033%2C40141847%2C41431844%2C40930425%2C40797243%2C41491361%2C40355868%2C40633778%2C40567421%2C40982604%2C40267527%2C41460605%2C41353001%2C40608292%2C41191186%2C40090976%2C40933163%2C41018197%2C41091455%2C40810175%2C40244706%2C40550387%2C41426276%2C41398677%2C40123238%2C40562015%2C40260173%2C40771304%2C40216305%2C41026883%2C40208334%2C41523974%2C40138102%2C41400981%2C40142358%2C40664335%2C41192010%2C41038597%2C41038505%2C40260724%2C40593133%2C40153922%2C40004217%2C40318660%2C40104331%2C41358624%2C41244873%2C40285968%2C40305881%2C41190302%2C40583539%2C41153755%2C41154143%2C40516913%2C40438571%2C41480026%2C41169131%2C40867134%2C40271903%2C40488202%2C40848897%2C41212544%2C41238155%2C41303115%2C40435776%2C41033274%2C41268380%2C41281523%2C40015757%2C41551189%2C40658276%2C40175376%2C41010717%2C41022135%2C41051942%2C40735472%2C41408202%2C40420669%2C40771339%2C40881933%2C41353370%2C41164398%2C40492091%2C41534361%2C40203445%2C41536095%2C41458115%2C40916901%2C40109842%2C40161936%2C41049869%2C41056874%2C40354745%2C40260387%2C40138063%2C40607209%2C41441215%2C40109986%2C40009110%2C41180704%2C41280408%2C40131590%2C41140977%2C40740460%2C40455287%2C40095228%2C40702022%2C40539354%2C40264519%2C41343474%2C41456817%2C40513355%2C40543744%2C40320453%2C40720225%2C40789551%2C40370751%2C40406880%2C41338357%2C40174348%2C41397743%2C41204620%2C41121094%2C41562412&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 12:29:17 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-23 12:29:17 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-23 12:29:17 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41308907%2C40293646%2C40782718%2C40460123%2C40413810%2C41367968%2C41530818%2C41089630%2C40500280%2C41564196%2C40280439%2C41448678%2C40383201%2C40089220%2C40736043%2C41005591%2C40933148%2C40701403%2C40585545%2C40364094%2C41423172%2C40925485%2C41209581%2C40895891%2C40948026%2C40283048%2C40281039%2C41196789%2C40336040%2C40001028%2C40212453%2C40908273%2C40901773%2C40746199%2C40099482%2C41133756%2C40618530%2C40385547%2C41525952%2C40707460%2C41238117%2C40285734%2C40257938%2C40230821%2C41259906%2C40713415%2C40288455%2C40996171%2C41301161%2C41268378%2C41205713%2C40980513%2C40646416%2C40543893%2C41359335%2C40715588%2C41467025%2C40537471%2C41199470%2C41449571%2C41545465%2C41475313%2C40861564%2C40853662%2C41007681%2C40756002%2C40551158%2C40100678%2C41416249%2C41239129%2C40368305%2C40217524%2C41013466%2C41412208%2C40616921%2C41485564%2C40670808%2C40158629%2C40212103%2C40638342%2C40641504%2C40352367%2C40112319%2C41141779%2C41521449%2C41407763%2C40009384%2C41219385%2C40822430%2C41488559%2C40288970%2C40995064%2C41167567%2C40577046%2C41061573%2C41425808%2C40493630%2C40957931%2C41495691%2C41046632%2C40910499%2C41506306%2C40045265%2C41541943%2C40999798%2C40002513%2C40470166%2C40885254%2C41415016%2C40082006%2C41222299%2C40285542%2C41373112%2C40722735%2C40017534%2C41225566%2C40980699%2C40774517%2C40239297%2C40039406%2C40712906%2C40516628%2C40000219%2C41507453%2C40469336%2C40438568%2C40248597%2C40252967%2C40443512%2C41463254%2C40435789%2C41411355%2C41290067%2C40404040%2C40617381%2C41410295%2C41412340%2C40479952%2C41542361%2C41115790%2C41040393%2C40713759%2C41054353%2C40362755%2C40992620%2C40780869%2C40950425%2C41533249%2C40327301%2C40031488&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 12:29:18 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-23 12:29:18 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-23 12:29:18 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=40102718%2C40186275%2C40621245%2C40256159%2C41514319%2C41070508%2C40587429%2C41526702%2C41465304%2C40415257%2C41084082%2C40613366%2C40863414%2C41211491%2C40529657%2C40769285%2C40746455%2C41205901%2C41109991%2C41294786%2C41041883%2C41437760%2C41142047%2C41008337%2C40287034%2C40302500%2C41138314%2C41300189%2C41197935%2C40856746%2C41250964%2C40078293%2C41551308%2C40336945%2C40341817%2C40110477%2C41332701%2C41171882%2C40640762%2C41107836%2C40840637%2C40417274%2C41352532%2C39988595%2C41008330%2C40587364%2C39985419%2C40489407%2C40301914%2C41136747&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 12:29:19 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-23 12:29:19 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-23 12:29:19 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-23 12:29:19 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-23 12:29:19 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:29:19 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-23 12:29:20 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-23 12:29:20 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:29:20 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-23 12:29:20 - app.phase2.pg_ingest - INFO -    Extracting 2406 unique affiliations via rule-based method
2026-01-23 12:29:20 - app.phase2.rule_based_extractor - INFO -    Processing 2406 affiliations...
2026-01-23 12:29:20 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2406 affiliations...
2026-01-23 12:29:20 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 35 hits, 2371 need extraction
2026-01-23 12:29:20 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2371 affiliations...
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    Loaded 3133 institutions to memory (3133 normalized names, 217 aliases)
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2371 (4%), matches found: 50
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2371 (8%), matches found: 106
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2371 (12%), matches found: 157
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2371 (16%), matches found: 216
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/2371 (21%), matches found: 273
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/2371 (25%), matches found: 329
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/2371 (29%), matches found: 374
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/2371 (33%), matches found: 429
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/2371 (37%), matches found: 482
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/2371 (42%), matches found: 532
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/2371 (46%), matches found: 582
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/2371 (50%), matches found: 631
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/2371 (54%), matches found: 688
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/2371 (59%), matches found: 743
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/2371 (63%), matches found: 799
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/2371 (67%), matches found: 850
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1700/2371 (71%), matches found: 897
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1800/2371 (75%), matches found: 949
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1900/2371 (80%), matches found: 1012
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2000/2371 (84%), matches found: 1065
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2100/2371 (88%), matches found: 1119
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2200/2371 (92%), matches found: 1188
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2300/2371 (97%), matches found: 1237
2026-01-23 12:29:21 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2371/2371 (100%), matches found: 1276
2026-01-23 12:29:21 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 1276 matches found
2026-01-23 12:29:21 - app.phase2.rule_based_extractor - INFO -    Extracting 1095 affiliations using rule-based parser...
2026-01-23 12:29:21 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 109/1095 (9%)
2026-01-23 12:29:21 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 218/1095 (19%)
2026-01-23 12:29:21 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 327/1095 (29%)
2026-01-23 12:29:21 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 436/1095 (39%)
2026-01-23 12:29:21 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 545/1095 (49%)
2026-01-23 12:29:22 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 654/1095 (59%)
2026-01-23 12:29:22 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 763/1095 (69%)
2026-01-23 12:29:22 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 872/1095 (79%)
2026-01-23 12:29:22 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 981/1095 (89%)
2026-01-23 12:29:22 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1090/1095 (99%)
2026-01-23 12:29:22 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1095/1095 (100%)
2026-01-23 12:29:22 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 1095 results
2026-01-23 12:29:22 - app.phase2.rule_based_extractor - INFO -       Pending validation: 983 institutions
2026-01-23 12:29:23 - app.phase2.pg_ingest - INFO -    Cached 2371 new affiliation extraction results to affiliation_cache table
2026-01-23 12:29:23 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2406 affiliations processed, 2381 with country
2026-01-23 12:29:23 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2406 affiliations
2026-01-23 12:29:23 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2406
2026-01-23 12:29:23 - app.phase2.pg_ingest - INFO -    With country: 2381
2026-01-23 12:29:23 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-23 12:29:23 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:29:23 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-23 12:29:23 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 19d981d1d732...
2026-01-23 12:29:24 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-23 12:29:24 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-23 12:29:24 - app.phase2.pg_ingest - INFO -    Inserting 3866 authorships (bulk operation)...
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -    Authorships inserted: 3866
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -    Linking run 19d981d1d732 to 500 papers...
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 3866 authorships
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -    Authorships created: 3866
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2406
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2381
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO - 
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 35
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 1276
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 1095
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 1095
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO - 
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2406 = 2406 (matches)
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 983
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO - 
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-23 12:29:33 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-23 12:29:33 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 983
2026-01-23 12:29:33 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:29:33 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 19d981d1d732...
2026-01-23 12:29:34 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4177 authorships from 500 papers
2026-01-23 12:29:34 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:29:34 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-23 12:29:34 - app.phase2.affiliation_validator - INFO -    Found 538 unique location keys from 4177 authorships
2026-01-23 12:29:35 - app.phase2.affiliation_validator - INFO -    Batch query complete: 408/538 found in cache
2026-01-23 12:29:35 - app.phase2.affiliation_validator - INFO -    Processing 130 unique location keys via Nominatim...
2026-01-23 12:29:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Seongnam-si, South Korea' -> (37.4201556, 127.1262092)
2026-01-23 12:29:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Gilberton, Australia' -> (-27.7416885, 153.2754136)
2026-01-23 12:29:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Troina, Italy' -> (37.7852205, 14.6004464)
2026-01-23 12:29:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Hellerup, Denmark' -> (55.7336657, 12.5655408)
2026-01-23 12:29:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Bandar Puncak Alam, Malaysia' -> (3.2342055, 101.4258355)
2026-01-23 12:29:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Prayagraj, India' -> (25.4381302, 81.8338005)
2026-01-23 12:29:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Meghalaya, India' -> (25.5379432, 91.2999102)
2026-01-23 12:29:50 - app.phase2.pg_geocoding - INFO - Geocoded 'SamborondÃ³n, Ecuador' -> (-2.0155653, -79.7562694)
2026-01-23 12:29:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Sant Joan d'Alacant, Spain' -> (38.4014162, -0.4359957)
2026-01-23 12:29:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Panjab, India' -> (30.9293211, 75.5004841)
2026-01-23 12:29:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Sunnyvale, United States' -> (37.3688301, -122.036349)
2026-01-23 12:29:58 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Bushehr, Iran, Islamic Republic of' (from affiliation: Master of General Psychology, Persian Gulf University of Bushehr, Bushehr, Iran. (PMID: 41452829))
2026-01-23 12:30:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Queretaro, Mexico' -> (20.8052225, -99.8837376)
2026-01-23 12:30:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Palm Springs, United States' -> (33.8246269, -116.540303)
2026-01-23 12:30:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Saint Petersburg, Russian Federation' -> (59.9606739, 30.1586551)
2026-01-23 12:30:08 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Sanatorium and Resort Complex Â«PodmoskovieÂ» of the Ministry of Defense of the Russian Federation, Russian Federation' (from affiliation: Sanatorium and Resort Complex Â«PodmoskovieÂ» of the Ministry of Defense of the Russian Federation, Moscow region, Russia. (PMID: 40767750))
2026-01-23 12:30:11 - app.phase2.pg_geocoding - INFO - Geocoded '#727 Jing Ming Nan Road, China' -> (24.8422289, 102.8405163)
2026-01-23 12:30:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Kolkata, India' -> (22.5726459, 88.3638953)
2026-01-23 12:30:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Pok Fu Lam, Hong Kong' -> (22.2613585, 114.1368109)
2026-01-23 12:30:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Deoghar, India' -> (24.4898318, 86.6990182)
2026-01-23 12:30:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Cusco, Peru' -> (-13.5170887, -71.9785356)
2026-01-23 12:30:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Shaoguan, China' -> (24.8136095, 113.5922116)
2026-01-23 12:30:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Xiâ€™An City, China' -> (34.261004, 108.9423363)
2026-01-23 12:30:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Rajamahendravaram, India' -> (17.0050454, 81.7804732)
2026-01-23 12:30:28 - app.phase2.pg_geocoding - INFO - Geocoded 'St. George's, Grenada' -> (12.0535331, -61.751805)
2026-01-23 12:30:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Las PiÃ±as, Philippines' -> (14.4809012, 120.9817861)
2026-01-23 12:30:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Hamirpur, India' -> (25.75, 80.0)
2026-01-23 12:30:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Rewa, India' -> (24.7560846, 81.3810574)
2026-01-23 12:30:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Willemstad, CuraÃ§ao' -> (12.1066695, -68.9351307)
2026-01-23 12:30:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Enna, Italy' -> (37.5667573, 14.2807473)
2026-01-23 12:30:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Vimercate, Italy' -> (45.6139627, 9.37006)
2026-01-23 12:30:43 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Clinical & Technical Support, China' (from affiliation: Clinical & Technical Support, Philips Healthcare, China. (PMID: 40473076))
2026-01-23 12:30:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Bron, France' -> (45.7337532, 4.9092352)
2026-01-23 12:30:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Zigong, China' -> (29.2995746, 104.6928392)
2026-01-23 12:30:48 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Marand, Iran, Islamic Republic of' (from affiliation: Faculty of Psychology, Marand Azad University, Marand, Iran. (PMID: 40452783))
2026-01-23 12:30:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Ticino, Switzerland' -> (46.3351913, 8.7525902)
2026-01-23 12:30:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Loughborough, United Kingdom' -> (52.7723859, -1.2077985)
2026-01-23 12:30:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Yeshiva, United States' -> (40.8502619, -73.9288891)
2026-01-23 12:30:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Pitesti, Romania' -> (44.8572882, 24.8721156)
2026-01-23 12:30:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Tzur Moshe, Israel' -> (32.2978073, 34.9135462)
2026-01-23 12:31:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Kent, United Kingdom' -> (51.2070749, 0.7210362)
2026-01-23 12:31:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Montclair, United States' -> (40.8164458, -74.2210643)
2026-01-23 12:31:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Laval, Canada' -> (45.5571125, -73.7211779)
2026-01-23 12:31:08 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Psychiatry Region Zealand, Denmark' (from affiliation: Psychiatry Region Zealand, Region Zealand, Denmark. (PMID: 41120157))
2026-01-23 12:31:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Colton, United States' -> (34.0739016, -117.3136547)
2026-01-23 12:31:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Rancho Mirage, United States' -> (33.7583005, -116.4347271)
2026-01-23 12:31:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Wuhu, China' -> (31.3536127, 118.4277477)
2026-01-23 12:31:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Wichita, United States' -> (37.6922361, -97.3375448)
2026-01-23 12:31:20 - app.phase2.pg_geocoding - INFO - Geocoded 'I.F.-C, Spain' -> (43.1285703, -3.7477001)
2026-01-23 12:31:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Greater Noida, India' -> (28.4670734, 77.5137649)
2026-01-23 12:31:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Stirling, Australia' -> (-31.8902485, 115.8232254)
2026-01-23 12:31:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Liuzhou, China' -> (25.0009993, 109.3414252)
2026-01-23 12:31:28 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Electronic Science and Technology of China, China' (from affiliation: The Clinical Hospital of Chengdu Brain Science Institute, MOE Key Lab for Neuroinformation, School of Life Science and Technology, University of Electronic Science and Technology of China, Chengdu 610036, China; Chengdu Fourth People's Hospital, Chengdu 610036, China. (PMID: 41192010))
2026-01-23 12:31:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Camerino, Italy' -> (43.1357641, 13.0683092)
2026-01-23 12:31:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Pasian di Prato, Italy' -> (46.0485134, 13.1875972)
2026-01-23 12:31:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Bosisio Parini, Italy' -> (45.80228, 9.290743)
2026-01-23 12:31:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Australian Capital Territory, Australia' -> (-35.4883502, 149.0026942)
2026-01-23 12:31:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Rio Grande do Norte, Brazil' -> (-5.6781175, -36.4781776)
2026-01-23 12:31:40 - app.phase2.pg_geocoding - INFO - Geocoded 'SÃ£o Bernardo do Campo, Brazil' -> (-23.7080345, -46.5506747)
2026-01-23 12:31:42 - app.phase2.pg_geocoding - INFO - Geocoded 'QuerÃ©taro, Mexico' -> (20.8052225, -99.8837376)
2026-01-23 12:31:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Nedlands, Australia' -> (-31.9799209, 115.8057167)
2026-01-23 12:31:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Av. Carlos Chagas Filho, Brazil' -> (-22.8440087, -43.234966)
2026-01-23 12:31:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Arizona, United States' -> (34.395342, -111.763275)
2026-01-23 12:31:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Visalia, United States' -> (36.3302284, -119.292058)
2026-01-23 12:31:54 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Danville, Panama' (from affiliation: Department of Population Health Sciences, Geisinger, Danville, PA. (PMID: 40492091))
2026-01-23 12:31:56 - app.phase2.pg_geocoding - INFO - Geocoded 'GoiÃ¢nia, Brazil' -> (-16.680882, -49.2532691)
2026-01-23 12:31:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Jining, China' -> (35.4125047, 116.5849266)
2026-01-23 12:32:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Wanju-gun, South Korea' -> (35.9039, 127.1622)
2026-01-23 12:32:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Cherry Hill, United States' -> (39.9348351, -75.0307264)
2026-01-23 12:32:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Agoura Hills, United States' -> (34.1481692, -118.7655456)
2026-01-23 12:32:06 - app.phase2.pg_geocoding - INFO - Geocoded 'WA D.C, United States' -> (38.9123169, -77.0404678)
2026-01-23 12:32:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Peshawar, Pakistan' -> (34.0123846, 71.5787458)
2026-01-23 12:32:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Hayatabad Medical Complex Peshawar, Pakistan' -> (33.9921399, 71.449425)
2026-01-23 12:32:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Grenada' -> (12.1360374, -61.6904045)
2026-01-23 12:32:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Neijiang, China' -> (29.6602202, 104.9192806)
2026-01-23 12:32:19 - app.phase2.pg_geocoding - INFO - Geocoded 'FlorianÃ³polis, Brazil' -> (-27.5973002, -48.5496098)
2026-01-23 12:32:21 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Nucleus of Pain Pharmacology and Neuromodulation, Brazil' (from affiliation: Post-Graduate Program in Health and Human development, Universidade La Salle, Canoas, Brazil; Universidade Federal do Rio Grande do Sul, Post-graduate Program in Biological Sciences: Pharmacology and Therapeutics, Porto Alegre, RS, Brazil; Nucleus of Pain Pharmacology and Neuromodulation, Hospital de ClÃ­nicas de Porto Alegre, RS, Brazil. (PMID: 41456817))
2026-01-23 12:32:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Cyprus, Cyprus' -> (34.9174159, 32.8899027)
2026-01-23 12:32:26 - app.phase2.pg_geocoding - INFO - Geocoded 'T.L, China' -> (38.8863047, -77.0266121)
2026-01-23 12:32:29 - app.phase2.pg_geocoding - INFO - Geocoded 'X.W, China' -> (42.9047315, 129.5253956)
2026-01-23 12:32:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Baoding, China' -> (38.8579735, 115.490696)
2026-01-23 12:32:32 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Camali Clinic, United Arab Emirates' (from affiliation: Camali Clinic, United Arab Emirates. (PMID: 41564196))
2026-01-23 12:32:34 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Functional Imaging, Germany' (from affiliation: Functional Imaging, Center for Diagnostic Radiology and Neuroradiology, University Medicine Greifswald, Germany. Electronic address: martin.lotze@uni-greifswald.de. (PMID: 41005591))
2026-01-23 12:32:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Clemson, United States' -> (34.6850749, -82.8364111)
2026-01-23 12:32:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Winnipeg, Canada' -> (49.8955367, -97.1384584)
2026-01-23 12:32:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Ministry of Education, China' -> (39.9123408, 116.3630203)
2026-01-23 12:32:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Bosisio Parini (LC, Italy' -> (45.80228, 9.290743)
2026-01-23 12:32:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Naarden, Netherlands' -> (52.2957628, 5.1633636)
2026-01-23 12:32:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Suizhou, China' -> (31.920921, 113.465844)
2026-01-23 12:32:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Oklahoma State, United States' -> (36.1313523, -97.0890651)
2026-01-23 12:32:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Yongzhou, China' -> (25.781344, 111.6979977)
2026-01-23 12:32:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Kano, Nigeria' -> (11.9939978, 8.5219738)
2026-01-23 12:32:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Winnetka, United States' -> (42.1080703, -87.7365286)
2026-01-23 12:32:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Nankai, China' -> (39.1370055, 117.1439502)
2026-01-23 12:33:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Tomsk, Russian Federation' -> (58.6124279, 82.0475315)
2026-01-23 12:33:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Lagos, Nigeria' -> (6.4550575, 3.3941795)
2026-01-23 12:33:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Lynchburg, United States' -> (37.4137536, -79.1422464)
2026-01-23 12:33:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Gillingham, United Kingdom' -> (51.3871701, 0.5461611)
2026-01-23 12:33:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Wales, United Kingdom' -> (52.2928116, -3.73893)
2026-01-23 12:33:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Abbottabad, Pakistan' -> (34.1436136, 73.2132747)
2026-01-23 12:33:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Shillong, India' -> (25.5759931, 91.8827872)
2026-01-23 12:33:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Kempen, Germany' -> (51.3642126, 6.4195011)
2026-01-23 12:33:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Mexico City CP, Mexico' -> (19.4326296, -99.1331785)
2026-01-23 12:33:28 - app.phase2.pg_geocoding - WARNING - Could not geocode 's.r.o. Prague Czech Republic, Czechia' (from affiliation: DP Neuro, s.r.o. Prague Czech Republic. (PMID: 40980699))
2026-01-23 12:33:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Al Mubarraz, Saudi Arabia' -> (25.4100012, 49.580833)
2026-01-23 12:33:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Jawaharlal Nehru, India' -> (13.0064491, 80.2027994)
2026-01-23 12:33:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Lakewood, United States' -> (39.7085736, -105.0846694)
2026-01-23 12:33:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Aqaba, Jordan' -> (29.5266483, 35.0075433)
2026-01-23 12:33:38 - app.phase2.pg_geocoding - INFO - Geocoded 'CÃ³rdoba, Argentina' -> (-31.4166867, -64.1834193)
2026-01-23 12:33:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Minho, Portugal' -> (41.7360007, -8.346108)
2026-01-23 12:33:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Rua Dr. AntÃ³nio Bernardino de Almeida, Portugal' -> (41.1784119, -8.6064452)
2026-01-23 12:33:44 - app.phase2.pg_geocoding - INFO - Geocoded 'CÃºcuta, Colombia' -> (8.0776187, -72.4689002)
2026-01-23 12:33:47 - app.phase2.pg_geocoding - INFO - Geocoded 'AtlÃ¡ntico, Colombia' -> (10.6773422, -74.9718666)
2026-01-23 12:33:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Valledupar, Colombia' -> (10.4651733, -73.2529512)
2026-01-23 12:33:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Pamplona, Colombia' -> (7.3763807, -72.6482628)
2026-01-23 12:33:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Barranquilla, Colombia' -> (11.0101922, -74.8231794)
2026-01-23 12:33:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Bayannur, China' -> (41.569576, 107.494851)
2026-01-23 12:33:57 - app.phase2.pg_geocoding - INFO - Geocoded 'CoyoacÃ¡n C.P. CDMX, Mexico' -> (19.3654388, -99.1966249)
2026-01-23 12:33:59 - app.phase2.pg_geocoding - INFO - Geocoded 'MÃ©xico City, Mexico' -> (19.3207722, -99.1514678)
2026-01-23 12:34:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Sindh, Pakistan' -> (25.5, 69.0)
2026-01-23 12:34:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Visakhapatnam, India' -> (17.6935526, 83.2921297)
2026-01-23 12:34:06 - app.phase2.pg_geocoding - INFO - Geocoded 'MaranhÃ£o, Brazil' -> (-5.2085503, -45.3930262)
2026-01-23 12:34:08 - app.phase2.pg_geocoding - INFO - Geocoded 'NiterÃ³i, Brazil' -> (-22.8884, -43.1147)
2026-01-23 12:34:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Rosario, Argentina' -> (-32.9593609, -60.6617024)
2026-01-23 12:34:13 - app.phase2.pg_geocoding - INFO - Geocoded 'JundiaÃ­, Brazil' -> (-23.1887668, -46.884506)
2026-01-23 12:34:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Brig, Switzerland' -> (46.3163457, 7.9879473)
2026-01-23 12:34:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Bahia, Brazil' -> (-12.285251, -41.9294776)
2026-01-23 12:34:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Long Beach, United States' -> (33.7690164, -118.191604)
2026-01-23 12:34:22 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Minneapolis, Mongolia' (from affiliation: Minneapolis VA Health Care System, Comprehensive Pain Center, One Veterans Drive, Minneapolis, MN 55417-2309. (PMID: 41352532))
2026-01-23 12:34:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Science and Technology of China, China' -> (30.5202172, 114.4118463)
2026-01-23 12:34:26 - app.phase2.affiliation_validator - INFO -    Batch updating 3651 affiliations for 395 cached locations...
2026-01-23 12:34:44 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 395 locations (3651 total affiliations)
2026-01-23 12:34:44 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:34:44 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 983 pending institutions to institution_geo...
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO -    âœ… Added 91 validated institutions to institution_geo table
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4177
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3710
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO -    Cache misses: 299
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 268
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 31
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 51
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 27
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 91/983
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 51 error affiliations with LLM...
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO -    Collecting 51 unique error affiliations for LLM fix
2026-01-23 12:34:54 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-23 12:34:54 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 51 affiliations...
2026-01-23 12:34:54 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 51 affiliations...
2026-01-23 12:34:55 - app.phase2.institution_matcher - INFO -    Loaded 3224 institutions to memory (3224 normalized names, 217 aliases)
2026-01-23 12:34:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 5/51 (9%), matches found: 1
2026-01-23 12:34:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/51 (19%), matches found: 2
2026-01-23 12:34:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 15/51 (29%), matches found: 6
2026-01-23 12:34:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/51 (39%), matches found: 6
2026-01-23 12:34:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 25/51 (49%), matches found: 9
2026-01-23 12:34:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 30/51 (58%), matches found: 10
2026-01-23 12:34:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 35/51 (68%), matches found: 10
2026-01-23 12:34:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 40/51 (78%), matches found: 12
2026-01-23 12:34:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 45/51 (88%), matches found: 16
2026-01-23 12:34:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 50/51 (98%), matches found: 17
2026-01-23 12:34:55 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 51/51 (100%), matches found: 17
2026-01-23 12:34:55 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 17 matches found
2026-01-23 12:34:55 - app.phase2.affiliation_extractor - INFO -    Extracting 34 affiliations via LLM (affiliation_cache: 0, institution_geo: 17) in batches of 20
2026-01-23 12:34:55 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/2 (20 affiliations)
2026-01-23 12:35:00 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 12:35:06 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 2/2 (14 affiliations)
2026-01-23 12:35:11 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 12:35:16 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 34 affiliations processed
2026-01-23 12:35:16 - app.phase2.affiliation_extractor - INFO -       Auto-added to institution_geo table: 13 institutions
2026-01-23 12:35:16 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 51 results from 2 LLM calls
2026-01-23 12:35:16 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 51 LLM results...
2026-01-23 12:35:16 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 51 LLM results
2026-01-23 12:35:16 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-23 12:35:16 - app.phase2.affiliation_validator - INFO -    Processing 27 unique location keys for re-geocoding...
2026-01-23 12:35:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Bushehr, Iran' -> (28.8936645, 51.3204877)
2026-01-23 12:35:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Danville, United States' -> (40.125222, -87.6304614)
2026-01-23 12:35:36 - app.phase2.pg_geocoding - INFO - Geocoded 'Canoas, Brazil' -> (-29.9216045, -51.1799525)
2026-01-23 12:35:38 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 51 affiliations
2026-01-23 12:35:38 - app.phase2.affiliation_validator - INFO -    âœ… Updated 90 authorships
2026-01-23 12:35:38 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 20 locations
2026-01-23 12:35:38 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:35:38 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 19d981d1d732
2026-01-23 12:35:38 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 51
2026-01-23 12:35:38 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 51
2026-01-23 12:35:38 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 90
2026-01-23 12:35:38 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 20
2026-01-23 12:35:38 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 12:35:38 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-23 12:35:38 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-23 12:35:38 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 51
2026-01-23 12:35:38 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 51
2026-01-23 12:35:38 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 90
2026-01-23 12:35:38 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 20
2026-01-23 12:35:38 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 91
2026-01-23 12:35:38 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 31
2026-01-23 12:35:38 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-23 12:35:38 - app.main - INFO - ================================================================================
2026-01-23 12:35:38 - app.main - INFO - âœ… INGESTION COMPLETED - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-23 12:35:38 - app.main - INFO -    Total PMIDs: 500
2026-01-23 12:35:38 - app.main - INFO -    Papers parsed: 500
2026-01-23 12:35:38 - app.main - INFO -    Authorships created: 3866
2026-01-23 12:35:38 - app.main - INFO -    Unique affiliations: 2406
2026-01-23 12:35:38 - app.main - INFO -    Affiliations with country: 2381
2026-01-23 12:35:38 - app.main - INFO -    LLM calls made: 0
2026-01-23 12:35:38 - app.main - INFO - ================================================================================
2026-01-23 12:47:40 - root - INFO - ================================================================================
2026-01-23 12:47:40 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 12:47:40 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-23 12:47:40 - root - INFO - ================================================================================
2026-01-23 12:47:59 - root - INFO - ================================================================================
2026-01-23 12:47:59 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 12:47:59 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-23 12:47:59 - root - INFO - ================================================================================
2026-01-23 12:48:20 - root - INFO - ================================================================================
2026-01-23 12:48:20 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 12:48:20 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-23 12:48:20 - root - INFO - ================================================================================
2026-01-23 12:48:31 - root - INFO - ================================================================================
2026-01-23 12:48:31 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 12:48:31 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-23 12:48:31 - root - INFO - ================================================================================
2026-01-23 12:48:38 - root - INFO - ================================================================================
2026-01-23 12:48:38 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 12:48:38 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-23 12:48:38 - root - INFO - ================================================================================
2026-01-23 12:48:40 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-23 12:48:40 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-23 12:54:38 - root - INFO - ================================================================================
2026-01-23 12:54:38 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 12:54:38 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-23 12:54:38 - root - INFO - ================================================================================
2026-01-23 12:54:42 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-23 12:54:42 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-23 12:54:54 - app.main - INFO - ================================================================================
2026-01-23 12:54:54 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-23 12:54:54 - app.main - INFO -    Min confidence: low
2026-01-23 12:54:54 - app.main - INFO - ================================================================================
2026-01-23 12:54:54 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 19d981d1d732...
2026-01-23 12:54:54 - app.main - INFO - ================================================================================
2026-01-23 12:54:54 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-23 12:54:54 - app.main - INFO -    Min confidence: low
2026-01-23 12:54:54 - app.main - INFO - ================================================================================
2026-01-23 12:54:54 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 19d981d1d732...
2026-01-23 12:54:54 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-23 12:54:54 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-23 12:54:57 - app.phase2.pg_geocoding - INFO - Geocoded 'CuraÃ§ao' -> (12.2135136, -69.040892)
2026-01-23 12:54:57 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 70 countries
2026-01-23 12:54:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-23 12:54:57 - app.main - INFO -    Countries returned: 70
2026-01-23 12:54:57 - app.main - INFO - ================================================================================
2026-01-23 12:54:58 - app.phase2.pg_geocoding - INFO - Geocoded 'CuraÃ§ao' -> (12.2135136, -69.040892)
2026-01-23 12:54:58 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 70 countries
2026-01-23 12:54:58 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-23 12:54:58 - app.main - INFO -    Countries returned: 70
2026-01-23 12:54:58 - app.main - INFO - ================================================================================
2026-01-23 12:57:00 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 13:09:54 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 13:10:29 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 13:10:46 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 13:10:54 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi "HTTP/1.1 200 OK"
2026-01-23 13:10:55 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-23 13:10:57 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-23 13:10:59 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-23 13:11:10 - app.background_tasks - INFO - ðŸš€ Started background ingest task for run 16d4c49fc4f6
2026-01-23 13:11:10 - app.background_tasks - INFO - âš™ï¸  Background ingest running for run 16d4c49fc4f6
2026-01-23 13:11:10 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:11:10 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 16d4c49fc4f6
2026-01-23 13:11:10 - app.phase2.pg_ingest - INFO -    Project ID: 3b9280a68d3d
2026-01-23 13:11:10 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-23 13:11:10 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:11:11 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-23 13:11:14 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 16d4c49fc4f6
2026-01-23 13:11:14 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-23 13:11:14 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:11:14 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-23 13:11:14 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-23 13:11:14 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-23 13:11:15 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41416126%2C41105786%2C41491255%2C41152217%2C41351984%2C41236708%2C41517680%2C41485186%2C41302762%2C41404500%2C41504123%2C41474879%2C41381416%2C41305525%2C41535129%2C41459442%2C41264184%2C41498249%2C41314754%2C41514951%2C41480464%2C41534449%2C41208769%2C41430372%2C41170183%2C41183413%2C41465342%2C41300715%2C41109692%2C41191525%2C41441852%2C41411488%2C41278749%2C41200536%2C41137066%2C41570230%2C41476860%2C41300773%2C41508959%2C41469148%2C41245217%2C41317251%2C41225939%2C41116297%2C41504814%2C41213207%2C41479230%2C41463103%2C41568097%2C41352695%2C41132842%2C41483810%2C41136797%2C41496284%2C41511319%2C41510162%2C41321948%2C41179948%2C41163642%2C41153417%2C41281666%2C41409250%2C41536960%2C41220980%2C41377389%2C41220431%2C41396047%2C41276863%2C41224955%2C41495582%2C41226719%2C41456781%2C41183015%2C41533202%2C41353207%2C41169880%2C41139369%2C41109516%2C41166658%2C41508907%2C41256526%2C41365890%2C41276526%2C41356103%2C41369371%2C41150843%2C41431922%2C41285723%2C41249458%2C41380779%2C41313490%2C41535609%2C41252434%2C41496894%2C41377346%2C41481795%2C41496283%2C41225853%2C41163074%2C41121375%2C41400455%2C41185939%2C41300819%2C41533919%2C41168621%2C41294822%2C41215480%2C41432281%2C41543272%2C41488985%2C41296442%2C41137959%2C41321963%2C41555463%2C41248825%2C41115768%2C41141632%2C41394272%2C41206685%2C41472363%2C41247565%2C41524770%2C41303475%2C41311390%2C41220178%2C41485050%2C41391726%2C41274609%2C41387334%2C41113669%2C41126843%2C41284622%2C41536070%2C41425600%2C41469506%2C41140210%2C41278587%2C41365534%2C41465368%2C41543170%2C41399538%2C41254174%2C41368443%2C41223770%2C41211945%2C41410797%2C41292583%2C41160062%2C41267399%2C41496934&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 13:11:16 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-23 13:11:16 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-23 13:11:16 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41468377%2C41209346%2C41177514%2C41174163%2C41334187%2C41275207%2C41229123%2C41120666%2C41203361%2C41313840%2C41563473%2C41210587%2C41428622%2C41159426%2C41349512%2C41535270%2C41230642%2C41496592%2C41314977%2C41277417%2C41478663%2C41421305%2C41281758%2C41112276%2C41296403%2C41150154%2C41311869%2C41203870%2C41198017%2C41331925%2C41497813%2C41350682%2C41385899%2C41148810%2C41235102%2C41202069%2C41377344%2C41192264%2C41288387%2C41179303%2C41449800%2C41362301%2C41123248%2C41405619%2C41362674%2C41305485%2C41281743%2C41550651%2C41223195%2C41418774%2C41510705%2C41454745%2C41480181%2C41394966%2C41549285%2C41272236%2C41367203%2C41213415%2C41545355%2C41201433%2C41399436%2C41311395%2C41487494%2C41263806%2C41236489%2C41210166%2C41347244%2C41542048%2C41297417%2C41315111%2C41416220%2C41480395%2C41521358%2C41445726%2C41404141%2C41526374%2C41361538%2C41544897%2C41506374%2C41482541%2C41301194%2C41171314%2C41184573%2C41281724%2C41268195%2C41141388%2C41394638%2C41389662%2C41384733%2C41292010%2C41181445%2C41213129%2C41180619%2C41414668%2C41494241%2C41445194%2C41181417%2C41501880%2C41230178%2C41455063%2C41548978%2C41485458%2C41123743%2C41279346%2C41514894%2C41372233%2C41568168%2C41489768%2C41322390%2C41414813%2C41500123%2C41233575%2C41294857%2C41556308%2C41107628%2C41532605%2C41241097%2C41111484%2C41353673%2C41238927%2C41304797%2C41314120%2C41523156%2C41471101%2C41162233%2C41146877%2C41178492%2C41106454%2C41415457%2C41307588%2C41496278%2C41203276%2C41156655%2C41241162%2C41404605%2C41417286%2C41219611%2C41188225%2C41548848%2C41569163%2C41418729%2C41116289%2C41530266%2C41479110%2C41210586%2C41443126%2C41125417%2C41267936%2C41262044%2C41241768&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 13:11:18 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-23 13:11:18 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-23 13:11:19 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41135520%2C41279709%2C41273687%2C41148458%2C41309188%2C41494604%2C41271724%2C41296247%2C41294211%2C41314749%2C41237872%2C41497669%2C41562671%2C41171167%2C41244575%2C41349606%2C41167015%2C41210585%2C41486850%2C41202468%2C41188868%2C41518477%2C41141493%2C41522190%2C41365142%2C41346023%2C41497062%2C41180706%2C41125159%2C41280279%2C41220897%2C41498761%2C41176953%2C41244668%2C41319963%2C41329461%2C41341274%2C41302913%2C41242543%2C41209486%2C41167225%2C41369779%2C41296664%2C41188895%2C41424058%2C41511364%2C41479407%2C41512493%2C41467903%2C41381927%2C41548436%2C41402770%2C41234126%2C41242468%2C41344324%2C41278137%2C41148632%2C41141487%2C41418951%2C41370671%2C41476373%2C41405255%2C41299498%2C41226290%2C41389205%2C41309192%2C41356190%2C41345283%2C41211267%2C41516321%2C41232532%2C41277645%2C41274245%2C41176596%2C41504102%2C41424006%2C41481232%2C41387726%2C41539406%2C41414712%2C41338025%2C41281092%2C41314751%2C41373776%2C41259745%2C41495521%2C41105924%2C41279041%2C41278950%2C41421338%2C41312772%2C41416453%2C41423621%2C41147512%2C41454461%2C41549062%2C41159033%2C41279081%2C41375383%2C41568513%2C41428486%2C41249169%2C41191736%2C41455873%2C41165418%2C41431758%2C41236017%2C41519897%2C41291679%2C41407349%2C41270030%2C41190236%2C41223249%2C41240134%2C41284414%2C41108536%2C41244500%2C41403389%2C41481737%2C41110569%2C41214878%2C41376775%2C41385960%2C41188452%2C41430241%2C41407557%2C41485467%2C41202713%2C41115594%2C41314913%2C41344099%2C41152563%2C41180498%2C41370200%2C41358006%2C41304743%2C41496996%2C41447548%2C41411128%2C41419637%2C41484984%2C41535641%2C41485557%2C41465565%2C41565695%2C41292842%2C41481148%2C41356473%2C41341749%2C41311107&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 13:11:20 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-23 13:11:20 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-23 13:11:20 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41301838%2C41424849%2C41253147%2C41118255%2C41545752%2C41108054%2C41438771%2C41270297%2C41568286%2C41468306%2C41330733%2C41295360%2C41255332%2C41352688%2C41229218%2C41145968%2C41304580%2C41511845%2C41264211%2C41262458%2C41392542%2C41109702%2C41181594%2C41142378%2C41324589%2C41235827%2C41187596%2C41412287%2C41566394%2C41251968%2C41317988%2C41138228%2C41450580%2C41220317%2C41524478%2C41501530%2C41451635%2C41328300%2C41105775%2C41444327%2C41384994%2C41388436%2C41265646%2C41503845%2C41121349%2C41438873%2C41322191%2C41424846%2C41516041%2C41253219&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 13:11:21 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-23 13:11:21 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-23 13:11:22 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-23 13:11:22 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-23 13:11:22 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:11:22 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-23 13:11:22 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-23 13:11:22 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:11:22 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-23 13:11:22 - app.phase2.pg_ingest - INFO -    Extracting 2331 unique affiliations via rule-based method
2026-01-23 13:11:22 - app.phase2.rule_based_extractor - INFO -    Processing 2331 affiliations...
2026-01-23 13:11:22 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2331 affiliations...
2026-01-23 13:11:23 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 20 hits, 2311 need extraction
2026-01-23 13:11:23 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 2311 affiliations...
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    Loaded 3237 institutions to memory (3237 normalized names, 217 aliases)
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 100/2311 (4%), matches found: 56
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 200/2311 (8%), matches found: 102
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 300/2311 (12%), matches found: 154
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 400/2311 (17%), matches found: 208
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 500/2311 (21%), matches found: 260
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 600/2311 (25%), matches found: 318
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 700/2311 (30%), matches found: 371
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 800/2311 (34%), matches found: 422
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 900/2311 (38%), matches found: 474
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1000/2311 (43%), matches found: 519
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1100/2311 (47%), matches found: 567
2026-01-23 13:11:23 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1200/2311 (51%), matches found: 621
2026-01-23 13:11:24 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1300/2311 (56%), matches found: 673
2026-01-23 13:11:24 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1400/2311 (60%), matches found: 728
2026-01-23 13:11:24 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1500/2311 (64%), matches found: 782
2026-01-23 13:11:24 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1600/2311 (69%), matches found: 837
2026-01-23 13:11:24 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1700/2311 (73%), matches found: 894
2026-01-23 13:11:24 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1800/2311 (77%), matches found: 947
2026-01-23 13:11:24 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1900/2311 (82%), matches found: 1000
2026-01-23 13:11:24 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2000/2311 (86%), matches found: 1049
2026-01-23 13:11:24 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2100/2311 (90%), matches found: 1104
2026-01-23 13:11:24 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2200/2311 (95%), matches found: 1162
2026-01-23 13:11:24 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2300/2311 (99%), matches found: 1209
2026-01-23 13:11:24 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2311/2311 (100%), matches found: 1215
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 1215 matches found
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    Extracting 1096 affiliations using rule-based parser...
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 109/1096 (9%)
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 218/1096 (19%)
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 327/1096 (29%)
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 436/1096 (39%)
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 545/1096 (49%)
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 654/1096 (59%)
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 763/1096 (69%)
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 872/1096 (79%)
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 981/1096 (89%)
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1090/1096 (99%)
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1096/1096 (100%)
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 1096 results
2026-01-23 13:11:24 - app.phase2.rule_based_extractor - INFO -       Pending validation: 1012 institutions
2026-01-23 13:11:27 - app.phase2.pg_ingest - INFO -    Cached 2311 new affiliation extraction results to affiliation_cache table
2026-01-23 13:11:27 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2331 affiliations processed, 2307 with country
2026-01-23 13:11:27 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2331 affiliations
2026-01-23 13:11:27 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2331
2026-01-23 13:11:27 - app.phase2.pg_ingest - INFO -    With country: 2307
2026-01-23 13:11:27 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-23 13:11:27 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:11:27 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-23 13:11:27 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 16d4c49fc4f6...
2026-01-23 13:11:27 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-23 13:11:28 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-23 13:11:28 - app.phase2.pg_ingest - INFO -    Inserting 4076 authorships (bulk operation)...
2026-01-23 13:11:34 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4076
2026-01-23 13:11:34 - app.phase2.pg_ingest - INFO -    Linking run 16d4c49fc4f6 to 500 papers...
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4076 authorships
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -    Authorships created: 4076
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2331
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2307
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO - 
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 20
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 1215
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 1096
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 1096
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO - 
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2331 = 2331 (matches)
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 1012
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO - 
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-23 13:11:35 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-23 13:11:35 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 1012
2026-01-23 13:11:35 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:11:35 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 16d4c49fc4f6...
2026-01-23 13:11:36 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4076 authorships from 500 papers
2026-01-23 13:11:36 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:11:36 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-23 13:11:36 - app.phase2.affiliation_validator - INFO -    Found 589 unique location keys from 4076 authorships
2026-01-23 13:11:37 - app.phase2.affiliation_validator - INFO -    Batch query complete: 437/589 found in cache
2026-01-23 13:11:37 - app.phase2.affiliation_validator - INFO -    Processing 152 unique location keys via Nominatim...
2026-01-23 13:11:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Fitzroy, Australia' -> (-37.8010382, 144.9792611)
2026-01-23 13:11:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Freising, Germany' -> (48.4008273, 11.7439565)
2026-01-23 13:11:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Jhansi, India' -> (25.529855, 78.6527802)
2026-01-23 13:11:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Nanjing Normal, China' -> (32.1072982, 118.9046537)
2026-01-23 13:11:47 - app.phase2.pg_geocoding - INFO - Geocoded 'Hangzhou Zhejiang, China' -> (30.2489634, 120.2052342)
2026-01-23 13:11:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Sapporo, Japan' -> (43.061936, 141.3542924)
2026-01-23 13:11:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Matsumoto, Japan' -> (36.2382047, 137.9687141)
2026-01-23 13:11:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Nanning Guangxi, China' -> (22.8049546, 108.2384922)
2026-01-23 13:11:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Chongqing City, China' -> (30.05518, 107.8748712)
2026-01-23 13:11:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Tashkent, Uzbekistan' -> (41.3123363, 69.2787079)
2026-01-23 13:12:00 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Special Coatings and Nanostructures Engineering (IREN, Argentina' (from affiliation: Special Coatings and Nanostructures Engineering (IREN), National Technological University, Buenos Aires 1706, Argentina. (PMID: 41302762))
2026-01-23 13:12:02 - app.phase2.pg_geocoding - INFO - Geocoded 'Dakka, Bangladesh' -> (23.7643863, 90.3890144)
2026-01-23 13:12:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Almaty, Kazakhstan' -> (43.2363924, 76.9457275)
2026-01-23 13:12:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Bhopal, India' -> (23.2584857, 77.401989)
2026-01-23 13:12:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Guna. MP, India' -> (24.5001772, 77.2600959)
2026-01-23 13:12:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Albay, Philippines' -> (13.216667, 123.55)
2026-01-23 13:12:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Medinipur, India' -> (22.4207025, 87.3269963)
2026-01-23 13:12:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Panskura, India' -> (22.3994709, 87.7175073)
2026-01-23 13:12:16 - app.phase2.pg_geocoding - INFO - Geocoded 'El Paso, United States' -> (31.7601001, -106.4870476)
2026-01-23 13:12:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Miramar, United States' -> (25.9873137, -80.2322706)
2026-01-23 13:12:20 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Shahrekord, Iran, Islamic Republic of' (from affiliation: Department of Medical Biotechnology, Faculty of Advanced Technologies, Shahrekord University of Medical Sciences, Shahrekord, Iran. (PMID: 41170183))
2026-01-23 13:12:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Le Kremlin-Bicetre, France' -> (48.8125893, 2.3570028)
2026-01-23 13:12:24 - app.phase2.pg_geocoding - INFO - Geocoded 'amsterdam, Netherlands' -> (52.3730796, 4.8924534)
2026-01-23 13:12:26 - app.phase2.pg_geocoding - INFO - Geocoded 'West Lafayette, United States' -> (40.4258686, -86.9080655)
2026-01-23 13:12:28 - app.phase2.pg_geocoding - INFO - Geocoded 'Russian Academy of Sciences, Russian Federation' -> (55.7108089, 37.5789699)
2026-01-23 13:12:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Cary, United States' -> (35.7882893, -78.7812081)
2026-01-23 13:12:32 - app.phase2.pg_geocoding - INFO - Geocoded 'Santa Fe, United States' -> (35.6876096, -105.938456)
2026-01-23 13:12:35 - app.phase2.pg_geocoding - INFO - Geocoded 'San Sebastian, Spain' -> (43.3224219, -1.9838889)
2026-01-23 13:12:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Baku, Azerbaijan' -> (40.3755885, 49.8328009)
2026-01-23 13:12:39 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Hormozgan, Iran, Islamic Republic of' (from affiliation: Student Research Committee, West Hormozgan School of Medical Sciences, Hormozgan University of Medical Sciences, Bandar Abbas, Hormozgan, Iran. (PMID: 41136797))
2026-01-23 13:12:41 - app.phase2.pg_geocoding - INFO - Geocoded 'Rio Grande, Brazil' -> (-25.8598258, -51.7005236)
2026-01-23 13:12:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Building D, Belgium' -> (50.7095029, 4.4098253)
2026-01-23 13:12:45 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Hematology and Transplantology, Poland' (from affiliation: Department of Pediatric Oncology, Hematology and Transplantology, Poznan University of Medical Sciences, ul. Fredry 10, 61-701 Poznan, Poland. (PMID: 41153417))
2026-01-23 13:12:47 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Amsterdam Cardiovascular Sciences, Netherlands' (from affiliation: Department of Physiology, Amsterdam Cardiovascular Sciences, Amsterdam University Medical Center, De Boelelaan 1108, 1081 HZ Amsterdam, The Netherlands. (PMID: 41536960))
2026-01-23 13:12:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Sylhet, Bangladesh' -> (24.7358854, 91.6852476)
2026-01-23 13:12:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Mymensingh, Bangladesh' -> (24.8889305, 90.3845187)
2026-01-23 13:12:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Candiolo, Italy' -> (44.959244, 7.601722)
2026-01-23 13:12:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Technology and Science, India' -> (10.0460266, 76.3233045)
2026-01-23 13:12:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Amravati, India' -> (21.1545412, 77.6442962)
2026-01-23 13:12:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Shirpur, India' -> (20.4309237, 76.1858349)
2026-01-23 13:13:00 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Somerville, Morocco' (from affiliation: Bluebird Bio, Inc, Somerville, MA. (PMID: 41150843))
2026-01-23 13:13:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Tamilnadu, India' -> (11.3323723, 78.6098639)
2026-01-23 13:13:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Emeryville, United States' -> (37.8314089, -122.2865266)
2026-01-23 13:13:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Madurai, India' -> (9.9261153, 78.1140983)
2026-01-23 13:13:09 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Asadabad, Iran, Islamic Republic of' (from affiliation: Asadabad School of Medical Sciences, Asadabad, Iran. (PMID: 41163074))
2026-01-23 13:13:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Moga, India' -> (30.7877554, 75.159359)
2026-01-23 13:13:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Jiashan, China' -> (30.8327446, 120.9218024)
2026-01-23 13:13:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Bahrain, Bahrain' -> (26.1551249, 50.5344606)
2026-01-23 13:13:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Anshan, China' -> (40.822222, 122.8275)
2026-01-23 13:13:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Science and Technology, China' -> (31.2787148, 120.7237629)
2026-01-23 13:13:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Foshan, China' -> (23.0239788, 113.1159558)
2026-01-23 13:13:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Cangzhou, China' -> (38.3042796, 116.8511597)
2026-01-23 13:13:26 - app.phase2.pg_geocoding - INFO - Geocoded 'The Gambia, Gambia' -> (13.470062, -15.4900464)
2026-01-23 13:13:29 - app.phase2.pg_geocoding - INFO - Geocoded 'China Agricultural, China' -> (23.1612069, 113.3481027)
2026-01-23 13:13:31 - app.phase2.pg_geocoding - INFO - Geocoded 'East Africa, Uganda' -> (0.2858775, 32.6077523)
2026-01-23 13:13:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Kirkuk, Iraq' -> (35.4719308, 44.3953896)
2026-01-23 13:13:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Penang, Malaysia' -> (5.4065013, 100.2559077)
2026-01-23 13:13:37 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Dezful, Iran, Islamic Republic of' (from affiliation: Department of Chemistry, Jundi-Shapur University of Technology, Dezful, Iran. (PMID: 41126843))
2026-01-23 13:13:39 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Damghan, Iran, Islamic Republic of' (from affiliation: School of Chemistry, Damghan University, Damghan, 36716-45667, Iran. (PMID: 41126843))
2026-01-23 13:13:41 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Osennyaya Street Moscow Russia, Russian Federation' (from affiliation: R&D Department Institute for Atherosclerosis Research 4-1-207, Osennyaya Street 121609 Moscow Russia. (PMID: 41140210))
2026-01-23 13:13:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Ajman, United Arab Emirates' -> (25.332875, 55.9960073)
2026-01-23 13:13:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Vigo, Spain' -> (42.2376602, -8.7247205)
2026-01-23 13:13:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Szczecin, Poland' -> (53.4301818, 14.5509623)
2026-01-23 13:13:48 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Fondazione IRCCS Istituto Nazionale dei Tumori di Milano, Italy' (from affiliation: Unit of Medical Genetics, Department of Medical Oncology and Hematology, Fondazione IRCCS Istituto Nazionale dei Tumori di Milano, Italy. (PMID: 41223770))
2026-01-23 13:13:50 - app.phase2.pg_geocoding - INFO - Geocoded 'Starkville, United States' -> (33.4638745, -88.8152074)
2026-01-23 13:13:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Larissa, Greece' -> (39.6383092, 22.4160706)
2026-01-23 13:13:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Duarte, United States' -> (34.1394513, -117.9772873)
2026-01-23 13:13:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Christchurch, New Zealand' -> (-43.530955, 172.6364343)
2026-01-23 13:13:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Nanjing City, China' -> (32.0438284, 118.7788631)
2026-01-23 13:14:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Rio Grande do Sul, Brazil' -> (-29.8425284, -53.7680577)
2026-01-23 13:14:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Inti International, Malaysia' -> (2.8114894, 101.7587713)
2026-01-23 13:14:05 - app.phase2.pg_geocoding - INFO - Geocoded 'Babylon, Iraq' -> (32.5377918, 44.4270029)
2026-01-23 13:14:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Afya, Brazil' -> (-13.0016388, -38.5053193)
2026-01-23 13:14:08 - app.phase2.pg_geocoding - INFO - Geocoded 'Abo Akademi, Finland' -> (60.4534537, 22.2794289)
2026-01-23 13:14:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Auburn, United States' -> (32.6098566, -85.4807825)
2026-01-23 13:14:14 - app.phase2.pg_geocoding - INFO - Geocoded 'Awka, Nigeria' -> (6.218947, 7.0774372)
2026-01-23 13:14:16 - app.phase2.pg_geocoding - INFO - Geocoded 'Abuja, Nigeria' -> (9.0643305, 7.4892974)
2026-01-23 13:14:18 - app.phase2.pg_geocoding - INFO - Geocoded 'Sogang, South Korea' -> (37.5521044, 126.9409839)
2026-01-23 13:14:20 - app.phase2.pg_geocoding - INFO - Geocoded 'Yamaguchi, Japan' -> (34.2379614, 131.5873845)
2026-01-23 13:14:22 - app.phase2.pg_geocoding - INFO - Geocoded 'Kirksville, United States' -> (40.1948848, -92.5833939)
2026-01-23 13:14:24 - app.phase2.pg_geocoding - INFO - Geocoded 'Raipur, India' -> (21.2380912, 81.6336993)
2026-01-23 13:14:26 - app.phase2.pg_geocoding - INFO - Geocoded 'Muzaffarabad, Pakistan' -> (34.3734751, 73.4702407)
2026-01-23 13:14:28 - app.phase2.pg_geocoding - INFO - Geocoded 'North Bergen, United States' -> (40.8042674, -74.012084)
2026-01-23 13:14:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Valhalla, United States' -> (41.075213, -73.7750061)
2026-01-23 13:14:32 - app.phase2.pg_geocoding - INFO - Geocoded 'The Nothe Weymouth, United Kingdom' -> (50.6065983, -2.4501635)
2026-01-23 13:14:34 - app.phase2.pg_geocoding - INFO - Geocoded 'Pune, India' -> (18.5213738, 73.8545071)
2026-01-23 13:14:36 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Akademia Medyczna Nauk Stosowanych i Holistycznych, United Kingdom' (from affiliation: Akademia Medyczna Nauk Stosowanych i Holistycznych. (PMID: 41263806))
2026-01-23 13:14:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Al-Quds, Palestine' -> (31.892672, 35.2019979)
2026-01-23 13:14:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Durban, South Africa' -> (-29.861825, 31.009909)
2026-01-23 13:14:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Quaid-I-Azam, Pakistan' -> (33.7476438, 73.1430184)
2026-01-23 13:14:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Benin, Nigeria' -> (6.3330586, 5.6221058)
2026-01-23 13:14:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Chattanooga, United States' -> (35.0457219, -85.3094883)
2026-01-23 13:14:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Attaka, Egypt' -> (29.9144511, 32.3982337)
2026-01-23 13:14:49 - app.phase2.pg_geocoding - INFO - Geocoded 'Voorhees, United States' -> (39.8512162, -74.9619779)
2026-01-23 13:14:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Baltimore, China' -> (38.8975256, -77.0306688)
2026-01-23 13:14:53 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Hinganghat Dist. Wardha (M.S, India' (from affiliation: Tulaskar College of Pharmacy, Hinganghat Dist. Wardha (M.S), 442301, India. (PMID: 41489768))
2026-01-23 13:14:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Himachal Pradesh, India' -> (31.9292352, 77.1828462)
2026-01-23 13:14:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Parkville Australia, Australia' -> (-32.3212478, 115.8198884)
2026-01-23 13:15:00 - app.phase2.pg_geocoding - INFO - Geocoded 'Medellin, Colombia' -> (6.2697325, -75.6025597)
2026-01-23 13:15:02 - app.phase2.pg_geocoding - INFO - Geocoded 'MÃ©rida, Mexico' -> (20.9670759, -89.6237402)
2026-01-23 13:15:04 - app.phase2.pg_geocoding - INFO - Geocoded 'MedellÃ­n, Colombia' -> (6.2697325, -75.6025597)
2026-01-23 13:15:06 - app.phase2.pg_geocoding - INFO - Geocoded 'Sabaneta, Colombia' -> (6.1515344, -75.6153715)
2026-01-23 13:15:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Flagstaff, United States' -> (35.1987522, -111.651822)
2026-01-23 13:15:11 - app.phase2.pg_geocoding - INFO - Geocoded 'Jiangsu Yancheng, China' -> (33.4015327, 120.1169222)
2026-01-23 13:15:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Jiangsu Suzhou, China' -> (31.2431546, 120.5458293)
2026-01-23 13:15:15 - app.phase2.pg_geocoding - INFO - Geocoded 'AARI, Pakistan' -> (31.3941079, 73.0600396)
2026-01-23 13:15:17 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Nanotechnology and Tissue Engineering, Iran, Islamic Republic of' (from affiliation: Department of Biomaterials, Nanotechnology and Tissue Engineering, School of Advanced Technologies in Medicine, Isfahan University of Medical Sciences, Isfahan 8174673461, Iran. (PMID: 41443126))
2026-01-23 13:15:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Port Harcourt, Nigeria' -> (4.7676576, 7.0188527)
2026-01-23 13:15:21 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Karaj, Iran, Islamic Republic of' (from affiliation: Department of Animal Breeding and Genetics, Tehran University, Karaj, Iran. (PMID: 41241768))
2026-01-23 13:15:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Trichy, India' -> (10.8071144, 78.6880939)
2026-01-23 13:15:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Lahore Pakistan, Pakistan' -> (31.4689654, 74.3175064)
2026-01-23 13:15:27 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Molecular and Cellular Immunology, United Kingdom' (from affiliation: Molecular and Cellular Immunology, UCL Great Ormond Street Institute of Child Health, London WC1N 1EH, UK. (PMID: 41562671))
2026-01-23 13:15:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Ansan-si, South Korea' -> (37.3217152, 126.8308604)
2026-01-23 13:15:30 - app.phase2.pg_geocoding - INFO - Geocoded 'Ministry of Agriculture, China' -> (39.9331167, 116.4576852)
2026-01-23 13:15:32 - app.phase2.pg_geocoding - INFO - Geocoded 'East China Normal, China' -> (30.5223609, 114.3496565)
2026-01-23 13:15:35 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Ardabil, Iran, Islamic Republic of' (from affiliation: University of Mohaghegh Ardabili, Ardabil, Islamic Republic of Iran. ciamakghazaei@yahoo.com. (PMID: 41518477))
2026-01-23 13:15:37 - app.phase2.pg_geocoding - INFO - Geocoded 'Cross River State, Nigeria' -> (5.8671966, 8.5204774)
2026-01-23 13:15:38 - app.phase2.pg_geocoding - INFO - Geocoded 'Enugu, Nigeria' -> (6.4496519, 7.5136856)
2026-01-23 13:15:40 - app.phase2.pg_geocoding - INFO - Geocoded 'Edinburg, United States' -> (26.3013982, -98.1624501)
2026-01-23 13:15:42 - app.phase2.pg_geocoding - INFO - Geocoded 'Al Ain, United Arab Emirates' -> (24.2248697, 55.7452211)
2026-01-23 13:15:44 - app.phase2.pg_geocoding - INFO - Geocoded 'Midrand, South Africa' -> (-25.999262, 28.125912)
2026-01-23 13:15:46 - app.phase2.pg_geocoding - INFO - Geocoded 'Mohali, India' -> (30.7041168, 76.7176885)
2026-01-23 13:15:48 - app.phase2.pg_geocoding - INFO - Geocoded 'Rende, Italy' -> (39.3319934, 16.1843828)
2026-01-23 13:15:49 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Independent Scientist, Netherlands' (from affiliation: Independent Scientist, The Netherlands. (PMID: 41234126))
2026-01-23 13:15:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Science and Technology Beijing, China' -> (39.9902334, 116.3531753)
2026-01-23 13:15:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Pathom, Thailand' -> (13.8918425, 100.0165659)
2026-01-23 13:15:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Italy, Switzerland' -> (46.9392318, 7.4615694)
2026-01-23 13:15:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Amity, India' -> (27.1754712, 75.9599791)
2026-01-23 13:15:59 - app.phase2.pg_geocoding - WARNING - Could not geocode 'MeiraGTx UK II, United Kingdom' (from affiliation: MeiraGTx UK II, 34-38 Provost Street, London N1 7NG, UK. (PMID: 41516321))
2026-01-23 13:16:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Faridkot, India' -> (30.6014507, 74.7950176)
2026-01-23 13:16:04 - app.phase2.pg_geocoding - INFO - Geocoded 'Guwahati, India' -> (26.1805978, 91.753943)
2026-01-23 13:16:06 - app.phase2.pg_geocoding - INFO - Geocoded 'West Hartford, United States' -> (41.7620447, -72.7420399)
2026-01-23 13:16:08 - app.phase2.pg_geocoding - INFO - Geocoded 'San Jose, United States' -> (37.3361663, -121.890591)
2026-01-23 13:16:10 - app.phase2.pg_geocoding - INFO - Geocoded 'Wanning, China' -> (18.7961376, 110.3872565)
2026-01-23 13:16:11 - app.phase2.pg_geocoding - INFO - Geocoded 'MusÃ©um National d'Histoire Naturelle, France' -> (48.6956351, 2.4935254)
2026-01-23 13:16:13 - app.phase2.pg_geocoding - INFO - Geocoded 'Palapye, Botswana' -> (-22.536888, 27.123513)
2026-01-23 13:16:15 - app.phase2.pg_geocoding - INFO - Geocoded 'Western Australia, Australia' -> (-25.2303005, 121.0187246)
2026-01-23 13:16:17 - app.phase2.pg_geocoding - INFO - Geocoded 'Subiaco, Australia' -> (-31.9463298, 115.8240314)
2026-01-23 13:16:19 - app.phase2.pg_geocoding - INFO - Geocoded 'Bulacan, Philippines' -> (15.0, 121.083333)
2026-01-23 13:16:21 - app.phase2.pg_geocoding - INFO - Geocoded 'De La Salle, Philippines' -> (14.2608963, 121.0427959)
2026-01-23 13:16:23 - app.phase2.pg_geocoding - INFO - Geocoded 'Valenzuela, Philippines' -> (14.6916903, 120.9694534)
2026-01-23 13:16:25 - app.phase2.pg_geocoding - INFO - Geocoded 'Huangshan, China' -> (29.7172627, 118.3324811)
2026-01-23 13:16:27 - app.phase2.pg_geocoding - INFO - Geocoded 'GieÃŸen, Germany' -> (50.5808795, 8.6938161)
2026-01-23 13:16:29 - app.phase2.pg_geocoding - INFO - Geocoded 'Blacksburg, United States' -> (37.2296566, -80.4136767)
2026-01-23 13:16:31 - app.phase2.pg_geocoding - INFO - Geocoded 'Buckingham, United Kingdom' -> (51.999928, -0.9876832)
2026-01-23 13:16:33 - app.phase2.pg_geocoding - INFO - Geocoded 'Detmold, Germany' -> (51.936284, 8.8791526)
2026-01-23 13:16:35 - app.phase2.pg_geocoding - INFO - Geocoded 'Langen, Germany' -> (49.9915138, 8.6667015)
2026-01-23 13:16:37 - app.phase2.pg_geocoding - INFO - Geocoded 'White River Junction, United States' -> (43.6505307, -72.3309258)
2026-01-23 13:16:39 - app.phase2.pg_geocoding - INFO - Geocoded 'Scottsdale, United States' -> (33.4942189, -111.926018)
2026-01-23 13:16:41 - app.phase2.pg_geocoding - WARNING - Could not geocode '100 Daxuedong RD, China' (from affiliation: Department of Computer Science and Technology, School of Computer and Electronic Information, Guangxi University, 100 Daxuedong RD, Guangxi Zhuang Autonomous Region, Nanning, 530 004, People's Republic of China. (PMID: 41388436))
2026-01-23 13:16:43 - app.phase2.pg_geocoding - INFO - Geocoded 'Shendi, Sudan' -> (16.6884963, 33.432286)
2026-01-23 13:16:45 - app.phase2.pg_geocoding - INFO - Geocoded 'Ulaanbaatar, Mongolia' -> (47.9184676, 106.9177016)
2026-01-23 13:16:45 - app.phase2.affiliation_validator - INFO -    Batch updating 3531 affiliations for 425 cached locations...
2026-01-23 13:17:02 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 425 locations (3531 total affiliations)
2026-01-23 13:17:02 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:17:02 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 1012 pending institutions to institution_geo...
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO -    âœ… Added 128 validated institutions to institution_geo table
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4076
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3608
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO -    Cache misses: 339
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 307
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 32
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 58
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 32
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 128/1012
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 58 error affiliations with LLM...
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO -    Collecting 58 unique error affiliations for LLM fix
2026-01-23 13:17:13 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-23 13:17:13 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 58 affiliations...
2026-01-23 13:17:13 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 58 affiliations...
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    Loaded 3365 institutions to memory (3365 normalized names, 217 aliases)
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 5/58 (8%), matches found: 1
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/58 (17%), matches found: 1
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 15/58 (25%), matches found: 3
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/58 (34%), matches found: 6
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 25/58 (43%), matches found: 9
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 30/58 (51%), matches found: 14
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 35/58 (60%), matches found: 14
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 40/58 (68%), matches found: 17
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 45/58 (77%), matches found: 17
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 50/58 (86%), matches found: 17
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 55/58 (94%), matches found: 17
2026-01-23 13:17:14 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 58/58 (100%), matches found: 17
2026-01-23 13:17:14 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 17 matches found
2026-01-23 13:17:14 - app.phase2.affiliation_extractor - INFO -    Extracting 41 affiliations via LLM (affiliation_cache: 0, institution_geo: 17) in batches of 20
2026-01-23 13:17:14 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 1/3 (20 affiliations)
2026-01-23 13:17:20 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 13:17:26 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 2/3 (20 affiliations)
2026-01-23 13:17:36 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 13:17:42 - app.phase2.affiliation_extractor - INFO -    Processing LLM batch 3/3 (1 affiliations)
2026-01-23 13:17:43 - httpx - INFO - HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-23 13:17:44 - app.phase2.affiliation_extractor - INFO -    âœ… LLM extraction complete: 41 affiliations processed
2026-01-23 13:17:44 - app.phase2.affiliation_extractor - INFO -       Auto-added to institution_geo table: 20 institutions
2026-01-23 13:17:44 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 58 results from 3 LLM calls
2026-01-23 13:17:44 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 58 LLM results...
2026-01-23 13:17:44 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 58 LLM results
2026-01-23 13:17:44 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-23 13:17:44 - app.phase2.affiliation_validator - INFO -    Processing 29 unique location keys for re-geocoding...
2026-01-23 13:17:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Somerville, United States' -> (42.3875968, -71.0994968)
2026-01-23 13:17:59 - app.phase2.pg_geocoding - INFO - Geocoded 'Asadabad, Iran' -> (34.7825885, 48.1217832)
2026-01-23 13:18:01 - app.phase2.pg_geocoding - INFO - Geocoded 'Dezful, Iran' -> (32.3780257, 48.4032064)
2026-01-23 13:18:03 - app.phase2.pg_geocoding - INFO - Geocoded 'Damghan, Iran' -> (36.167451, 54.3379993)
2026-01-23 13:18:07 - app.phase2.pg_geocoding - INFO - Geocoded 'Hinganghat, India' -> (20.542611, 78.8331636)
2026-01-23 13:18:09 - app.phase2.pg_geocoding - INFO - Geocoded 'Karaj, Iran' -> (35.8224892, 50.9904681)
2026-01-23 13:18:12 - app.phase2.pg_geocoding - INFO - Geocoded 'Ardabil, Iran' -> (38.4583983, 47.9313001)
2026-01-23 13:18:13 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 58 affiliations
2026-01-23 13:18:13 - app.phase2.affiliation_validator - INFO -    âœ… Updated 109 authorships
2026-01-23 13:18:13 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 25 locations
2026-01-23 13:18:13 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:18:13 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 16d4c49fc4f6
2026-01-23 13:18:13 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 58
2026-01-23 13:18:13 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 58
2026-01-23 13:18:13 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 109
2026-01-23 13:18:13 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 25
2026-01-23 13:18:13 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:18:13 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-23 13:18:13 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-23 13:18:13 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 58
2026-01-23 13:18:13 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 58
2026-01-23 13:18:13 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 109
2026-01-23 13:18:13 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 25
2026-01-23 13:18:13 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 128
2026-01-23 13:18:13 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 32
2026-01-23 13:18:13 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-23 13:18:13 - app.background_tasks - INFO - âœ… Background ingest completed for run 16d4c49fc4f6 in 422.92s
2026-01-23 13:20:04 - root - INFO - ================================================================================
2026-01-23 13:20:04 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 13:20:04 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-23 13:20:04 - root - INFO - ================================================================================
2026-01-23 13:20:06 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-23 13:20:06 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-23 13:22:14 - root - INFO - ================================================================================
2026-01-23 13:22:14 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 13:22:14 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-23 13:22:14 - root - INFO - ================================================================================
2026-01-23 13:22:16 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-23 13:22:16 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-23 13:22:37 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi "HTTP/1.1 200 OK"
2026-01-23 13:22:38 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-23 13:22:39 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-23 13:22:41 - httpx - INFO - HTTP Request: POST https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi "HTTP/1.1 200 OK"
2026-01-23 13:22:48 - app.background_tasks - INFO - ðŸš€ Started background ingest task for run 16d4c49fc4f6
2026-01-23 13:22:48 - app.main - INFO - ðŸš€ Auto-started background ingest for run 16d4c49fc4f6
2026-01-23 13:22:48 - app.background_tasks - INFO - âš™ï¸  Background ingest running for run 16d4c49fc4f6
2026-01-23 13:22:48 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:22:48 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Starting ingestion for run 16d4c49fc4f6
2026-01-23 13:22:48 - app.phase2.pg_ingest - INFO -    Project ID: 3b9280a68d3d
2026-01-23 13:22:48 - app.phase2.pg_ingest - INFO -    Force refresh: False
2026-01-23 13:22:48 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:22:48 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 1: Loading PMIDs from Phase 1 results...
2026-01-23 13:22:50 - app.phase2.pg_ingest - INFO -    Loaded 500 unique PMIDs from run 16d4c49fc4f6
2026-01-23 13:22:50 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 1 COMPLETE: Found 500 PMIDs
2026-01-23 13:22:50 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:22:50 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 2: Fetching 500 PMIDs from PubMed...
2026-01-23 13:22:50 - app.phase2.pubmed_fetcher - INFO - Fetching 500 PMIDs in 4 batches (batch_size=150, rate_limit=3.0 rps)
2026-01-23 13:22:50 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-23 13:22:51 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41542048%2C41532605%2C41188895%2C41459442%2C41450580%2C41132842%2C41516041%2C41300819%2C41491255%2C41106454%2C41349512%2C41329461%2C41524770%2C41563473%2C41203870%2C41192264%2C41498761%2C41345283%2C41146877%2C41108054%2C41496592%2C41121375%2C41108536%2C41200536%2C41455063%2C41314977%2C41174163%2C41273687%2C41356103%2C41514951%2C41362674%2C41292583%2C41211267%2C41225853%2C41555463%2C41241162%2C41120666%2C41242543%2C41412287%2C41244500%2C41330733%2C41188452%2C41465565%2C41376775%2C41220980%2C41109516%2C41367203%2C41220317%2C41230642%2C41309188%2C41121349%2C41209346%2C41296442%2C41311395%2C41226719%2C41313490%2C41443126%2C41288387%2C41482541%2C41471101%2C41247565%2C41253219%2C41445726%2C41281092%2C41570230%2C41389205%2C41296403%2C41187596%2C41311390%2C41369371%2C41274609%2C41369779%2C41211945%2C41568513%2C41179948%2C41568168%2C41314749%2C41414668%2C41147512%2C41438771%2C41387726%2C41305485%2C41148458%2C41508907%2C41400455%2C41497813%2C41483810%2C41311869%2C41424849%2C41274245%2C41417286%2C41432281%2C41159426%2C41145968%2C41535609%2C41385899%2C41536960%2C41485467%2C41494241%2C41249458%2C41481148%2C41347244%2C41445194%2C41504814%2C41503845%2C41480181%2C41370671%2C41399538%2C41341274%2C41377344%2C41504102%2C41281758%2C41171314%2C41485557%2C41263806%2C41416220%2C41304797%2C41496278%2C41352695%2C41294857%2C41314913%2C41536070%2C41279041%2C41254174%2C41510705%2C41449800%2C41279081%2C41524478%2C41396047%2C41171167%2C41478663%2C41522190%2C41543170%2C41352688%2C41403389%2C41341749%2C41543272%2C41380779%2C41141632%2C41278749%2C41311107%2C41539406%2C41405619%2C41176596%2C41430241%2C41549062%2C41105786%2C41181594%2C41235827%2C41481795&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 13:22:51 - app.phase2.pubmed_fetcher - INFO - Batch 1/4 completed
2026-01-23 13:22:51 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-23 13:22:52 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41176953%2C41141487%2C41276526%2C41508959%2C41424006%2C41202713%2C41344099%2C41495582%2C41220431%2C41109692%2C41279346%2C41226290%2C41533919%2C41476373%2C41220897%2C41407349%2C41135520%2C41255332%2C41421338%2C41501880%2C41279709%2C41488985%2C41468306%2C41481232%2C41165418%2C41394966%2C41373776%2C41314754%2C41438873%2C41533202%2C41184573%2C41225939%2C41387334%2C41141493%2C41115594%2C41496284%2C41281666%2C41516321%2C41277417%2C41414813%2C41496996%2C41142378%2C41425600%2C41191736%2C41424846%2C41238927%2C41223195%2C41138228%2C41183015%2C41300773%2C41249169%2C41486850%2C41384994%2C41159033%2C41185939%2C41566394%2C41125159%2C41183413%2C41126843%2C41431922%2C41107628%2C41472363%2C41304580%2C41299498%2C41259745%2C41384733%2C41198017%2C41294211%2C41233575%2C41232532%2C41568097%2C41148632%2C41469148%2C41295360%2C41489768%2C41309192%2C41526374%2C41356473%2C41240134%2C41235102%2C41495521%2C41416126%2C41167225%2C41418729%2C41180619%2C41317988%2C41556308%2C41224955%2C41404141%2C41181417%2C41267399%2C41220178%2C41180706%2C41278587%2C41399436%2C41267936%2C41424058%2C41565695%2C41476860%2C41394272%2C41319963%2C41497062%2C41234126%2C41530266%2C41519897%2C41394638%2C41191525%2C41167015%2C41350682%2C41278137%2C41321948%2C41116297%2C41170183%2C41123743%2C41496283%2C41480464%2C41137959%2C41244575%2C41365890%2C41391726%2C41506374%2C41454745%2C41292842%2C41545752%2C41372233%2C41112276%2C41115768%2C41431758%2C41518477%2C41188225%2C41534449%2C41296664%2C41210585%2C41338025%2C41419637%2C41209486%2C41265646%2C41202468%2C41301838%2C41322191%2C41215480%2C41285723%2C41300715%2C41365534%2C41178492%2C41116289%2C41404500%2C41223249%2C41110569%2C41381927&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 13:22:53 - app.phase2.pubmed_fetcher - INFO - Batch 2/4 completed
2026-01-23 13:22:53 - app.phase2.pubmed_fetcher - INFO - Fetching 150 PMIDs from PubMed...
2026-01-23 13:22:53 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41236489%2C41152217%2C41411488%2C41368443%2C41229218%2C41201433%2C41410797%2C41370200%2C41270030%2C41463103%2C41109702%2C41416453%2C41242468%2C41223770%2C41219611%2C41474879%2C41302762%2C41313840%2C41163642%2C41404605%2C41297417%2C41301194%2C41467903%2C41245217%2C41454461%2C41479230%2C41456781%2C41305525%2C41407557%2C41324589%2C41304743%2C41501530%2C41414712%2C41392542%2C41278950%2C41202069%2C41180498%2C41152563%2C41307588%2C41113669%2C41315111%2C41136797%2C41484984%2C41441852%2C41256526%2C41548436%2C41344324%2C41139369%2C41415457%2C41169880%2C41465342%2C41512493%2C41166658%2C41251968%2C41535641%2C41569163%2C41237872%2C41253147%2C41480395%2C41523156%2C41447548%2C41494604%2C41377346%2C41346023%2C41248825%2C41275207%2C41517680%2C41535270%2C41353673%2C41303475%2C41123248%2C41153417%2C41455873%2C41430372%2C41428486%2C41264211%2C41214878%2C41292010%2C41388436%2C41496934%2C41317251%2C41213415%2C41284414%2C41504123%2C41487494%2C41272236%2C41203361%2C41210166%2C41160062%2C41302913%2C41568286%2C41252434%2C41140210%2C41105924%2C41479407%2C41428622%2C41479110%2C41148810%2C41444327%2C41361538%2C41358006%2C41423621%2C41485050%2C41409250%2C41362301%2C41548978%2C41418774%2C41389662%2C41402770%2C41150154%2C41229123%2C41241768%2C41281743%2C41485186%2C41244668%2C41262458%2C41125417%2C41500123%2C41271724%2C41548848%2C41405255%2C41496894%2C41284622%2C41481737%2C41545355%2C41381416%2C41411128%2C41294822%2C41356190%2C41141388%2C41276863%2C41137066%2C41264184%2C41262044%2C41535129%2C41236708%2C41511364%2C41465368%2C41312772%2C41280279%2C41321963%2C41208769%2C41213129%2C41268195%2C41168621%2C41418951%2C41111484%2C41270297%2C41377389%2C41277645&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 13:22:54 - app.phase2.pubmed_fetcher - INFO - Batch 3/4 completed
2026-01-23 13:22:54 - app.phase2.pubmed_fetcher - INFO - Fetching 50 PMIDs from PubMed...
2026-01-23 13:22:55 - httpx - INFO - HTTP Request: GET https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&id=41190236%2C41314751%2C41105775%2C41163074%2C41162233%2C41510162%2C41230178%2C41349606%2C41328300%2C41334187%2C41210587%2C41511319%2C41322390%2C41177514%2C41156655%2C41353207%2C41296247%2C41150843%2C41521358%2C41549285%2C41544897%2C41331925%2C41385960%2C41375383%2C41421305%2C41213207%2C41210586%2C41498249%2C41497669%2C41118255%2C41314120%2C41291679%2C41188868%2C41451635%2C41203276%2C41562671%2C41179303%2C41181445%2C41550651%2C41511845%2C41469506%2C41514894%2C41485458%2C41468377%2C41351984%2C41365142%2C41281724%2C41206685%2C41236017%2C41241097&retmode=xml&rettype=abstract "HTTP/1.1 200 OK"
2026-01-23 13:22:55 - app.phase2.pubmed_fetcher - INFO - Batch 4/4 completed
2026-01-23 13:22:55 - app.phase2.pubmed_fetcher - INFO - Fetched 4/4 batches successfully
2026-01-23 13:22:56 - app.phase2.pubmed_fetcher - INFO - Extracted 500 PMIDs from 4 batches
2026-01-23 13:22:56 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 2 COMPLETE: Fetched 500 PubMed XML records
2026-01-23 13:22:56 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:22:56 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 3: Parsing XML into structured papers...
2026-01-23 13:22:56 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 3 COMPLETE: Parsed 500 papers
2026-01-23 13:22:56 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:22:56 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 4: Extracting affiliations via rule-based...
2026-01-23 13:22:56 - app.phase2.pg_ingest - INFO -    Extracting 2331 unique affiliations via rule-based method
2026-01-23 13:22:56 - app.phase2.rule_based_extractor - INFO -    Processing 2331 affiliations...
2026-01-23 13:22:56 - app.phase2.rule_based_extractor - INFO -    Batch checking affiliation_cache table for 2331 affiliations...
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    âœ… affiliation_cache table: 2312 hits, 19 need extraction
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    Trying institution_matcher (institution_geo table) for 19 affiliations...
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    Loaded 3385 institutions to memory (3385 normalized names, 218 aliases)
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1/19 (5%), matches found: 1
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/19 (10%), matches found: 2
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 3/19 (15%), matches found: 2
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/19 (21%), matches found: 3
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 5/19 (26%), matches found: 4
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/19 (31%), matches found: 4
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 7/19 (36%), matches found: 4
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/19 (42%), matches found: 5
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 9/19 (47%), matches found: 6
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/19 (52%), matches found: 7
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 11/19 (57%), matches found: 8
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/19 (63%), matches found: 8
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 13/19 (68%), matches found: 8
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/19 (73%), matches found: 9
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 15/19 (78%), matches found: 10
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/19 (84%), matches found: 10
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 17/19 (89%), matches found: 10
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/19 (94%), matches found: 10
2026-01-23 13:22:57 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 19/19 (100%), matches found: 10
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    âœ… institution_geo table: 10 matches found
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    Extracting 9 affiliations using rule-based parser...
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 1/9 (11%)
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 2/9 (22%)
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 3/9 (33%)
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 4/9 (44%)
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 5/9 (55%)
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 6/9 (66%)
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 7/9 (77%)
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 8/9 (88%)
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    Parsing progress: 9/9 (100%)
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -    âœ… Rule-based extraction complete: 9 results
2026-01-23 13:22:57 - app.phase2.rule_based_extractor - INFO -       Pending validation: 9 institutions
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO -    Cached 19 new affiliation extraction results to affiliation_cache table
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO -    âœ… Extraction complete: 2331 affiliations processed, 2307 with country
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 4 COMPLETE: Extracted 2331 affiliations
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2331
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO -    With country: 2307
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO -    LLM calls: 0
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 5: Writing to database...
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO -    Clearing existing data for run 16d4c49fc4f6...
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO -    Deleted authorships for 500 existing PMIDs
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO -    Inserting/updating 500 papers (bulk operation)...
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO -    Papers inserted/updated: 500
2026-01-23 13:22:58 - app.phase2.pg_ingest - INFO -    Inserting 4076 authorships (bulk operation)...
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -    Authorships inserted: 4076
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -    Linking run 16d4c49fc4f6 to 500 papers...
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -    Database write complete
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 5 COMPLETE: Created 4076 authorships
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO - âœ… INGESTION COMPLETE - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -    Total PMIDs: 500
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -    Papers parsed: 500
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -    Authorships created: 4076
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -    Unique affiliations: 2331
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -    Affiliations with country: 2307
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO - 
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -    Affiliation Processing Breakdown:
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table hits: 2312
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table matches: 10
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -       âœ… rule-based extractions: 9
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table auto-added: 0
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated: 9
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO - 
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -    âœ… Count verification: 2331 = 2331 (matches)
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO -    Pending institutions for validation: 9
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO - 
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-23 13:23:04 - app.phase2.pg_ingest - INFO - ðŸ“¥ INGESTION STEP 6: Starting post-ingestion validation and LLM fallback...
2026-01-23 13:23:04 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 9
2026-01-23 13:23:04 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:23:04 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 16d4c49fc4f6...
2026-01-23 13:23:05 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4076 authorships from 500 papers
2026-01-23 13:23:05 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:23:05 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-23 13:23:05 - app.phase2.affiliation_validator - INFO -    Found 573 unique location keys from 4076 authorships
2026-01-23 13:23:06 - app.phase2.affiliation_validator - INFO -    Batch query complete: 573/573 found in cache
2026-01-23 13:23:06 - app.phase2.affiliation_validator - INFO -    Processing 0 unique location keys via Nominatim...
2026-01-23 13:23:06 - app.phase2.affiliation_validator - INFO -    Batch updating 3916 affiliations for 569 cached locations...
2026-01-23 13:23:25 - app.main - INFO - ================================================================================
2026-01-23 13:23:25 - app.main - INFO - â³ WAITING - Background ingest in progress for run 16d4c49fc4f6
2026-01-23 13:23:25 - app.main - INFO -    Project: 3b9280a68d3d
2026-01-23 13:23:25 - app.main - INFO -    Started at: 2026-01-23 05:22:48.804169
2026-01-23 13:23:25 - app.main - INFO - ================================================================================
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 569 locations (3916 total affiliations)
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 4.5: Adding 9 pending institutions to institution_geo...
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO -    âš ï¸  No institutions passed geocoding validation
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4076
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 3947
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO -    Cache misses: 0
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 0
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 13
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 8
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO -    Institutions validated and added: 0/9
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 13 error affiliations with LLM...
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO -    Collecting 13 unique error affiliations for LLM fix
2026-01-23 13:23:32 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-23 13:23:32 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 13 affiliations...
2026-01-23 13:23:32 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 13 affiliations...
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    Loaded 3385 institutions to memory (3385 normalized names, 218 aliases)
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 1/13 (7%), matches found: 1
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/13 (15%), matches found: 2
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 3/13 (23%), matches found: 3
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/13 (30%), matches found: 4
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 5/13 (38%), matches found: 5
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/13 (46%), matches found: 6
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 7/13 (53%), matches found: 7
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/13 (61%), matches found: 8
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 9/13 (69%), matches found: 9
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/13 (76%), matches found: 10
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 11/13 (84%), matches found: 11
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/13 (92%), matches found: 12
2026-01-23 13:23:33 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 13/13 (100%), matches found: 13
2026-01-23 13:23:33 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 13 matches found
2026-01-23 13:23:33 - app.phase2.affiliation_extractor - INFO -    âœ… All 13 affiliations found in cache/institution_geo
2026-01-23 13:23:33 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 13 results from 0 LLM calls
2026-01-23 13:23:33 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 13 LLM results...
2026-01-23 13:23:33 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 13 LLM results
2026-01-23 13:23:33 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-23 13:23:33 - app.phase2.affiliation_validator - INFO -    Processing 4 unique location keys for re-geocoding...
2026-01-23 13:23:36 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 13 affiliations
2026-01-23 13:23:36 - app.phase2.affiliation_validator - INFO -    âœ… Updated 31 authorships
2026-01-23 13:23:36 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 0 locations
2026-01-23 13:23:36 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:23:36 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 16d4c49fc4f6
2026-01-23 13:23:36 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 13
2026-01-23 13:23:36 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 13
2026-01-23 13:23:36 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 31
2026-01-23 13:23:36 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 0
2026-01-23 13:23:36 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 13:23:36 - app.phase2.pg_ingest - INFO - âœ… INGESTION STEP 6 COMPLETE: Validation and fixes completed
2026-01-23 13:23:36 - app.phase2.pg_ingest - INFO -    Validation Statistics:
2026-01-23 13:23:36 - app.phase2.pg_ingest - INFO -       âœ… LLM fallback extractions: 13
2026-01-23 13:23:36 - app.phase2.pg_ingest - INFO -       âœ… affiliation_cache table updated by LLM: 13
2026-01-23 13:23:36 - app.phase2.pg_ingest - INFO -       âœ… Authorship records updated: 31
2026-01-23 13:23:36 - app.phase2.pg_ingest - INFO -       âœ… geocoding_cache table updated: 0
2026-01-23 13:23:36 - app.phase2.pg_ingest - INFO -       âœ… institution_geo table validated and added: 0
2026-01-23 13:23:36 - app.phase2.pg_ingest - INFO -       âš ï¸  Geocoding failures (null coordinates): 0
2026-01-23 13:23:36 - app.phase2.pg_ingest - INFO - ================================================================================
2026-01-23 13:23:36 - app.background_tasks - INFO - âœ… Background ingest completed for run 16d4c49fc4f6 in 47.91s
2026-01-23 13:23:36 - app.main - INFO - âœ… Background ingest completed after wait for run 16d4c49fc4f6
2026-01-23 13:23:48 - app.main - INFO - ================================================================================
2026-01-23 13:23:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-23 13:23:48 - app.main - INFO -    Min confidence: low
2026-01-23 13:23:48 - app.main - INFO - ================================================================================
2026-01-23 13:23:48 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 16d4c49fc4f6...
2026-01-23 13:23:48 - app.main - INFO - ================================================================================
2026-01-23 13:23:48 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-23 13:23:48 - app.main - INFO -    Min confidence: low
2026-01-23 13:23:48 - app.main - INFO - ================================================================================
2026-01-23 13:23:48 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 16d4c49fc4f6...
2026-01-23 13:23:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-23 13:23:48 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-23 13:23:51 - app.phase2.pg_geocoding - INFO - Geocoded 'Botswana' -> (-23.1681782, 24.5928742)
2026-01-23 13:23:52 - app.phase2.pg_geocoding - INFO - Geocoded 'Botswana' -> (-23.1681782, 24.5928742)
2026-01-23 13:23:53 - app.phase2.pg_geocoding - INFO - Geocoded 'Palestine' -> (31.5197847, 35.0494777)
2026-01-23 13:23:54 - app.phase2.pg_geocoding - INFO - Geocoded 'Palestine' -> (31.5197847, 35.0494777)
2026-01-23 13:23:55 - app.phase2.pg_geocoding - INFO - Geocoded 'Gambia' -> (13.470062, -15.4900464)
2026-01-23 13:23:56 - app.phase2.pg_geocoding - INFO - Geocoded 'Gambia' -> (13.470062, -15.4900464)
2026-01-23 13:23:57 - app.phase2.pg_geocoding - INFO - Geocoded 'Azerbaijan' -> (40.3936294, 47.7872508)
2026-01-23 13:23:57 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 74 countries
2026-01-23 13:23:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-23 13:23:57 - app.main - INFO -    Countries returned: 74
2026-01-23 13:23:57 - app.main - INFO - ================================================================================
2026-01-23 13:23:58 - app.phase2.pg_geocoding - INFO - Geocoded 'Azerbaijan' -> (40.3936294, 47.7872508)
2026-01-23 13:23:58 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 74 countries
2026-01-23 13:23:58 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-23 13:23:58 - app.main - INFO -    Countries returned: 74
2026-01-23 13:23:58 - app.main - INFO - ================================================================================
2026-01-23 13:25:40 - root - INFO - ================================================================================
2026-01-23 13:25:40 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 13:25:40 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-23 13:25:40 - root - INFO - ================================================================================
2026-01-23 13:25:41 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-23 13:25:41 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-23 15:19:40 - root - INFO - ================================================================================
2026-01-23 15:19:40 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 15:19:40 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-23 15:19:40 - root - INFO - ================================================================================
2026-01-23 15:19:41 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-23 15:19:41 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-23 15:20:29 - root - INFO - ================================================================================
2026-01-23 15:20:29 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 15:20:29 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-23 15:20:29 - root - INFO - ================================================================================
2026-01-23 15:20:30 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-23 15:20:30 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-23 15:46:26 - root - INFO - ================================================================================
2026-01-23 15:46:26 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 15:46:26 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-23 15:46:26 - root - INFO - ================================================================================
2026-01-23 15:46:27 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-23 15:46:27 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-23 15:46:33 - root - INFO - ================================================================================
2026-01-23 15:46:33 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 15:46:33 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-23 15:46:33 - root - INFO - ================================================================================
2026-01-23 15:46:34 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-23 15:46:34 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-23 15:47:11 - root - INFO - ================================================================================
2026-01-23 15:47:11 - root - INFO - Logging initialized - output to console and log.txt
2026-01-23 15:47:11 - root - INFO - Log file: /Users/osb3922/local_code/scholarmap/backend/log.txt
2026-01-23 15:47:11 - root - INFO - ================================================================================
2026-01-23 15:47:11 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-23 15:47:11 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-23 16:31:32 - app.main - INFO - ================================================================================
2026-01-23 16:31:32 - app.main - INFO - ðŸ” VALIDATION STARTED - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-23 16:31:32 - app.main - INFO - ================================================================================
2026-01-23 16:31:32 - app.phase2.affiliation_validator - INFO -    Pending institutions to validate: 0
2026-01-23 16:31:32 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 16:31:32 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 1: Getting authorships for run 597675a5f9fb...
2026-01-23 16:31:33 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 1 COMPLETE: Found 4436 authorships from 500 papers
2026-01-23 16:31:33 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 16:31:33 - app.phase2.affiliation_validator - INFO - ðŸ” VALIDATION STEP 2: Extracting unique location keys and batch querying geocoding_cache...
2026-01-23 16:31:33 - app.phase2.affiliation_validator - INFO -    Found 657 unique location keys from 4436 authorships
2026-01-23 16:31:33 - app.phase2.affiliation_validator - INFO -    Batch query complete: 657/657 found in cache
2026-01-23 16:31:33 - app.phase2.affiliation_validator - INFO -    Processing 0 unique location keys via Nominatim...
2026-01-23 16:31:33 - app.phase2.affiliation_validator - INFO -    Batch updating 4286 affiliations for 648 cached locations...
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO -    âœ… Batch updated affiliations for 648 locations (4286 total affiliations)
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION STEP 2-4 COMPLETE: Geocoding validation finished
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO -    Total authorships checked: 4436
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO -    Cache hits (valid): 4312
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO -    Cache misses: 0
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO -    Nominatim successes: 0
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO -    Nominatim failures: 0
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO -    Unique error affiliations: 20
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO -    Error PMIDs: 15
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO - ðŸ”§ VALIDATION STEP 5: Fixing 20 error affiliations with LLM...
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO -    Collecting 20 unique error affiliations for LLM fix
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO -    Calling LLM extractor (batch size: 20)...
2026-01-23 16:31:53 - app.phase2.affiliation_extractor - INFO -    Checking affiliation_cache table for 20 affiliations...
2026-01-23 16:31:53 - app.phase2.affiliation_extractor - INFO -    Trying institution_matcher (institution_geo table) for 20 affiliations...
2026-01-23 16:31:53 - app.phase2.institution_matcher - INFO -    Loaded 3648 institutions to memory (3648 normalized names, 219 aliases)
2026-01-23 16:31:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 2/20 (10%), matches found: 2
2026-01-23 16:31:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 4/20 (20%), matches found: 4
2026-01-23 16:31:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 6/20 (30%), matches found: 6
2026-01-23 16:31:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 8/20 (40%), matches found: 8
2026-01-23 16:31:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 10/20 (50%), matches found: 10
2026-01-23 16:31:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 12/20 (60%), matches found: 12
2026-01-23 16:31:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 14/20 (70%), matches found: 14
2026-01-23 16:31:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 16/20 (80%), matches found: 16
2026-01-23 16:31:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 18/20 (90%), matches found: 18
2026-01-23 16:31:53 - app.phase2.institution_matcher - INFO -    institution_geo table matching progress: 20/20 (100%), matches found: 20
2026-01-23 16:31:53 - app.phase2.affiliation_extractor - INFO -    âœ… institution_geo table: 20 matches found
2026-01-23 16:31:53 - app.phase2.affiliation_extractor - INFO -    âœ… All 20 affiliations found in cache/institution_geo
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO -    LLM extraction complete: 20 results from 0 LLM calls
2026-01-23 16:31:53 - app.phase2.affiliation_validator - INFO -    Updating affiliation_cache with 20 LLM results...
2026-01-23 16:31:54 - app.phase2.affiliation_validator - INFO -    âœ… Updated affiliation_cache table with 20 LLM results
2026-01-23 16:31:54 - app.phase2.affiliation_validator - INFO -    Re-geocoding and updating authorships...
2026-01-23 16:31:54 - app.phase2.affiliation_validator - INFO -    Processing 9 unique location keys for re-geocoding...
2026-01-23 16:31:57 - app.phase2.affiliation_validator - INFO -    âœ… Fixed 20 affiliations
2026-01-23 16:31:57 - app.phase2.affiliation_validator - INFO -    âœ… Updated 26 authorships
2026-01-23 16:31:57 - app.phase2.affiliation_validator - INFO -    âœ… Re-geocoded 0 locations
2026-01-23 16:31:57 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 16:31:57 - app.phase2.affiliation_validator - INFO - âœ… VALIDATION COMPLETE - Run: 597675a5f9fb
2026-01-23 16:31:57 - app.phase2.affiliation_validator - INFO -    LLM fallback extractions: 20
2026-01-23 16:31:57 - app.phase2.affiliation_validator - INFO -    affiliation_cache table updated by LLM: 20
2026-01-23 16:31:57 - app.phase2.affiliation_validator - INFO -    Authorship records updated: 26
2026-01-23 16:31:57 - app.phase2.affiliation_validator - INFO -    geocoding_cache table updated: 0
2026-01-23 16:31:57 - app.phase2.affiliation_validator - INFO - â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
2026-01-23 16:31:57 - app.main - INFO - ================================================================================
2026-01-23 16:31:57 - app.main - INFO - âœ… VALIDATION COMPLETED - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-23 16:31:57 - app.main - INFO -    Total authorships: 4436
2026-01-23 16:31:57 - app.main - INFO -    Geocoding failures: 0
2026-01-23 16:31:57 - app.main - INFO -    Affiliations fixed: 20
2026-01-23 16:31:57 - app.main - INFO -    Authorships updated: 26
2026-01-23 16:31:57 - app.main - INFO -    Geocoding updated: 0
2026-01-23 16:31:57 - app.main - INFO - ================================================================================
2026-01-24 12:38:35 - root - INFO - ================================================================================
2026-01-24 12:38:35 - root - INFO - Logging initialized - output to console and log.txt
2026-01-24 12:38:35 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-24 12:38:35 - root - INFO - ================================================================================
2026-01-24 12:38:37 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-24 12:38:37 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-24 12:40:42 - app.main - INFO - ================================================================================
2026-01-24 12:40:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 12:40:42 - app.main - INFO -    Min confidence: low
2026-01-24 12:40:42 - app.main - INFO - ================================================================================
2026-01-24 12:40:42 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-24 12:40:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:40:42 - app.main - INFO - ================================================================================
2026-01-24 12:40:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 12:40:42 - app.main - INFO -    Min confidence: low
2026-01-24 12:40:42 - app.main - INFO - ================================================================================
2026-01-24 12:40:42 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-24 12:40:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:40:43 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 53 countries
2026-01-24 12:40:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:40:43 - app.main - INFO -    Countries returned: 53
2026-01-24 12:40:43 - app.main - INFO - ================================================================================
2026-01-24 12:40:43 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 53 countries
2026-01-24 12:40:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:40:43 - app.main - INFO -    Countries returned: 53
2026-01-24 12:40:43 - app.main - INFO - ================================================================================
2026-01-24 12:40:55 - app.main - INFO - ================================================================================
2026-01-24 12:40:55 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 12:40:55 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 12:40:55 - app.main - INFO - ================================================================================
2026-01-24 12:40:55 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 12:40:55 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:40:55 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 50 cities in China
2026-01-24 12:40:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 12:40:56 - app.main - INFO -    Cities returned: 50
2026-01-24 12:40:56 - app.main - INFO - ================================================================================
2026-01-24 12:45:04 - app.main - INFO - ================================================================================
2026-01-24 12:45:04 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 12:45:04 - app.main - INFO -    Country: China, City: Xi'an, Min confidence: low
2026-01-24 12:45:04 - app.main - INFO - ================================================================================
2026-01-24 12:45:04 - app.phase2.pg_aggregations - INFO -    Getting city map for Xi'an, China...
2026-01-24 12:45:04 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:45:04 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 9 institutions in Xi'an, China
2026-01-24 12:45:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Xi'an, China
2026-01-24 12:45:04 - app.main - INFO -    Institutions returned: 9
2026-01-24 12:45:04 - app.main - INFO - ================================================================================
2026-01-24 12:49:37 - app.main - INFO - ================================================================================
2026-01-24 12:49:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:49:37 - app.main - INFO -    Min confidence: low
2026-01-24 12:49:37 - app.main - INFO - ================================================================================
2026-01-24 12:49:37 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 12:49:37 - app.main - INFO - ================================================================================
2026-01-24 12:49:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:49:37 - app.main - INFO -    Min confidence: low
2026-01-24 12:49:37 - app.main - INFO - ================================================================================
2026-01-24 12:49:37 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 12:49:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:49:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:49:38 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 12:49:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:49:38 - app.main - INFO -    Countries returned: 84
2026-01-24 12:49:38 - app.main - INFO - ================================================================================
2026-01-24 12:49:38 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 12:49:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:49:38 - app.main - INFO -    Countries returned: 84
2026-01-24 12:49:38 - app.main - INFO - ================================================================================
2026-01-24 12:51:47 - app.main - INFO - ================================================================================
2026-01-24 12:51:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:51:47 - app.main - INFO -    Min confidence: low
2026-01-24 12:51:47 - app.main - INFO - ================================================================================
2026-01-24 12:51:47 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 12:51:47 - app.main - INFO - ================================================================================
2026-01-24 12:51:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:51:47 - app.main - INFO -    Min confidence: low
2026-01-24 12:51:47 - app.main - INFO - ================================================================================
2026-01-24 12:51:47 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 12:51:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:51:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:51:48 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 12:51:48 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 12:51:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:51:48 - app.main - INFO -    Countries returned: 84
2026-01-24 12:51:48 - app.main - INFO - ================================================================================
2026-01-24 12:51:48 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:51:48 - app.main - INFO -    Countries returned: 84
2026-01-24 12:51:48 - app.main - INFO - ================================================================================
2026-01-24 12:52:47 - root - INFO - ================================================================================
2026-01-24 12:52:47 - root - INFO - Logging initialized - output to console and log.txt
2026-01-24 12:52:47 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-24 12:52:47 - root - INFO - ================================================================================
2026-01-24 12:52:49 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-24 12:52:49 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-24 12:53:42 - app.main - INFO - ================================================================================
2026-01-24 12:53:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:53:42 - app.main - INFO -    Min confidence: low
2026-01-24 12:53:42 - app.main - INFO - ================================================================================
2026-01-24 12:53:42 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 12:53:42 - app.main - INFO - ================================================================================
2026-01-24 12:53:42 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:53:42 - app.main - INFO -    Min confidence: low
2026-01-24 12:53:42 - app.main - INFO - ================================================================================
2026-01-24 12:53:42 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 12:53:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:53:42 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:53:43 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 12:53:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:53:43 - app.main - INFO -    Countries returned: 84
2026-01-24 12:53:43 - app.main - INFO - ================================================================================
2026-01-24 12:53:43 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 12:53:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:53:43 - app.main - INFO -    Countries returned: 84
2026-01-24 12:53:43 - app.main - INFO - ================================================================================
2026-01-24 12:54:35 - app.main - INFO - ================================================================================
2026-01-24 12:54:35 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:54:35 - app.main - INFO -    Country: Thailand, Min confidence: low
2026-01-24 12:54:35 - app.main - INFO - ================================================================================
2026-01-24 12:54:35 - app.phase2.pg_aggregations - INFO -    Getting country map for Thailand (normalized: Thailand)...
2026-01-24 12:54:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:54:36 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Thailand
2026-01-24 12:54:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Thailand
2026-01-24 12:54:36 - app.main - INFO -    Cities returned: 3
2026-01-24 12:54:36 - app.main - INFO - ================================================================================
2026-01-24 12:55:51 - app.main - INFO - ================================================================================
2026-01-24 12:55:51 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:55:51 - app.main - INFO -    Min confidence: low
2026-01-24 12:55:51 - app.main - INFO - ================================================================================
2026-01-24 12:55:51 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 12:55:51 - app.main - INFO - ================================================================================
2026-01-24 12:55:51 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:55:51 - app.main - INFO -    Min confidence: low
2026-01-24 12:55:51 - app.main - INFO - ================================================================================
2026-01-24 12:55:51 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 12:55:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:55:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:55:51 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 12:55:51 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:55:51 - app.main - INFO -    Countries returned: 84
2026-01-24 12:55:51 - app.main - INFO - ================================================================================
2026-01-24 12:55:52 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 12:55:52 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:55:52 - app.main - INFO -    Countries returned: 84
2026-01-24 12:55:52 - app.main - INFO - ================================================================================
2026-01-24 12:56:02 - app.main - INFO - ================================================================================
2026-01-24 12:56:02 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:56:02 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 12:56:02 - app.main - INFO - ================================================================================
2026-01-24 12:56:02 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 12:56:02 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:56:04 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Electronic Science and Technology of China, China' (from affiliation: Department of Oncology & Cancer Institute, Sichuan Academy of Medical Sciences, Sichuan Provincial People's Hospital, University of Electronic Science and Technology of China, Chengdu, Sichuan, China.)
2026-01-24 12:56:05 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 81 cities in China
2026-01-24 12:56:05 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 12:56:05 - app.main - INFO -    Cities returned: 81
2026-01-24 12:56:05 - app.main - INFO - ================================================================================
2026-01-24 12:56:21 - app.main - INFO - ================================================================================
2026-01-24 12:56:21 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:56:21 - app.main - INFO -    Country: China, City: Beijing, Min confidence: low
2026-01-24 12:56:21 - app.main - INFO - ================================================================================
2026-01-24 12:56:21 - app.phase2.pg_aggregations - INFO -    Getting city map for Beijing, China...
2026-01-24 12:56:21 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:56:21 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 25 institutions in Beijing, China
2026-01-24 12:56:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Beijing, China
2026-01-24 12:56:21 - app.main - INFO -    Institutions returned: 25
2026-01-24 12:56:21 - app.main - INFO - ================================================================================
2026-01-24 12:56:34 - app.main - INFO - ================================================================================
2026-01-24 12:56:34 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Institution Scholars - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:56:34 - app.main - INFO -    Institution: Peking University, Country: China, City: Beijing
2026-01-24 12:56:34 - app.main - INFO -    Min confidence: low
2026-01-24 12:56:34 - app.main - INFO - ================================================================================
2026-01-24 12:56:34 - app.phase2.pg_aggregations - INFO -    Getting scholars for Peking University, Beijing, China...
2026-01-24 12:56:34 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:56:38 - app.phase2.pg_aggregations - INFO -    âœ… Institution scholars aggregation complete: 44 scholars at Peking University
2026-01-24 12:56:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Institution Scholars: Peking University
2026-01-24 12:56:38 - app.main - INFO -    Scholars returned: 44
2026-01-24 12:56:38 - app.main - INFO - ================================================================================
2026-01-24 12:57:02 - app.main - INFO - ================================================================================
2026-01-24 12:57:02 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:57:02 - app.main - INFO -    Min confidence: low
2026-01-24 12:57:02 - app.main - INFO - ================================================================================
2026-01-24 12:57:02 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 12:57:02 - app.main - INFO - ================================================================================
2026-01-24 12:57:02 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:57:02 - app.main - INFO -    Min confidence: low
2026-01-24 12:57:02 - app.main - INFO - ================================================================================
2026-01-24 12:57:02 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 12:57:02 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:57:02 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:57:03 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 12:57:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:57:03 - app.main - INFO -    Countries returned: 84
2026-01-24 12:57:03 - app.main - INFO - ================================================================================
2026-01-24 12:57:03 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 12:57:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:57:03 - app.main - INFO -    Countries returned: 84
2026-01-24 12:57:03 - app.main - INFO - ================================================================================
2026-01-24 12:57:11 - app.main - INFO - ================================================================================
2026-01-24 12:57:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:57:11 - app.main - INFO -    Country: Cambodia, Min confidence: low
2026-01-24 12:57:11 - app.main - INFO - ================================================================================
2026-01-24 12:57:11 - app.phase2.pg_aggregations - INFO -    Getting country map for Cambodia (normalized: Cambodia)...
2026-01-24 12:57:12 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:57:12 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Cambodia
2026-01-24 12:57:12 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Cambodia
2026-01-24 12:57:12 - app.main - INFO -    Cities returned: 1
2026-01-24 12:57:12 - app.main - INFO - ================================================================================
2026-01-24 12:57:28 - app.main - INFO - ================================================================================
2026-01-24 12:57:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:57:28 - app.main - INFO -    Country: Thailand, Min confidence: low
2026-01-24 12:57:28 - app.main - INFO - ================================================================================
2026-01-24 12:57:28 - app.phase2.pg_aggregations - INFO -    Getting country map for Thailand (normalized: Thailand)...
2026-01-24 12:57:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:57:29 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Thailand
2026-01-24 12:57:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Thailand
2026-01-24 12:57:29 - app.main - INFO -    Cities returned: 3
2026-01-24 12:57:29 - app.main - INFO - ================================================================================
2026-01-24 12:57:55 - app.main - INFO - ================================================================================
2026-01-24 12:57:55 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:57:55 - app.main - INFO -    Country: Thailand, City: Prince Of Songkla, Min confidence: low
2026-01-24 12:57:55 - app.main - INFO - ================================================================================
2026-01-24 12:57:55 - app.phase2.pg_aggregations - INFO -    Getting city map for Prince Of Songkla, Thailand...
2026-01-24 12:57:55 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:57:55 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Prince Of Songkla, Thailand
2026-01-24 12:57:55 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Prince Of Songkla, Thailand
2026-01-24 12:57:55 - app.main - INFO -    Institutions returned: 1
2026-01-24 12:57:55 - app.main - INFO - ================================================================================
2026-01-24 12:58:06 - app.main - INFO - ================================================================================
2026-01-24 12:58:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Institution Scholars - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:58:06 - app.main - INFO -    Institution: Prince of Songkla University, Country: Thailand, City: Prince Of Songkla
2026-01-24 12:58:06 - app.main - INFO -    Min confidence: low
2026-01-24 12:58:06 - app.main - INFO - ================================================================================
2026-01-24 12:58:06 - app.phase2.pg_aggregations - INFO -    Getting scholars for Prince of Songkla University, Prince Of Songkla, Thailand...
2026-01-24 12:58:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:58:06 - app.phase2.pg_aggregations - INFO -    âœ… Institution scholars aggregation complete: 1 scholars at Prince of Songkla University
2026-01-24 12:58:06 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Institution Scholars: Prince of Songkla University
2026-01-24 12:58:06 - app.main - INFO -    Scholars returned: 1
2026-01-24 12:58:06 - app.main - INFO - ================================================================================
2026-01-24 12:58:43 - app.main - INFO - ================================================================================
2026-01-24 12:58:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:58:43 - app.main - INFO -    Min confidence: low
2026-01-24 12:58:43 - app.main - INFO - ================================================================================
2026-01-24 12:58:43 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 12:58:43 - app.main - INFO - ================================================================================
2026-01-24 12:58:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:58:43 - app.main - INFO -    Min confidence: low
2026-01-24 12:58:43 - app.main - INFO - ================================================================================
2026-01-24 12:58:43 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 12:58:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:58:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:58:44 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 12:58:44 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:58:44 - app.main - INFO -    Countries returned: 84
2026-01-24 12:58:44 - app.main - INFO - ================================================================================
2026-01-24 12:58:44 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 12:58:44 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 12:58:44 - app.main - INFO -    Countries returned: 84
2026-01-24 12:58:44 - app.main - INFO - ================================================================================
2026-01-24 12:59:31 - app.main - INFO - ================================================================================
2026-01-24 12:59:31 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:59:31 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-24 12:59:31 - app.main - INFO - ================================================================================
2026-01-24 12:59:31 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-24 12:59:31 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:59:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 27 cities in United Kingdom
2026-01-24 12:59:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United Kingdom
2026-01-24 12:59:31 - app.main - INFO -    Cities returned: 27
2026-01-24 12:59:31 - app.main - INFO - ================================================================================
2026-01-24 12:59:56 - app.main - INFO - ================================================================================
2026-01-24 12:59:56 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 12:59:56 - app.main - INFO -    Country: United Kingdom, City: Oxford, Min confidence: low
2026-01-24 12:59:56 - app.main - INFO - ================================================================================
2026-01-24 12:59:56 - app.phase2.pg_aggregations - INFO -    Getting city map for Oxford, United Kingdom...
2026-01-24 12:59:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 12:59:56 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Oxford, United Kingdom
2026-01-24 12:59:56 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Oxford, United Kingdom
2026-01-24 12:59:56 - app.main - INFO -    Institutions returned: 2
2026-01-24 12:59:56 - app.main - INFO - ================================================================================
2026-01-24 13:20:22 - app.main - INFO - ================================================================================
2026-01-24 13:20:22 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:20:22 - app.main - INFO -    Min confidence: low
2026-01-24 13:20:22 - app.main - INFO - ================================================================================
2026-01-24 13:20:22 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-24 13:20:22 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:20:23 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 65 countries
2026-01-24 13:20:23 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 13:20:23 - app.main - INFO -    Countries returned: 65
2026-01-24 13:20:23 - app.main - INFO - ================================================================================
2026-01-24 13:21:21 - root - INFO - ================================================================================
2026-01-24 13:21:21 - root - INFO - Logging initialized - output to console and log.txt
2026-01-24 13:21:21 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-24 13:21:21 - root - INFO - ================================================================================
2026-01-24 13:21:24 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-24 13:21:24 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-24 13:21:37 - app.main - INFO - ================================================================================
2026-01-24 13:21:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:21:37 - app.main - INFO -    Min confidence: low
2026-01-24 13:21:37 - app.main - INFO - ================================================================================
2026-01-24 13:21:37 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-24 13:21:38 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:21:39 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 65 countries
2026-01-24 13:21:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 13:21:39 - app.main - INFO -    Countries returned: 65
2026-01-24 13:21:39 - app.main - INFO - ================================================================================
2026-01-24 13:24:00 - root - INFO - ================================================================================
2026-01-24 13:24:00 - root - INFO - Logging initialized - output to console and log.txt
2026-01-24 13:24:00 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-24 13:24:00 - root - INFO - ================================================================================
2026-01-24 13:24:02 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-24 13:24:02 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-24 13:24:16 - app.main - INFO - ================================================================================
2026-01-24 13:24:16 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:24:16 - app.main - INFO -    Min confidence: low
2026-01-24 13:24:16 - app.main - INFO - ================================================================================
2026-01-24 13:24:16 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-24 13:24:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:24:17 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 65 countries
2026-01-24 13:24:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 13:24:17 - app.main - INFO -    Countries returned: 65
2026-01-24 13:24:17 - app.main - INFO - ================================================================================
2026-01-24 13:25:09 - app.main - INFO - ================================================================================
2026-01-24 13:25:09 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-24 13:25:09 - app.main - INFO -    Min confidence: low
2026-01-24 13:25:09 - app.main - INFO - ================================================================================
2026-01-24 13:25:09 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 19d981d1d732...
2026-01-24 13:25:10 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:11 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 68 countries
2026-01-24 13:25:11 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 13:25:11 - app.main - INFO -    Countries returned: 68
2026-01-24 13:25:11 - app.main - INFO - ================================================================================
2026-01-24 13:25:11 - app.main - INFO - ================================================================================
2026-01-24 13:25:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-24 13:25:11 - app.main - INFO -    Min confidence: low
2026-01-24 13:25:11 - app.main - INFO - ================================================================================
2026-01-24 13:25:11 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 16d4c49fc4f6...
2026-01-24 13:25:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:12 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 72 countries
2026-01-24 13:25:12 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 13:25:12 - app.main - INFO -    Countries returned: 72
2026-01-24 13:25:12 - app.main - INFO - ================================================================================
2026-01-24 13:25:12 - app.main - INFO - ================================================================================
2026-01-24 13:25:12 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 1893fb47f453
2026-01-24 13:25:12 - app.main - INFO -    Min confidence: low
2026-01-24 13:25:12 - app.main - INFO - ================================================================================
2026-01-24 13:25:12 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 1893fb47f453...
2026-01-24 13:25:12 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:13 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 65 countries
2026-01-24 13:25:13 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 13:25:13 - app.main - INFO -    Countries returned: 65
2026-01-24 13:25:13 - app.main - INFO - ================================================================================
2026-01-24 13:25:13 - app.main - INFO - ================================================================================
2026-01-24 13:25:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 13:25:13 - app.main - INFO -    Min confidence: low
2026-01-24 13:25:13 - app.main - INFO - ================================================================================
2026-01-24 13:25:13 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 597675a5f9fb...
2026-01-24 13:25:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:14 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 84 countries
2026-01-24 13:25:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 13:25:14 - app.main - INFO -    Countries returned: 84
2026-01-24 13:25:14 - app.main - INFO - ================================================================================
2026-01-24 13:25:15 - app.main - INFO - ================================================================================
2026-01-24 13:25:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:15 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 13:25:15 - app.main - INFO - ================================================================================
2026-01-24 13:25:15 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 13:25:15 - app.main - INFO - ================================================================================
2026-01-24 13:25:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:15 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 13:25:15 - app.main - INFO - ================================================================================
2026-01-24 13:25:15 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 13:25:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:15 - app.main - INFO - ================================================================================
2026-01-24 13:25:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:15 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 13:25:15 - app.main - INFO - ================================================================================
2026-01-24 13:25:15 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 13:25:15 - app.main - INFO - ================================================================================
2026-01-24 13:25:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:15 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 13:25:15 - app.main - INFO - ================================================================================
2026-01-24 13:25:15 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 13:25:16 - app.main - INFO - ================================================================================
2026-01-24 13:25:16 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:16 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 13:25:16 - app.main - INFO - ================================================================================
2026-01-24 13:25:16 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 13:25:16 - app.main - INFO - ================================================================================
2026-01-24 13:25:16 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:16 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 13:25:16 - app.main - INFO - ================================================================================
2026-01-24 13:25:16 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 13:25:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 55 cities in China
2026-01-24 13:25:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 13:25:16 - app.main - INFO -    Cities returned: 55
2026-01-24 13:25:16 - app.main - INFO - ================================================================================
2026-01-24 13:25:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 55 cities in China
2026-01-24 13:25:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 13:25:16 - app.main - INFO -    Cities returned: 55
2026-01-24 13:25:16 - app.main - INFO - ================================================================================
2026-01-24 13:25:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 55 cities in China
2026-01-24 13:25:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 13:25:16 - app.main - INFO -    Cities returned: 55
2026-01-24 13:25:16 - app.main - INFO - ================================================================================
2026-01-24 13:25:17 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 55 cities in China
2026-01-24 13:25:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 13:25:17 - app.main - INFO -    Cities returned: 55
2026-01-24 13:25:17 - app.main - INFO - ================================================================================
2026-01-24 13:25:17 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 55 cities in China
2026-01-24 13:25:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 13:25:17 - app.main - INFO -    Cities returned: 55
2026-01-24 13:25:17 - app.main - INFO - ================================================================================
2026-01-24 13:25:17 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 55 cities in China
2026-01-24 13:25:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 13:25:17 - app.main - INFO -    Cities returned: 55
2026-01-24 13:25:17 - app.main - INFO - ================================================================================
2026-01-24 13:25:30 - app.main - INFO - ================================================================================
2026-01-24 13:25:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:30 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-24 13:25:30 - app.main - INFO - ================================================================================
2026-01-24 13:25:30 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-24 13:25:31 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:31 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 45 cities in United States
2026-01-24 13:25:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-24 13:25:31 - app.main - INFO -    Cities returned: 45
2026-01-24 13:25:31 - app.main - INFO - ================================================================================
2026-01-24 13:25:32 - app.main - INFO - ================================================================================
2026-01-24 13:25:32 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:32 - app.main - INFO -    Country: India, Min confidence: low
2026-01-24 13:25:32 - app.main - INFO - ================================================================================
2026-01-24 13:25:32 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-24 13:25:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 37 cities in India
2026-01-24 13:25:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-24 13:25:32 - app.main - INFO -    Cities returned: 37
2026-01-24 13:25:32 - app.main - INFO - ================================================================================
2026-01-24 13:25:33 - app.main - INFO - ================================================================================
2026-01-24 13:25:33 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:33 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-24 13:25:33 - app.main - INFO - ================================================================================
2026-01-24 13:25:33 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-24 13:25:33 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:35 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Naples - Federico II, Italy' (from affiliation: Augmented Reality for Health Monitoring Laboratory (ARHeMLab), DIETI, University of Naples Federico II, Naples, Italy. | Department of Chemical, Materials and Industrial Production Engineering (DICMaPI), UniversitÃ  degli Studi di Napoli Federico II, Naples, Italy.)
2026-01-24 13:25:36 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 26 cities in Italy
2026-01-24 13:25:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-24 13:25:36 - app.main - INFO -    Cities returned: 26
2026-01-24 13:25:36 - app.main - INFO - ================================================================================
2026-01-24 13:25:36 - app.main - INFO - ================================================================================
2026-01-24 13:25:36 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:36 - app.main - INFO -    Country: South Korea, Min confidence: low
2026-01-24 13:25:36 - app.main - INFO - ================================================================================
2026-01-24 13:25:36 - app.phase2.pg_aggregations - INFO -    Getting country map for South Korea (normalized: South Korea)...
2026-01-24 13:25:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in South Korea
2026-01-24 13:25:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: South Korea
2026-01-24 13:25:37 - app.main - INFO -    Cities returned: 8
2026-01-24 13:25:37 - app.main - INFO - ================================================================================
2026-01-24 13:25:37 - app.main - INFO - ================================================================================
2026-01-24 13:25:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:37 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-24 13:25:37 - app.main - INFO - ================================================================================
2026-01-24 13:25:37 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-24 13:25:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 10 cities in Australia
2026-01-24 13:25:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-24 13:25:38 - app.main - INFO -    Cities returned: 10
2026-01-24 13:25:38 - app.main - INFO - ================================================================================
2026-01-24 13:25:39 - app.main - INFO - ================================================================================
2026-01-24 13:25:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:39 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-24 13:25:39 - app.main - INFO - ================================================================================
2026-01-24 13:25:39 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-24 13:25:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 14 cities in Germany
2026-01-24 13:25:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-24 13:25:39 - app.main - INFO -    Cities returned: 14
2026-01-24 13:25:39 - app.main - INFO - ================================================================================
2026-01-24 13:25:40 - app.main - INFO - ================================================================================
2026-01-24 13:25:40 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:40 - app.main - INFO -    Country: France, Min confidence: low
2026-01-24 13:25:40 - app.main - INFO - ================================================================================
2026-01-24 13:25:40 - app.phase2.pg_aggregations - INFO -    Getting country map for France (normalized: France)...
2026-01-24 13:25:40 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:42 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Bron Cedex, France' (from affiliation: Inserm, Stem Cell and Brain Research Institute U1208, 18 Avenue Doyen Lepine, 69500 Bron, France.)
2026-01-24 13:25:42 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 14 cities in France
2026-01-24 13:25:42 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: France
2026-01-24 13:25:42 - app.main - INFO -    Cities returned: 14
2026-01-24 13:25:42 - app.main - INFO - ================================================================================
2026-01-24 13:25:43 - app.main - INFO - ================================================================================
2026-01-24 13:25:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:43 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-24 13:25:43 - app.main - INFO - ================================================================================
2026-01-24 13:25:43 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-24 13:25:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:45 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Chungbuk Republic of Korea, United Kingdom' (from affiliation: Department of Computer Science, Chungbuk National University, Cheongju, Republic of Korea. Electronic address: hyeong.y.park@chungbuk.ac.kr.)
2026-01-24 13:25:45 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 12 cities in United Kingdom
2026-01-24 13:25:45 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United Kingdom
2026-01-24 13:25:45 - app.main - INFO -    Cities returned: 12
2026-01-24 13:25:45 - app.main - INFO - ================================================================================
2026-01-24 13:25:46 - app.main - INFO - ================================================================================
2026-01-24 13:25:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:25:46 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-24 13:25:46 - app.main - INFO - ================================================================================
2026-01-24 13:25:46 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-24 13:25:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:46 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Japan
2026-01-24 13:25:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-24 13:25:46 - app.main - INFO -    Cities returned: 8
2026-01-24 13:25:46 - app.main - INFO - ================================================================================
2026-01-24 13:25:47 - app.main - INFO - ================================================================================
2026-01-24 13:25:47 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-24 13:25:47 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 13:25:47 - app.main - INFO - ================================================================================
2026-01-24 13:25:47 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 13:25:47 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:49 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Electronic Science and Technology of China, China' (from affiliation: The Clinical Hospital of Chengdu Brain Science Institute, MOE Key Lab for Neuroinformation, School of Life Science and Technology, University of Electronic Science and Technology of China, Chengdu 610036, China; Chengdu Fourth People's Hospital, Chengdu 610036, China.)
2026-01-24 13:25:49 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 79 cities in China
2026-01-24 13:25:49 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 13:25:49 - app.main - INFO -    Cities returned: 79
2026-01-24 13:25:49 - app.main - INFO - ================================================================================
2026-01-24 13:25:50 - app.main - INFO - ================================================================================
2026-01-24 13:25:50 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-24 13:25:50 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-24 13:25:50 - app.main - INFO - ================================================================================
2026-01-24 13:25:50 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-24 13:25:50 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:50 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 80 cities in United States
2026-01-24 13:25:50 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-24 13:25:50 - app.main - INFO -    Cities returned: 80
2026-01-24 13:25:50 - app.main - INFO - ================================================================================
2026-01-24 13:25:51 - app.main - INFO - ================================================================================
2026-01-24 13:25:51 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-24 13:25:51 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-24 13:25:51 - app.main - INFO - ================================================================================
2026-01-24 13:25:51 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-24 13:25:51 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:53 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Naples - Federico II, Italy' (from affiliation: Neurology Unit, Department of Neuroscience, Reproductive Sciences and Dentistry, University of Naples "Federico II", Naples, Italy.)
2026-01-24 13:25:53 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 26 cities in Italy
2026-01-24 13:25:53 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-24 13:25:53 - app.main - INFO -    Cities returned: 26
2026-01-24 13:25:53 - app.main - INFO - ================================================================================
2026-01-24 13:25:54 - app.main - INFO - ================================================================================
2026-01-24 13:25:54 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-24 13:25:54 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-24 13:25:54 - app.main - INFO - ================================================================================
2026-01-24 13:25:54 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-24 13:25:54 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:54 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 17 cities in Canada
2026-01-24 13:25:54 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Canada
2026-01-24 13:25:54 - app.main - INFO -    Cities returned: 17
2026-01-24 13:25:54 - app.main - INFO - ================================================================================
2026-01-24 13:25:55 - app.main - INFO - ================================================================================
2026-01-24 13:25:55 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-24 13:25:55 - app.main - INFO -    Country: India, Min confidence: low
2026-01-24 13:25:55 - app.main - INFO - ================================================================================
2026-01-24 13:25:55 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-24 13:25:55 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:55 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 28 cities in India
2026-01-24 13:25:55 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-24 13:25:55 - app.main - INFO -    Cities returned: 28
2026-01-24 13:25:55 - app.main - INFO - ================================================================================
2026-01-24 13:25:56 - app.main - INFO - ================================================================================
2026-01-24 13:25:56 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-24 13:25:56 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-24 13:25:56 - app.main - INFO - ================================================================================
2026-01-24 13:25:56 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-24 13:25:56 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:57 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 19 cities in Germany
2026-01-24 13:25:57 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-24 13:25:57 - app.main - INFO -    Cities returned: 19
2026-01-24 13:25:57 - app.main - INFO - ================================================================================
2026-01-24 13:25:57 - app.main - INFO - ================================================================================
2026-01-24 13:25:57 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-24 13:25:57 - app.main - INFO -    Country: Brazil, Min confidence: low
2026-01-24 13:25:57 - app.main - INFO - ================================================================================
2026-01-24 13:25:57 - app.phase2.pg_aggregations - INFO -    Getting country map for Brazil (normalized: Brazil)...
2026-01-24 13:25:57 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:58 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 16 cities in Brazil
2026-01-24 13:25:58 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brazil
2026-01-24 13:25:58 - app.main - INFO -    Cities returned: 16
2026-01-24 13:25:58 - app.main - INFO - ================================================================================
2026-01-24 13:25:58 - app.main - INFO - ================================================================================
2026-01-24 13:25:58 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-24 13:25:58 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-24 13:25:58 - app.main - INFO - ================================================================================
2026-01-24 13:25:58 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-24 13:25:58 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:25:59 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 9 cities in Iran
2026-01-24 13:25:59 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Iran
2026-01-24 13:25:59 - app.main - INFO -    Cities returned: 9
2026-01-24 13:25:59 - app.main - INFO - ================================================================================
2026-01-24 13:25:59 - app.main - INFO - ================================================================================
2026-01-24 13:25:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-24 13:25:59 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-24 13:25:59 - app.main - INFO - ================================================================================
2026-01-24 13:25:59 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-24 13:25:59 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:00 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 18 cities in United Kingdom
2026-01-24 13:26:00 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United Kingdom
2026-01-24 13:26:00 - app.main - INFO -    Cities returned: 18
2026-01-24 13:26:00 - app.main - INFO - ================================================================================
2026-01-24 13:26:00 - app.main - INFO - ================================================================================
2026-01-24 13:26:00 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 19d981d1d732
2026-01-24 13:26:00 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-24 13:26:00 - app.main - INFO - ================================================================================
2026-01-24 13:26:00 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-24 13:26:01 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:01 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 17 cities in Australia
2026-01-24 13:26:01 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-24 13:26:01 - app.main - INFO -    Cities returned: 17
2026-01-24 13:26:01 - app.main - INFO - ================================================================================
2026-01-24 13:26:01 - app.main - INFO - ================================================================================
2026-01-24 13:26:01 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-24 13:26:01 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 13:26:01 - app.main - INFO - ================================================================================
2026-01-24 13:26:01 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 13:26:02 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:02 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 83 cities in China
2026-01-24 13:26:02 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 13:26:02 - app.main - INFO -    Cities returned: 83
2026-01-24 13:26:02 - app.main - INFO - ================================================================================
2026-01-24 13:26:02 - app.main - INFO - ================================================================================
2026-01-24 13:26:02 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-24 13:26:02 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-24 13:26:02 - app.main - INFO - ================================================================================
2026-01-24 13:26:02 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-24 13:26:03 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:03 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 82 cities in United States
2026-01-24 13:26:03 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-24 13:26:03 - app.main - INFO -    Cities returned: 82
2026-01-24 13:26:03 - app.main - INFO - ================================================================================
2026-01-24 13:26:04 - app.main - INFO - ================================================================================
2026-01-24 13:26:04 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-24 13:26:04 - app.main - INFO -    Country: India, Min confidence: low
2026-01-24 13:26:04 - app.main - INFO - ================================================================================
2026-01-24 13:26:04 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-24 13:26:04 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:04 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 55 cities in India
2026-01-24 13:26:04 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-24 13:26:04 - app.main - INFO -    Cities returned: 55
2026-01-24 13:26:04 - app.main - INFO - ================================================================================
2026-01-24 13:26:05 - app.main - INFO - ================================================================================
2026-01-24 13:26:05 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-24 13:26:05 - app.main - INFO -    Country: South Korea, Min confidence: low
2026-01-24 13:26:05 - app.main - INFO - ================================================================================
2026-01-24 13:26:05 - app.phase2.pg_aggregations - INFO -    Getting country map for South Korea (normalized: South Korea)...
2026-01-24 13:26:05 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:05 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 13 cities in South Korea
2026-01-24 13:26:05 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: South Korea
2026-01-24 13:26:05 - app.main - INFO -    Cities returned: 13
2026-01-24 13:26:05 - app.main - INFO - ================================================================================
2026-01-24 13:26:06 - app.main - INFO - ================================================================================
2026-01-24 13:26:06 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-24 13:26:06 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-24 13:26:06 - app.main - INFO - ================================================================================
2026-01-24 13:26:06 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-24 13:26:06 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:06 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 18 cities in Australia
2026-01-24 13:26:06 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-24 13:26:06 - app.main - INFO -    Cities returned: 18
2026-01-24 13:26:06 - app.main - INFO - ================================================================================
2026-01-24 13:26:07 - app.main - INFO - ================================================================================
2026-01-24 13:26:07 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-24 13:26:07 - app.main - INFO -    Country: France, Min confidence: low
2026-01-24 13:26:07 - app.main - INFO - ================================================================================
2026-01-24 13:26:07 - app.phase2.pg_aggregations - INFO -    Getting country map for France (normalized: France)...
2026-01-24 13:26:07 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:07 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 12 cities in France
2026-01-24 13:26:07 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: France
2026-01-24 13:26:07 - app.main - INFO -    Cities returned: 12
2026-01-24 13:26:07 - app.main - INFO - ================================================================================
2026-01-24 13:26:08 - app.main - INFO - ================================================================================
2026-01-24 13:26:08 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-24 13:26:08 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-24 13:26:08 - app.main - INFO - ================================================================================
2026-01-24 13:26:08 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-24 13:26:08 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:10 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Naples - Federico II, Italy' (from affiliation: CEINGE Biotecnologie Avanzate Franco Salvatore, 80145 Napoli, Italy; Department of Molecular Medicine and Medical Biotechnology, University of Naples Federico II, 80131 Naples, Italy.)
2026-01-24 13:26:10 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 22 cities in Italy
2026-01-24 13:26:10 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-24 13:26:10 - app.main - INFO -    Cities returned: 22
2026-01-24 13:26:10 - app.main - INFO - ================================================================================
2026-01-24 13:26:11 - app.main - INFO - ================================================================================
2026-01-24 13:26:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-24 13:26:11 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-24 13:26:11 - app.main - INFO - ================================================================================
2026-01-24 13:26:11 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-24 13:26:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:12 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 24 cities in Germany
2026-01-24 13:26:12 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-24 13:26:12 - app.main - INFO -    Cities returned: 24
2026-01-24 13:26:12 - app.main - INFO - ================================================================================
2026-01-24 13:26:12 - app.main - INFO - ================================================================================
2026-01-24 13:26:12 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-24 13:26:12 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-24 13:26:12 - app.main - INFO - ================================================================================
2026-01-24 13:26:12 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-24 13:26:12 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:13 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 21 cities in Japan
2026-01-24 13:26:13 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-24 13:26:13 - app.main - INFO -    Cities returned: 21
2026-01-24 13:26:13 - app.main - INFO - ================================================================================
2026-01-24 13:26:13 - app.main - INFO - ================================================================================
2026-01-24 13:26:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 16d4c49fc4f6
2026-01-24 13:26:13 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-24 13:26:13 - app.main - INFO - ================================================================================
2026-01-24 13:26:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-24 13:26:13 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Canada
2026-01-24 13:26:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Canada
2026-01-24 13:26:14 - app.main - INFO -    Cities returned: 8
2026-01-24 13:26:14 - app.main - INFO - ================================================================================
2026-01-24 13:26:14 - app.main - INFO - ================================================================================
2026-01-24 13:26:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 1893fb47f453
2026-01-24 13:26:14 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 13:26:14 - app.main - INFO - ================================================================================
2026-01-24 13:26:14 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 13:26:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:16 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Electronic Science and Technology of China, China' (from affiliation: Department of Abdominal Medical Oncology, Sichuan Cancer Hospital & Institute, Sichuan Cancer Center, Cancer Hospital Affiliated to University of Electronic Science and Technology of China, Chengdu, Sichuan,Â China.)
2026-01-24 13:26:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 113 cities in China
2026-01-24 13:26:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 13:26:16 - app.main - INFO -    Cities returned: 113
2026-01-24 13:26:16 - app.main - INFO - ================================================================================
2026-01-24 13:26:17 - app.main - INFO - ================================================================================
2026-01-24 13:26:17 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 1893fb47f453
2026-01-24 13:26:17 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-24 13:26:17 - app.main - INFO - ================================================================================
2026-01-24 13:26:17 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-24 13:26:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:17 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 83 cities in United States
2026-01-24 13:26:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-24 13:26:17 - app.main - INFO -    Cities returned: 83
2026-01-24 13:26:17 - app.main - INFO - ================================================================================
2026-01-24 13:26:18 - app.main - INFO - ================================================================================
2026-01-24 13:26:18 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 1893fb47f453
2026-01-24 13:26:18 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-24 13:26:18 - app.main - INFO - ================================================================================
2026-01-24 13:26:18 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-24 13:26:18 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:18 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 14 cities in Australia
2026-01-24 13:26:18 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-24 13:26:18 - app.main - INFO -    Cities returned: 14
2026-01-24 13:26:18 - app.main - INFO - ================================================================================
2026-01-24 13:26:19 - app.main - INFO - ================================================================================
2026-01-24 13:26:19 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 1893fb47f453
2026-01-24 13:26:19 - app.main - INFO -    Country: France, Min confidence: low
2026-01-24 13:26:19 - app.main - INFO - ================================================================================
2026-01-24 13:26:19 - app.phase2.pg_aggregations - INFO -    Getting country map for France (normalized: France)...
2026-01-24 13:26:19 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:19 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 19 cities in France
2026-01-24 13:26:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: France
2026-01-24 13:26:19 - app.main - INFO -    Cities returned: 19
2026-01-24 13:26:19 - app.main - INFO - ================================================================================
2026-01-24 13:26:20 - app.main - INFO - ================================================================================
2026-01-24 13:26:20 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 1893fb47f453
2026-01-24 13:26:20 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-24 13:26:20 - app.main - INFO - ================================================================================
2026-01-24 13:26:20 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-24 13:26:20 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:22 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Modena and Reggio Emilia, Italy' (from affiliation: Department of Life Sciences, University of Modena and Reggio Emilia, Modena, Italy.)
2026-01-24 13:26:23 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Naples - Federico II, Italy' (from affiliation: Department of Public Health, University of Naples Federico II, Naples, Italy.)
2026-01-24 13:26:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 29 cities in Italy
2026-01-24 13:26:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-24 13:26:24 - app.main - INFO -    Cities returned: 29
2026-01-24 13:26:24 - app.main - INFO - ================================================================================
2026-01-24 13:26:24 - app.main - INFO - ================================================================================
2026-01-24 13:26:24 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 1893fb47f453
2026-01-24 13:26:24 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-24 13:26:24 - app.main - INFO - ================================================================================
2026-01-24 13:26:24 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-24 13:26:24 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:25 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 27 cities in Germany
2026-01-24 13:26:25 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-24 13:26:25 - app.main - INFO -    Cities returned: 27
2026-01-24 13:26:25 - app.main - INFO - ================================================================================
2026-01-24 13:26:25 - app.main - INFO - ================================================================================
2026-01-24 13:26:25 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 1893fb47f453
2026-01-24 13:26:25 - app.main - INFO -    Country: India, Min confidence: low
2026-01-24 13:26:25 - app.main - INFO - ================================================================================
2026-01-24 13:26:25 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-24 13:26:26 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:26 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 27 cities in India
2026-01-24 13:26:26 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-24 13:26:26 - app.main - INFO -    Cities returned: 27
2026-01-24 13:26:26 - app.main - INFO - ================================================================================
2026-01-24 13:26:26 - app.main - INFO - ================================================================================
2026-01-24 13:26:26 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 1893fb47f453
2026-01-24 13:26:26 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-24 13:26:26 - app.main - INFO - ================================================================================
2026-01-24 13:26:26 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-24 13:26:27 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:27 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 29 cities in Japan
2026-01-24 13:26:27 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-24 13:26:27 - app.main - INFO -    Cities returned: 29
2026-01-24 13:26:27 - app.main - INFO - ================================================================================
2026-01-24 13:26:27 - app.main - INFO - ================================================================================
2026-01-24 13:26:27 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 1893fb47f453
2026-01-24 13:26:27 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-24 13:26:27 - app.main - INFO - ================================================================================
2026-01-24 13:26:27 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-24 13:26:28 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:28 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 18 cities in Spain
2026-01-24 13:26:28 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Spain
2026-01-24 13:26:28 - app.main - INFO -    Cities returned: 18
2026-01-24 13:26:28 - app.main - INFO - ================================================================================
2026-01-24 13:26:28 - app.main - INFO - ================================================================================
2026-01-24 13:26:28 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 1893fb47f453
2026-01-24 13:26:28 - app.main - INFO -    Country: South Korea, Min confidence: low
2026-01-24 13:26:28 - app.main - INFO - ================================================================================
2026-01-24 13:26:28 - app.phase2.pg_aggregations - INFO -    Getting country map for South Korea (normalized: South Korea)...
2026-01-24 13:26:29 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:29 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in South Korea
2026-01-24 13:26:29 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: South Korea
2026-01-24 13:26:29 - app.main - INFO -    Cities returned: 2
2026-01-24 13:26:29 - app.main - INFO - ================================================================================
2026-01-24 13:26:30 - app.main - INFO - ================================================================================
2026-01-24 13:26:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 13:26:30 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-24 13:26:30 - app.main - INFO - ================================================================================
2026-01-24 13:26:30 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-24 13:26:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:30 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 123 cities in United States
2026-01-24 13:26:30 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-24 13:26:30 - app.main - INFO -    Cities returned: 123
2026-01-24 13:26:30 - app.main - INFO - ================================================================================
2026-01-24 13:26:31 - app.main - INFO - ================================================================================
2026-01-24 13:26:31 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 13:26:31 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 13:26:31 - app.main - INFO - ================================================================================
2026-01-24 13:26:31 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 13:26:31 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:33 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Electronic Science and Technology of China, China' (from affiliation: Department of Oncology & Cancer Institute, Sichuan Academy of Medical Sciences, Sichuan Provincial People's Hospital, University of Electronic Science and Technology of China, Chengdu, Sichuan, China.)
2026-01-24 13:26:33 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 81 cities in China
2026-01-24 13:26:33 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 13:26:33 - app.main - INFO -    Cities returned: 81
2026-01-24 13:26:33 - app.main - INFO - ================================================================================
2026-01-24 13:26:33 - app.main - INFO - ================================================================================
2026-01-24 13:26:33 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 13:26:33 - app.main - INFO -    Country: India, Min confidence: low
2026-01-24 13:26:33 - app.main - INFO - ================================================================================
2026-01-24 13:26:33 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-24 13:26:34 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:34 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 45 cities in India
2026-01-24 13:26:34 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-24 13:26:34 - app.main - INFO -    Cities returned: 45
2026-01-24 13:26:34 - app.main - INFO - ================================================================================
2026-01-24 13:26:34 - app.main - INFO - ================================================================================
2026-01-24 13:26:34 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 13:26:34 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-24 13:26:34 - app.main - INFO - ================================================================================
2026-01-24 13:26:34 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-24 13:26:35 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:35 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 27 cities in United Kingdom
2026-01-24 13:26:35 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United Kingdom
2026-01-24 13:26:35 - app.main - INFO -    Cities returned: 27
2026-01-24 13:26:35 - app.main - INFO - ================================================================================
2026-01-24 13:26:36 - app.main - INFO - ================================================================================
2026-01-24 13:26:36 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 13:26:36 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-24 13:26:36 - app.main - INFO - ================================================================================
2026-01-24 13:26:36 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-24 13:26:36 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:36 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 36 cities in Italy
2026-01-24 13:26:36 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-24 13:26:36 - app.main - INFO -    Cities returned: 36
2026-01-24 13:26:36 - app.main - INFO - ================================================================================
2026-01-24 13:26:37 - app.main - INFO - ================================================================================
2026-01-24 13:26:37 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 13:26:37 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-24 13:26:37 - app.main - INFO - ================================================================================
2026-01-24 13:26:37 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-24 13:26:37 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:37 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 16 cities in Australia
2026-01-24 13:26:37 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-24 13:26:37 - app.main - INFO -    Cities returned: 16
2026-01-24 13:26:37 - app.main - INFO - ================================================================================
2026-01-24 13:26:38 - app.main - INFO - ================================================================================
2026-01-24 13:26:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 13:26:38 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-24 13:26:38 - app.main - INFO - ================================================================================
2026-01-24 13:26:38 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-24 13:26:38 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:38 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 32 cities in Germany
2026-01-24 13:26:38 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-24 13:26:38 - app.main - INFO -    Cities returned: 32
2026-01-24 13:26:38 - app.main - INFO - ================================================================================
2026-01-24 13:26:39 - app.main - INFO - ================================================================================
2026-01-24 13:26:39 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 13:26:39 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-24 13:26:39 - app.main - INFO - ================================================================================
2026-01-24 13:26:39 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-24 13:26:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:40 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 16 cities in Japan
2026-01-24 13:26:40 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-24 13:26:40 - app.main - INFO -    Cities returned: 16
2026-01-24 13:26:40 - app.main - INFO - ================================================================================
2026-01-24 13:26:40 - app.main - INFO - ================================================================================
2026-01-24 13:26:40 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 13:26:40 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-24 13:26:40 - app.main - INFO - ================================================================================
2026-01-24 13:26:40 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-24 13:26:40 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:41 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 15 cities in Canada
2026-01-24 13:26:41 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Canada
2026-01-24 13:26:41 - app.main - INFO -    Cities returned: 15
2026-01-24 13:26:41 - app.main - INFO - ================================================================================
2026-01-24 13:26:41 - app.main - INFO - ================================================================================
2026-01-24 13:26:41 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: 597675a5f9fb
2026-01-24 13:26:41 - app.main - INFO -    Country: France, Min confidence: low
2026-01-24 13:26:41 - app.main - INFO - ================================================================================
2026-01-24 13:26:41 - app.phase2.pg_aggregations - INFO -    Getting country map for France (normalized: France)...
2026-01-24 13:26:41 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:42 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 24 cities in France
2026-01-24 13:26:42 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: France
2026-01-24 13:26:42 - app.main - INFO -    Cities returned: 24
2026-01-24 13:26:42 - app.main - INFO - ================================================================================
2026-01-24 13:26:43 - app.main - INFO - ================================================================================
2026-01-24 13:26:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:26:43 - app.main - INFO -    Country: China, City: Beijing, Min confidence: low
2026-01-24 13:26:43 - app.main - INFO - ================================================================================
2026-01-24 13:26:43 - app.phase2.pg_aggregations - INFO -    Getting city map for Beijing, China...
2026-01-24 13:26:43 - app.main - INFO - ================================================================================
2026-01-24 13:26:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:26:43 - app.main - INFO -    Country: China, City: Beijing, Min confidence: low
2026-01-24 13:26:43 - app.main - INFO - ================================================================================
2026-01-24 13:26:43 - app.phase2.pg_aggregations - INFO -    Getting city map for Beijing, China...
2026-01-24 13:26:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:43 - app.main - INFO - ================================================================================
2026-01-24 13:26:43 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 13:26:43 - app.main - INFO -    Country: China, City: Beijing, Min confidence: low
2026-01-24 13:26:43 - app.main - INFO - ================================================================================
2026-01-24 13:26:43 - app.phase2.pg_aggregations - INFO -    Getting city map for Beijing, China...
2026-01-24 13:26:43 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 24 institutions in Beijing, China
2026-01-24 13:26:43 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 24 institutions in Beijing, China
2026-01-24 13:26:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Beijing, China
2026-01-24 13:26:43 - app.main - INFO -    Institutions returned: 24
2026-01-24 13:26:43 - app.main - INFO - ================================================================================
2026-01-24 13:26:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Beijing, China
2026-01-24 13:26:43 - app.main - INFO -    Institutions returned: 24
2026-01-24 13:26:43 - app.main - INFO - ================================================================================
2026-01-24 13:26:43 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:26:43 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 24 institutions in Beijing, China
2026-01-24 13:26:43 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Beijing, China
2026-01-24 13:26:43 - app.main - INFO -    Institutions returned: 24
2026-01-24 13:26:43 - app.main - INFO - ================================================================================
2026-01-24 13:27:10 - app.main - INFO - ================================================================================
2026-01-24 13:27:10 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:10 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 13:27:10 - app.main - INFO - ================================================================================
2026-01-24 13:27:10 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 13:27:10 - app.main - INFO - ================================================================================
2026-01-24 13:27:10 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:10 - app.main - INFO -    Min confidence: low
2026-01-24 13:27:10 - app.main - INFO - ================================================================================
2026-01-24 13:27:10 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-24 13:27:10 - app.main - INFO - ================================================================================
2026-01-24 13:27:10 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:10 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-24 13:27:10 - app.main - INFO - ================================================================================
2026-01-24 13:27:10 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-24 13:27:11 - app.main - INFO - ================================================================================
2026-01-24 13:27:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:11 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-24 13:27:11 - app.main - INFO - ================================================================================
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-24 13:27:11 - app.main - INFO - ================================================================================
2026-01-24 13:27:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:11 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-24 13:27:11 - app.main - INFO - ================================================================================
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-24 13:27:11 - app.main - INFO - ================================================================================
2026-01-24 13:27:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:11 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-24 13:27:11 - app.main - INFO - ================================================================================
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-24 13:27:11 - app.main - INFO - ================================================================================
2026-01-24 13:27:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:11 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-24 13:27:11 - app.main - INFO - ================================================================================
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-24 13:27:11 - app.main - INFO - ================================================================================
2026-01-24 13:27:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:11 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-24 13:27:11 - app.main - INFO - ================================================================================
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:11 - app.main - INFO - ================================================================================
2026-01-24 13:27:11 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:11 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-24 13:27:11 - app.main - INFO - ================================================================================
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:11 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:12 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 14 cities in United Kingdom
2026-01-24 13:27:12 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:12 - app.main - INFO - ================================================================================
2026-01-24 13:27:12 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:12 - app.main - INFO -    Country: Belgium, Min confidence: low
2026-01-24 13:27:12 - app.main - INFO - ================================================================================
2026-01-24 13:27:12 - app.phase2.pg_aggregations - INFO -    Getting country map for Belgium (normalized: Belgium)...
2026-01-24 13:27:12 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United Kingdom
2026-01-24 13:27:12 - app.main - INFO -    Cities returned: 14
2026-01-24 13:27:12 - app.main - INFO - ================================================================================
2026-01-24 13:27:12 - app.main - INFO - ================================================================================
2026-01-24 13:27:12 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:12 - app.main - INFO -    Country: Taiwan, Min confidence: low
2026-01-24 13:27:12 - app.main - INFO - ================================================================================
2026-01-24 13:27:12 - app.phase2.pg_aggregations - INFO -    Getting country map for Taiwan (normalized: Taiwan)...
2026-01-24 13:27:12 - app.main - INFO - ================================================================================
2026-01-24 13:27:12 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:12 - app.main - INFO -    Country: Netherlands, Min confidence: low
2026-01-24 13:27:12 - app.main - INFO - ================================================================================
2026-01-24 13:27:12 - app.phase2.pg_aggregations - INFO -    Getting country map for Netherlands (normalized: Netherlands)...
2026-01-24 13:27:13 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:13 - app.main - INFO - ================================================================================
2026-01-24 13:27:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:13 - app.main - INFO -    Min confidence: low
2026-01-24 13:27:13 - app.main - INFO - ================================================================================
2026-01-24 13:27:13 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run 53e099cdb74e...
2026-01-24 13:27:13 - app.main - INFO - ================================================================================
2026-01-24 13:27:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:13 - app.main - INFO -    Country: Hungary, Min confidence: low
2026-01-24 13:27:13 - app.main - INFO - ================================================================================
2026-01-24 13:27:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Hungary (normalized: Hungary)...
2026-01-24 13:27:13 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 20 cities in Australia
2026-01-24 13:27:13 - app.main - INFO - ================================================================================
2026-01-24 13:27:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:13 - app.main - INFO -    Country: Denmark, Min confidence: low
2026-01-24 13:27:13 - app.main - INFO - ================================================================================
2026-01-24 13:27:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Denmark (normalized: Denmark)...
2026-01-24 13:27:13 - app.main - INFO - ================================================================================
2026-01-24 13:27:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:13 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-24 13:27:13 - app.main - INFO - ================================================================================
2026-01-24 13:27:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-24 13:27:13 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-24 13:27:13 - app.main - INFO -    Cities returned: 20
2026-01-24 13:27:13 - app.main - INFO - ================================================================================
2026-01-24 13:27:13 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:13 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 12 cities in Canada
2026-01-24 13:27:13 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Canada
2026-01-24 13:27:13 - app.main - INFO -    Cities returned: 12
2026-01-24 13:27:13 - app.main - INFO - ================================================================================
2026-01-24 13:27:13 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 30 cities in Italy
2026-01-24 13:27:13 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-24 13:27:13 - app.main - INFO -    Cities returned: 30
2026-01-24 13:27:13 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: New Zealand, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for New Zealand (normalized: New Zealand)...
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 50 cities in China
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Spain
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 13:27:14 - app.main - INFO -    Cities returned: 50
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Spain
2026-01-24 13:27:14 - app.main - INFO -    Cities returned: 11
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: Mexico, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Mexico (normalized: Mexico)...
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 53 countries
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: Turkey, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Turkey (normalized: Turkey)...
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: France, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for France (normalized: France)...
2026-01-24 13:27:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 13:27:14 - app.main - INFO -    Countries returned: 53
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: Czech Republic, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Czech Republic (normalized: Czech Republic)...
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: South Korea, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for South Korea (normalized: South Korea)...
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: India, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Belgium
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 79 cities in United States
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Belgium
2026-01-24 13:27:14 - app.main - INFO -    Cities returned: 6
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-24 13:27:14 - app.main - INFO -    Cities returned: 79
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: Switzerland, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Switzerland (normalized: Switzerland)...
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: Brazil, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Brazil (normalized: Brazil)...
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:14 - app.main - INFO -    Country: Finland, Min confidence: low
2026-01-24 13:27:14 - app.main - INFO - ================================================================================
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Finland (normalized: Finland)...
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Denmark
2026-01-24 13:27:15 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Frankfurt am Main; Cologne; JÃ¼lich, Germany' (from affiliation: Department of Neurology, University Hospital Frankfurt, Goethe University, Frankfurt am Main, Germany; Medical Faculty, University of Cologne, and Department of Neurology, University Hospital Cologne, Cologne, Germany; Cognitive Neuroscience, Institute of Neuroscience and Medicine (INM-3), Research Centre JÃ¼lich, JÃ¼lich, Germany. Electronic address: Grefkes-hermann@em.uni-frankfurt.de.)
2026-01-24 13:27:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Denmark
2026-01-24 13:27:15 - app.main - INFO -    Cities returned: 6
2026-01-24 13:27:15 - app.main - INFO - ================================================================================
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Iran
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Russia
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Russia
2026-01-24 13:27:15 - app.main - INFO -    Cities returned: 2
2026-01-24 13:27:15 - app.main - INFO - ================================================================================
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 9 cities in Netherlands
2026-01-24 13:27:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Netherlands
2026-01-24 13:27:15 - app.main - INFO -    Cities returned: 9
2026-01-24 13:27:15 - app.main - INFO - ================================================================================
2026-01-24 13:27:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Iran
2026-01-24 13:27:15 - app.main - INFO -    Cities returned: 5
2026-01-24 13:27:15 - app.main - INFO - ================================================================================
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Taiwan
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Austria
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Hungary
2026-01-24 13:27:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Taiwan
2026-01-24 13:27:15 - app.main - INFO -    Cities returned: 5
2026-01-24 13:27:15 - app.main - INFO - ================================================================================
2026-01-24 13:27:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Austria
2026-01-24 13:27:15 - app.main - INFO -    Cities returned: 5
2026-01-24 13:27:15 - app.main - INFO - ================================================================================
2026-01-24 13:27:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hungary
2026-01-24 13:27:15 - app.main - INFO -    Cities returned: 2
2026-01-24 13:27:15 - app.main - INFO - ================================================================================
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Mexico
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in South Korea
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 40 cities in Germany
2026-01-24 13:27:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Mexico
2026-01-24 13:27:15 - app.main - INFO -    Cities returned: 1
2026-01-24 13:27:15 - app.main - INFO - ================================================================================
2026-01-24 13:27:15 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: South Korea
2026-01-24 13:27:15 - app.main - INFO -    Cities returned: 2
2026-01-24 13:27:15 - app.main - INFO - ================================================================================
2026-01-24 13:27:15 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in France
2026-01-24 13:27:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: France
2026-01-24 13:27:16 - app.main - INFO -    Cities returned: 8
2026-01-24 13:27:16 - app.main - INFO - ================================================================================
2026-01-24 13:27:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in India
2026-01-24 13:27:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 4 cities in Czech Republic
2026-01-24 13:27:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Czech Republic
2026-01-24 13:27:16 - app.main - INFO -    Cities returned: 4
2026-01-24 13:27:16 - app.main - INFO - ================================================================================
2026-01-24 13:27:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-24 13:27:16 - app.main - INFO -    Cities returned: 40
2026-01-24 13:27:16 - app.main - INFO - ================================================================================
2026-01-24 13:27:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Poland
2026-01-24 13:27:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-24 13:27:16 - app.main - INFO -    Cities returned: 6
2026-01-24 13:27:16 - app.main - INFO - ================================================================================
2026-01-24 13:27:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 4 cities in Finland
2026-01-24 13:27:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Japan
2026-01-24 13:27:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Poland
2026-01-24 13:27:16 - app.main - INFO -    Cities returned: 2
2026-01-24 13:27:16 - app.main - INFO - ================================================================================
2026-01-24 13:27:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Finland
2026-01-24 13:27:16 - app.main - INFO -    Cities returned: 4
2026-01-24 13:27:16 - app.main - INFO - ================================================================================
2026-01-24 13:27:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Switzerland
2026-01-24 13:27:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in New Zealand
2026-01-24 13:27:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Turkey
2026-01-24 13:27:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-24 13:27:16 - app.main - INFO -    Cities returned: 6
2026-01-24 13:27:16 - app.main - INFO - ================================================================================
2026-01-24 13:27:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: New Zealand
2026-01-24 13:27:16 - app.main - INFO -    Cities returned: 2
2026-01-24 13:27:16 - app.main - INFO - ================================================================================
2026-01-24 13:27:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Switzerland
2026-01-24 13:27:16 - app.main - INFO -    Cities returned: 8
2026-01-24 13:27:16 - app.main - INFO - ================================================================================
2026-01-24 13:27:16 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 53 countries
2026-01-24 13:27:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Turkey
2026-01-24 13:27:16 - app.main - INFO -    Cities returned: 3
2026-01-24 13:27:16 - app.main - INFO - ================================================================================
2026-01-24 13:27:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 13:27:17 - app.main - INFO -    Countries returned: 53
2026-01-24 13:27:17 - app.main - INFO - ================================================================================
2026-01-24 13:27:17 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Brazil
2026-01-24 13:27:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brazil
2026-01-24 13:27:17 - app.main - INFO -    Cities returned: 11
2026-01-24 13:27:17 - app.main - INFO - ================================================================================
2026-01-24 13:27:17 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Portugal
2026-01-24 13:27:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Portugal
2026-01-24 13:27:17 - app.main - INFO -    Cities returned: 5
2026-01-24 13:27:17 - app.main - INFO - ================================================================================
2026-01-24 13:27:17 - app.main - INFO - ================================================================================
2026-01-24 13:27:17 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:17 - app.main - INFO -    Country: China, Min confidence: low
2026-01-24 13:27:17 - app.main - INFO - ================================================================================
2026-01-24 13:27:17 - app.phase2.pg_aggregations - INFO -    Getting country map for China (normalized: China)...
2026-01-24 13:27:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:18 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Beer-Yaacov, Israel' (from affiliation: QuantalX Neuroscience, Beer-Yaacov, Israel.)
2026-01-24 13:27:18 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 50 cities in China
2026-01-24 13:27:18 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: China
2026-01-24 13:27:18 - app.main - INFO -    Cities returned: 50
2026-01-24 13:27:18 - app.main - INFO - ================================================================================
2026-01-24 13:27:18 - app.main - INFO - ================================================================================
2026-01-24 13:27:18 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:27:18 - app.main - INFO -    Country: China, City: Beijing, Min confidence: low
2026-01-24 13:27:18 - app.main - INFO - ================================================================================
2026-01-24 13:27:18 - app.phase2.pg_aggregations - INFO -    Getting city map for Beijing, China...
2026-01-24 13:27:19 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:27:19 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 31 institutions in Beijing, China
2026-01-24 13:27:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Beijing, China
2026-01-24 13:27:19 - app.main - INFO -    Institutions returned: 31
2026-01-24 13:27:19 - app.main - INFO - ================================================================================
2026-01-24 13:27:19 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Zerifin, Israel' (from affiliation: Sagol Center for Hyperbaric Medicine and Research, Shamir Medical Center, Zerifin, Israel.)
2026-01-24 13:27:19 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 15 cities in Israel
2026-01-24 13:27:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Israel
2026-01-24 13:27:19 - app.main - INFO -    Cities returned: 15
2026-01-24 13:27:19 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:13 - app.main - INFO -    Country: Iran (Islamic Republic of), Min confidence: low
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (Islamic Republic of) (normalized: Iran (Islamic Republic of))...
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:13 - app.main - INFO -    Country: Germany, Min confidence: low
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Germany (normalized: Germany)...
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:13 - app.main - INFO -    Country: Egypt, Min confidence: low
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Egypt (normalized: Egypt)...
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:13 - app.main - INFO -    Country: Spain, Min confidence: low
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Spain (normalized: Spain)...
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:13 - app.main - INFO -    Country: Italy, Min confidence: low
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Italy (normalized: Italy)...
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:13 - app.main - INFO -    Country: Canada, Min confidence: low
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Canada (normalized: Canada)...
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:13 - app.main - INFO -    Country: Japan, Min confidence: low
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Japan (normalized: Japan)...
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:13 - app.main - INFO -    Country: Slovakia, Min confidence: low
2026-01-24 13:28:13 - app.main - INFO - ================================================================================
2026-01-24 13:28:13 - app.phase2.pg_aggregations - INFO -    Getting country map for Slovakia (normalized: Slovakia)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Netherlands, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Netherlands (normalized: Netherlands)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: United Kingdom, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for United Kingdom (normalized: United Kingdom)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Uganda, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Uganda (normalized: Uganda)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Romania, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Romania (normalized: Romania)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Switzerland, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Switzerland (normalized: Switzerland)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Colombia, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Colombia (normalized: Colombia)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Norway, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Norway (normalized: Norway)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Serbia, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Serbia (normalized: Serbia)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: TÃ¼rkiye, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for TÃ¼rkiye (normalized: TÃ¼rkiye)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Brazil, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Brazil (normalized: Brazil)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Malaysia, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Malaysia (normalized: Malaysia)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Peru, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Peru (normalized: Peru)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Ireland, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Ireland (normalized: Ireland)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Iran, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Iran (normalized: Iran)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Kazakhstan, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Kazakhstan (normalized: Kazakhstan)...
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Czechia, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Czechia (normalized: Czechia)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Australia, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Australia (normalized: Australia)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Venezuela, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Venezuela (normalized: Venezuela)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Special Administrative Region of China, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Special Administrative Region of China (normalized: Special Administrative Region of China)...
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: the Netherlands, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for the Netherlands (normalized: the Netherlands)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Russia, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Russia (normalized: Russia)...
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:14 - app.main - INFO -    Country: Brasil, Min confidence: low
2026-01-24 13:28:14 - app.main - INFO - ================================================================================
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Getting country map for Brasil (normalized: Brasil)...
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:15 - app.main - INFO -    Country: India, Min confidence: low
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Getting country map for India (normalized: India)...
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:15 - app.main - INFO -    Country: Chile, Min confidence: low
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Getting country map for Chile (normalized: Chile)...
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:15 - app.main - INFO -    Country: Hong Kong, Min confidence: low
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Getting country map for Hong Kong (normalized: Hong Kong)...
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:15 - app.main - INFO -    Country: Denmark, Min confidence: low
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Getting country map for Denmark (normalized: Denmark)...
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:15 - app.main - INFO -    Country: Zambia, Min confidence: low
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Getting country map for Zambia (normalized: Zambia)...
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:15 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:15 - app.main - INFO -    Country: Poland, Min confidence: low
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Getting country map for Poland (normalized: Poland)...
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:15 - app.main - INFO -    Country: Greece, Min confidence: low
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Getting country map for Greece (normalized: Greece)...
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:15 - app.main - INFO -    Country: Portugal, Min confidence: low
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Getting country map for Portugal (normalized: Portugal)...
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:15 - app.main - INFO -    Country: Mexico, Min confidence: low
2026-01-24 13:28:15 - app.main - INFO - ================================================================================
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Getting country map for Mexico (normalized: Mexico)...
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:15 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 30 cities in Italy
2026-01-24 13:28:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Italy
2026-01-24 13:28:16 - app.main - INFO -    Cities returned: 30
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:16 - app.main - INFO -    Country: Belgium, Min confidence: low
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    Getting country map for Belgium (normalized: Belgium)...
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:16 - app.main - INFO -    Country: Turkey, Min confidence: low
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    Getting country map for Turkey (normalized: Turkey)...
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:16 - app.main - INFO -    Country: Czech Republic, Min confidence: low
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    Getting country map for Czech Republic (normalized: Czech Republic)...
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:16 - app.main - INFO -    Country: Sweden, Min confidence: low
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    Getting country map for Sweden (normalized: Sweden)...
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:16 - app.main - INFO -    Country: New Zealand, Min confidence: low
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    Getting country map for New Zealand (normalized: New Zealand)...
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Romania
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Romania
2026-01-24 13:28:16 - app.main - INFO -    Cities returned: 2
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Uganda
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Egypt
2026-01-24 13:28:16 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Uganda
2026-01-24 13:28:16 - app.main - INFO -    Cities returned: 3
2026-01-24 13:28:16 - app.main - INFO - ================================================================================
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:16 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Egypt
2026-01-24 13:28:17 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:17 - app.main - INFO - ================================================================================
2026-01-24 13:28:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:17 - app.main - INFO - ================================================================================
2026-01-24 13:28:17 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:17 - app.main - INFO -    Country: Finland, Min confidence: low
2026-01-24 13:28:17 - app.main - INFO - ================================================================================
2026-01-24 13:28:17 - app.phase2.pg_aggregations - INFO -    Getting country map for Finland (normalized: Finland)...
2026-01-24 13:28:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:17 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Iran (Islamic Republic of)
2026-01-24 13:28:17 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 0 cities in the Netherlands
2026-01-24 13:28:17 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Iran (Islamic Republic of)
2026-01-24 13:28:17 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:17 - app.main - INFO - ================================================================================
2026-01-24 13:28:17 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: the Netherlands
2026-01-24 13:28:17 - app.main - INFO -    Cities returned: 0
2026-01-24 13:28:17 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:18 - app.main - INFO -    Country: Taiwan, Min confidence: low
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    Getting country map for Taiwan (normalized: Taiwan)...
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:18 - app.main - INFO -    Country: Hungary, Min confidence: low
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    Getting country map for Hungary (normalized: Hungary)...
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Hong Kong
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:18 - app.main - INFO -    Country: Israel, Min confidence: low
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    Getting country map for Israel (normalized: Israel)...
2026-01-24 13:28:18 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hong Kong
2026-01-24 13:28:18 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Zambia
2026-01-24 13:28:18 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Zambia
2026-01-24 13:28:18 - app.main - INFO -    Cities returned: 2
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Norway
2026-01-24 13:28:18 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Norway
2026-01-24 13:28:18 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:18 - app.main - INFO -    Country: Austria, Min confidence: low
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    Getting country map for Austria (normalized: Austria)...
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:18 - app.main - INFO -    Country: France, Min confidence: low
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    Getting country map for France (normalized: France)...
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Colombia
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:18 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Colombia
2026-01-24 13:28:18 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 12 cities in Canada
2026-01-24 13:28:18 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Canada
2026-01-24 13:28:18 - app.main - INFO -    Cities returned: 12
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 6af7ac1b6254, Run: 53e099cdb74e
2026-01-24 13:28:18 - app.main - INFO -    Country: South Korea, Min confidence: low
2026-01-24 13:28:18 - app.main - INFO - ================================================================================
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    Getting country map for South Korea (normalized: South Korea)...
2026-01-24 13:28:18 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Slovakia
2026-01-24 13:28:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Slovakia
2026-01-24 13:28:19 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:19 - app.main - INFO - ================================================================================
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 14 cities in United Kingdom
2026-01-24 13:28:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United Kingdom
2026-01-24 13:28:19 - app.main - INFO -    Cities returned: 14
2026-01-24 13:28:19 - app.main - INFO - ================================================================================
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 9 cities in Netherlands
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in TÃ¼rkiye
2026-01-24 13:28:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Netherlands
2026-01-24 13:28:19 - app.main - INFO -    Cities returned: 9
2026-01-24 13:28:19 - app.main - INFO - ================================================================================
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: TÃ¼rkiye
2026-01-24 13:28:19 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:19 - app.main - INFO - ================================================================================
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Japan
2026-01-24 13:28:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Japan
2026-01-24 13:28:19 - app.main - INFO -    Cities returned: 6
2026-01-24 13:28:19 - app.main - INFO - ================================================================================
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Spain
2026-01-24 13:28:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Spain
2026-01-24 13:28:19 - app.main - INFO -    Cities returned: 11
2026-01-24 13:28:19 - app.main - INFO - ================================================================================
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Peru
2026-01-24 13:28:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Peru
2026-01-24 13:28:19 - app.main - INFO -    Cities returned: 2
2026-01-24 13:28:19 - app.main - INFO - ================================================================================
2026-01-24 13:28:19 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 11 cities in Brazil
2026-01-24 13:28:19 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brazil
2026-01-24 13:28:19 - app.main - INFO -    Cities returned: 11
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Malaysia
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in Switzerland
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Malaysia
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Switzerland
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 8
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 20 cities in Australia
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Australia
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 20
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Serbia
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Venezuela
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Serbia
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Ireland
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Venezuela
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in India
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Ireland
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Special Administrative Region of China
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: India
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 6
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Chile
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Russia
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Special Administrative Region of China
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Chile
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Russia
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 2
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Brasil
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Brasil
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Czechia
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Denmark
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Czechia
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Denmark
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 6
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Kazakhstan
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Kazakhstan
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Poland
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Portugal
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 1 cities in Mexico
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Iran
2026-01-24 13:28:20 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 6 cities in Belgium
2026-01-24 13:28:20 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Mexico
2026-01-24 13:28:20 - app.main - INFO -    Cities returned: 1
2026-01-24 13:28:20 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Poland
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 2
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Portugal
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 5
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Iran
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 5
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Belgium
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 6
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Sweden
2026-01-24 13:28:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Greece
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Sweden
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 3
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Greece
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 2
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 3 cities in Turkey
2026-01-24 13:28:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in New Zealand
2026-01-24 13:28:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in South Korea
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: New Zealand
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 2
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Turkey
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 3
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 4 cities in Czech Republic
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: South Korea
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 2
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 8 cities in France
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Czech Republic
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 4
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 4 cities in Finland
2026-01-24 13:28:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Taiwan
2026-01-24 13:28:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 2 cities in Hungary
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Taiwan
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 5
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: France
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 8
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 79 cities in United States
2026-01-24 13:28:21 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 5 cities in Austria
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Finland
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 4
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Hungary
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 2
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 79
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:21 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Austria
2026-01-24 13:28:21 - app.main - INFO -    Cities returned: 5
2026-01-24 13:28:21 - app.main - INFO - ================================================================================
2026-01-24 13:28:22 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Frankfurt am Main; Cologne; JÃ¼lich, Germany' (from affiliation: Department of Neurology, University Hospital Frankfurt, Goethe University, Frankfurt am Main, Germany; Medical Faculty, University of Cologne, and Department of Neurology, University Hospital Cologne, Cologne, Germany; Cognitive Neuroscience, Institute of Neuroscience and Medicine (INM-3), Research Centre JÃ¼lich, JÃ¼lich, Germany. Electronic address: Grefkes-hermann@em.uni-frankfurt.de.)
2026-01-24 13:28:22 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 40 cities in Germany
2026-01-24 13:28:22 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Germany
2026-01-24 13:28:22 - app.main - INFO -    Cities returned: 40
2026-01-24 13:28:22 - app.main - INFO - ================================================================================
2026-01-24 13:28:22 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Beer-Yaacov, Israel' (from affiliation: QuantalX Neuroscience, Beer-Yaacov, Israel.)
2026-01-24 13:28:24 - app.phase2.pg_geocoding - WARNING - Could not geocode 'Zerifin, Israel' (from affiliation: Sagol Center for Hyperbaric Medicine and Research, Shamir Medical Center, Zerifin, Israel.)
2026-01-24 13:28:24 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 15 cities in Israel
2026-01-24 13:28:24 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: Israel
2026-01-24 13:28:24 - app.main - INFO -    Cities returned: 15
2026-01-24 13:28:24 - app.main - INFO - ================================================================================
2026-01-24 13:49:03 - app.background_tasks - INFO - Periodic cleanup cancelled
2026-01-24 13:49:15 - root - INFO - ================================================================================
2026-01-24 13:49:15 - root - INFO - Logging initialized - output to console and log.txt
2026-01-24 13:49:15 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-24 13:49:15 - root - INFO - ================================================================================
2026-01-24 13:49:17 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-24 13:49:17 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-24 13:52:03 - root - INFO - ================================================================================
2026-01-24 13:52:03 - root - INFO - Logging initialized - output to console and log.txt
2026-01-24 13:52:03 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-24 13:52:03 - root - INFO - ================================================================================
2026-01-24 13:52:05 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-24 13:52:05 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-24 13:54:35 - root - INFO - ================================================================================
2026-01-24 13:54:35 - root - INFO - Logging initialized - output to console and log.txt
2026-01-24 13:54:35 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-24 13:54:35 - root - INFO - ================================================================================
2026-01-24 13:54:37 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-24 13:54:37 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-24 14:02:32 - root - INFO - ================================================================================
2026-01-24 14:02:32 - root - INFO - Logging initialized - output to console and log.txt
2026-01-24 14:02:32 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-24 14:02:32 - root - INFO - ================================================================================
2026-01-24 14:02:34 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-24 14:02:34 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-24 14:03:44 - app.main - INFO - ================================================================================
2026-01-24 14:03:44 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 14:03:44 - app.main - INFO -    Country: United States, City: Jacksonville, Min confidence: low
2026-01-24 14:03:44 - app.main - INFO - ================================================================================
2026-01-24 14:03:44 - app.phase2.pg_aggregations - INFO -    Getting city map for Jacksonville, United States...
2026-01-24 14:03:45 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 14:03:45 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 1 institutions in Jacksonville, United States
2026-01-24 14:03:45 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Jacksonville, United States
2026-01-24 14:03:45 - app.main - INFO -    Institutions returned: 1
2026-01-24 14:03:45 - app.main - INFO - ================================================================================
2026-01-24 14:04:46 - app.main - INFO - ================================================================================
2026-01-24 14:04:46 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 14:04:46 - app.main - INFO -    Country: United States, City: Rochester, Min confidence: low
2026-01-24 14:04:46 - app.main - INFO - ================================================================================
2026-01-24 14:04:46 - app.phase2.pg_aggregations - INFO -    Getting city map for Rochester, United States...
2026-01-24 14:04:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 14:04:46 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Rochester, United States
2026-01-24 14:04:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Rochester, United States
2026-01-24 14:04:46 - app.main - INFO -    Institutions returned: 2
2026-01-24 14:04:46 - app.main - INFO - ================================================================================
2026-01-24 14:05:30 - app.main - INFO - ================================================================================
2026-01-24 14:05:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 14:05:30 - app.main - INFO -    Min confidence: low
2026-01-24 14:05:30 - app.main - INFO - ================================================================================
2026-01-24 14:05:30 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-24 14:05:30 - app.main - INFO - ================================================================================
2026-01-24 14:05:30 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 14:05:30 - app.main - INFO -    Min confidence: low
2026-01-24 14:05:30 - app.main - INFO - ================================================================================
2026-01-24 14:05:30 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-24 14:05:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 14:05:30 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 14:05:31 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 65 countries
2026-01-24 14:05:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 14:05:31 - app.main - INFO -    Countries returned: 65
2026-01-24 14:05:31 - app.main - INFO - ================================================================================
2026-01-24 14:05:31 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 65 countries
2026-01-24 14:05:31 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 14:05:31 - app.main - INFO -    Countries returned: 65
2026-01-24 14:05:31 - app.main - INFO - ================================================================================
2026-01-24 14:05:38 - app.main - INFO - ================================================================================
2026-01-24 14:05:38 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 14:05:38 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-24 14:05:38 - app.main - INFO - ================================================================================
2026-01-24 14:05:38 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-24 14:05:39 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 14:05:39 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 45 cities in United States
2026-01-24 14:05:39 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-24 14:05:39 - app.main - INFO -    Cities returned: 45
2026-01-24 14:05:39 - app.main - INFO - ================================================================================
2026-01-24 14:05:45 - app.main - INFO - ================================================================================
2026-01-24 14:05:45 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 14:05:45 - app.main - INFO -    Country: United States, City: Rochester, Min confidence: low
2026-01-24 14:05:45 - app.main - INFO - ================================================================================
2026-01-24 14:05:45 - app.phase2.pg_aggregations - INFO -    Getting city map for Rochester, United States...
2026-01-24 14:05:46 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 14:05:46 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Rochester, United States
2026-01-24 14:05:46 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Rochester, United States
2026-01-24 14:05:46 - app.main - INFO -    Institutions returned: 2
2026-01-24 14:05:46 - app.main - INFO - ================================================================================
2026-01-24 14:09:13 - app.main - INFO - ================================================================================
2026-01-24 14:09:13 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 14:09:13 - app.main - INFO -    Country: United States, City: Rochester, Min confidence: low
2026-01-24 14:09:13 - app.main - INFO - ================================================================================
2026-01-24 14:09:13 - app.phase2.pg_aggregations - INFO -    Getting city map for Rochester, United States...
2026-01-24 14:09:13 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 14:09:13 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Rochester, United States
2026-01-24 14:09:13 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Rochester, United States
2026-01-24 14:09:13 - app.main - INFO -    Institutions returned: 2
2026-01-24 14:09:13 - app.main - INFO - ================================================================================
2026-01-24 14:09:14 - app.main - INFO - ================================================================================
2026-01-24 14:09:14 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - City Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 14:09:14 - app.main - INFO -    Country: United States, City: Rochester, Min confidence: low
2026-01-24 14:09:14 - app.main - INFO - ================================================================================
2026-01-24 14:09:14 - app.phase2.pg_aggregations - INFO -    Getting city map for Rochester, United States...
2026-01-24 14:09:14 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 14:09:14 - app.phase2.pg_aggregations - INFO -    âœ… City map aggregation complete: 2 institutions in Rochester, United States
2026-01-24 14:09:14 - app.main - INFO - âœ… MAP OPERATION COMPLETED - City Map: Rochester, United States
2026-01-24 14:09:14 - app.main - INFO -    Institutions returned: 2
2026-01-24 14:09:14 - app.main - INFO - ================================================================================
2026-01-24 14:09:31 - app.main - INFO - ================================================================================
2026-01-24 14:09:31 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - Country Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 14:09:31 - app.main - INFO -    Country: United States, Min confidence: low
2026-01-24 14:09:31 - app.main - INFO - ================================================================================
2026-01-24 14:09:31 - app.phase2.pg_aggregations - INFO -    Getting country map for United States (normalized: United States)...
2026-01-24 14:09:32 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 14:09:32 - app.phase2.pg_aggregations - INFO -    âœ… Country map aggregation complete: 45 cities in United States
2026-01-24 14:09:32 - app.main - INFO - âœ… MAP OPERATION COMPLETED - Country Map: United States
2026-01-24 14:09:32 - app.main - INFO -    Cities returned: 45
2026-01-24 14:09:32 - app.main - INFO - ================================================================================
2026-01-24 14:11:14 - root - INFO - ================================================================================
2026-01-24 14:11:14 - root - INFO - Logging initialized - output to console and log.txt
2026-01-24 14:11:14 - root - INFO - Log file: /Users/xiaowu/local_code/scholarmap/backend/log.txt
2026-01-24 14:11:14 - root - INFO - ================================================================================
2026-01-24 14:11:17 - app.background_tasks - INFO - ðŸ”§ BackgroundIngestManager initialized
2026-01-24 14:11:17 - app.background_tasks - INFO - ðŸ”„ Started periodic task cleanup (every 1h)
2026-01-24 14:11:59 - app.main - INFO - ================================================================================
2026-01-24 14:11:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 14:11:59 - app.main - INFO -    Min confidence: low
2026-01-24 14:11:59 - app.main - INFO - ================================================================================
2026-01-24 14:11:59 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-24 14:11:59 - app.main - INFO - ================================================================================
2026-01-24 14:11:59 - app.main - INFO - ðŸ—ºï¸  MAP OPERATION - World Map - Project: 3b9280a68d3d, Run: b6b977aeeed1
2026-01-24 14:11:59 - app.main - INFO -    Min confidence: low
2026-01-24 14:11:59 - app.main - INFO - ================================================================================
2026-01-24 14:11:59 - app.phase2.pg_aggregations - INFO -    Getting PMIDs for run b6b977aeeed1...
2026-01-24 14:11:59 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 14:11:59 - app.phase2.pg_aggregations - INFO -    Found 500 PMIDs
2026-01-24 14:12:00 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 65 countries
2026-01-24 14:12:00 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 14:12:00 - app.main - INFO -    Countries returned: 65
2026-01-24 14:12:00 - app.main - INFO - ================================================================================
2026-01-24 14:12:00 - app.phase2.pg_aggregations - INFO -    âœ… World map aggregation complete: 65 countries
2026-01-24 14:12:00 - app.main - INFO - âœ… MAP OPERATION COMPLETED - World Map
2026-01-24 14:12:00 - app.main - INFO -    Countries returned: 65
2026-01-24 14:12:00 - app.main - INFO - ================================================================================
