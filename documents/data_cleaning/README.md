# 数据质量清洗系统文档

欢迎使用 ScholarMap 数据质量清洗系统文档。

## 📚 文档索引

### 核心文档

1. **[OVERVIEW.md](./OVERVIEW.md)** - 系统概述
   - 问题背景和设计目标
   - 系统架构和工作流程
   - 关键特性和预期效果

2. **[DATA_MODELS.md](./DATA_MODELS.md)** - 数据模型
   - 新增数据表设计
   - 数据流和表关系
   - 索引设计和查询示例

3. **[DETECTION_STRATEGIES.md](./DETECTION_STRATEGIES.md)** - 检测策略
   - 三层检测机制详解
   - 检测规则和代码实现
   - 错误分类和优先级

4. **[FIXING_STRATEGIES.md](./FIXING_STRATEGIES.md)** - 修复策略
   - LLM 重新提取
   - Geocoding 重试和验证
   - 本地 LLM 集成（Ollama）

5. **[IMPLEMENTATION_PLAN.md](./IMPLEMENTATION_PLAN.md)** - 实施计划
   - 6 个 Phase 的详细任务清单
   - 时间表和里程碑
   - 风险和缓解措施

6. **[CRON_CONFIGURATION.md](./CRON_CONFIGURATION.md)** - Cron 配置
   - 三种运行模式
   - 调度策略和 Crontab 配置
   - 日志管理和故障排除

7. **[REPORTING.md](./REPORTING.md)** - 报告系统
   - 报告类型和生成器
   - 质量指标和趋势分析
   - 报告格式和可视化

## 🚀 快速开始

### 1. 阅读顺序

如果您是第一次接触本系统，建议按以下顺序阅读：

1. 📖 **OVERVIEW.md** - 了解系统的背景和目标
2. 🗄️ **DATA_MODELS.md** - 理解数据结构
3. 🔍 **DETECTION_STRATEGIES.md** - 学习如何检测错误
4. 🔧 **FIXING_STRATEGIES.md** - 学习如何修复错误
5. 📅 **IMPLEMENTATION_PLAN.md** - 了解实施步骤
6. ⏰ **CRON_CONFIGURATION.md** - 配置定时任务
7. 📊 **REPORTING.md** - 使用报告系统

### 2. 开发者入门

如果您是开发者，准备实现本系统：

1. 阅读 **IMPLEMENTATION_PLAN.md** 了解整体任务
2. 按 Phase 1-6 的顺序逐步实现
3. 参考各策略文档中的代码实现
4. 使用 **CRON_CONFIGURATION.md** 配置部署

### 3. 运维人员入门

如果您负责运维和监控：

1. 阅读 **OVERVIEW.md** 了解系统功能
2. 重点阅读 **CRON_CONFIGURATION.md** 学习配置和故障排除
3. 阅读 **REPORTING.md** 学习解读报告

## 💡 核心概念

### 三层检测机制

1. **提取质量检测**：检测地理信息提取错误
2. **Geocoding 质量检测**：检测坐标获取错误
3. **数据一致性检测**：检测数据库不一致

### 三种运行模式

1. **Full Mode**：全量清洗，检查所有数据
2. **Incremental Mode**：增量清洗，只检查最近几天
3. **Validation Only**：仅验证，不修复

### 四种修复策略

1. **LLM 重新提取**：使用 OpenAI 或本地 LLM
2. **Geocoding 重试**：重新调用 Nominatim
3. **规则修正**：使用预定义规则
4. **人工介入**：对于无法自动修复的错误

## 📊 系统架构图

```
┌─────────────────────────────────────────────────────────────┐
│           数据质量清洗系统 (Cron Job)                         │
├─────────────────────────────────────────────────────────────┤
│                                                               │
│  1. 数据质量检测器 (Quality Detector)                         │
│     ├─ 提取质量检测                                           │
│     ├─ Geocoding 质量检测                                    │
│     └─ 数据一致性检测                                         │
│                                                               │
│  2. 错误分类器 (Error Classifier)                             │
│     ├─ 按错误类型分类                                         │
│     ├─ 按严重程度分级                                         │
│     └─ 记录错误来源                                           │
│                                                               │
│  3. 数据修复器 (Data Fixer)                                   │
│     ├─ LLM 重新提取                                           │
│     ├─ Geocoding 重试/验证                                    │
│     └─ 本地 LLM 支持（Ollama）                                │
│                                                               │
│  4. 质量报告器 (Quality Reporter)                             │
│     ├─ 生成清洗报告                                           │
│     ├─ 记录修复历史                                           │
│     └─ 数据质量指标                                           │
│                                                               │
└─────────────────────────────────────────────────────────────┘
```

## 🎯 预期效果

### 数据质量提升
- 🎯 **提取准确率**：从 ~85% 提升至 >95%
- 🎯 **Geocoding 成功率**：从 ~70% 提升至 >90%
- 🎯 **地图可视化完整度**：从 ~60% 提升至 >85%

### 运维效率提升
- ⚡ **自动化清洗**：无需人工干预
- ⚡ **问题快速定位**：详细的错误追溯
- ⚡ **持续改进**：数据驱动的算法优化

## 🤝 贡献

如果您发现文档中的错误或希望改进，请：

1. 提交 Issue 描述问题
2. 或者直接提交 Pull Request

## 📝 版本历史

- **v1.0** (2026-01-27): 初始文档发布
  - 7 个核心文档
  - 完整的系统设计
  - 详细的实施计划

## 📧 联系方式

如有问题，请联系：
- 项目负责人：[您的名字]
- 邮箱：admin@scholarmap.com

---

**最后更新**: 2026-01-27
